!function(f,T){function e(t,e){return e.toUpperCase()}function i(t){!m.addEventListener&&"load"!==t.type&&"complete"!==m.readyState||(D(),yt.ready())}var r,n,v=typeof T,t=f.location,m=f.document,a=m.documentElement,o=f.jQuery,s=f.$,l={},h=[],c="1.10.2",g=h.concat,u=h.push,d=h.slice,p=h.indexOf,y=l.toString,_=l.hasOwnProperty,x=c.trim,yt=function(t,e){return new yt.fn.init(t,e,n)},b=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,M=/\S+/g,w=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,S=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,E=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,A=/^[\],:{}\s]*$/,L=/(?:^|:|,)(?:\s*\[)+/g,C=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,R=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,P=/^-ms-/,O=/-([\da-z])/gi,D=function(){m.addEventListener?(m.removeEventListener("DOMContentLoaded",i,!1),f.removeEventListener("load",i,!1)):(m.detachEvent("onreadystatechange",i),f.detachEvent("onload",i))};function N(t){var e=t.length,n=yt.type(t);return!yt.isWindow(t)&&(!(1!==t.nodeType||!e)||("array"===n||"function"!==n&&(0===e||"number"==typeof e&&0<e&&e-1 in t)))}yt.fn=yt.prototype={jquery:c,constructor:yt,init:function(t,e,n){var i,r;if(!t)return this;if("string"!=typeof t)return t.nodeType?(this.context=this[0]=t,this.length=1,this):yt.isFunction(t)?n.ready(t):(t.selector!==T&&(this.selector=t.selector,this.context=t.context),yt.makeArray(t,this));if(!(i="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&3<=t.length?[null,t,null]:S.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof yt?e[0]:e,yt.merge(this,yt.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:m,!0)),E.test(i[1])&&yt.isPlainObject(e))for(i in e)yt.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}if((r=m.getElementById(i[2]))&&r.parentNode){if(r.id!==i[2])return n.find(t);this.length=1,this[0]=r}return this.context=m,this.selector=t,this},selector:"",length:0,toArray:function(){return d.call(this)},get:function(t){return null==t?this.toArray():t<0?this[this.length+t]:this[t]},pushStack:function(t){var e=yt.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return yt.each(this,t,e)},ready:function(t){return yt.ready.promise().done(t),this},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(0<=n&&n<e?[this[n]]:[])},map:function(n){return this.pushStack(yt.map(this,function(t,e){return n.call(t,e,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:u,sort:[].sort,splice:[].splice},yt.fn.init.prototype=yt.fn,yt.extend=yt.fn.extend=function(){var t,e,n,i,r,a,o=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[1]||{},s=2),"object"==typeof o||yt.isFunction(o)||(o={}),l===s&&(o=this,--s);s<l;s++)if(null!=(r=arguments[s]))for(i in r)t=o[i],o!==(n=r[i])&&(c&&n&&(yt.isPlainObject(n)||(e=yt.isArray(n)))?(a=e?(e=!1,t&&yt.isArray(t)?t:[]):t&&yt.isPlainObject(t)?t:{},o[i]=yt.extend(c,a,n)):n!==T&&(o[i]=n));return o},yt.extend({expando:"jQuery"+(c+Math.random()).replace(/\D/g,""),noConflict:function(t){return f.$===yt&&(f.$=s),t&&f.jQuery===yt&&(f.jQuery=o),yt},isReady:!1,readyWait:1,holdReady:function(t){t?yt.readyWait++:yt.ready(!0)},ready:function(t){if(!0===t?!--yt.readyWait:!yt.isReady){if(!m.body)return setTimeout(yt.ready);(yt.isReady=!0)!==t&&0<--yt.readyWait||(r.resolveWith(m,[yt]),yt.fn.trigger&&yt(m).trigger("ready").off("ready"))}},isFunction:function(t){return"function"===yt.type(t)},isArray:Array.isArray||function(t){return"array"===yt.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?l[y.call(t)]||"object":typeof t},isPlainObject:function(t){var e;if(!t||"object"!==yt.type(t)||t.nodeType||yt.isWindow(t))return!1;try{if(t.constructor&&!_.call(t,"constructor")&&!_.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}if(yt.support.ownLast)for(e in t)return _.call(t,e);for(e in t);return e===T||_.call(t,e)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},error:function(t){throw Error(t)},parseHTML:function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||m;var i=E.exec(t),r=!n&&[];return i?[e.createElement(i[1])]:(i=yt.buildFragment([t],e,r),r&&yt(r).remove(),yt.merge([],i.childNodes))},parseJSON:function(t){return f.JSON&&f.JSON.parse?f.JSON.parse(t):null===t?t:"string"==typeof t&&((t=yt.trim(t))&&A.test(t.replace(C,"@").replace(R,"]").replace(L,"")))?Function("return "+t)():(yt.error("Invalid JSON: "+t),T)},parseXML:function(t){var e;if(!t||"string"!=typeof t)return null;try{f.DOMParser?e=(new DOMParser).parseFromString(t,"text/xml"):((e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t))}catch(t){e=T}return e&&e.documentElement&&!e.getElementsByTagName("parsererror").length||yt.error("Invalid XML: "+t),e},noop:function(){},globalEval:function(t){t&&yt.trim(t)&&(f.execScript||function(t){f.eval.call(f,t)})(t)},camelCase:function(t){return t.replace(P,"ms-").replace(O,e)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var i=0,r=t.length,a=N(t);if(n){if(a)for(;i<r&&!1!==e.apply(t[i],n);i++);else for(i in t)if(!1===e.apply(t[i],n))break}else if(a)for(;i<r&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:x&&!x.call("\ufeffÂ ")?function(t){return null==t?"":x.call(t)}:function(t){return null==t?"":(t+"").replace(w,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(N(Object(t))?yt.merge(n,"string"==typeof t?[t]:t):u.call(n,t)),n},inArray:function(t,e,n){var i;if(e){if(p)return p.call(e,t,n);for(i=e.length,n=n?n<0?Math.max(0,i+n):n:0;n<i;n++)if(n in e&&e[n]===t)return n}return-1},merge:function(t,e){var n=e.length,i=t.length,r=0;if("number"==typeof n)for(;r<n;r++)t[i++]=e[r];else for(;e[r]!==T;)t[i++]=e[r++];return t.length=i,t},grep:function(t,e,n){var i=[],r=0,a=t.length;for(n=!!n;r<a;r++)n!==!!e(t[r],r)&&i.push(t[r]);return i},map:function(t,e,n){var i,r=0,a=t.length,o=[];if(N(t))for(;r<a;r++)null!=(i=e(t[r],r,n))&&(o[o.length]=i);else for(r in t)null!=(i=e(t[r],r,n))&&(o[o.length]=i);return g.apply([],o)},guid:1,proxy:function(t,e){var n,i,r;return"string"==typeof e&&(r=t[e],e=t,t=r),yt.isFunction(t)?(n=d.call(arguments,2),(i=function(){return t.apply(e||this,n.concat(d.call(arguments)))}).guid=t.guid=t.guid||yt.guid++,i):T},access:function(t,e,n,i,r,a,o){var s=0,l=t.length,c=null==n;if("object"===yt.type(n))for(s in r=!0,n)yt.access(t,e,s,n[s],!0,a,o);else if(i!==T&&(r=!0,yt.isFunction(i)||(o=!0),c&&(e=o?(e.call(t,i),null):(c=e,function(t,e,n){return c.call(yt(t),n)})),e))for(;s<l;s++)e(t[s],n,o?i:i.call(t[s],s,e(t[s],n)));return r?t:c?e.call(t):l?e(t[0],n):a},now:function(){return(new Date).getTime()},swap:function(t,e,n,i){var r,a,o={};for(a in e)o[a]=t.style[a],t.style[a]=e[a];for(a in r=n.apply(t,i||[]),e)t.style[a]=o[a];return r}}),yt.ready.promise=function(t){if(!r)if(r=yt.Deferred(),"complete"===m.readyState)setTimeout(yt.ready);else if(m.addEventListener)m.addEventListener("DOMContentLoaded",i,!1),f.addEventListener("load",i,!1);else{m.attachEvent("onreadystatechange",i),f.attachEvent("onload",i);var n=!1;try{n=null==f.frameElement&&m.documentElement}catch(t){}n&&n.doScroll&&function e(){if(!yt.isReady){try{n.doScroll("left")}catch(t){return setTimeout(e,50)}D(),yt.ready()}}()}return r.promise(t)},yt.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){l["[object "+e+"]"]=e.toLowerCase()}),n=yt(m),function(n,r){var t,f,b,w,a,i,m,T,c,g,M,o,v,y,s,u,_,x="sizzle"+-new Date,S=n.document,E=0,h=0,l=rt(),d=rt(),p=rt(),A=!1,L=function(t,e){return t===e&&(A=!0),0},C=typeof r,R={}.hasOwnProperty,e=[],P=e.pop,O=e.push,D=e.push,N=e.slice,I=e.indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(this[e]===t)return e;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",k="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",z=k.replace("w","w#"),H="\\["+F+"*("+k+")"+F+"*(?:([*^$|!~]?=)"+F+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+z+")|)|)"+F+"*\\]",U=":("+k+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+H.replace(3,8)+")*)|.*)\\)|)",G=RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),j=RegExp("^"+F+"*,"+F+"*"),V=RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),W=RegExp(F+"*[+~]"),q=RegExp("="+F+"*([^\\]'\"]*)"+F+"*\\]","g"),X=RegExp(U),Y=RegExp("^"+z+"$"),Z={ID:RegExp("^#("+k+")"),CLASS:RegExp("^\\.("+k+")"),TAG:RegExp("^("+k.replace("w","w*")+")"),ATTR:RegExp("^"+H),PSEUDO:RegExp("^"+U),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:RegExp("^(?:"+B+")$","i"),needsContext:RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},J=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,tt=/'|\\/g,et=RegExp("\\\\([\\da-f]{1,6}"+F+"?|("+F+")|.)","ig"),nt=function(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(65536+i):String.fromCharCode(55296|i>>10,56320|1023&i)};try{D.apply(e=N.call(S.childNodes),S.childNodes),e[S.childNodes.length].nodeType}catch(t){D={apply:e.length?function(t,e){O.apply(t,N.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}function it(t,e,n,i){var r,a,o,s,l,c,u,h,d,p;if((e?e.ownerDocument||e:S)!==M&&g(e),n=n||[],!t||"string"!=typeof t)return n;if(1!==(s=(e=e||M).nodeType)&&9!==s)return[];if(v&&!i){if(r=Q.exec(t))if(o=r[1]){if(9===s){if(!(a=e.getElementById(o))||!a.parentNode)return n;if(a.id===o)return n.push(a),n}else if(e.ownerDocument&&(a=e.ownerDocument.getElementById(o))&&_(e,a)&&a.id===o)return n.push(a),n}else{if(r[2])return D.apply(n,e.getElementsByTagName(t)),n;if((o=r[3])&&f.getElementsByClassName&&e.getElementsByClassName)return D.apply(n,e.getElementsByClassName(o)),n}if(f.qsa&&(!y||!y.test(t))){if(h=u=x,d=e,p=9===s&&t,1===s&&"object"!==e.nodeName.toLowerCase()){for(c=ht(t),(u=e.getAttribute("id"))?h=u.replace(tt,"\\$&"):e.setAttribute("id",h),h="[id='"+h+"'] ",l=c.length;l--;)c[l]=h+dt(c[l]);d=W.test(t)&&e.parentNode||e,p=c.join(",")}if(p)try{return D.apply(n,d.querySelectorAll(p)),n}catch(t){}finally{u||e.removeAttribute("id")}}}return function(t,e,n,i){var r,a,o,s,l,c=ht(t);if(!i&&1===c.length){if(2<(a=c[0]=c[0].slice(0)).length&&"ID"===(o=a[0]).type&&f.getById&&9===e.nodeType&&v&&w.relative[a[1].type]){if(!(e=(w.find.ID(o.matches[0].replace(et,nt),e)||[])[0]))return n;t=t.slice(a.shift().value.length)}for(r=Z.needsContext.test(t)?0:a.length;r--&&(o=a[r],!w.relative[s=o.type]);)if((l=w.find[s])&&(i=l(o.matches[0].replace(et,nt),W.test(a[0].type)&&e.parentNode||e))){if(a.splice(r,1),!(t=i.length&&dt(a)))return D.apply(n,i),n;break}}return m(t,c)(i,e,!v,n,W.test(t)),n}(t.replace(G,"$1"),e,n,i)}function rt(){var n=[];function i(t,e){return n.push(t+=" ")>w.cacheLength&&delete i[n.shift()],i[t]=e}return i}function at(t){return t[x]=!0,t}function ot(t){var e=M.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function st(t,e){for(var n=t.split("|"),i=t.length;i--;)w.attrHandle[n[i]]=e}function lt(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||1<<31)-(~t.sourceIndex||1<<31);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ct(o){return at(function(a){return a=+a,at(function(t,e){for(var n,i=o([],t.length,a),r=i.length;r--;)t[n=i[r]]&&(t[n]=!(e[n]=t[n]))})})}for(t in i=it.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},f=it.support={},g=it.setDocument=function(t){var l=t?t.ownerDocument||t:S,e=l.defaultView;return l!==M&&9===l.nodeType&&l.documentElement?(o=(M=l).documentElement,v=!i(l),e&&e.attachEvent&&e!==e.top&&e.attachEvent("onbeforeunload",function(){g()}),f.attributes=ot(function(t){return t.className="i",!t.getAttribute("className")}),f.getElementsByTagName=ot(function(t){return t.appendChild(l.createComment("")),!t.getElementsByTagName("*").length}),f.getElementsByClassName=ot(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),f.getById=ot(function(t){return o.appendChild(t).id=x,!l.getElementsByName||!l.getElementsByName(x).length}),f.getById?(w.find.ID=function(t,e){if(typeof e.getElementById!=C&&v){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},w.filter.ID=function(t){var e=t.replace(et,nt);return function(t){return t.getAttribute("id")===e}}):(delete w.find.ID,w.filter.ID=function(t){var n=t.replace(et,nt);return function(t){var e=typeof t.getAttributeNode!=C&&t.getAttributeNode("id");return e&&e.value===n}}),w.find.TAG=f.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!=C?e.getElementsByTagName(t):r}:function(t,e){var n,i=[],r=0,a=e.getElementsByTagName(t);if("*"!==t)return a;for(;n=a[r++];)1===n.nodeType&&i.push(n);return i},w.find.CLASS=f.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!=C&&v?e.getElementsByClassName(t):r},s=[],y=[],(f.qsa=J.test(l.querySelectorAll))&&(ot(function(t){t.innerHTML="<select><option selected=''></option></select>",t.querySelectorAll("[selected]").length||y.push("\\["+F+"*(?:value|"+B+")"),t.querySelectorAll(":checked").length||y.push(":checked")}),ot(function(t){var e=l.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("t",""),t.querySelectorAll("[t^='']").length&&y.push("[*^$]="+F+"*(?:''|\"\")"),t.querySelectorAll(":enabled").length||y.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),y.push(",.*:")})),(f.matchesSelector=J.test(u=o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ot(function(t){f.disconnectedMatch=u.call(t,"div"),u.call(t,"[s!='']:x"),s.push("!=",U)}),y=y.length&&RegExp(y.join("|")),s=s.length&&RegExp(s.join("|")),_=J.test(o.contains)||o.compareDocumentPosition?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},L=o.compareDocumentPosition?function(t,e){if(t===e)return A=!0,0;var n=e.compareDocumentPosition&&t.compareDocumentPosition&&t.compareDocumentPosition(e);return n?1&n||!f.sortDetached&&e.compareDocumentPosition(t)===n?t===l||_(S,t)?-1:e===l||_(S,e)?1:c?I.call(c,t)-I.call(c,e):0:4&n?-1:1:t.compareDocumentPosition?-1:1}:function(t,e){var n,i=0,r=t.parentNode,a=e.parentNode,o=[t],s=[e];if(t===e)return A=!0,0;if(!r||!a)return t===l?-1:e===l?1:r?-1:a?1:c?I.call(c,t)-I.call(c,e):0;if(r===a)return lt(t,e);for(n=t;n=n.parentNode;)o.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;o[i]===s[i];)i++;return i?lt(o[i],s[i]):o[i]===S?-1:s[i]===S?1:0},l):M},it.matches=function(t,e){return it(t,null,null,e)},it.matchesSelector=function(t,e){if((t.ownerDocument||t)!==M&&g(t),e=e.replace(q,"='$1']"),!(!f.matchesSelector||!v||s&&s.test(e)||y&&y.test(e)))try{var n=u.call(t,e);if(n||f.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){}return 0<it(e,M,null,[t]).length},it.contains=function(t,e){return(t.ownerDocument||t)!==M&&g(t),_(t,e)},it.attr=function(t,e){(t.ownerDocument||t)!==M&&g(t);var n=w.attrHandle[e.toLowerCase()],i=n&&R.call(w.attrHandle,e.toLowerCase())?n(t,e,!v):r;return i===r?f.attributes||!v?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null:i},it.error=function(t){throw Error("Syntax error, unrecognized expression: "+t)},it.uniqueSort=function(t){var e,n=[],i=0,r=0;if(A=!f.detectDuplicates,c=!f.sortStable&&t.slice(0),t.sort(L),A){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return t},a=it.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=a(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i];i++)n+=a(e);return n},(w=it.selectors={cacheLength:50,createPseudo:at,match:Z,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,nt),t[3]=(t[4]||t[5]||"").replace(et,nt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||it.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&it.error(t[0]),t},PSEUDO:function(t){var e,n=!t[5]&&t[2];return Z.CHILD.test(t[0])?null:(t[3]&&t[4]!==r?t[2]=t[4]:n&&X.test(n)&&(e=ht(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,nt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=l[t+" "];return e||(e=RegExp("(^|"+F+")"+t+"("+F+"|$)"))&&l(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!=C&&t.getAttribute("class")||"")})},ATTR:function(n,i,r){return function(t){var e=it.attr(t,n);return null==e?"!="===i:!i||(e+="","="===i?e===r:"!="===i?e!==r:"^="===i?r&&0===e.indexOf(r):"*="===i?r&&-1<e.indexOf(r):"$="===i?r&&e.slice(-r.length)===r:"~="===i?-1<(" "+e+" ").indexOf(r):"|="===i&&(e===r||e.slice(0,r.length+1)===r+"-"))}},CHILD:function(p,t,e,f,m){var g="nth"!==p.slice(0,3),v="last"!==p.slice(-4),y="of-type"===t;return 1===f&&0===m?function(t){return!!t.parentNode}:function(t,e,n){var i,r,a,o,s,l,c=g!=v?"nextSibling":"previousSibling",u=t.parentNode,h=y&&t.nodeName.toLowerCase(),d=!n&&!y;if(u){if(g){for(;c;){for(a=t;a=a[c];)if(y?a.nodeName.toLowerCase()===h:1===a.nodeType)return!1;l=c="only"===p&&!l&&"nextSibling"}return!0}if(l=[v?u.firstChild:u.lastChild],v&&d){for(s=(i=(r=u[x]||(u[x]={}))[p]||[])[0]===E&&i[1],o=i[0]===E&&i[2],a=s&&u.childNodes[s];a=++s&&a&&a[c]||(o=s=0)||l.pop();)if(1===a.nodeType&&++o&&a===t){r[p]=[E,s,o];break}}else if(d&&(i=(t[x]||(t[x]={}))[p])&&i[0]===E)o=i[1];else for(;(a=++s&&a&&a[c]||(o=s=0)||l.pop())&&((y?a.nodeName.toLowerCase()!==h:1!==a.nodeType)||!++o||(d&&((a[x]||(a[x]={}))[p]=[E,o]),a!==t)););return(o-=m)===f||0==o%f&&0<=o/f}}},PSEUDO:function(t,a){var e,o=w.pseudos[t]||w.setFilters[t.toLowerCase()]||it.error("unsupported pseudo: "+t);return o[x]?o(a):1<o.length?(e=[t,t,"",a],w.setFilters.hasOwnProperty(t.toLowerCase())?at(function(t,e){for(var n,i=o(t,a),r=i.length;r--;)t[n=I.call(t,i[r])]=!(e[n]=i[r])}):function(t){return o(t,0,e)}):o}},pseudos:{not:at(function(t){var i=[],r=[],s=m(t.replace(G,"$1"));return s[x]?at(function(t,e,n,i){for(var r,a=s(t,null,i,[]),o=t.length;o--;)(r=a[o])&&(t[o]=!(e[o]=r))}):function(t,e,n){return i[0]=t,s(i,null,n,r),!r.pop()}}),has:at(function(e){return function(t){return 0<it(e,t).length}}),contains:at(function(e){return function(t){return-1<(t.textContent||t.innerText||a(t)).indexOf(e)}}),lang:at(function(n){return Y.test(n||"")||it.error("unsupported lang: "+n),n=n.replace(et,nt).toLowerCase(),function(t){var e;do{if(e=v?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===n||0===e.indexOf(n+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=n.location&&n.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===o},focus:function(t){return t===M.activeElement&&(!M.hasFocus||M.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if("@"<t.nodeName||3===t.nodeType||4===t.nodeType)return!1;return!0},parent:function(t){return!w.pseudos.empty(t)},header:function(t){return K.test(t.nodeName)},input:function(t){return $.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||e.toLowerCase()===t.type)},first:ct(function(){return[0]}),last:ct(function(t,e){return[e-1]}),eq:ct(function(t,e,n){return[n<0?n+e:n]}),even:ct(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:ct(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:ct(function(t,e,n){for(var i=n<0?n+e:n;0<=--i;)t.push(i);return t}),gt:ct(function(t,e,n){for(var i=n<0?n+e:n;e>++i;)t.push(i);return t})}}).pseudos.nth=w.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[t]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(t);for(t in{submit:!0,reset:!0})w.pseudos[t]=function(n){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===n}}(t);function ut(){}function ht(t,e){var n,i,r,a,o,s,l,c=d[t+" "];if(c)return e?0:c.slice(0);for(o=t,s=[],l=w.preFilter;o;){for(a in n&&!(i=j.exec(o))||(i&&(o=o.slice(i[0].length)||o),s.push(r=[])),n=!1,(i=V.exec(o))&&(n=i.shift(),r.push({value:n,type:i[0].replace(G," ")}),o=o.slice(n.length)),w.filter)!(i=Z[a].exec(o))||l[a]&&!(i=l[a](i))||(n=i.shift(),r.push({value:n,type:a,matches:i}),o=o.slice(n.length));if(!n)break}return e?o.length:o?it.error(t):d(t,s).slice(0)}function dt(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function pt(s,t,e){var l=t.dir,c=e&&"parentNode"===l,u=h++;return t.first?function(t,e,n){for(;t=t[l];)if(1===t.nodeType||c)return s(t,e,n)}:function(t,e,n){var i,r,a,o=E+" "+u;if(n){for(;t=t[l];)if((1===t.nodeType||c)&&s(t,e,n))return!0}else for(;t=t[l];)if(1===t.nodeType||c)if((r=(a=t[x]||(t[x]={}))[l])&&r[0]===o){if(!0===(i=r[1])||i===b)return!0===i}else if((r=a[l]=[o])[1]=s(t,e,n)||b,!0===r[1])return!0}}function ft(r){return 1<r.length?function(t,e,n){for(var i=r.length;i--;)if(!r[i](t,e,n))return!1;return!0}:r[0]}function mt(t,e,n,i,r){for(var a,o=[],s=0,l=t.length,c=null!=e;s<l;s++)!(a=t[s])||n&&!n(a,i,r)||(o.push(a),c&&e.push(s));return o}function gt(p,f,m,g,v,t){return g&&!g[x]&&(g=gt(g)),v&&!v[x]&&(v=gt(v,t)),at(function(t,e,n,i){var r,a,o,s=[],l=[],c=e.length,u=t||function(t,e,n){for(var i=0,r=e.length;i<r;i++)it(t,e[i],n);return n}(f||"*",n.nodeType?[n]:n,[]),h=!p||!t&&f?u:mt(u,s,p,n,i),d=m?v||(t?p:c||g)?[]:e:h;if(m&&m(h,d,n,i),g)for(r=mt(d,l),g(r,[],n,i),a=r.length;a--;)(o=r[a])&&(d[l[a]]=!(h[l[a]]=o));if(t){if(v||p){if(v){for(r=[],a=d.length;a--;)(o=d[a])&&r.push(h[a]=o);v(null,d=[],r,i)}for(a=d.length;a--;)(o=d[a])&&-1<(r=v?I.call(t,o):s[a])&&(t[r]=!(e[r]=o))}}else d=mt(d===e?d.splice(c,d.length):d),v?v(null,e,d,i):D.apply(e,d)})}function vt(g,v){function t(t,e,n,i,r){var a,o,s,l=[],c=0,u="0",h=t&&[],d=null!=r,p=T,f=t||x&&w.find.TAG("*",r&&e.parentNode||e),m=E+=null==p?1:Math.random()||.1;for(d&&(T=e!==M&&e,b=y);null!=(a=f[u]);u++){if(x&&a){for(o=0;s=g[o++];)if(s(a,e,n)){i.push(a);break}d&&(E=m,b=++y)}_&&((a=!s&&a)&&c--,t&&h.push(a))}if(c+=u,_&&u!==c){for(o=0;s=v[o++];)s(h,l,e,n);if(t){if(0<c)for(;u--;)h[u]||l[u]||(l[u]=P.call(i));l=mt(l)}D.apply(i,l),d&&!t&&0<l.length&&1<c+v.length&&it.uniqueSort(i)}return d&&(E=m,T=p),h}var y=0,_=0<v.length,x=0<g.length;return _?at(t):t}ut.prototype=w.filters=w.pseudos,w.setFilters=new ut,m=it.compile=function(t,e){var n,i=[],r=[],a=p[t+" "];if(!a){for(n=(e=e||ht(t)).length;n--;)(a=function t(e){for(var i,n,r,a=e.length,o=w.relative[e[0].type],s=o||w.relative[" "],l=o?1:0,c=pt(function(t){return t===i},s,!0),u=pt(function(t){return-1<I.call(i,t)},s,!0),h=[function(t,e,n){return!o&&(n||e!==T)||((i=e).nodeType?c:u)(t,e,n)}];l<a;l++)if(n=w.relative[e[l].type])h=[pt(ft(h),n)];else{if((n=w.filter[e[l].type].apply(null,e[l].matches))[x]){for(r=++l;r<a&&!w.relative[e[r].type];r++);return gt(1<l&&ft(h),1<l&&dt(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(G,"$1"),n,l<r&&t(e.slice(l,r)),r<a&&t(e=e.slice(r)),r<a&&dt(e))}h.push(n)}return ft(h)}(e[n]))[x]?i.push(a):r.push(a);a=p(t,vt(r,i))}return a},f.sortStable=x.split("").sort(L).join("")===x,f.detectDuplicates=A,g(),f.sortDetached=ot(function(t){return 1&t.compareDocumentPosition(M.createElement("div"))}),ot(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||st("type|href|height|width",function(t,e,n){return n?r:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),f.attributes&&ot(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||st("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?r:t.defaultValue}),ot(function(t){return null==t.getAttribute("disabled")})||st(B,function(t,e,n){var i;return n?r:(i=t.getAttributeNode(e))&&i.specified?i.value:!0===t[e]?e.toLowerCase():null}),yt.find=it,yt.expr=it.selectors,yt.expr[":"]=yt.expr.pseudos,yt.unique=it.uniqueSort,yt.text=it.getText,yt.isXMLDoc=it.isXML,yt.contains=it.contains}(f);var I={};yt.Callbacks=function(r){var t,n;r="string"==typeof r?I[r]||(n=I[t=r]={},yt.each(t.match(M)||[],function(t,e){n[e]=!0}),n):yt.extend({},r);var i,e,a,o,s,l,c=[],u=!r.once&&[],h=function(t){for(e=r.memory&&t,a=!0,s=l||0,l=0,o=c.length,i=!0;c&&s<o;s++)if(!1===c[s].apply(t[0],t[1])&&r.stopOnFalse){e=!1;break}i=!1,c&&(u?u.length&&h(u.shift()):e?c=[]:d.disable())},d={add:function(){var t;return c&&(t=c.length,function i(t){yt.each(t,function(t,e){var n=yt.type(e);"function"===n?r.unique&&d.has(e)||c.push(e):e&&e.length&&"string"!==n&&i(e)})}(arguments),i?o=c.length:e&&(l=t,h(e))),this},remove:function(){return c&&yt.each(arguments,function(t,e){for(var n;-1<(n=yt.inArray(e,c,n));)c.splice(n,1),i&&(n<=o&&o--,n<=s&&s--)}),this},has:function(t){return t?-1<yt.inArray(t,c):!(!c||!c.length)},empty:function(){return c=[],o=0,this},disable:function(){return c=u=e=T,this},disabled:function(){return!c},lock:function(){return u=T,e||d.disable(),this},locked:function(){return!u},fireWith:function(t,e){return!c||a&&!u||(e=[t,(e=e||[]).slice?e.slice():e],i?u.push(e):h(e)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!a}};return d},yt.extend({Deferred:function(t){var o=[["resolve","done",yt.Callbacks("once memory"),"resolved"],["reject","fail",yt.Callbacks("once memory"),"rejected"],["notify","progress",yt.Callbacks("memory")]],r="pending",s={state:function(){return r},always:function(){return l.done(arguments).fail(arguments),this},then:function(){var a=arguments;return yt.Deferred(function(r){yt.each(o,function(t,e){var n=e[0],i=yt.isFunction(a[t])&&a[t];l[e[1]](function(){var t=i&&i.apply(this,arguments);t&&yt.isFunction(t.promise)?t.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[n+"With"](this===s?r.promise():this,i?[t]:arguments)})}),a=null}).promise()},promise:function(t){return null!=t?yt.extend(t,s):s}},l={};return s.pipe=s.then,yt.each(o,function(t,e){var n=e[2],i=e[3];s[e[1]]=n.add,i&&n.add(function(){r=i},o[1^t][2].disable,o[2][2].lock),l[e[0]]=function(){return l[e[0]+"With"](this===l?s:this,arguments),this},l[e[0]+"With"]=n.fireWith}),s.promise(l),t&&t.call(l,l),l},when:function(t){function e(e,n,i){return function(t){n[e]=this,i[e]=1<arguments.length?d.call(arguments):t,i===r?c.notifyWith(n,i):--l||c.resolveWith(n,i)}}var r,n,i,a=0,o=d.call(arguments),s=o.length,l=1!==s||t&&yt.isFunction(t.promise)?s:0,c=1===l?t:yt.Deferred();if(1<s)for(r=Array(s),n=Array(s),i=Array(s);a<s;a++)o[a]&&yt.isFunction(o[a].promise)?o[a].promise().done(e(a,i,o)).fail(c.reject).progress(e(a,n,r)):--l;return l||c.resolveWith(i,o),c.promise()}}),yt.support=function(a){var t,e,n,i,r,o,s,l,c,u=m.createElement("div");if(u.setAttribute("className","t"),u.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",t=u.getElementsByTagName("*")||[],!(e=u.getElementsByTagName("a")[0])||!e.style||!t.length)return a;o=(i=m.createElement("select")).appendChild(m.createElement("option")),n=u.getElementsByTagName("input")[0],e.style.cssText="top:1px;float:left;opacity:.5",a.getSetAttribute="t"!==u.className,a.leadingWhitespace=3===u.firstChild.nodeType,a.tbody=!u.getElementsByTagName("tbody").length,a.htmlSerialize=!!u.getElementsByTagName("link").length,a.style=/top/.test(e.getAttribute("style")),a.hrefNormalized="/a"===e.getAttribute("href"),a.opacity=/^0.5/.test(e.style.opacity),a.cssFloat=!!e.style.cssFloat,a.checkOn=!!n.value,a.optSelected=o.selected,a.enctype=!!m.createElement("form").enctype,a.html5Clone="<:nav></:nav>"!==m.createElement("nav").cloneNode(!0).outerHTML,a.inlineBlockNeedsLayout=!1,a.shrinkWrapBlocks=!1,a.pixelPosition=!1,a.deleteExpando=!0,a.noCloneEvent=!0,a.reliableMarginRight=!0,a.boxSizingReliable=!0,n.checked=!0,a.noCloneChecked=n.cloneNode(!0).checked,i.disabled=!0,a.optDisabled=!o.disabled;try{delete u.test}catch(t){a.deleteExpando=!1}for(c in(n=m.createElement("input")).setAttribute("value",""),a.input=""===n.getAttribute("value"),n.value="t",n.setAttribute("type","radio"),a.radioValue="t"===n.value,n.setAttribute("checked","t"),n.setAttribute("name","t"),(r=m.createDocumentFragment()).appendChild(n),a.appendChecked=n.checked,a.checkClone=r.cloneNode(!0).cloneNode(!0).lastChild.checked,u.attachEvent&&(u.attachEvent("onclick",function(){a.noCloneEvent=!1}),u.cloneNode(!0).click()),{submit:!0,change:!0,focusin:!0})u.setAttribute(s="on"+c,"t"),a[c+"Bubbles"]=s in f||!1===u.attributes[s].expando;for(c in u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",a.clearCloneStyle="content-box"===u.style.backgroundClip,yt(a))break;return a.ownLast="0"!==c,yt(function(){var t,e,n,i="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",r=m.getElementsByTagName("body")[0];r&&((t=m.createElement("div")).style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",r.appendChild(t).appendChild(u),u.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(n=u.getElementsByTagName("td"))[0].style.cssText="padding:0;margin:0;border:0;display:none",l=0===n[0].offsetHeight,n[0].style.display="",n[1].style.display="none",a.reliableHiddenOffsets=l&&0===n[0].offsetHeight,u.innerHTML="",u.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",yt.swap(r,null!=r.style.zoom?{zoom:1}:{},function(){a.boxSizing=4===u.offsetWidth}),f.getComputedStyle&&(a.pixelPosition="1%"!==(f.getComputedStyle(u,null)||{}).top,a.boxSizingReliable="4px"===(f.getComputedStyle(u,null)||{width:"4px"}).width,(e=u.appendChild(m.createElement("div"))).style.cssText=u.style.cssText=i,e.style.marginRight=e.style.width="0",u.style.width="1px",a.reliableMarginRight=!parseFloat((f.getComputedStyle(e,null)||{}).marginRight)),typeof u.style.zoom!==v&&(u.innerHTML="",u.style.cssText=i+"width:1px;padding:1px;display:inline;zoom:1",a.inlineBlockNeedsLayout=3===u.offsetWidth,u.style.display="block",u.innerHTML="<div></div>",u.firstChild.style.width="5px",a.shrinkWrapBlocks=3!==u.offsetWidth,a.inlineBlockNeedsLayout&&(r.style.zoom=1)),r.removeChild(t),t=u=n=e=null)}),t=i=r=e=n=null,a}({});var B=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,F=/([A-Z])/g;function k(t,e,n,i){if(yt.acceptData(t)){var r,a,o=yt.expando,s=t.nodeType,l=s?yt.cache:t,c=s?t[o]:t[o]&&o;if(c&&l[c]&&(i||l[c].data)||n!==T||"string"!=typeof e)return l[c=c||(s?t[o]=h.pop()||yt.guid++:o)]||(l[c]=s?{}:{toJSON:yt.noop}),"object"!=typeof e&&"function"!=typeof e||(i?l[c]=yt.extend(l[c],e):l[c].data=yt.extend(l[c].data,e)),a=l[c],i||(a.data||(a.data={}),a=a.data),n!==T&&(a[yt.camelCase(e)]=n),"string"==typeof e?null==(r=a[e])&&(r=a[yt.camelCase(e)]):r=a,r}}function z(t,e,n){if(yt.acceptData(t)){var i,r,a=t.nodeType,o=a?yt.cache:t,s=a?t[yt.expando]:yt.expando;if(o[s]){if(e&&(i=n?o[s]:o[s].data)){r=(e=yt.isArray(e)?e.concat(yt.map(e,yt.camelCase)):e in i?[e]:(e=yt.camelCase(e))in i?[e]:e.split(" ")).length;for(;r--;)delete i[e[r]];if(n?!U(i):!yt.isEmptyObject(i))return}(n||(delete o[s].data,U(o[s])))&&(a?yt.cleanData([t],!0):yt.support.deleteExpando||o!=o.window?delete o[s]:o[s]=null)}}}function H(t,e,n){if(n===T&&1===t.nodeType){var i="data-"+e.replace(F,"-$1").toLowerCase();if("string"==typeof(n=t.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:B.test(n)?yt.parseJSON(n):n)}catch(t){}yt.data(t,e,n)}else n=T}return n}function U(t){var e;for(e in t)if(("data"!==e||!yt.isEmptyObject(t[e]))&&"toJSON"!==e)return;return 1}yt.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return!!(t=t.nodeType?yt.cache[t[yt.expando]]:t[yt.expando])&&!U(t)},data:function(t,e,n){return k(t,e,n)},removeData:function(t,e){return z(t,e)},_data:function(t,e,n){return k(t,e,n,!0)},_removeData:function(t,e){return z(t,e,!0)},acceptData:function(t){if(t.nodeType&&1!==t.nodeType&&9!==t.nodeType)return!1;var e=t.nodeName&&yt.noData[t.nodeName.toLowerCase()];return!e||!0!==e&&t.getAttribute("classid")===e}}),yt.fn.extend({data:function(t,e){var n,i,r=null,a=0,o=this[0];if(t!==T)return"object"==typeof t?this.each(function(){yt.data(this,t)}):1<arguments.length?this.each(function(){yt.data(this,t,e)}):o?H(o,t,yt.data(o,t)):null;if(this.length&&(r=yt.data(o),1===o.nodeType&&!yt._data(o,"parsedAttrs"))){for(n=o.attributes;n.length>a;a++)0===(i=n[a].name).indexOf("data-")&&H(o,i=yt.camelCase(i.slice(5)),r[i]);yt._data(o,"parsedAttrs",!0)}return r},removeData:function(t){return this.each(function(){yt.removeData(this,t)})}}),yt.extend({queue:function(t,e,n){var i;return t?(e=(e||"fx")+"queue",i=yt._data(t,e),n&&(!i||yt.isArray(n)?i=yt._data(t,e,yt.makeArray(n)):i.push(n)),i||[]):T},dequeue:function(t,e){e=e||"fx";var n=yt.queue(t,e),i=n.length,r=n.shift(),a=yt._queueHooks(t,e);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete a.stop,r.call(t,function(){yt.dequeue(t,e)},a)),!i&&a&&a.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return yt._data(t,n)||yt._data(t,n,{empty:yt.Callbacks("once memory").add(function(){yt._removeData(t,e+"queue"),yt._removeData(t,n)})})}}),yt.fn.extend({queue:function(e,n){var t=2;return"string"!=typeof e&&(n=e,e="fx",t--),arguments.length<t?yt.queue(this[0],e):n===T?this:this.each(function(){var t=yt.queue(this,e,n);yt._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&yt.dequeue(this,e)})},dequeue:function(t){return this.each(function(){yt.dequeue(this,t)})},delay:function(i,t){return i=yt.fx&&yt.fx.speeds[i]||i,t=t||"fx",this.queue(t,function(t,e){var n=setTimeout(t,i);e.stop=function(){clearTimeout(n)}})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){function n(){--r||a.resolveWith(o,[o])}var i,r=1,a=yt.Deferred(),o=this,s=this.length;for("string"!=typeof t&&(e=t,t=T),t=t||"fx";s--;)(i=yt._data(o[s],t+"queueHooks"))&&i.empty&&(r++,i.empty.add(n));return n(),a.promise(e)}});var G,j,V=/[\t\r\n\f]/g,W=/\r/g,q=/^(?:input|select|textarea|button|object)$/i,X=/^(?:a|area)$/i,Y=/^(?:checked|selected)$/i,Z=yt.support.getSetAttribute,J=yt.support.input;yt.fn.extend({attr:function(t,e){return yt.access(this,yt.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){yt.removeAttr(this,t)})},prop:function(t,e){return yt.access(this,yt.prop,t,e,1<arguments.length)},removeProp:function(t){return t=yt.propFix[t]||t,this.each(function(){try{this[t]=T,delete this[t]}catch(t){}})},addClass:function(e){var t,n,i,r,a,o=0,s=this.length,l="string"==typeof e&&e;if(yt.isFunction(e))return this.each(function(t){yt(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(M)||[];o<s;o++)if(i=1===(n=this[o]).nodeType&&(n.className?(" "+n.className+" ").replace(V," "):" ")){for(a=0;r=t[a++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");n.className=yt.trim(i)}return this},removeClass:function(e){var t,n,i,r,a,o=0,s=this.length,l=0===arguments.length||"string"==typeof e&&e;if(yt.isFunction(e))return this.each(function(t){yt(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(M)||[];o<s;o++)if(i=1===(n=this[o]).nodeType&&(n.className?(" "+n.className+" ").replace(V," "):"")){for(a=0;r=t[a++];)for(;0<=i.indexOf(" "+r+" ");)i=i.replace(" "+r+" "," ");n.className=e?yt.trim(i):""}return this},toggleClass:function(r,e){var a=typeof r;return"boolean"==typeof e&&"string"==a?e?this.addClass(r):this.removeClass(r):yt.isFunction(r)?this.each(function(t){yt(this).toggleClass(r.call(this,t,this.className,e),e)}):this.each(function(){if("string"==a)for(var t,e=0,n=yt(this),i=r.match(M)||[];t=i[e++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else a!==v&&"boolean"!=a||(this.className&&yt._data(this,"__className__",this.className),this.className=!this.className&&!1!==r&&yt._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;n<i;n++)if(1===this[n].nodeType&&0<=(" "+this[n].className+" ").replace(V," ").indexOf(e))return!0;return!1},val:function(n){var t,i,r,e=this[0];return arguments.length?(r=yt.isFunction(n),this.each(function(t){var e;1===this.nodeType&&(null==(e=r?n.call(this,t,yt(this).val()):n)?e="":"number"==typeof e?e+="":yt.isArray(e)&&(e=yt.map(e,function(t){return null==t?"":t+""})),(i=yt.valHooks[this.type]||yt.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&i.set(this,e,"value")!==T||(this.value=e))})):e?(i=yt.valHooks[e.type]||yt.valHooks[e.nodeName.toLowerCase()])&&"get"in i&&(t=i.get(e,"value"))!==T?t:"string"==typeof(t=e.value)?t.replace(W,""):null==t?"":t:void 0}}),yt.extend({valHooks:{option:{get:function(t){var e=yt.find.attr(t,"value");return null!=e?e:t.text}},select:{get:function(t){for(var e,n,i=t.options,r=t.selectedIndex,a="select-one"===t.type||r<0,o=a?null:[],s=a?r+1:i.length,l=r<0?s:a?r:0;l<s;l++)if(!(!(n=i[l]).selected&&l!==r||(yt.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&yt.nodeName(n.parentNode,"optgroup"))){if(e=yt(n).val(),a)return e;o.push(e)}return o},set:function(t,e){for(var n,i,r=t.options,a=yt.makeArray(e),o=r.length;o--;)((i=r[o]).selected=0<=yt.inArray(yt(i).val(),a))&&(n=!0);return n||(t.selectedIndex=-1),a}}},attr:function(t,e,n){var i,r,a=t.nodeType;if(t&&3!==a&&8!==a&&2!==a)return typeof t.getAttribute===v?yt.prop(t,e,n):(1===a&&yt.isXMLDoc(t)||(e=e.toLowerCase(),i=yt.attrHooks[e]||(yt.expr.match.bool.test(e)?j:G)),n===T?i&&"get"in i&&null!==(r=i.get(t,e))?r:null==(r=yt.find.attr(t,e))?T:r:null!==n?i&&"set"in i&&(r=i.set(t,n,e))!==T?r:(t.setAttribute(e,n+""),n):(yt.removeAttr(t,e),T))},removeAttr:function(t,e){var n,i,r=0,a=e&&e.match(M);if(a&&1===t.nodeType)for(;n=a[r++];)i=yt.propFix[n]||n,yt.expr.match.bool.test(n)?J&&Z||!Y.test(n)?t[i]=!1:t[yt.camelCase("default-"+n)]=t[i]=!1:yt.attr(t,n,""),t.removeAttribute(Z?n:i)},attrHooks:{type:{set:function(t,e){if(!yt.support.radioValue&&"radio"===e&&yt.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},propFix:{for:"htmlFor",class:"className"},prop:function(t,e,n){var i,r,a=t.nodeType;if(t&&3!==a&&8!==a&&2!==a)return(1!==a||!yt.isXMLDoc(t))&&(e=yt.propFix[e]||e,r=yt.propHooks[e]),n!==T?r&&"set"in r&&(i=r.set(t,n,e))!==T?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=yt.find.attr(t,"tabindex");return e?parseInt(e,10):q.test(t.nodeName)||X.test(t.nodeName)&&t.href?0:-1}}}}),j={set:function(t,e,n){return!1===e?yt.removeAttr(t,n):J&&Z||!Y.test(n)?t.setAttribute(!Z&&yt.propFix[n]||n,n):t[yt.camelCase("default-"+n)]=t[n]=!0,n}},yt.each(yt.expr.match.bool.source.match(/\w+/g),function(t,e){var a=yt.expr.attrHandle[e]||yt.find.attr;yt.expr.attrHandle[e]=J&&Z||!Y.test(e)?function(t,e,n){var i=yt.expr.attrHandle[e],r=n?T:(yt.expr.attrHandle[e]=T)!=a(t,e,n)?e.toLowerCase():null;return yt.expr.attrHandle[e]=i,r}:function(t,e,n){return n?T:t[yt.camelCase("default-"+e)]?e.toLowerCase():null}}),J&&Z||(yt.attrHooks.value={set:function(t,e,n){return yt.nodeName(t,"input")?(t.defaultValue=e,T):G&&G.set(t,e,n)}}),Z||(G={set:function(t,e,n){var i=t.getAttributeNode(n);return i||t.setAttributeNode(i=t.ownerDocument.createAttribute(n)),i.value=e+="","value"===n||e===t.getAttribute(n)?e:T}},yt.expr.attrHandle.id=yt.expr.attrHandle.name=yt.expr.attrHandle.coords=function(t,e,n){var i;return n?T:(i=t.getAttributeNode(e))&&""!==i.value?i.value:null},yt.valHooks.button={get:function(t,e){var n=t.getAttributeNode(e);return n&&n.specified?n.value:T},set:G.set},yt.attrHooks.contenteditable={set:function(t,e,n){G.set(t,""!==e&&e,n)}},yt.each(["width","height"],function(t,n){yt.attrHooks[n]={set:function(t,e){return""===e?(t.setAttribute(n,"auto"),e):T}}})),yt.support.hrefNormalized||yt.each(["href","src"],function(t,e){yt.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),yt.support.style||(yt.attrHooks.style={get:function(t){return t.style.cssText||T},set:function(t,e){return t.style.cssText=e+""}}),yt.support.optSelected||(yt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),yt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){yt.propFix[this.toLowerCase()]=this}),yt.support.enctype||(yt.propFix.enctype="encoding"),yt.each(["radio","checkbox"],function(){yt.valHooks[this]={set:function(t,e){return yt.isArray(e)?t.checked=0<=yt.inArray(yt(t).val(),e):T}},yt.support.checkOn||(yt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var Q=/^(?:input|select|textarea)$/i,$=/^key/,K=/^(?:mouse|contextmenu)|click/,tt=/^(?:focusinfocus|focusoutblur)$/,et=/^([^.]*)(?:\.(.+)|)$/;function nt(){return!0}function it(){return!1}function rt(){try{return m.activeElement}catch(t){}}yt.event={global:{},add:function(t,e,n,i,r){var a,o,s,l,c,u,h,d,p,f,m,g=yt._data(t);if(g){for(n.handler&&(n=(l=n).handler,r=l.selector),n.guid||(n.guid=yt.guid++),(o=g.events)||(o=g.events={}),(u=g.handle)||((u=g.handle=function(t){return typeof yt===v||t&&yt.event.triggered===t.type?T:yt.event.dispatch.apply(u.elem,arguments)}).elem=t),s=(e=(e||"").match(M)||[""]).length;s--;)p=m=(a=et.exec(e[s])||[])[1],f=(a[2]||"").split(".").sort(),p&&(c=yt.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,c=yt.event.special[p]||{},h=yt.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&yt.expr.match.needsContext.test(r),namespace:f.join(".")},l),(d=o[p])||((d=o[p]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(t,i,f,u)||(t.addEventListener?t.addEventListener(p,u,!1):t.attachEvent&&t.attachEvent("on"+p,u))),c.add&&(c.add.call(t,h),h.handler.guid||(h.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,h):d.push(h),yt.event.global[p]=!0);t=null}},remove:function(t,e,n,i,r){var a,o,s,l,c,u,h,d,p,f,m,g=yt.hasData(t)&&yt._data(t);if(g&&(u=g.events)){for(c=(e=(e||"").match(M)||[""]).length;c--;)if(p=m=(s=et.exec(e[c])||[])[1],f=(s[2]||"").split(".").sort(),p){for(h=yt.event.special[p]||{},d=u[p=(i?h.delegateType:h.bindType)||p]||[],s=s[2]&&RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=a=d.length;a--;)o=d[a],!r&&m!==o.origType||n&&n.guid!==o.guid||s&&!s.test(o.namespace)||i&&i!==o.selector&&("**"!==i||!o.selector)||(d.splice(a,1),o.selector&&d.delegateCount--,h.remove&&h.remove.call(t,o));l&&!d.length&&(h.teardown&&!1!==h.teardown.call(t,f,g.handle)||yt.removeEvent(t,p,g.handle),delete u[p])}else for(p in u)yt.event.remove(t,p+e[c],n,i,!0);yt.isEmptyObject(u)&&(delete g.handle,yt._removeData(t,"events"))}},trigger:function(t,e,n,i){var r,a,o,s,l,c,u=[n||m],h=_.call(t,"type")?t.type:t,d=_.call(t,"namespace")?t.namespace.split("."):[],p=l=n=n||m;if(3!==n.nodeType&&8!==n.nodeType&&!tt.test(h+yt.event.triggered)&&(0<=h.indexOf(".")&&(h=(d=h.split(".")).shift(),d.sort()),a=h.indexOf(":")<0&&"on"+h,(t=t[yt.expando]?t:new yt.Event(h,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=d.join("."),t.namespace_re=t.namespace?RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=T,t.target||(t.target=n),e=null==e?[t]:yt.makeArray(e,[t]),s=yt.event.special[h]||{},i||!s.trigger||!1!==s.trigger.apply(n,e))){if(!i&&!s.noBubble&&!yt.isWindow(n)){for(o=s.delegateType||h,tt.test(o+h)||(p=p.parentNode);p;p=p.parentNode)u.push(p),l=p;l===(n.ownerDocument||m)&&u.push(l.defaultView||l.parentWindow||f)}for(c=0;(p=u[c++])&&!t.isPropagationStopped();)t.type=1<c?o:s.bindType||h,(r=(yt._data(p,"events")||{})[t.type]&&yt._data(p,"handle"))&&r.apply(p,e),(r=a&&p[a])&&yt.acceptData(p)&&r.apply&&!1===r.apply(p,e)&&t.preventDefault();if(t.type=h,!i&&!t.isDefaultPrevented()&&(!s._default||!1===s._default.apply(u.pop(),e))&&yt.acceptData(n)&&a&&n[h]&&!yt.isWindow(n)){(l=n[a])&&(n[a]=null),yt.event.triggered=h;try{n[h]()}catch(t){}yt.event.triggered=T,l&&(n[a]=l)}return t.result}},dispatch:function(t){t=yt.event.fix(t);var e,n,i,r,a,o,s=d.call(arguments),l=(yt._data(this,"events")||{})[t.type]||[],c=yt.event.special[t.type]||{};if((s[0]=t).delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,t)){for(o=yt.event.handlers.call(this,t,l),e=0;(r=o[e++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,a=0;(i=r.handlers[a++])&&!t.isImmediatePropagationStopped();)t.namespace_re&&!t.namespace_re.test(i.namespace)||(t.handleObj=i,t.data=i.data,(n=((yt.event.special[i.origType]||{}).handle||i.handler).apply(r.elem,s))!==T&&!1===(t.result=n)&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,r,a,o=[],s=e.delegateCount,l=t.target;if(s&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==t.type)){for(r=[],a=0;a<s;a++)r[n=(i=e[a]).selector+" "]===T&&(r[n]=i.needsContext?0<=yt(n,this).index(l):yt.find(n,this,null,[l]).length),r[n]&&r.push(i);r.length&&o.push({elem:l,handlers:r})}return e.length>s&&o.push({elem:this,handlers:e.slice(s)}),o},fix:function(t){if(t[yt.expando])return t;var e,n,i,r=t.type,a=t,o=this.fixHooks[r];for(o||(this.fixHooks[r]=o=K.test(r)?this.mouseHooks:$.test(r)?this.keyHooks:{}),i=o.props?this.props.concat(o.props):this.props,t=new yt.Event(a),e=i.length;e--;)t[n=i[e]]=a[n];return t.target||(t.target=a.srcElement||m),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,o.filter?o.filter(t,a):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,r,a=e.button,o=e.fromElement;return null==t.pageX&&null!=e.clientX&&(r=(i=t.target.ownerDocument||m).documentElement,n=i.body,t.pageX=e.clientX+(r&&r.scrollLeft||n&&n.scrollLeft||0)-(r&&r.clientLeft||n&&n.clientLeft||0),t.pageY=e.clientY+(r&&r.scrollTop||n&&n.scrollTop||0)-(r&&r.clientTop||n&&n.clientTop||0)),!t.relatedTarget&&o&&(t.relatedTarget=o===t.target?e.toElement:o),t.which||a===T||(t.which=1&a?1:2&a?3:4&a?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==rt()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){return this===rt()&&this.blur?(this.blur(),!1):T},delegateType:"focusout"},click:{trigger:function(){return yt.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):T},_default:function(t){return yt.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){t.result!==T&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var r=yt.extend(new yt.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?yt.event.trigger(r,null,e):yt.event.dispatch.call(e,r),r.isDefaultPrevented()&&n.preventDefault()}},yt.removeEvent=m.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)}:function(t,e,n){var i="on"+e;t.detachEvent&&(typeof t[i]===v&&(t[i]=null),t.detachEvent(i,n))},yt.Event=function(t,e){return this instanceof yt.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||!1===t.returnValue||t.getPreventDefault&&t.getPreventDefault()?nt:it):this.type=t,e&&yt.extend(this,e),this.timeStamp=t&&t.timeStamp||yt.now(),this[yt.expando]=!0,T):new yt.Event(t,e)},yt.Event.prototype={isDefaultPrevented:it,isPropagationStopped:it,isImmediatePropagationStopped:it,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=nt,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=nt,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=nt,this.stopPropagation()}},yt.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,r){yt.event.special[t]={delegateType:r,bindType:r,handle:function(t){var e,n=t.relatedTarget,i=t.handleObj;return n&&(n===this||yt.contains(this,n))||(t.type=i.origType,e=i.handler.apply(this,arguments),t.type=r),e}}}),yt.support.submitBubbles||(yt.event.special.submit={setup:function(){return!yt.nodeName(this,"form")&&(yt.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,n=yt.nodeName(e,"input")||yt.nodeName(e,"button")?e.form:T;n&&!yt._data(n,"submitBubbles")&&(yt.event.add(n,"submit._submit",function(t){t._submit_bubble=!0}),yt._data(n,"submitBubbles",!0))}),T)},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&yt.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return!yt.nodeName(this,"form")&&(yt.event.remove(this,"._submit"),T)}}),yt.support.changeBubbles||(yt.event.special.change={setup:function(){return Q.test(this.nodeName)?("checkbox"!==this.type&&"radio"!==this.type||(yt.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),yt.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),yt.event.simulate("change",this,t,!0)})),!1):(yt.event.add(this,"beforeactivate._change",function(t){var e=t.target;Q.test(e.nodeName)&&!yt._data(e,"changeBubbles")&&(yt.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||yt.event.simulate("change",this.parentNode,t,!0)}),yt._data(e,"changeBubbles",!0))}),T)},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):T},teardown:function(){return yt.event.remove(this,"._change"),!Q.test(this.nodeName)}}),yt.support.focusinBubbles||yt.each({focus:"focusin",blur:"focusout"},function(t,e){function n(t){yt.event.simulate(e,t.target,yt.event.fix(t),!0)}var i=0;yt.event.special[e]={setup:function(){0==i++&&m.addEventListener(t,n,!0)},teardown:function(){0==--i&&m.removeEventListener(t,n,!0)}}}),yt.fn.extend({on:function(t,e,n,i,r){var a,o;if("object"==typeof t){for(a in"string"!=typeof e&&(n=n||e,e=T),t)this.on(a,e,n,t[a],r);return this}if(null==n&&null==i?(i=e,n=e=T):null==i&&("string"==typeof e?(i=n,n=T):(i=n,n=e,e=T)),!1===i)i=it;else if(!i)return this;return 1===r&&(o=i,(i=function(t){return yt().off(t),o.apply(this,arguments)}).guid=o.guid||(o.guid=yt.guid++)),this.each(function(){yt.event.add(this,t,i,n,e)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,yt(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"!=typeof t)return!1!==e&&"function"!=typeof e||(n=e,e=T),!1===n&&(n=it),this.each(function(){yt.event.remove(this,t,n,e)});for(r in t)this.off(r,e,t[r]);return this},trigger:function(t,e){return this.each(function(){yt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?yt.event.trigger(t,e,n,!0):T}});var at=/^.[^:#\[\.,]*$/,ot=/^(?:parents|prev(?:Until|All))/,st=yt.expr.match.needsContext,lt={children:!0,contents:!0,next:!0,prev:!0};function ct(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function ut(t,n,i){if(yt.isFunction(n))return yt.grep(t,function(t,e){return!!n.call(t,e,t)!==i});if(n.nodeType)return yt.grep(t,function(t){return t===n!==i});if("string"==typeof n){if(at.test(n))return yt.filter(n,t,i);n=yt.filter(n,t)}return yt.grep(t,function(t){return 0<=yt.inArray(t,n)!==i})}function ht(t){var e=dt.split("|"),n=t.createDocumentFragment();if(n.createElement)for(;e.length;)n.createElement(e.pop());return n}yt.fn.extend({find:function(t){var e,n=[],i=this,r=i.length;if("string"!=typeof t)return this.pushStack(yt(t).filter(function(){for(e=0;e<r;e++)if(yt.contains(i[e],this))return!0}));for(e=0;e<r;e++)yt.find(t,i[e],n);return(n=this.pushStack(1<r?yt.unique(n):n)).selector=this.selector?this.selector+" "+t:t,n},has:function(t){var e,n=yt(t,this),i=n.length;return this.filter(function(){for(e=0;e<i;e++)if(yt.contains(this,n[e]))return!0})},not:function(t){return this.pushStack(ut(this,t||[],!0))},filter:function(t){return this.pushStack(ut(this,t||[],!1))},is:function(t){return!!ut(this,"string"==typeof t&&st.test(t)?yt(t):t||[],!1).length},closest:function(t,e){for(var n,i=0,r=this.length,a=[],o=st.test(t)||"string"!=typeof t?yt(t,e||this.context):0;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(o?-1<o.index(n):1===n.nodeType&&yt.find.matchesSelector(n,t))){n=a.push(n);break}return this.pushStack(1<a.length?yt.unique(a):a)},index:function(t){return t?"string"==typeof t?yt.inArray(this[0],yt(t)):yt.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){var n="string"==typeof t?yt(t,e):yt.makeArray(t&&t.nodeType?[t]:t),i=yt.merge(this.get(),n);return this.pushStack(yt.unique(i))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),yt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return yt.dir(t,"parentNode")},parentsUntil:function(t,e,n){return yt.dir(t,"parentNode",n)},next:function(t){return ct(t,"nextSibling")},prev:function(t){return ct(t,"previousSibling")},nextAll:function(t){return yt.dir(t,"nextSibling")},prevAll:function(t){return yt.dir(t,"previousSibling")},nextUntil:function(t,e,n){return yt.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return yt.dir(t,"previousSibling",n)},siblings:function(t){return yt.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return yt.sibling(t.firstChild)},contents:function(t){return yt.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:yt.merge([],t.childNodes)}},function(i,r){yt.fn[i]=function(t,e){var n=yt.map(this,r,t);return"Until"!==i.slice(-5)&&(e=t),e&&"string"==typeof e&&(n=yt.filter(e,n)),1<this.length&&(lt[i]||(n=yt.unique(n)),ot.test(i)&&(n=n.reverse())),this.pushStack(n)}}),yt.extend({filter:function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?yt.find.matchesSelector(i,t)?[i]:[]:yt.find.matches(t,yt.grep(e,function(t){return 1===t.nodeType}))},dir:function(t,e,n){for(var i=[],r=t[e];r&&9!==r.nodeType&&(n===T||1!==r.nodeType||!yt(r).is(n));)1===r.nodeType&&i.push(r),r=r[e];return i},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}});var dt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",pt=/ jQuery\d+="(?:null|\d+)"/g,ft=RegExp("<(?:"+dt+")[\\s/>]","i"),mt=/^\s+/,gt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,vt=/<([\w:]+)/,_t=/<tbody/i,xt=/<|&#?\w+;/,bt=/<(?:script|style|link)/i,wt=/^(?:checkbox|radio)$/i,Tt=/checked\s*(?:[^=]|=\s*.checked.)/i,Mt=/^$|\/(?:java|ecma)script/i,St=/^true\/(.*)/,Et=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,At={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:yt.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Lt=ht(m).appendChild(m.createElement("div"));function Ct(t,e){return yt.nodeName(t,"table")&&yt.nodeName(1===e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function Rt(t){return t.type=(null!==yt.find.attr(t,"type"))+"/"+t.type,t}function Pt(t){var e=St.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function Ot(t,e){for(var n,i=0;null!=(n=t[i]);i++)yt._data(n,"globalEval",!e||yt._data(e[i],"globalEval"))}function Dt(t,e){if(1===e.nodeType&&yt.hasData(t)){var n,i,r,a=yt._data(t),o=yt._data(e,a),s=a.events;if(s)for(n in delete o.handle,o.events={},s)for(i=0,r=s[n].length;i<r;i++)yt.event.add(e,n,s[n][i]);o.data&&(o.data=yt.extend({},o.data))}}function Nt(t,e){var n,i,r=0,a=typeof t.getElementsByTagName!==v?t.getElementsByTagName(e||"*"):typeof t.querySelectorAll!==v?t.querySelectorAll(e||"*"):T;if(!a)for(a=[],n=t.childNodes||t;null!=(i=n[r]);r++)!e||yt.nodeName(i,e)?a.push(i):yt.merge(a,Nt(i,e));return e===T||e&&yt.nodeName(t,e)?yt.merge([t],a):a}function It(t){wt.test(t.type)&&(t.defaultChecked=t.checked)}At.optgroup=At.option,At.tbody=At.tfoot=At.colgroup=At.caption=At.thead,At.th=At.td,yt.fn.extend({text:function(t){return yt.access(this,function(t){return t===T?yt.text(this):this.empty().append((this[0]&&this[0].ownerDocument||m).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ct(this,t).appendChild(t)})},prepend:function(){return this.domManip(arguments,function(t){var e;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(e=Ct(this,t)).insertBefore(t,e.firstChild)})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?yt.filter(t,this):this,r=0;null!=(n=i[r]);r++)e||1!==n.nodeType||yt.cleanData(Nt(n)),n.parentNode&&(e&&yt.contains(n.ownerDocument,n)&&Ot(Nt(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&yt.cleanData(Nt(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&yt.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return yt.clone(this,t,e)})},html:function(t){return yt.access(this,function(t){var e=this[0]||{},n=0,i=this.length;if(t===T)return 1===e.nodeType?e.innerHTML.replace(pt,""):T;if(!("string"!=typeof t||bt.test(t)||!yt.support.htmlSerialize&&ft.test(t)||!yt.support.leadingWhitespace&&mt.test(t)||At[(vt.exec(t)||["",""])[1].toLowerCase()])){t=t.replace(gt,"<$1></$2>");try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(yt.cleanData(Nt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var i=yt.map(this,function(t){return[t.nextSibling,t.parentNode]}),r=0;return this.domManip(arguments,function(t){var e=i[r++],n=i[r++];n&&(e&&e.parentNode!==n&&(e=this.nextSibling),yt(this).remove(),n.insertBefore(t,e))},!0),r?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(n,i,r){n=g.apply([],n);var t,e,a,o,s,l,c=0,u=this.length,h=this,d=u-1,p=n[0],f=yt.isFunction(p);if(f||!(u<=1||"string"!=typeof p||yt.support.checkClone)&&Tt.test(p))return this.each(function(t){var e=h.eq(t);f&&(n[0]=p.call(this,t,e.html())),e.domManip(n,i,r)});if(u&&(t=(l=yt.buildFragment(n,this[0].ownerDocument,!1,!r&&this)).firstChild,1===l.childNodes.length&&(l=t),t)){for(a=(o=yt.map(Nt(l,"script"),Rt)).length;c<u;c++)e=l,c!==d&&(e=yt.clone(e,!0,!0),a&&yt.merge(o,Nt(e,"script"))),i.call(this[c],e,c);if(a)for(s=o[o.length-1].ownerDocument,yt.map(o,Pt),c=0;c<a;c++)e=o[c],Mt.test(e.type||"")&&!yt._data(e,"globalEval")&&yt.contains(s,e)&&(e.src?yt._evalUrl(e.src):yt.globalEval((e.text||e.textContent||e.innerHTML||"").replace(Et,"")));l=t=null}return this}}),yt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,o){yt.fn[t]=function(t){for(var e,n=0,i=[],r=yt(t),a=r.length-1;n<=a;n++)e=n===a?this:this.clone(!0),yt(r[n])[o](e),u.apply(i,e.get());return this.pushStack(i)}}),yt.extend({clone:function(t,e,n){var i,r,a,o,s,l=yt.contains(t.ownerDocument,t);if(yt.support.html5Clone||yt.isXMLDoc(t)||!ft.test("<"+t.nodeName+">")?a=t.cloneNode(!0):(Lt.innerHTML=t.outerHTML,Lt.removeChild(a=Lt.firstChild)),!(yt.support.noCloneEvent&&yt.support.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||yt.isXMLDoc(t)))for(i=Nt(a),s=Nt(t),o=0;null!=(r=s[o]);++o)i[o]&&function(t,e){var n,i,r;if(1===e.nodeType){if(n=e.nodeName.toLowerCase(),!yt.support.noCloneEvent&&e[yt.expando]){for(i in(r=yt._data(e)).events)yt.removeEvent(e,i,r.handle);e.removeAttribute(yt.expando)}"script"===n&&e.text!==t.text?(Rt(e).text=t.text,Pt(e)):"object"===n?(e.parentNode&&(e.outerHTML=t.outerHTML),yt.support.html5Clone&&t.innerHTML&&!yt.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===n&&wt.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===n?e.defaultSelected=e.selected=t.defaultSelected:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}}(r,i[o]);if(e)if(n)for(s=s||Nt(t),i=i||Nt(a),o=0;null!=(r=s[o]);o++)Dt(r,i[o]);else Dt(t,a);return 0<(i=Nt(a,"script")).length&&Ot(i,!l&&Nt(t,"script")),i=s=r=null,a},buildFragment:function(t,e,n,i){for(var r,a,o,s,l,c,u,h=t.length,d=ht(e),p=[],f=0;f<h;f++)if((a=t[f])||0===a)if("object"===yt.type(a))yt.merge(p,a.nodeType?[a]:a);else if(xt.test(a)){for(s=s||d.appendChild(e.createElement("div")),l=(vt.exec(a)||["",""])[1].toLowerCase(),u=At[l]||At._default,s.innerHTML=u[1]+a.replace(gt,"<$1></$2>")+u[2],r=u[0];r--;)s=s.lastChild;if(!yt.support.leadingWhitespace&&mt.test(a)&&p.push(e.createTextNode(mt.exec(a)[0])),!yt.support.tbody)for(r=(a="table"!==l||_t.test(a)?"<table>"!==u[1]||_t.test(a)?0:s:s.firstChild)&&a.childNodes.length;r--;)yt.nodeName(c=a.childNodes[r],"tbody")&&!c.childNodes.length&&a.removeChild(c);for(yt.merge(p,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=d.lastChild}else p.push(e.createTextNode(a));for(s&&d.removeChild(s),yt.support.appendChecked||yt.grep(Nt(p,"input"),It),f=0;a=p[f++];)if((!i||-1===yt.inArray(a,i))&&(o=yt.contains(a.ownerDocument,a),s=Nt(d.appendChild(a),"script"),o&&Ot(s),n))for(r=0;a=s[r++];)Mt.test(a.type||"")&&n.push(a);return s=null,d},cleanData:function(t,e){for(var n,i,r,a,o=0,s=yt.expando,l=yt.cache,c=yt.support.deleteExpando,u=yt.event.special;null!=(n=t[o]);o++)if((e||yt.acceptData(n))&&(a=(r=n[s])&&l[r])){if(a.events)for(i in a.events)u[i]?yt.event.remove(n,i):yt.removeEvent(n,i,a.handle);l[r]&&(delete l[r],c?delete n[s]:typeof n.removeAttribute!==v?n.removeAttribute(s):n[s]=null,h.push(r))}},_evalUrl:function(t){return yt.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})}}),yt.fn.extend({wrapAll:function(e){return yt.isFunction(e)?this.each(function(t){yt(this).wrapAll(e.call(this,t))}):(this[0]&&(t=yt(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)),this);var t},wrapInner:function(n){return yt.isFunction(n)?this.each(function(t){yt(this).wrapInner(n.call(this,t))}):this.each(function(){var t=yt(this),e=t.contents();e.length?e.wrapAll(n):t.append(n)})},wrap:function(e){var n=yt.isFunction(e);return this.each(function(t){yt(this).wrapAll(n?e.call(this,t):e)})},unwrap:function(){return this.parent().each(function(){yt.nodeName(this,"body")||yt(this).replaceWith(this.childNodes)}).end()}});var Bt,Ft,kt,zt=/alpha\([^)]*\)/i,Ht=/opacity\s*=\s*([^)]*)/,Ut=/^(top|right|bottom|left)$/,Gt=/^(none|table(?!-c[ea]).+)/,jt=/^margin/,Vt=RegExp("^("+b+")(.*)$","i"),Wt=RegExp("^("+b+")(?!px)[a-z%]+$","i"),qt=RegExp("^([+-])=("+b+")","i"),Xt={BODY:"block"},Yt={position:"absolute",visibility:"hidden",display:"block"},Zt={letterSpacing:0,fontWeight:400},Jt=["Top","Right","Bottom","Left"],Qt=["Webkit","O","Moz","ms"];function $t(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),i=e,r=Qt.length;r--;)if((e=Qt[r]+n)in t)return e;return i}function Kt(t,e){return t=e||t,"none"===yt.css(t,"display")||!yt.contains(t.ownerDocument,t)}function te(t,e){for(var n,i,r,a=[],o=0,s=t.length;o<s;o++)(i=t[o]).style&&(a[o]=yt._data(i,"olddisplay"),n=i.style.display,e?(a[o]||"none"!==n||(i.style.display=""),""===i.style.display&&Kt(i)&&(a[o]=yt._data(i,"olddisplay",re(i.nodeName)))):a[o]||(r=Kt(i),(n&&"none"!==n||!r)&&yt._data(i,"olddisplay",r?n:yt.css(i,"display"))));for(o=0;o<s;o++)(i=t[o]).style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?a[o]||"":"none"));return t}function ee(t,e,n){var i=Vt.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function ne(t,e,n,i,r){for(var a=n===(i?"border":"content")?4:"width"===e?1:0,o=0;a<4;a+=2)"margin"===n&&(o+=yt.css(t,n+Jt[a],!0,r)),i?("content"===n&&(o-=yt.css(t,"padding"+Jt[a],!0,r)),"margin"!==n&&(o-=yt.css(t,"border"+Jt[a]+"Width",!0,r))):(o+=yt.css(t,"padding"+Jt[a],!0,r),"padding"!==n&&(o+=yt.css(t,"border"+Jt[a]+"Width",!0,r)));return o}function ie(t,e,n){var i=!0,r="width"===e?t.offsetWidth:t.offsetHeight,a=Ft(t),o=yt.support.boxSizing&&"border-box"===yt.css(t,"boxSizing",!1,a);if(r<=0||null==r){if(((r=kt(t,e,a))<0||null==r)&&(r=t.style[e]),Wt.test(r))return r;i=o&&(yt.support.boxSizingReliable||r===t.style[e]),r=parseFloat(r)||0}return r+ne(t,e,n||(o?"border":"content"),i,a)+"px"}function re(t){var e=m,n=Xt[t];return n||("none"!==(n=ae(t,e))&&n||((e=((Bt=(Bt||yt("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(e.documentElement))[0].contentWindow||Bt[0].contentDocument).document).write("<!doctype html><html><body>"),e.close(),n=ae(t,e),Bt.detach()),Xt[t]=n),n}function ae(t,e){var n=yt(e.createElement(t)).appendTo(e.body),i=yt.css(n[0],"display");return n.remove(),i}yt.fn.extend({css:function(t,e){return yt.access(this,function(t,e,n){var i,r,a={},o=0;if(yt.isArray(e)){for(r=Ft(t),i=e.length;o<i;o++)a[e[o]]=yt.css(t,e[o],!1,r);return a}return n!==T?yt.style(t,e,n):yt.css(t,e)},t,e,1<arguments.length)},show:function(){return te(this,!0)},hide:function(){return te(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Kt(this)?yt(this).show():yt(this).hide()})}}),yt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=kt(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:yt.support.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,a,o,s=yt.camelCase(e),l=t.style;if(e=yt.cssProps[s]||(yt.cssProps[s]=$t(l,s)),o=yt.cssHooks[e]||yt.cssHooks[s],n===T)return o&&"get"in o&&(r=o.get(t,!1,i))!==T?r:l[e];if("string"===(a=typeof n)&&(r=qt.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(yt.css(t,e)),a="number"),!(null==n||"number"===a&&isNaN(n)||("number"!==a||yt.cssNumber[s]||(n+="px"),yt.support.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),o&&"set"in o&&(n=o.set(t,n,i))===T)))try{l[e]=n}catch(t){}}},css:function(t,e,n,i){var r,a,o,s=yt.camelCase(e);return e=yt.cssProps[s]||(yt.cssProps[s]=$t(t.style,s)),(o=yt.cssHooks[e]||yt.cssHooks[s])&&"get"in o&&(a=o.get(t,!0,n)),a===T&&(a=kt(t,e,i)),"normal"===a&&e in Zt&&(a=Zt[e]),""===n||n?(r=parseFloat(a),!0===n||yt.isNumeric(r)?r||0:a):a}}),f.getComputedStyle?(Ft=function(t){return f.getComputedStyle(t,null)},kt=function(t,e,n){var i,r,a,o=n||Ft(t),s=o?o.getPropertyValue(e)||o[e]:T,l=t.style;return o&&(""!==s||yt.contains(t.ownerDocument,t)||(s=yt.style(t,e)),Wt.test(s)&&jt.test(e)&&(i=l.width,r=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=s,s=o.width,l.width=i,l.minWidth=r,l.maxWidth=a)),s}):m.documentElement.currentStyle&&(Ft=function(t){return t.currentStyle},kt=function(t,e,n){var i,r,a,o=n||Ft(t),s=o?o[e]:T,l=t.style;return null==s&&l&&l[e]&&(s=l[e]),Wt.test(s)&&!Ut.test(e)&&(i=l.left,(a=(r=t.runtimeStyle)&&r.left)&&(r.left=t.currentStyle.left),l.left="fontSize"===e?"1em":s,s=l.pixelLeft+"px",l.left=i,a&&(r.left=a)),""===s?"auto":s}),yt.each(["height","width"],function(t,r){yt.cssHooks[r]={get:function(t,e,n){return e?0===t.offsetWidth&&Gt.test(yt.css(t,"display"))?yt.swap(t,Yt,function(){return ie(t,r,n)}):ie(t,r,n):T},set:function(t,e,n){var i=n&&Ft(t);return ee(0,e,n?ne(t,r,n,yt.support.boxSizing&&"border-box"===yt.css(t,"boxSizing",!1,i),i):0)}}}),yt.support.opacity||(yt.cssHooks.opacity={get:function(t,e){return Ht.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var n=t.style,i=t.currentStyle,r=yt.isNumeric(e)?"alpha(opacity="+100*e+")":"",a=i&&i.filter||n.filter||"";((n.zoom=1)<=e||""===e)&&""===yt.trim(a.replace(zt,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===e||i&&!i.filter)||(n.filter=zt.test(a)?a.replace(zt,r):a+" "+r)}}),yt(function(){yt.support.reliableMarginRight||(yt.cssHooks.marginRight={get:function(t,e){return e?yt.swap(t,{display:"inline-block"},kt,[t,"marginRight"]):T}}),!yt.support.pixelPosition&&yt.fn.position&&yt.each(["top","left"],function(t,n){yt.cssHooks[n]={get:function(t,e){return e?(e=kt(t,n),Wt.test(e)?yt(t).position()[n]+"px":e):T}}})}),yt.expr&&yt.expr.filters&&(yt.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!yt.support.reliableHiddenOffsets&&"none"===(t.style&&t.style.display||yt.css(t,"display"))},yt.expr.filters.visible=function(t){return!yt.expr.filters.hidden(t)}),yt.each({margin:"",padding:"",border:"Width"},function(r,a){yt.cssHooks[r+a]={expand:function(t){for(var e=0,n={},i="string"==typeof t?t.split(" "):[t];e<4;e++)n[r+Jt[e]+a]=i[e]||i[e-2]||i[0];return n}},jt.test(r)||(yt.cssHooks[r+a].set=ee)});var oe=/%20/g,se=/\[\]$/,le=/\r?\n/g,ce=/^(?:submit|button|image|reset|file)$/i,ue=/^(?:input|select|textarea|keygen)/i;yt.fn.extend({serialize:function(){return yt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=yt.prop(this,"elements");return t?yt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!yt(this).is(":disabled")&&ue.test(this.nodeName)&&!ce.test(t)&&(this.checked||!wt.test(t))}).map(function(t,e){var n=yt(this).val();return null==n?null:yt.isArray(n)?yt.map(n,function(t){return{name:e.name,value:t.replace(le,"\r\n")}}):{name:e.name,value:n.replace(le,"\r\n")}}).get()}}),yt.param=function(t,e){function n(t,e){e=yt.isFunction(e)?e():null==e?"":e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)}var i,r=[];if(e===T&&(e=yt.ajaxSettings&&yt.ajaxSettings.traditional),yt.isArray(t)||t.jquery&&!yt.isPlainObject(t))yt.each(t,function(){n(this.name,this.value)});else for(i in t)!function n(i,t,r,a){var e;if(yt.isArray(t))yt.each(t,function(t,e){r||se.test(i)?a(i,e):n(i+"["+("object"==typeof e?t:"")+"]",e,r,a)});else if(r||"object"!==yt.type(t))a(i,t);else for(e in t)n(i+"["+e+"]",t[e],r,a)}(i,t[i],e,n);return r.join("&").replace(oe,"+")},yt.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,n){yt.fn[n]=function(t,e){return 0<arguments.length?this.on(n,null,t,e):this.trigger(n)}}),yt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var he,de,pe=yt.now(),fe=/\?/,me=/#.*$/,ge=/([?&])_=[^&]*/,ve=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,ye=/^(?:GET|HEAD)$/,_e=/^\/\//,xe=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,be=yt.fn.load,we={},Te={},Me="*/".concat("*");try{de=t.href}catch(t){(de=m.createElement("a")).href="",de=de.href}function Se(a){return function(t,e){"string"!=typeof t&&(e=t,t="*");var n,i=0,r=t.toLowerCase().match(M)||[];if(yt.isFunction(e))for(;n=r[i++];)"+"===n[0]?(n=n.slice(1)||"*",(a[n]=a[n]||[]).unshift(e)):(a[n]=a[n]||[]).push(e)}}function Ee(e,r,a,o){var s={},l=e===Te;function c(t){var i;return s[t]=!0,yt.each(e[t]||[],function(t,e){var n=e(r,a,o);return"string"!=typeof n||l||s[n]?l?!(i=n):T:(r.dataTypes.unshift(n),c(n),!1)}),i}return c(r.dataTypes[0])||!s["*"]&&c("*")}function Ae(t,e){var n,i,r=yt.ajaxSettings.flatOptions||{};for(i in e)e[i]!==T&&((r[i]?t:n=n||{})[i]=e[i]);return n&&yt.extend(!0,t,n),t}he=xe.exec(de.toLowerCase())||[],yt.fn.load=function(t,e,n){if("string"!=typeof t&&be)return be.apply(this,arguments);var i,r,a,o=this,s=t.indexOf(" ");return 0<=s&&(i=t.slice(s,t.length),t=t.slice(0,s)),yt.isFunction(e)?(n=e,e=T):e&&"object"==typeof e&&(a="POST"),0<o.length&&yt.ajax({url:t,type:a,dataType:"html",data:e}).done(function(t){r=arguments,o.html(i?yt("<div>").append(yt.parseHTML(t)).find(i):t)}).complete(n&&function(t,e){o.each(n,r||[t.responseText,e,t])}),this},yt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){yt.fn[e]=function(t){return this.on(e,t)}}),yt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:de,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(he[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Me,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":yt.parseJSON,"text xml":yt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ae(Ae(t,yt.ajaxSettings),e):Ae(yt.ajaxSettings,t)},ajaxPrefilter:Se(we),ajaxTransport:Se(Te),ajax:function(t,e){"object"==typeof t&&(e=t,t=T),e=e||{};var n,i,u,h,d,p,f,r,m=yt.ajaxSetup({},e),g=m.context||m,v=m.context&&(g.nodeType||g.jquery)?yt(g):yt.event,y=yt.Deferred(),_=yt.Callbacks("once memory"),x=m.statusCode||{},a={},o={},b=0,s="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!r)for(r={};e=ve.exec(h);)r[e[1].toLowerCase()]=e[2];e=r[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?h:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return b||(t=o[n]=o[n]||t,a[t]=e),this},overrideMimeType:function(t){return b||(m.mimeType=t),this},statusCode:function(t){var e;if(t)if(b<2)for(e in t)x[e]=[x[e],t[e]];else w.always(t[w.status]);return this},abort:function(t){var e=t||s;return f&&f.abort(e),l(0,e),this}};if(y.promise(w).complete=_.add,w.success=w.done,w.error=w.fail,m.url=((t||m.url||de)+"").replace(me,"").replace(_e,he[1]+"//"),m.type=e.method||e.type||m.method||m.type,m.dataTypes=yt.trim(m.dataType||"*").toLowerCase().match(M)||[""],null==m.crossDomain&&(n=xe.exec(m.url.toLowerCase()),m.crossDomain=!(!n||n[1]===he[1]&&n[2]===he[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(he[3]||("http:"===he[1]?"80":"443")))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=yt.param(m.data,m.traditional)),Ee(we,m,e,w),2===b)return w;for(i in(p=m.global)&&0==yt.active++&&yt.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!ye.test(m.type),u=m.url,m.hasContent||(m.data&&(u=m.url+=(fe.test(u)?"&":"?")+m.data,delete m.data),!1===m.cache&&(m.url=ge.test(u)?u.replace(ge,"$1_="+pe++):u+(fe.test(u)?"&":"?")+"_="+pe++)),m.ifModified&&(yt.lastModified[u]&&w.setRequestHeader("If-Modified-Since",yt.lastModified[u]),yt.etag[u]&&w.setRequestHeader("If-None-Match",yt.etag[u])),(m.data&&m.hasContent&&!1!==m.contentType||e.contentType)&&w.setRequestHeader("Content-Type",m.contentType),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Me+"; q=0.01":""):m.accepts["*"]),m.headers)w.setRequestHeader(i,m.headers[i]);if(m.beforeSend&&(!1===m.beforeSend.call(g,w,m)||2===b))return w.abort();for(i in s="abort",{success:1,error:1,complete:1})w[i](m[i]);if(f=Ee(Te,m,e,w)){w.readyState=1,p&&v.trigger("ajaxSend",[w,m]),m.async&&0<m.timeout&&(d=setTimeout(function(){w.abort("timeout")},m.timeout));try{b=1,f.send(a,l)}catch(t){if(!(b<2))throw t;l(-1,t)}}else l(-1,"No Transport");function l(t,e,n,i){var r,a,o,s,l,c=e;2!==b&&(b=2,d&&clearTimeout(d),f=T,h=i||"",w.readyState=0<t?4:0,r=200<=t&&t<300||304===t,n&&(s=function(t,e,n){var i,r,a,o,s=t.contents,l=t.dataTypes;for(;"*"===l[0];)l.shift(),r===T&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(o in s)if(s[o]&&s[o].test(r)){l.unshift(o);break}if(l[0]in n)a=l[0];else{for(o in n){if(!l[0]||t.converters[o+" "+l[0]]){a=o;break}i=i||o}a=a||i}return a?(a!==l[0]&&l.unshift(a),n[a]):T}(m,w,n)),s=function(t,e,n,i){var r,a,o,s,l,c={},u=t.dataTypes.slice();if(u[1])for(o in t.converters)c[o.toLowerCase()]=t.converters[o];a=u.shift();for(;a;)if(t.responseFields[a]&&(n[t.responseFields[a]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=a,a=u.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(o=c[l+" "+a]||c["* "+a]))for(r in c)if((s=r.split(" "))[1]===a&&(o=c[l+" "+s[0]]||c["* "+s[0]])){!0===o?o=c[r]:!0!==c[r]&&(a=s[0],u.unshift(s[1]));break}if(!0!==o)if(o&&t.throws)e=o(e);else try{e=o(e)}catch(t){return{state:"parsererror",error:o?t:"No conversion from "+l+" to "+a}}}return{state:"success",data:e}}(m,s,w,r),r?(m.ifModified&&((l=w.getResponseHeader("Last-Modified"))&&(yt.lastModified[u]=l),(l=w.getResponseHeader("etag"))&&(yt.etag[u]=l)),204===t||"HEAD"===m.type?c="nocontent":304===t?c="notmodified":(c=s.state,a=s.data,r=!(o=s.error))):(o=c,!t&&c||(c="error",t<0&&(t=0))),w.status=t,w.statusText=(e||c)+"",r?y.resolveWith(g,[a,c,w]):y.rejectWith(g,[w,c,o]),w.statusCode(x),x=T,p&&v.trigger(r?"ajaxSuccess":"ajaxError",[w,m,r?a:o]),_.fireWith(g,[w,c]),p&&(v.trigger("ajaxComplete",[w,m]),--yt.active||yt.event.trigger("ajaxStop")))}return w},getJSON:function(t,e,n){return yt.get(t,e,n,"json")},getScript:function(t,e){return yt.get(t,T,e,"script")}}),yt.each(["get","post"],function(t,r){yt[r]=function(t,e,n,i){return yt.isFunction(e)&&(i=i||n,n=e,e=T),yt.ajax({url:t,type:r,dataType:i,data:e,success:n})}}),yt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return yt.globalEval(t),t}}}),yt.ajaxPrefilter("script",function(t){t.cache===T&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),yt.ajaxTransport("script",function(e){if(e.crossDomain){var i,r=m.head||yt("head")[0]||m.documentElement;return{send:function(t,n){(i=m.createElement("script")).async=!0,e.scriptCharset&&(i.charset=e.scriptCharset),i.src=e.url,i.onload=i.onreadystatechange=function(t,e){!e&&i.readyState&&!/loaded|complete/.test(i.readyState)||(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),i=null,e||n(200,"success"))},r.insertBefore(i,r.firstChild)},abort:function(){i&&i.onload(T,!0)}}}});var Le=[],Ce=/(=)\?(?=&|$)|\?\?/;yt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Le.pop()||yt.expando+"_"+pe++;return this[t]=!0,t}}),yt.ajaxPrefilter("json jsonp",function(t,e,n){var i,r,a,o=!1!==t.jsonp&&(Ce.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ce.test(t.data)&&"data");return o||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=yt.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o?t[o]=t[o].replace(Ce,"$1"+i):!1!==t.jsonp&&(t.url+=(fe.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||yt.error(i+" was not called"),a[0]},t.dataTypes[0]="json",r=f[i],f[i]=function(){a=arguments},n.always(function(){f[i]=r,t[i]&&(t.jsonpCallback=e.jsonpCallback,Le.push(i)),a&&yt.isFunction(r)&&r(a[0]),a=r=T}),"script"):T});var Re,Pe,Oe=0,De=f.ActiveXObject&&function(){var t;for(t in Re)Re[t](T,!0)};function Ne(){try{return new f.XMLHttpRequest}catch(t){}}yt.ajaxSettings.xhr=f.ActiveXObject?function(){return!this.isLocal&&Ne()||function(){try{return new f.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}()}:Ne,Pe=yt.ajaxSettings.xhr(),yt.support.cors=!!Pe&&"withCredentials"in Pe,(Pe=yt.support.ajax=!!Pe)&&yt.ajaxTransport(function(c){var u;if(!c.crossDomain||yt.support.cors)return{send:function(t,o){var s,e,l=c.xhr();if(c.username?l.open(c.type,c.url,c.async,c.username,c.password):l.open(c.type,c.url,c.async),c.xhrFields)for(e in c.xhrFields)l[e]=c.xhrFields[e];c.mimeType&&l.overrideMimeType&&l.overrideMimeType(c.mimeType),c.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest");try{for(e in t)l.setRequestHeader(e,t[e])}catch(t){}l.send(c.hasContent&&c.data||null),u=function(t,e){var n,i,r,a;try{if(u&&(e||4===l.readyState))if(u=T,s&&(l.onreadystatechange=yt.noop,De&&delete Re[s]),e)4!==l.readyState&&l.abort();else{a={},n=l.status,i=l.getAllResponseHeaders(),"string"==typeof l.responseText&&(a.text=l.responseText);try{r=l.statusText}catch(t){r=""}n||!c.isLocal||c.crossDomain?1223===n&&(n=204):n=a.text?200:404}}catch(t){e||o(-1,t)}a&&o(n,r,a,i)},c.async?4===l.readyState?setTimeout(u):(s=++Oe,De&&(Re||(Re={},yt(f).unload(De)),Re[s]=u),l.onreadystatechange=u):u()},abort:function(){u&&u(T,!0)}}});var Ie,Be,Fe=/^(?:toggle|show|hide)$/,ke=RegExp("^(?:([+-])=|)("+b+")([a-z%]*)$","i"),ze=/queueHooks$/,He=[function(e,t,n){var i,r,a,o,s,l,c=this,u={},h=e.style,d=e.nodeType&&Kt(e),p=yt._data(e,"fxshow");for(i in n.queue||(null==(s=yt._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,c.always(function(){c.always(function(){s.unqueued--,yt.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],"inline"===yt.css(e,"display")&&"none"===yt.css(e,"float")&&(yt.support.inlineBlockNeedsLayout&&"inline"!==re(e.nodeName)?h.zoom=1:h.display="inline-block")),n.overflow&&(h.overflow="hidden",yt.support.shrinkWrapBlocks||c.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),t)if(r=t[i],Fe.exec(r)){if(delete t[i],a=a||"toggle"===r,r===(d?"hide":"show"))continue;u[i]=p&&p[i]||yt.style(e,i)}if(!yt.isEmptyObject(u))for(i in p?"hidden"in p&&(d=p.hidden):p=yt._data(e,"fxshow",{}),a&&(p.hidden=!d),d?yt(e).show():c.done(function(){yt(e).hide()}),c.done(function(){var t;for(t in yt._removeData(e,"fxshow"),u)yt.style(e,t,u[t])}),u)o=je(d?p[i]:0,i,c),i in p||(p[i]=o.start,d&&(o.end=o.start,o.start="width"===i||"height"===i?1:0))}],Ue={"*":[function(t,e){var n=this.createTween(t,e),i=n.cur(),r=ke.exec(e),a=r&&r[3]||(yt.cssNumber[t]?"":"px"),o=(yt.cssNumber[t]||"px"!==a&&+i)&&ke.exec(yt.css(n.elem,t)),s=1,l=20;if(o&&o[3]!==a)for(a=a||o[3],r=r||[],o=+i||1;o/=s=s||".5",yt.style(n.elem,t,o+a),s!==(s=n.cur()/i)&&1!==s&&--l;);return r&&(o=n.start=+o||+i||0,n.unit=a,n.end=r[1]?o+(r[1]+1)*r[2]:+r[2]),n}]};function Ge(){return setTimeout(function(){Ie=T}),Ie=yt.now()}function je(t,e,n){for(var i,r=(Ue[e]||[]).concat(Ue["*"]),a=0,o=r.length;a<o;a++)if(i=r[a].call(n,e,t))return i}function Ve(a,t,e){var n,o,i=0,r=He.length,s=yt.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var t=Ie||Ge(),e=Math.max(0,c.startTime+c.duration-t),n=1-(e/c.duration||0),i=0,r=c.tweens.length;i<r;i++)c.tweens[i].run(n);return s.notifyWith(a,[c,n,e]),n<1&&r?e:(s.resolveWith(a,[c]),!1)},c=s.promise({elem:a,props:yt.extend({},t),opts:yt.extend(!0,{specialEasing:{}},e),originalProperties:t,originalOptions:e,startTime:Ie||Ge(),duration:e.duration,tweens:[],createTween:function(t,e){var n=yt.Tween(a,c.opts,t,e,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var e=0,n=t?c.tweens.length:0;if(o)return this;for(o=!0;e<n;e++)c.tweens[e].run(1);return t?s.resolveWith(a,[c,t]):s.rejectWith(a,[c,t]),this}}),u=c.props;for(function(t,e){var n,i,r,a,o;for(n in t)if(i=yt.camelCase(n),r=e[i],a=t[n],yt.isArray(a)&&(r=a[1],a=t[n]=a[0]),n!==i&&(t[i]=a,delete t[n]),(o=yt.cssHooks[i])&&"expand"in o)for(n in a=o.expand(a),delete t[i],a)n in t||(t[n]=a[n],e[n]=r);else e[i]=r}(u,c.opts.specialEasing);i<r;i++)if(n=He[i].call(c,a,u,c.opts))return n;return yt.map(u,je,c),yt.isFunction(c.opts.start)&&c.opts.start.call(a,c),yt.fx.timer(yt.extend(l,{elem:a,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function We(t,e,n,i,r){return new We.prototype.init(t,e,n,i,r)}function qe(t,e){var n,i={height:t},r=0;for(e=e?1:0;r<4;r+=2-e)i["margin"+(n=Jt[r])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function Xe(t){return yt.isWindow(t)?t:9===t.nodeType&&(t.defaultView||t.parentWindow)}yt.Animation=yt.extend(Ve,{tweener:function(t,e){for(var n,i=0,r=(t=yt.isFunction(t)?(e=t,["*"]):t.split(" ")).length;i<r;i++)n=t[i],Ue[n]=Ue[n]||[],Ue[n].unshift(e)},prefilter:function(t,e){e?He.unshift(t):He.push(t)}}),(yt.Tween=We).prototype={constructor:We,init:function(t,e,n,i,r,a){this.elem=t,this.prop=n,this.easing=r||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=a||(yt.cssNumber[n]?"":"px")},cur:function(){var t=We.propHooks[this.prop];return t&&t.get?t.get(this):We.propHooks._default.get(this)},run:function(t){var e,n=We.propHooks[this.prop];return this.pos=e=this.options.duration?yt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):We.propHooks._default.set(this),this}},We.prototype.init.prototype=We.prototype,We.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=yt.css(t.elem,t.prop,""))&&"auto"!==e?e:0:t.elem[t.prop]},set:function(t){yt.fx.step[t.prop]?yt.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[yt.cssProps[t.prop]]||yt.cssHooks[t.prop])?yt.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},We.propHooks.scrollTop=We.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},yt.each(["toggle","show","hide"],function(t,i){var r=yt.fn[i];yt.fn[i]=function(t,e,n){return null==t||"boolean"==typeof t?r.apply(this,arguments):this.animate(qe(i,!0),t,e,n)}}),yt.fn.extend({fadeTo:function(t,e,n,i){return this.filter(Kt).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(e,t,n,i){function r(){var t=Ve(this,yt.extend({},e),o);(a||yt._data(this,"finish"))&&t.stop(!0)}var a=yt.isEmptyObject(e),o=yt.speed(t,n,i);return r.finish=r,a||!1===o.queue?this.each(r):this.queue(o.queue,r)},stop:function(r,t,a){function o(t){var e=t.stop;delete t.stop,e(a)}return"string"!=typeof r&&(a=t,t=r,r=T),t&&!1!==r&&this.queue(r||"fx",[]),this.each(function(){var t=!0,e=null!=r&&r+"queueHooks",n=yt.timers,i=yt._data(this);if(e)i[e]&&i[e].stop&&o(i[e]);else for(e in i)i[e]&&i[e].stop&&ze.test(e)&&o(i[e]);for(e=n.length;e--;)n[e].elem!==this||null!=r&&n[e].queue!==r||(n[e].anim.stop(a),t=!1,n.splice(e,1));!t&&a||yt.dequeue(this,r)})},finish:function(o){return!1!==o&&(o=o||"fx"),this.each(function(){var t,e=yt._data(this),n=e[o+"queue"],i=e[o+"queueHooks"],r=yt.timers,a=n?n.length:0;for(e.finish=!0,yt.queue(this,o,[]),i&&i.stop&&i.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===o&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<a;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete e.finish})}}),yt.each({slideDown:qe("show"),slideUp:qe("hide"),slideToggle:qe("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,i){yt.fn[t]=function(t,e,n){return this.animate(i,t,e,n)}}),yt.speed=function(t,e,n){var i=t&&"object"==typeof t?yt.extend({},t):{complete:n||!n&&e||yt.isFunction(t)&&t,duration:t,easing:n&&e||e&&!yt.isFunction(e)&&e};return i.duration=yt.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in yt.fx.speeds?yt.fx.speeds[i.duration]:yt.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){yt.isFunction(i.old)&&i.old.call(this),i.queue&&yt.dequeue(this,i.queue)},i},yt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},yt.timers=[],yt.fx=We.prototype.init,yt.fx.tick=function(){var t,e=yt.timers,n=0;for(Ie=yt.now();e.length>n;n++)(t=e[n])()||e[n]!==t||e.splice(n--,1);e.length||yt.fx.stop(),Ie=T},yt.fx.timer=function(t){t()&&yt.timers.push(t)&&yt.fx.start()},yt.fx.interval=13,yt.fx.start=function(){Be=Be||setInterval(yt.fx.tick,yt.fx.interval)},yt.fx.stop=function(){clearInterval(Be),Be=null},yt.fx.speeds={slow:600,fast:200,_default:400},yt.fx.step={},yt.expr&&yt.expr.filters&&(yt.expr.filters.animated=function(e){return yt.grep(yt.timers,function(t){return e===t.elem}).length}),yt.fn.offset=function(e){if(arguments.length)return e===T?this:this.each(function(t){yt.offset.setOffset(this,e,t)});var t,n,i={top:0,left:0},r=this[0],a=r&&r.ownerDocument;return a?(t=a.documentElement,yt.contains(t,r)?(typeof r.getBoundingClientRect!==v&&(i=r.getBoundingClientRect()),n=Xe(a),{top:i.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:i.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):i):void 0},yt.offset={setOffset:function(t,e,n){var i=yt.css(t,"position");"static"===i&&(t.style.position="relative");var r,a,o=yt(t),s=o.offset(),l=yt.css(t,"top"),c=yt.css(t,"left"),u={},h=("absolute"===i||"fixed"===i)&&-1<yt.inArray("auto",[l,c])?(a=(r=o.position()).top,r.left):(a=parseFloat(l)||0,parseFloat(c)||0);yt.isFunction(e)&&(e=e.call(t,n,s)),null!=e.top&&(u.top=e.top-s.top+a),null!=e.left&&(u.left=e.left-s.left+h),"using"in e?e.using.call(t,u):o.css(u)}},yt.fn.extend({position:function(){if(this[0]){var t,e,n={top:0,left:0},i=this[0];return"fixed"===yt.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),yt.nodeName(t[0],"html")||(n=t.offset()),n.top+=yt.css(t[0],"borderTopWidth",!0),n.left+=yt.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-yt.css(i,"marginTop",!0),left:e.left-n.left-yt.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||a;t&&!yt.nodeName(t,"html")&&"static"===yt.css(t,"position");)t=t.offsetParent;return t||a})}}),yt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,r){var a=/Y/.test(r);yt.fn[e]=function(t){return yt.access(this,function(t,e,n){var i=Xe(t);return n===T?i?r in i?i[r]:i.document.documentElement[e]:t[e]:(i?i.scrollTo(a?yt(i).scrollLeft():n,a?n:yt(i).scrollTop()):t[e]=n,T)},e,t,arguments.length,null)}}),yt.each({Height:"height",Width:"width"},function(a,o){yt.each({padding:"inner"+a,content:o,"":"outer"+a},function(i,t){yt.fn[t]=function(t,e){var n=arguments.length&&(i||"boolean"!=typeof t),r=i||(!0===t||!0===e?"margin":"border");return yt.access(this,function(t,e,n){var i;return yt.isWindow(t)?t.document.documentElement["client"+a]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+a],i["scroll"+a],t.body["offset"+a],i["offset"+a],i["client"+a])):n===T?yt.css(t,e,r):yt.style(t,e,n,r)},o,n?t:T,n,null)}})}),yt.fn.size=function(){return this.length},yt.fn.andSelf=yt.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=yt:(f.jQuery=f.$=yt,"function"==typeof define&&define.amd&&define("jquery",[],function(){return yt}))}(window),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).window=t.window||{})}(this,function(t){"use strict";function n(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}function E(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function z(t){return"string"==typeof t}function p(t){return"function"==typeof t}function A(t){return"number"==typeof t}function r(t){return void 0===t}function L(t){return"object"==typeof t}function I(t){return!1!==t}function e(){return"undefined"!=typeof window}function C(t){return p(t)||z(t)}function i(t){return(bt=pt(t,ae))&&sn}function H(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")}function R(t,e){return!e&&console.warn(t)}function o(t,e){return t&&(ae[t]=e)&&bt&&(bt[t]=e)||ae}function P(){return 0}function B(t){var e,n,i=t[0];if(L(i)||p(i)||(t=[t]),!(e=(i._gsap||{}).harness)){for(n=de.length;n--&&!de[n].targetTest(i););e=de[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new Oe(t[n],e)))||t.splice(n,1);return t}function F(t){return t._gsap||B(ve(t))[0]._gsap}function a(t,e,n){return(n=t[e])&&p(n)?t[e]():r(n)&&t.getAttribute&&t.getAttribute(e)||n}function f(t,e){return(t=t.split(",")).forEach(e)||t}function k(t){return Math.round(1e5*t)/1e5||0}function s(t,e,n){var i,r=A(t[1]),a=(r?2:1)+(e<2?0:1),o=t[a];if(r&&(o.duration=t[1]),o.parent=n,e){for(i=o;n&&!("immediateRender"in i);)i=n.vars.defaults||{},n=I(n.vars.inherit)&&n.parent;o.immediateRender=I(i.immediateRender),e<2?o.runBackwards=1:o.startAt=t[a-1]}return o}function U(){var t,e,n=se.length,i=se.slice(0);for(le={},t=se.length=0;t<n;t++)(e=i[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)}function l(t,e,n,i){se.length&&U(),t.render(e,n,i),se.length&&U()}function c(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(re).length<2?e:z(t)?t.trim():t}function u(t){return t}function G(t,e){for(var n in e)n in t||(t[n]=e[n]);return t}function h(t,e){for(var n in e)n in t||"duration"===n||"ease"===n||(t[n]=e[n])}function d(t,e){for(var n in e)t[n]=L(e[n])?d(t[n]||(t[n]={}),e[n]):e[n];return t}function j(t,e){var n,i={};for(n in t)n in e||(i[n]=t[n]);return i}function O(t){var e=t.parent||vt,n=t.keyframes?h:G;if(I(t.inherit))for(;e;)n(t,e.vars.defaults),e=e.parent||e._dp;return t}function m(t,e,n,i){void 0===n&&(n="_first"),void 0===i&&(i="_last");var r=e._prev,a=e._next;r?r._next=a:t[n]===e&&(t[n]=a),a?a._prev=r:t[i]===e&&(t[i]=r),e._next=e._prev=e.parent=null}function V(t,e){!t.parent||e&&!t.parent.autoRemoveChildren||t.parent.remove(t),t._act=0}function g(t,e){if(!e||e._end>t._dur||e._start<0)for(var n=t;n;)n._dirty=1,n=n.parent;return t}function v(t){return t._repeat?ft(t._tTime,t=t.duration()+t._rDelay)*t:0}function y(t,e){return(t-e._start)*e._ts+(0<=e._ts?0:e._dirty?e.totalDuration():e._tDur)}function T(t){return t._end=k(t._start+(t._tDur/Math.abs(t._ts||t._rts||Vt)||0))}function _(t,e){var n=t._dp;return n&&n.smoothChildTiming&&t._ts&&(t._start=k(t._dp._time-(0<t._ts?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),T(t),n._dirty||g(n,t)),t}function D(t,e){var n;if((e._time||e._initted&&!e._dur)&&(n=y(t.rawTime(),e),(!e._dur||me(0,e.totalDuration(),n)-e._tTime>Vt)&&e.render(n,!0)),g(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)0<=n.rawTime()&&n.totalTime(n._tTime),n=n._dp;t._zTime=-Vt}}function x(t,e,n,i){return e.parent&&V(e),e._start=k(n+e._delay),e._end=k(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),function(t,e,n,i,r){void 0===n&&(n="_first"),void 0===i&&(i="_last");var a,o=t[i];if(r)for(a=e[r];o&&o[r]>a;)o=o._prev;o?(e._next=o._next,o._next=e):(e._next=t[n],t[n]=e),e._next?e._next._prev=e:t[i]=e,e._prev=o,e.parent=e._dp=t}(t,e,"_first","_last",t._sort?"_start":0),t._recent=e,i||D(t,e),t}function N(t,e){return(ae.ScrollTrigger||H("scrollTrigger",e))&&ae.ScrollTrigger.create(e,t)}function b(t,e,n,i){return function t(e,n){var i,r,a,o,s,l,c,u,h,d,p,f,m,g=e.vars,v=g.ease,y=g.startAt,_=g.immediateRender,x=g.lazy,b=g.onUpdate,w=g.onUpdateParams,T=g.callbackScope,M=g.runBackwards,S=g.yoyoEase,E=g.keyframes,A=g.autoRevert,L=e._dur,C=e._startAt,R=e._targets,P=e.parent,O=P&&"nested"===P.data?P.parent._targets:R,D="auto"===e._overwrite,N=e.timeline;if(!N||E&&v||(v="none"),e._ease=Le(v,Gt.ease),e._yEase=S?Ae(Le(!0===S?v:S,Gt.ease)):0,S&&e._yoyo&&!e._repeat&&(S=e._yEase,e._yEase=e._ease,e._ease=S),!N){if(f=(u=R[0]?F(R[0]).harness:0)&&g[u.prop],i=j(g,oe),C&&C.render(-1,!0).kill(),y){if(V(e._startAt=Ge.set(R,G({data:"isStart",overwrite:!1,parent:P,immediateRender:!0,lazy:I(x),startAt:null,delay:0,onUpdate:b,onUpdateParams:w,callbackScope:T,stagger:0},y))),_)if(0<n)A||(e._startAt=0);else if(L&&!(n<0&&C))return void(n&&(e._zTime=n))}else if(M&&L)if(C)A||(e._startAt=0);else if(n&&(_=!1),a=G({overwrite:!1,data:"isFromStart",lazy:_&&I(x),immediateRender:_,stagger:0,parent:P},i),f&&(a[u.prop]=f),V(e._startAt=Ge.set(R,a)),_){if(!n)return}else t(e._startAt,Vt);for(e._pt=0,x=L&&I(x)||x&&!L,r=0;r<R.length;r++){if(c=(s=R[r])._gsap||B(R)[r]._gsap,e._ptLookup[r]=d={},le[c.id]&&U(),p=O===R?r:O.indexOf(s),u&&!1!==(h=new u).init(s,f||i,e,p,O)&&(e._pt=o=new nn(e._pt,s,h.name,0,1,h.render,h,0,h.priority),h._props.forEach(function(t){d[t]=o}),h.priority&&(l=1)),!u||f)for(a in i)ce[a]&&(h=Be(a,i,e,p,s,O))?h.priority&&(l=1):d[a]=o=Fe.call(e,s,a,"get",i[a],p,O,0,g.stringFilter);e._op&&e._op[r]&&e.kill(s,e._op[r]),D&&e._pt&&(ke=e,vt.killTweensOf(s,d,e.globalTime(0)),m=!e.parent,ke=0),e._pt&&x&&(le[c.id]=1)}l&&en(e),e._onInit&&e._onInit(e)}e._from=!N&&!!g.runBackwards,e._onUpdate=b,e._initted=(!e._op||e._pt)&&!m}(t,e),!t._initted||!n&&t._pt&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&Tt!==we.frame&&(se.push(t),t._lazy=[e,i])}function w(t,e,n,i){var r=t._repeat,a=k(e)||0,o=t._tTime/t._tDur;return o&&!i&&(t._time*=a/t._dur),t._dur=a,t._tDur=r?r<0?1e10:k(a*(r+1)+t._rDelay*r):a,o&&!i?_(t,t._tTime=t._tDur*o):t.parent&&T(t),n||g(t.parent,t),t}function M(t){return t instanceof Ie?g(t):w(t,t._dur)}function S(t,e){var n,i,r=t.labels,a=t._recent||fe,o=t.duration()>=jt?a.endTime(!1):t._dur;return z(e)&&(isNaN(e)||e in r)?"<"===(n=e.charAt(0))||">"===n?("<"===n?a._start:a.endTime(0<=a._repeat))+(parseFloat(e.substr(1))||0):(n=e.indexOf("="))<0?(e in r||(r[e]=o),r[e]):(i=+(e.charAt(n-1)+e.substr(n+1)),1<n?S(t,e.substr(0,n-1))+i:o+i):null==e?o:+e}function W(t,e){return t||0===t?e(t):e}function q(t){return(t+"").substr((parseFloat(t)+"").length)}function X(t,e){return t&&L(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&L(t[0]))&&!t.nodeType&&t!==yt}function Y(t){return t.sort(function(){return.5-Math.random()})}function Z(t){if(p(t))return t;var f=L(t)?t:{each:t},m=Le(f.ease),g=f.from||0,v=parseFloat(f.base)||0,y={},e=0<g&&g<1,_=isNaN(g)||e,x=f.axis,b=g,w=g;return z(g)?b=w={center:.5,edges:.5,end:1}[g]||0:!e&&_&&(b=g[0],w=g[1]),function(t,e,n){var i,r,a,o,s,l,c,u,h,d=(n||f).length,p=y[d];if(!p){if(!(h="auto"===f.grid?0:(f.grid||[1,jt])[1])){for(c=-jt;c<(c=n[h++].getBoundingClientRect().left)&&h<d;);h--}for(p=y[d]=[],i=_?Math.min(h,d)*b-.5:g%h,r=_?d*w/h-.5:g/h|0,u=jt,l=c=0;l<d;l++)a=l%h-i,o=r-(l/h|0),p[l]=s=x?Math.abs("y"===x?o:a):Yt(a*a+o*o),c<s&&(c=s),s<u&&(u=s);"random"===g&&Y(p),p.max=c-u,p.min=u,p.v=d=(parseFloat(f.amount)||parseFloat(f.each)*(d<h?d-1:x?"y"===x?d/h:h:Math.max(h,d/h))||0)*("edges"===g?-1:1),p.b=d<0?v-d:v,p.u=q(f.amount||f.each)||0,m=m&&d<0?Ae(m):m}return d=(p[t]-p.min)/p.max||0,k(p.b+(m?m(d):d)*p.v)+p.u}}function J(e){var n=e<1?Math.pow(10,(e+"").length-2):1;return function(t){return Math.floor(Math.round(parseFloat(t)/e)*e*n)/n+(A(t)?0:q(t))}}function Q(l,t){var c,u,e=$t(l);return!e&&L(l)&&(c=e=l.radius||jt,l.values?(l=ve(l.values),(u=!A(l[0]))&&(c*=c)):l=J(l.increment)),W(t,e?p(l)?function(t){return u=l(t),Math.abs(u-t)<=c?u:t}:function(t){for(var e,n,i=parseFloat(u?t.x:t),r=parseFloat(u?t.y:0),a=jt,o=0,s=l.length;s--;)(e=u?(e=l[s].x-i)*e+(n=l[s].y-r)*n:Math.abs(l[s]-i))<a&&(a=e,o=s);return o=!c||a<=c?l[o]:t,u||o===t||A(t)?o:o+q(t)}:J(l))}function $(t,e,n,i){return W($t(t)?!e:!0===n?!!(n=0):!i,function(){return $t(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((t+Math.random()*(e-t))/n)*n*i)/i})}function K(e,n,t){return W(t,function(t){return e[~~n(t)]})}function tt(t){for(var e,n,i,r,a=0,o="";~(e=t.indexOf("random(",a));)i=t.indexOf(")",e),r="["===t.charAt(e+7),n=t.substr(e+7,i-e-7).match(r?re:Kt),o+=t.substr(a,e-a)+$(r?n:+n[0],r?0:+n[1],+n[2]||1e-5),a=i+1;return o+t.substr(a,t.length-a)}function et(t,e,n){var i,r,a,o=t.labels,s=jt;for(i in o)(r=o[i]-e)<0==!!n&&r&&s>(r=Math.abs(r))&&(a=i,s=r);return a}function nt(t){return V(t),t.progress()<1&&gt(t,"onInterrupt"),t}function it(t,e,n){return(6*(t=t<0?t+1:1<t?t-1:t)<1?e+(n-e)*t*6:t<.5?n:3*t<2?e+(n-e)*(2/3-t)*6:e)*ye+.5|0}function rt(t,e,n){var i,r,a,o,s,l,c,u,h,d,p=t?A(t)?[t>>16,t>>8&ye,t&ye]:0:_e.black;if(!p){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),_e[t])p=_e[t];else if("#"===t.charAt(0))4===t.length&&(t="#"+(i=t.charAt(1))+i+(r=t.charAt(2))+r+(a=t.charAt(3))+a),p=[(t=parseInt(t.substr(1),16))>>16,t>>8&ye,t&ye];else if("hsl"===t.substr(0,3))if(p=d=t.match(Kt),e){if(~t.indexOf("="))return p=t.match(te),n&&p.length<4&&(p[3]=1),p}else o=+p[0]%360/360,s=p[1]/100,i=2*(l=p[2]/100)-(r=l<=.5?l*(s+1):l+s-l*s),3<p.length&&(p[3]*=1),p[0]=it(o+1/3,i,r),p[1]=it(o,i,r),p[2]=it(o-1/3,i,r);else p=t.match(Kt)||_e.transparent;p=p.map(Number)}return e&&!d&&(i=p[0]/ye,r=p[1]/ye,a=p[2]/ye,l=((c=Math.max(i,r,a))+(u=Math.min(i,r,a)))/2,c===u?o=s=0:(h=c-u,s=.5<l?h/(2-c-u):h/(c+u),o=c===i?(r-a)/h+(r<a?6:0):c===r?(a-i)/h+2:(i-r)/h+4,o*=60),p[0]=~~(o+.5),p[1]=~~(100*s+.5),p[2]=~~(100*l+.5)),n&&p.length<4&&(p[3]=1),p}function at(t){var n=[],i=[],r=-1;return t.split(xe).forEach(function(t){var e=t.match(ee)||[];n.push.apply(n,e),i.push(r+=e.length+1)}),n.c=i,n}function ot(t,e,n){var i,r,a,o,s="",l=(t+s).match(xe),c=e?"hsla(":"rgba(",u=0;if(!l)return t;if(l=l.map(function(t){return(t=rt(t,e,1))&&c+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"}),n&&(a=at(t),(i=n.c).join(s)!==a.c.join(s)))for(o=(r=t.replace(xe,"1").split(ee)).length-1;u<o;u++)s+=r[u]+(~i.indexOf(u)?l.shift()||c+"0,0,0,0)":(a.length?a:l.length?l:n).shift());if(!r)for(o=(r=t.split(xe)).length-1;u<o;u++)s+=r[u]+l[u];return s+r[o]}function st(t){var e,n=t.join(" ");if(xe.lastIndex=0,xe.test(n))return e=be.test(n),t[1]=ot(t[1],e),t[0]=ot(t[0],e,at(t[1])),!0}function lt(t,e){for(var n,i=t._first;i;)i instanceof Ie?lt(i,e):!i.vars.yoyoEase||i._yoyo&&i._repeat||i._yoyo===e||(i.timeline?lt(i.timeline,e):(n=i._ease,i._ease=i._yEase,i._yEase=n,i._yoyo=e)),i=i._next}function ct(t,e,n,i){void 0===n&&(n=function(t){return 1-e(1-t)}),void 0===i&&(i=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var r,a={easeIn:e,easeOut:n,easeInOut:i};return f(t,function(t){for(var e in Me[t]=ae[t]=a,Me[r=t.toLowerCase()]=n,a)Me[r+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=Me[t+"."+e]=a[e]}),1}function ut(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}}function ht(n,t,e){function i(t){return 1===t?1:r*Math.pow(2,-10*t)*Jt((t-a)*s)+1}var r=1<=t?t:1,a=(s=(e||(n?.3:.45))/(t<1?t:1))/Wt*(Math.asin(1/r)||0),o="out"===n?i:"in"===n?function(t){return 1-i(1-t)}:ut(i),s=Wt/s;return o.config=function(t,e){return ht(n,t,e)},o}function dt(e,n){function i(t){return t?--t*t*((n+1)*t+n)+1:0}void 0===n&&(n=1.70158);var t="out"===e?i:"in"===e?function(t){return 1-i(1-t)}:ut(i);return t.config=function(t){return dt(e,t)},t}function pt(t,e){for(var n in e)t[n]=e[n];return t}function ft(t,e){return(t/=e)&&~~t===t?~~t-1:~~t}function mt(e,t,n,i,r){var a=t-e,o=i-n;return W(r,function(t){return n+((t-e)/a*o||0)})}function gt(t,e,n){var i,r,a=t.vars,o=a[e];return o&&(i=a[e+"Params"],r=a.callbackScope||t,n&&se.length&&U(),i?o.apply(r,i):o.call(r))}var vt,yt,_t,xt,bt,wt,Tt,Mt,St,Et,At,Lt,Ct,Rt,Pt,Ot,Dt,Nt,It,Bt,Ft,kt,zt,Ht,Ut={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Gt={duration:.5,overwrite:!1,delay:0},jt=1e8,Vt=1/jt,Wt=2*Math.PI,qt=Wt/4,Xt=0,Yt=Math.sqrt,Zt=Math.cos,Jt=Math.sin,Qt="function"==typeof ArrayBuffer?ArrayBuffer.isView:function(){},$t=Array.isArray,Kt=/(?:-?\.?\d|\.)+/gi,te=/[-+=.]*\d+[.e\-+]*\d*[e\-\+]*\d*/g,ee=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,ne=/[-+=.]*\d+(?:\.|e-|e)*\d*/gi,ie=/[+-]=-?[\.\d]+/,re=/[#\-+.]*\b[a-z\d-=+%.]+/gi,ae={},oe={},se=[],le={},ce={},ue={},he=30,de=[],pe="",fe={_start:0,endTime:P},me=function(t,e,n){return n<t?t:e<n?e:n},ge=[].slice,ve=function(t,e){return!z(t)||e||!_t&&Te()?$t(t)?(n=e,void 0===i&&(i=[]),t.forEach(function(t){return z(t)&&!n||X(t,1)?i.push.apply(i,ve(t)):i.push(t)})||i):X(t)?ge.call(t,0):t?[t]:[]:ge.call(xt.querySelectorAll(t),0);var n,i},ye=255,_e={aqua:[0,ye,ye],lime:[0,ye,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,ye],navy:[0,0,128],white:[ye,ye,ye],olive:[128,128,0],yellow:[ye,ye,0],orange:[ye,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[ye,0,0],pink:[ye,192,203],cyan:[0,ye,ye],transparent:[ye,ye,ye,0]},xe=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(t in _e)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),be=/hsl[a]?\(/,we=(Ot=Date.now,Dt=500,Nt=33,It=Ot(),Bt=It,kt=Ft=1e3/240,Ct={time:0,frame:0,tick:function(){Ce(!0)},deltaRatio:function(t){return Rt/(1e3/(t||60))},wake:function(){wt&&(!_t&&e()&&(yt=_t=window,xt=yt.document||{},ae.gsap=sn,(yt.gsapVersions||(yt.gsapVersions=[])).push(sn.version),i(bt||yt.GreenSockGlobals||!yt.gsap&&yt||{}),Lt=yt.requestAnimationFrame),Et&&Ct.sleep(),At=Lt||function(t){return setTimeout(t,kt-1e3*Ct.time+1|0)},St=1,Ce(2))},sleep:function(){(Lt?yt.cancelAnimationFrame:clearTimeout)(Et),St=0,At=P},lagSmoothing:function(t,e){Dt=t||1e8,Nt=Math.min(e,Dt,0)},fps:function(t){Ft=1e3/(t||240),kt=1e3*Ct.time+Ft},add:function(t){zt.indexOf(t)<0&&zt.push(t),Te()},remove:function(t){var e;~(e=zt.indexOf(t))&&zt.splice(e,1)&&e<=Pt&&Pt--},_listeners:zt=[]}),Te=function(){return!St&&we.wake()},Me={},Se=/^[\d.\-M][\d.\-,\s]/,Ee=/["']/g,Ae=function(e){return function(t){return 1-e(1-t)}},Le=function(t,e){return t&&(p(t)?t:Me[t]||(s=((n=t)+"").split("("),(l=Me[s[0]])&&1<s.length&&l.config?l.config.apply(null,~n.indexOf("{")?[function(t){for(var e,n,i,r={},a=t.substr(1,t.length-3).split(":"),o=a[0],s=1,l=a.length;s<l;s++)n=a[s],e=s!==l-1?n.lastIndexOf(","):n.length,i=n.substr(0,e),r[o]=isNaN(i)?i.replace(Ee,"").trim():+i,o=n.substr(e+1).trim();return r}(s[1])]:(r=(i=n).indexOf("(")+1,a=i.indexOf(")"),o=i.indexOf("(",r),i.substring(r,~o&&o<a?i.indexOf(")",a+1):a).split(",").map(c))):Me._CE&&Se.test(n)?Me._CE("",n):l))||e;var n,i,r,a,o,s,l};function Ce(t){var e,n,i,r,a=Ot()-Bt,o=!0===t;if(Dt<a&&(It+=a-Nt),(0<(e=(i=(Bt+=a)-It)-kt)||o)&&(r=++Ct.frame,Rt=i-1e3*Ct.time,Ct.time=i/=1e3,kt+=e+(Ft<=e?4:Ft-e),n=1),o||(Et=At(Ce)),n)for(Pt=0;Pt<zt.length;Pt++)zt[Pt](i,Rt,r,t)}function Re(t){return t<1/2.75?Ht*t*t:t<.7272727272727273?Ht*Math.pow(t-1.5/2.75,2)+.75:t<.9090909090909092?Ht*(t-=2.25/2.75)*t+.9375:Ht*Math.pow(t-2.625/2.75,2)+.984375}f("Linear,Quad,Cubic,Quart,Quint,Strong",function(t,e){var n=e<5?e+1:e;ct(t+",Power"+(n-1),e?function(t){return Math.pow(t,n)}:function(t){return t},function(t){return 1-Math.pow(1-t,n)},function(t){return t<.5?Math.pow(2*t,n)/2:1-Math.pow(2*(1-t),n)/2})}),Me.Linear.easeNone=Me.none=Me.Linear.easeIn,ct("Elastic",ht("in"),ht("out"),ht()),Ht=7.5625,ct("Bounce",function(t){return 1-Re(1-t)},Re),ct("Expo",function(t){return t?Math.pow(2,10*(t-1)):0}),ct("Circ",function(t){return-(Yt(1-t*t)-1)}),ct("Sine",function(t){return 1===t?1:1-Zt(t*qt)}),ct("Back",dt("in"),dt("out"),dt()),Me.SteppedEase=Me.steps=ae.SteppedEase={config:function(t,e){void 0===t&&(t=1);var n=1/t,i=t+(e?0:1),r=e?1:0;return function(t){return((i*me(0,.99999999,t)|0)+r)*n}}},Gt.ease=Me["quad.out"],f("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(t){return pe+=t+","+t+"Params,"});var Pe,Oe=function(t,e){this.id=Xt++,(t._gsap=this).target=t,this.harness=e,this.get=e?e.get:a,this.set=e?e.getSetter:Qe},De=((Pe=Ne.prototype).delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},Pe.duration=function(t){return arguments.length?this.totalDuration(0<this._repeat?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},Pe.totalDuration=function(t){return arguments.length?(this._dirty=0,w(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},Pe.totalTime=function(t,e){if(Te(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(_(this,t);n.parent;)n.parent._time!==n._start+(0<=n._ts?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(0<this._ts&&t<this._tDur||this._ts<0&&0<t||!this._tDur&&!t)&&x(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===Vt||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),l(this,t,e)),this},Pe.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+v(this))%this._dur||(t?this._dur:0),e):this._time},Pe.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},Pe.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+v(this),e):this.duration()?Math.min(1,this._time/this._dur):this.ratio},Pe.iteration=function(t,e){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*n,e):this._repeat?ft(this._tTime,n)+1:1},Pe.timeScale=function(t){if(!arguments.length)return this._rts===-Vt?0:this._rts;if(this._rts===t)return this;var e=this.parent&&this._ts?y(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||t===-Vt?0:this._rts,function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t}(this.totalTime(me(-this._delay,this._tDur,e),!0))},Pe.paused=function(t){return arguments.length?(this._ps!==t&&((this._ps=t)?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Te(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&(this._tTime-=Vt)&&Math.abs(this._zTime)!==Vt))),this):this._ps},Pe.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return!e||!e._sort&&this.parent||x(e,this,t-this._delay),this}return this._start},Pe.endTime=function(t){return this._start+(I(t)?this.totalDuration():this.duration())/Math.abs(this._ts)},Pe.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?y(e.rawTime(t),this):this._tTime:this._tTime},Pe.globalTime=function(t){for(var e=this,n=arguments.length?t:e.rawTime();e;)n=e._start+n/(e._ts||1),e=e._dp;return n},Pe.repeat=function(t){return arguments.length?(this._repeat=t,M(this)):this._repeat},Pe.repeatDelay=function(t){return arguments.length?(this._rDelay=t,M(this)):this._rDelay},Pe.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},Pe.seek=function(t,e){return this.totalTime(S(this,t),I(e))},Pe.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,I(e))},Pe.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},Pe.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},Pe.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},Pe.resume=function(){return this.paused(!1)},Pe.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-Vt:0)),this):this._rts<0},Pe.invalidate=function(){return this._initted=0,this._zTime=-Vt,this},Pe.isActive=function(){var t,e=this.parent||this._dp,n=this._start;return!(e&&!(this._ts&&this._initted&&e.isActive()&&(t=e.rawTime(!0))>=n&&t<this.endTime(!0)-Vt))},Pe.eventCallback=function(t,e,n){var i=this.vars;return 1<arguments.length?(e?(i[t]=e,n&&(i[t+"Params"]=n),"onUpdate"===t&&(this._onUpdate=e)):delete i[t],this):i[t]},Pe.then=function(i){var r=this;return new Promise(function(e){function t(){var t=r.then;r.then=null,p(n)&&(n=n(r))&&(n.then||n===r)&&(r.then=t),e(n),r.then=t}var n=p(i)?i:u;r._initted&&1===r.totalProgress()&&0<=r._ts||!r._tTime&&r._ts<0?t():r._prom=t})},Pe.kill=function(){nt(this)},Ne);function Ne(t,e){var n=t.parent||vt;this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,w(this,+t.duration,1,1),this.data=t.data,St||we.wake(),n&&x(n,this,e||0===e?e:n._time,1),t.reversed&&this.reverse(),t.paused&&this.paused(!0)}G(De.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Vt,_prom:0,_ps:!1,_rts:1});var Ie=function(i){function t(t,e){var n;return void 0===t&&(t={}),(n=i.call(this,t,e)||this).labels={},n.smoothChildTiming=!!t.smoothChildTiming,n.autoRemoveChildren=!!t.autoRemoveChildren,n._sort=I(t.sortChildren),n.parent&&D(n.parent,E(n)),t.scrollTrigger&&N(E(n),t.scrollTrigger),n}n(t,i);var e=t.prototype;return e.to=function(t,e,n,i){return new Ge(t,s(arguments,0,this),S(this,A(e)?i:n)),this},e.from=function(t,e,n,i){return new Ge(t,s(arguments,1,this),S(this,A(e)?i:n)),this},e.fromTo=function(t,e,n,i,r){return new Ge(t,s(arguments,2,this),S(this,A(e)?r:i)),this},e.set=function(t,e,n){return e.duration=0,e.parent=this,O(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new Ge(t,e,S(this,n),1),this},e.call=function(t,e,n){return x(this,Ge.delayedCall(0,t,e),S(this,n))},e.staggerTo=function(t,e,n,i,r,a,o){return n.duration=e,n.stagger=n.stagger||i,n.onComplete=a,n.onCompleteParams=o,n.parent=this,new Ge(t,n,S(this,r)),this},e.staggerFrom=function(t,e,n,i,r,a,o){return n.runBackwards=1,O(n).immediateRender=I(n.immediateRender),this.staggerTo(t,e,n,i,r,a,o)},e.staggerFromTo=function(t,e,n,i,r,a,o,s){return i.startAt=n,O(i).immediateRender=I(i.immediateRender),this.staggerTo(t,e,i,r,a,o,s)},e.render=function(t,e,n){var i,r,a,o,s,l,c,u,h,d,p,f,m=this._time,g=this._dirty?this.totalDuration():this._tDur,v=this._dur,y=this!==vt&&g-Vt<t&&0<=t?g:t<Vt?0:t,_=this._zTime<0!=t<0&&(this._initted||!v);if(y!==this._tTime||n||_){if(m!==this._time&&v&&(y+=this._time-m,t+=this._time-m),i=y,h=this._start,l=!(u=this._ts),_&&(v||(m=this._zTime),!t&&e||(this._zTime=t)),this._repeat&&(p=this._yoyo,i=k(y%(s=v+this._rDelay)),y===g?(o=this._repeat,i=v):((o=~~(y/s))&&o===y/s&&(i=v,o--),v<i&&(i=v)),d=ft(this._tTime,s),!m&&this._tTime&&d!==o&&(d=o),p&&1&o&&(i=v-i,f=1),o!==d&&!this._lock)){var x=p&&1&d,b=x===(p&&1&o);if(o<d&&(x=!x),m=x?0:v,this._lock=1,this.render(m||(f?0:k(o*s)),e,!v)._lock=0,!e&&this.parent&&gt(this,"onRepeat"),this.vars.repeatRefresh&&!f&&(this.invalidate()._lock=1),m!==this._time||l!=!this._ts)return this;if(v=this._dur,g=this._tDur,b&&(this._lock=2,m=x?v+1e-4:-1e-4,this.render(m,!0),this.vars.repeatRefresh&&!f&&this.invalidate()),this._lock=0,!this._ts&&!l)return this;lt(this,f)}if(this._hasPause&&!this._forcing&&this._lock<2&&(c=function(t,e,n){var i;if(e<n)for(i=t._first;i&&i._start<=n;){if(!i._dur&&"isPause"===i.data&&i._start>e)return i;i=i._next}else for(i=t._last;i&&i._start>=n;){if(!i._dur&&"isPause"===i.data&&i._start<e)return i;i=i._prev}}(this,k(m),k(i)))&&(y-=i-(i=c._start)),this._tTime=y,this._time=i,this._act=!u,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t),m||!i||e||gt(this,"onStart"),m<=i&&0<=t)for(r=this._first;r;){if(a=r._next,(r._act||i>=r._start)&&r._ts&&c!==r){if(r.parent!==this)return this.render(t,e,n);if(r.render(0<r._ts?(i-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(i-r._start)*r._ts,e,n),i!==this._time||!this._ts&&!l){c=0,a&&(y+=this._zTime=-Vt);break}}r=a}else{r=this._last;for(var w=t<0?t:i;r;){if(a=r._prev,(r._act||w<=r._end)&&r._ts&&c!==r){if(r.parent!==this)return this.render(t,e,n);if(r.render(0<r._ts?(w-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(w-r._start)*r._ts,e,n),i!==this._time||!this._ts&&!l){c=0,a&&(y+=this._zTime=w?-Vt:Vt);break}}r=a}}if(c&&!e&&(this.pause(),c.render(m<=i?0:-Vt)._zTime=m<=i?1:-1,this._ts))return this._start=h,T(this),this.render(t,e,n);this._onUpdate&&!e&&gt(this,"onUpdate",!0),(y===g&&g>=this.totalDuration()||!y&&m)&&(h!==this._start&&Math.abs(u)===Math.abs(this._ts)||this._lock||(!t&&v||!(y===g&&0<this._ts||!y&&this._ts<0)||V(this,1),e||t<0&&!m||!y&&!m||(gt(this,y===g?"onComplete":"onReverseComplete",!0),!this._prom||y<g&&0<this.timeScale()||this._prom())))}return this},e.add=function(t,e){var n=this;if(A(e)||(e=S(this,e)),!(t instanceof De)){if($t(t))return t.forEach(function(t){return n.add(t,e)}),this;if(z(t))return this.addLabel(t,e);if(!p(t))return this;t=Ge.delayedCall(0,t)}return this!==t?x(this,t,e):this},e.getChildren=function(t,e,n,i){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===i&&(i=-jt);for(var r=[],a=this._first;a;)a._start>=i&&(a instanceof Ge?e&&r.push(a):(n&&r.push(a),t&&r.push.apply(r,a.getChildren(!0,e,n)))),a=a._next;return r},e.getById=function(t){for(var e=this.getChildren(1,1,1),n=e.length;n--;)if(e[n].vars.id===t)return e[n]},e.remove=function(t){return z(t)?this.removeLabel(t):p(t)?this.killTweensOf(t):(m(this,t),t===this._recent&&(this._recent=this._last),g(this))},e.totalTime=function(t,e){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=k(we.time-(0<this._ts?t/this._ts:(this.totalDuration()-t)/-this._ts))),i.prototype.totalTime.call(this,t,e),this._forcing=0,this):this._tTime},e.addLabel=function(t,e){return this.labels[t]=S(this,e),this},e.removeLabel=function(t){return delete this.labels[t],this},e.addPause=function(t,e,n){var i=Ge.delayedCall(0,e||P,n);return i.data="isPause",this._hasPause=1,x(this,i,S(this,t))},e.removePause=function(t){var e=this._first;for(t=S(this,t);e;)e._start===t&&"isPause"===e.data&&V(e),e=e._next},e.killTweensOf=function(t,e,n){for(var i=this.getTweensOf(t,n),r=i.length;r--;)ke!==i[r]&&i[r].kill(t,e);return this},e.getTweensOf=function(t,e){for(var n,i=[],r=ve(t),a=this._first,o=A(e);a;)a instanceof Ge?function(t,e){for(var n=e.length,i=0;t.indexOf(e[i])<0&&++i<n;);return i<n}(a._targets,r)&&(o?(!ke||a._initted&&a._ts)&&a.globalTime(0)<=e&&a.globalTime(a.totalDuration())>e:!e||a.isActive())&&i.push(a):(n=a.getTweensOf(r,e)).length&&i.push.apply(i,n),a=a._next;return i},e.tweenTo=function(t,e){e=e||{};var n=this,i=S(n,t),r=e.startAt,a=e.onStart,o=e.onStartParams,s=Ge.to(n,G(e,{ease:"none",lazy:!1,time:i,duration:e.duration||Math.abs((i-(r&&"time"in r?r.time:n._time))/n.timeScale())||Vt,onStart:function(){n.pause();var t=e.duration||Math.abs((i-n._time)/n.timeScale());s._dur!==t&&w(s,t,0,1).render(s._time,!0,!0),a&&a.apply(s,o||[])}}));return s},e.tweenFromTo=function(t,e,n){return this.tweenTo(e,G({startAt:{time:S(this,t)}},n))},e.recent=function(){return this._recent},e.nextLabel=function(t){return void 0===t&&(t=this._time),et(this,S(this,t))},e.previousLabel=function(t){return void 0===t&&(t=this._time),et(this,S(this,t),1)},e.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+Vt)},e.shiftChildren=function(t,e,n){void 0===n&&(n=0);for(var i,r=this._first,a=this.labels;r;)r._start>=n&&(r._start+=t,r._end+=t),r=r._next;if(e)for(i in a)a[i]>=n&&(a[i]+=t);return g(this)},e.invalidate=function(){var t=this._first;for(this._lock=0;t;)t.invalidate(),t=t._next;return i.prototype.invalidate.call(this)},e.clear=function(t){void 0===t&&(t=!0);for(var e,n=this._first;n;)e=n._next,this.remove(n),n=e;return this._time=this._tTime=this._pTime=0,t&&(this.labels={}),g(this)},e.totalDuration=function(t){var e,n,i,r=0,a=this,o=a._last,s=jt;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-t:t));if(a._dirty){for(i=a.parent;o;)e=o._prev,o._dirty&&o.totalDuration(),s<(n=o._start)&&a._sort&&o._ts&&!a._lock?(a._lock=1,x(a,o,n-o._delay,1)._lock=0):s=n,n<0&&o._ts&&(r-=n,(!i&&!a._dp||i&&i.smoothChildTiming)&&(a._start+=n/a._ts,a._time-=n,a._tTime-=n),a.shiftChildren(-n,!1,-1/0),s=0),o._end>r&&o._ts&&(r=o._end),o=e;w(a,a===vt&&a._time>r?a._time:r,1,1),a._dirty=0}return a._tDur},t.updateRoot=function(t){if(vt._ts&&(l(vt,y(t,vt)),Tt=we.frame),we.frame>=he){he+=Ut.autoSleep||120;var e=vt._first;if((!e||!e._ts)&&Ut.autoSleep&&we._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||we.sleep()}}},t}(De);function Be(t,e,n,i,r,a){var o,s,l,c;if(ce[t]&&!1!==(o=new ce[t]).init(r,o.rawVars?e[t]:function(t,e,n,i,r){if(p(t)&&(t=ze(t,r,e,n,i)),!L(t)||t.style&&t.nodeType||$t(t)||Qt(t))return z(t)?ze(t,r,e,n,i):t;var a,o={};for(a in t)o[a]=ze(t[a],r,e,n,i);return o}(e[t],i,r,a,n),n,i,a)&&(n._pt=s=new nn(n._pt,r,t,0,1,o.render,o,0,o.priority),n!==Mt))for(l=n._ptLookup[n._targets.indexOf(r)],c=o._props.length;c--;)l[o._props[c]]=s;return o}G(Ie.prototype,{_lock:0,_hasPause:0,_forcing:0});function Fe(t,e,n,i,r,a,o,s,l){p(i)&&(i=i(r||0,t,a));var c,u=t[e],h="get"!==n?n:p(u)?l?t[e.indexOf("set")||!p(t["get"+e.substr(3)])?e:"get"+e.substr(3)](l):t[e]():u,d=p(u)?l?Je:Ze:Ye;if(z(i)&&(~i.indexOf("random(")&&(i=tt(i)),"="===i.charAt(1)&&(i=parseFloat(h)+parseFloat(i.substr(2))*("-"===i.charAt(0)?-1:1)+(q(h)||0))),h!==i)return isNaN(h*i)?(u||e in t||H(e,i),function(t,e,n,i,r,a,o){var s,l,c,u,h,d,p,f,m=new nn(this._pt,t,e,0,1,tn,null,r),g=0,v=0;for(m.b=n,m.e=i,n+="",(p=~(i+="").indexOf("random("))&&(i=tt(i)),a&&(a(f=[n,i],t,e),n=f[0],i=f[1]),l=n.match(ne)||[];s=ne.exec(i);)u=s[0],h=i.substring(g,s.index),c?c=(c+1)%5:"rgba("===h.substr(-5)&&(c=1),u!==l[v++]&&(d=parseFloat(l[v-1])||0,m._pt={_next:m._pt,p:h||1===v?h:",",s:d,c:"="===u.charAt(1)?parseFloat(u.substr(2))*("-"===u.charAt(0)?-1:1):parseFloat(u)-d,m:c&&c<4?Math.round:0},g=ne.lastIndex);return m.c=g<i.length?i.substring(g,i.length):"",m.fp=o,(ie.test(i)||p)&&(m.e=0),this._pt=m}.call(this,t,e,h,i,d,s||Ut.stringFilter,l)):(c=new nn(this._pt,t,e,+h||0,i-(h||0),"boolean"==typeof u?Ke:$e,0,d),l&&(c.fp=l),o&&c.modifier(o,this,t),this._pt=c)}var ke,ze=function(t,e,n,i,r){return p(t)?t.call(e,n,i,r):z(t)&&~t.indexOf("random(")?tt(t):t},He=pe+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",Ue=(He+",id,stagger,delay,duration,paused,scrollTrigger").split(","),Ge=function(S){function r(t,e,n,i){var r;"number"==typeof e&&(n.duration=e,e=n,n=null);var a,o,s,l,c,u,h,d,p=(r=S.call(this,i?e:O(e),n)||this).vars,f=p.duration,m=p.delay,g=p.immediateRender,v=p.stagger,y=p.overwrite,_=p.keyframes,x=p.defaults,b=p.scrollTrigger,w=p.yoyoEase,T=r.parent,M=($t(t)||Qt(t)?A(t[0]):"length"in e)?[t]:ve(t);if(r._targets=M.length?B(M):R("GSAP target "+t+" not found. https://greensock.com",!Ut.nullTargetWarn)||[],r._ptLookup=[],r._overwrite=y,_||v||C(f)||C(m)){if(e=r.vars,(a=r.timeline=new Ie({data:"nested",defaults:x||{}})).kill(),a.parent=E(r),_)G(a.vars.defaults,{ease:"none"}),_.forEach(function(t){return a.to(M,t,">")});else{if(l=M.length,h=v?Z(v):P,L(v))for(c in v)~He.indexOf(c)&&((d=d||{})[c]=v[c]);for(o=0;o<l;o++){for(c in s={},e)Ue.indexOf(c)<0&&(s[c]=e[c]);s.stagger=0,w&&(s.yoyoEase=w),d&&pt(s,d),u=M[o],s.duration=+ze(f,E(r),o,u,M),s.delay=(+ze(m,E(r),o,u,M)||0)-r._delay,!v&&1===l&&s.delay&&(r._delay=m=s.delay,r._start+=m,s.delay=0),a.to(u,s,h(o,u,M))}a.duration()?f=m=0:r.timeline=0}f||r.duration(f=a.duration())}else r.timeline=0;return!0===y&&(ke=E(r),vt.killTweensOf(M),ke=0),T&&D(T,E(r)),(g||!f&&!_&&r._start===k(T._time)&&I(g)&&function t(e){return!e||e._ts&&t(e.parent)}(E(r))&&"nested"!==T.data)&&(r._tTime=-Vt,r.render(Math.max(0,-m))),b&&N(E(r),b),r}n(r,S);var t=r.prototype;return t.render=function(t,e,n){var i,r,a,o,s,l,c,u,h,d=this._time,p=this._tDur,f=this._dur,m=p-Vt<t&&0<=t?p:t<Vt?0:t;if(f){if(m!==this._tTime||!t||n||this._startAt&&this._zTime<0!=t<0){if(i=m,u=this.timeline,this._repeat){if(i=k(m%(o=f+this._rDelay)),m===p?(a=this._repeat,i=f):((a=~~(m/o))&&a===m/o&&(i=f,a--),f<i&&(i=f)),(l=this._yoyo&&1&a)&&(h=this._yEase,i=f-i),s=ft(this._tTime,o),i===d&&!n&&this._initted)return this;a!==s&&(u&&this._yEase&&lt(u,l),!this.vars.repeatRefresh||l||this._lock||(this._lock=n=1,this.render(k(o*a),!0).invalidate()._lock=0))}if(!this._initted){if(b(this,t<0?t:i,n,e))return this._tTime=0,this;if(f!==this._dur)return this.render(t,e,n)}for(this._tTime=m,this._time=i,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=c=(h||this._ease)(i/f),this._from&&(this.ratio=c=1-c),!i||d||e||gt(this,"onStart"),r=this._pt;r;)r.r(c,r.d),r=r._next;u&&u.render(t<0?t:!i&&l?-Vt:u._dur*c,e,n)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(t<0&&this._startAt&&this._startAt.render(t,!0,n),gt(this,"onUpdate")),this._repeat&&a!==s&&this.vars.onRepeat&&!e&&this.parent&&gt(this,"onRepeat"),m!==this._tDur&&m||this._tTime!==m||(t<0&&this._startAt&&!this._onUpdate&&this._startAt.render(t,!0,!0),!t&&f||!(m===this._tDur&&0<this._ts||!m&&this._ts<0)||V(this,1),e||t<0&&!d||!m&&!d||(gt(this,m===p?"onComplete":"onReverseComplete",!0),!this._prom||m<p&&0<this.timeScale()||this._prom()))}}else!function(t,e,n,i){var r,a,o=t.ratio,s=e<0||!e&&o&&!t._start&&t._zTime>Vt&&!t._dp._lock||(t._ts<0||t._dp._ts<0)&&"isFromStart"!==t.data&&"isStart"!==t.data?0:1,l=t._rDelay,c=0;if(l&&t._repeat&&(c=me(0,t._tDur,e),ft(c,l)!==(a=ft(t._tTime,l))&&(o=1-s,t.vars.repeatRefresh&&t._initted&&t.invalidate())),t._initted||!b(t,e,i,n))if(s!==o||i||t._zTime===Vt||!e&&t._zTime){for(a=t._zTime,t._zTime=e||(n?Vt:0),n=n||e&&!a,t.ratio=s,t._from&&(s=1-s),t._time=0,t._tTime=c,n||gt(t,"onStart"),r=t._pt;r;)r.r(s,r.d),r=r._next;t._startAt&&e<0&&t._startAt.render(e,!0,!0),t._onUpdate&&!n&&gt(t,"onUpdate"),c&&t._repeat&&!n&&t.parent&&gt(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===s&&(s&&V(t,1),n||(gt(t,s?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)}(this,t,e,n);return this},t.targets=function(){return this._targets},t.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._act=this._lazy=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),S.prototype.invalidate.call(this)},t.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e)&&(this._lazy=0,this.parent))return nt(this);if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,ke&&!0!==ke.vars.overwrite)._first||nt(this),this.parent&&n!==this.timeline.totalDuration()&&w(this,this._dur*this.timeline._tDur/n,0,1),this}var i,r,a,o,s,l,c,u=this._targets,h=t?ve(t):u,d=this._ptLookup,p=this._pt;if((!e||"all"===e)&&function(t,e){for(var n=t.length,i=n===e.length;i&&n--&&t[n]===e[n];);return n<0}(u,h))return"all"===e&&(this._pt=0),nt(this);for(i=this._op=this._op||[],"all"!==e&&(z(e)&&(s={},f(e,function(t){return s[t]=1}),e=s),e=function(t,e){var n,i,r,a,o=t[0]?F(t[0]).harness:0,s=o&&o.aliases;if(!s)return e;for(i in n=pt({},e),s)if(i in n)for(r=(a=s[i].split(",")).length;r--;)n[a[r]]=n[i];return n}(u,e)),c=u.length;c--;)if(~h.indexOf(u[c]))for(s in r=d[c],"all"===e?(i[c]=e,o=r,a={}):(a=i[c]=i[c]||{},o=e),o)(l=r&&r[s])&&("kill"in l.d&&!0!==l.d.kill(s)||m(this,l,"_pt"),delete r[s]),"all"!==a&&(a[s]=1);return this._initted&&!this._pt&&p&&nt(this),this},r.to=function(t,e,n){return new r(t,e,n)},r.from=function(t,e){return new r(t,s(arguments,1))},r.delayedCall=function(t,e,n,i){return new r(e,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:e,onReverseComplete:e,onCompleteParams:n,onReverseCompleteParams:n,callbackScope:i})},r.fromTo=function(t,e,n){return new r(t,s(arguments,2))},r.set=function(t,e){return e.duration=0,e.repeatDelay||(e.repeat=0),new r(t,e)},r.killTweensOf=function(t,e,n){return vt.killTweensOf(t,e,n)},r}(De);function je(t,e,n){return t.setAttribute(e,n)}function Ve(t,e,n,i){i.mSet(t,e,i.m.call(i.tween,n,i.mt),i)}G(Ge.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),f("staggerTo,staggerFrom,staggerFromTo",function(n){Ge[n]=function(){var t=new Ie,e=ge.call(arguments,0);return e.splice("staggerFromTo"===n?5:4,0,0),t[n].apply(t,e)}});function We(t,e){for(var n=e._pt;n;)n.r(t,n.d),n=n._next}function qe(t,e,n,i){for(var r,a=this._pt;a;)r=a._next,a.p===i&&a.modifier(t,e,n),a=r}function Xe(t){for(var e,n,i=this._pt;i;)n=i._next,i.p===t&&!i.op||i.op===t?m(this,i,"_pt"):i.dep||(e=1),i=n;return!e}var Ye=function(t,e,n){return t[e]=n},Ze=function(t,e,n){return t[e](n)},Je=function(t,e,n,i){return t[e](i.fp,n)},Qe=function(t,e){return p(t[e])?Ze:r(t[e])&&t.setAttribute?je:Ye},$e=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4,e)},Ke=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},tn=function(t,e){var n=e._pt,i="";if(!t&&e.b)i=e.b;else if(1===t&&e.e)i=e.e;else{for(;n;)i=n.p+(n.m?n.m(n.s+n.c*t):Math.round(1e4*(n.s+n.c*t))/1e4)+i,n=n._next;i+=e.c}e.set(e.t,e.p,i,e)},en=function(t){for(var e,n,i,r,a=t._pt;a;){for(e=a._next,n=i;n&&n.pr>a.pr;)n=n._next;(a._prev=n?n._prev:r)?a._prev._next=a:i=a,(a._next=n)?n._prev=a:r=a,a=e}t._pt=i},nn=(rn.prototype.modifier=function(t,e,n){this.mSet=this.mSet||this.set,this.set=Ve,this.m=t,this.mt=n,this.tween=e},rn);function rn(t,e,n,i,r,a,o,s,l){this.t=e,this.s=i,this.c=r,this.p=n,this.r=a||$e,this.d=o||this,this.set=s||Ye,this.pr=l||0,(this._next=t)&&(t._prev=this)}f(pe+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(t){return oe[t]=1}),ae.TweenMax=ae.TweenLite=Ge,ae.TimelineLite=ae.TimelineMax=Ie,vt=new Ie({sortChildren:!1,defaults:Gt,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Ut.stringFilter=st;var an={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(function(t){var e=(t=!t.name&&t.default||t).name,n=p(t),i=e&&!n&&t.init?function(){this._props=[]}:t,r={init:P,render:We,add:Fe,kill:Xe,modifier:qe,rawVars:0},a={targetTest:0,get:0,getSetter:Qe,aliases:{},register:0};if(Te(),t!==i){if(ce[e])return;G(i,G(j(t,r),a)),pt(i.prototype,pt(r,j(t,a))),ce[i.prop=e]=i,t.targetTest&&(de.push(i),oe[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}o(e,i),t.register&&t.register(sn,i,nn)})},timeline:function(t){return new Ie(t)},getTweensOf:function(t,e){return vt.getTweensOf(t,e)},getProperty:function(i,t,e,n){z(i)&&(i=ve(i)[0]);var r=F(i||{}).get,a=e?u:c;return"native"===e&&(e=""),i?t?a((ce[t]&&ce[t].get||r)(i,t,e,n)):function(t,e,n){return a((ce[t]&&ce[t].get||r)(i,t,e,n))}:i},quickSetter:function(n,e,i){if(1<(n=ve(n)).length){var r=n.map(function(t){return sn.quickSetter(t,e,i)}),a=r.length;return function(t){for(var e=a;e--;)r[e](t)}}n=n[0]||{};var o=ce[e],s=F(n),l=s.harness&&(s.harness.aliases||{})[e]||e,c=o?function(t){var e=new o;Mt._pt=0,e.init(n,i?t+i:t,Mt,0,[n]),e.render(1,e),Mt._pt&&We(1,Mt)}:s.set(n,l);return o?c:function(t){return c(n,l,i?t+i:t,s,1)}},isTweening:function(t){return 0<vt.getTweensOf(t,!0).length},defaults:function(t){return t&&t.ease&&(t.ease=Le(t.ease,Gt.ease)),d(Gt,t||{})},config:function(t){return d(Ut,t||{})},registerEffect:function(t){var i=t.name,r=t.effect,e=t.plugins,a=t.defaults,n=t.extendTimeline;(e||"").split(",").forEach(function(t){return t&&!ce[t]&&!ae[t]&&R(i+" effect requires "+t+" plugin.")}),ue[i]=function(t,e,n){return r(ve(t),G(e||{},a),n)},n&&(Ie.prototype[i]=function(t,e,n){return this.add(ue[i](t,L(e)?e:(n=e)&&{},this),n)})},registerEase:function(t,e){Me[t]=Le(e)},parseEase:function(t,e){return arguments.length?Le(t,e):Me},getById:function(t){return vt.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var n,i,r=new Ie(t);for(r.smoothChildTiming=I(t.smoothChildTiming),vt.remove(r),r._dp=0,r._time=r._tTime=vt._time,n=vt._first;n;)i=n._next,!e&&!n._dur&&n instanceof Ge&&n.vars.onComplete===n._targets[0]||x(r,n,n._start-n._delay),n=i;return x(vt,r,0),r},utils:{wrap:function t(e,n,i){var r=n-e;return $t(e)?K(e,t(0,e.length),n):W(i,function(t){return(r+(t-e)%r)%r+e})},wrapYoyo:function t(e,n,i){var r=n-e,a=2*r;return $t(e)?K(e,t(0,e.length-1),n):W(i,function(t){return e+(r<(t=(a+(t-e)%a)%a||0)?a-t:t)})},distribute:Z,random:$,snap:Q,normalize:function(t,e,n){return mt(t,e,0,1,n)},getUnit:q,clamp:function(e,n,t){return W(t,function(t){return me(e,n,t)})},splitColor:rt,toArray:ve,mapRange:mt,pipe:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce(function(t,e){return e(t)},t)}},unitize:function(e,n){return function(t){return e(parseFloat(t))+(n||q(t))}},interpolate:function t(e,n,i,r){var a=isNaN(e+n)?0:function(t){return(1-t)*e+t*n};if(!a){var o,s,l,c,u,h=z(e),d={};if(!0===i&&(r=1)&&(i=null),h)e={p:e},n={p:n};else if($t(e)&&!$t(n)){for(l=[],c=e.length,u=c-2,s=1;s<c;s++)l.push(t(e[s-1],e[s]));c--,a=function(t){t*=c;var e=Math.min(u,~~t);return l[e](t-e)},i=n}else r||(e=pt($t(e)?[]:{},e));if(!l){for(o in n)Fe.call(d,e,o,"get",n[o]);a=function(t){return We(t,d),h?e.p:e}}}return W(i,a)},shuffle:Y},install:i,effects:ue,ticker:we,updateRoot:Ie.updateRoot,plugins:ce,globalTimeline:vt,core:{PropTween:nn,globals:o,Tween:Ge,Timeline:Ie,Animation:De,getCache:F,_removeLinkedListItem:m}};function on(t,r){return{name:t,rawVars:1,init:function(t,i,e){e._onInit=function(t){var e,n;if(z(i)&&(e={},f(i,function(t){return e[t]=1}),i=e),r){for(n in e={},i)e[n]=r(i[n]);i=e}!function(t,e){var n,i,r,a=t._targets;for(n in e)for(i=a.length;i--;)(r=(r=t._ptLookup[i][n])&&r.d)&&(r._pt&&(r=function(t,e){for(var n=t._pt;n&&n.p!==e&&n.op!==e&&n.fp!==e;)n=n._next;return n}(r,n)),r&&r.modifier&&r.modifier(e[n],t,a[i],n))}(t,i)}}}}f("to,from,fromTo,delayedCall,set,killTweensOf",function(t){return an[t]=Ge[t]}),we.add(Ie.updateRoot),Mt=an.to({},{duration:0});var sn=an.registerPlugin({name:"attr",init:function(t,e,n,i,r){var a,o;for(a in e)(o=this.add(t,"setAttribute",(t.getAttribute(a)||0)+"",e[a],i,r,0,0,a))&&(o.op=a),this._props.push(a)}},{name:"endArray",init:function(t,e){for(var n=e.length;n--;)this.add(t,n,t[n]||0,e[n])}},on("roundProps",J),on("modifiers"),on("snap",Q))||an;function ln(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)}function cn(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)}function un(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)}function hn(t,e){var n=e.s+e.c*t;e.set(e.t,e.p,~~(n+(n<0?-.5:.5))+e.u,e)}function dn(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)}function pn(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)}function fn(t,e,n){return t.style[e]=n}function mn(t,e,n){return t.style.setProperty(e,n)}function gn(t,e,n){return t._gsap[e]=n}function vn(t,e,n){return t._gsap.scaleX=t._gsap.scaleY=n}function yn(t,e,n,i,r){var a=t._gsap;a.scaleX=a.scaleY=n,a.renderTransform(r,a)}function _n(t,e,n,i,r){var a=t._gsap;a[e]=n,a.renderTransform(r,a)}function xn(t,e){var n=kn.createElementNS?kn.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):kn.createElement(t);return n.style?n:kn.createElement(t)}function bn(t,e,n){var i=getComputedStyle(t);return i[e]||i.getPropertyValue(e.replace(pi,"-$1").toLowerCase())||i.getPropertyValue(e)||!n&&bn(t,xi(e)||e,1)||""}function wn(){"undefined"!=typeof window&&window.document&&(zn=(kn=window.document).documentElement,Un=xn("div")||{style:{}},Gn=xn("div"),vi=xi(vi),yi=vi+"Origin",Un.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Vn=!!xi("perspective"),Hn=1)}function Tn(t){var e,n=xn("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,r=this.nextSibling,a=this.style.cssText;if(zn.appendChild(n),n.appendChild(this),this.style.display="block",t)try{e=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=Tn}catch(t){}else this._gsapBBox&&(e=this._gsapBBox());return i&&(r?i.insertBefore(this,r):i.appendChild(this)),zn.removeChild(n),this.style.cssText=a,e}function Mn(t,e){for(var n=e.length;n--;)if(t.hasAttribute(e[n]))return t.getAttribute(e[n])}function Sn(e){var n;try{n=e.getBBox()}catch(t){n=Tn.call(e,!0)}return n&&(n.width||n.height)||e.getBBox===Tn||(n=Tn.call(e,!0)),!n||n.width||n.x||n.y?n:{x:+Mn(e,["x","cx","x1"])||0,y:+Mn(e,["y","cy","y1"])||0,width:0,height:0}}function En(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!Sn(t))}function An(t,e){var n;e&&(n=t.style,e in ci&&e!==yi&&(e=vi),n.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),n.removeProperty(e.replace(pi,"-$1").toLowerCase())):n.removeAttribute(e))}function Ln(t,e,n,i,r,a){var o=new nn(t._pt,e,n,0,1,a?pn:dn);return(t._pt=o).b=i,o.e=r,t._props.push(n),o}function Cn(t,e,n,i){var r,a,o,s,l=parseFloat(n)||0,c=(n+"").trim().substr((l+"").length)||"px",u=Un.style,h=fi.test(e),d="svg"===t.tagName.toLowerCase(),p=(d?"client":"offset")+(h?"Width":"Height"),f="px"===i,m="%"===i;return i===c||!l||bi[i]||bi[c]?l:("px"===c||f||(l=Cn(t,e,n,"px")),s=t.getCTM&&En(t),m&&(ci[e]||~e.indexOf("adius"))?k(l/(s?t.getBBox()[h?"width":"height"]:t[p])*100):(u[h?"width":"height"]=100+(f?c:i),a=~e.indexOf("adius")||"em"===i&&t.appendChild&&!d?t:t.parentNode,s&&(a=(t.ownerSVGElement||{}).parentNode),a&&a!==kn&&a.appendChild||(a=kn.body),(o=a._gsap)&&m&&o.width&&h&&o.time===we.time?k(l/o.width*100):(!m&&"%"!==c||(u.position=bn(t,"position")),a===t&&(u.position="static"),a.appendChild(Un),r=Un[p],a.removeChild(Un),u.position="absolute",h&&m&&((o=F(a)).time=we.time,o.width=a[p]),k(f?r*l/100:r&&l?100/r*l:0))))}function Rn(t,e,n,i){var r;return Hn||wn(),e in gi&&"transform"!==e&&~(e=gi[e]).indexOf(",")&&(e=e.split(",")[0]),ci[e]&&"transform"!==e?(r=Ei(t,i),r="transformOrigin"!==e?r[e]:Ai(bn(t,yi))+" "+r.zOrigin+"px"):(r=t.style[e])&&"auto"!==r&&!i&&!~(r+"").indexOf("calc(")||(r=Ti[e]&&Ti[e](t,e,n)||bn(t,e)||a(t,e)||("opacity"===e?1:0)),n&&!~(r+"").indexOf(" ")?Cn(t,e,r,n)+n:r}function Pn(t,e,n,i){var r,a;n&&"none"!==n||((a=(r=xi(e,t,1))&&bn(t,r,1))&&a!==n?(e=r,n=a):"borderColor"===e&&(n=bn(t,"borderTopColor")));var o,s,l,c,u,h,d,p,f,m,g,v,y=new nn(this._pt,t.style,e,0,1,tn),_=0,x=0;if(y.b=n,y.e=i,n+="","auto"==(i+="")&&(t.style[e]=i,i=bn(t,e)||i,t.style[e]=n),st(o=[n,i]),i=o[1],l=(n=o[0]).match(ee)||[],(i.match(ee)||[]).length){for(;s=ee.exec(i);)d=s[0],f=i.substring(_,s.index),u?u=(u+1)%5:"rgba("!==f.substr(-5)&&"hsla("!==f.substr(-5)||(u=1),d!==(h=l[x++]||"")&&(c=parseFloat(h)||0,g=h.substr((c+"").length),(v="="===d.charAt(1)?+(d.charAt(0)+"1"):0)&&(d=d.substr(2)),p=parseFloat(d),m=d.substr((p+"").length),_=ee.lastIndex-m.length,m||(m=m||Ut.units[e]||g,_===i.length&&(i+=m,y.e+=m)),g!==m&&(c=Cn(t,e,h,m)||0),y._pt={_next:y._pt,p:f||1===x?f:",",s:c,c:v?v*p:p-c,m:u&&u<4?Math.round:0});y.c=_<i.length?i.substring(_,i.length):""}else y.r="display"===e&&"none"===i?pn:dn;return ie.test(i)&&(y.e=0),this._pt=y}function On(t,e){if(e.tween&&e.tween._time===e.tween._dur){var n,i,r,a=e.t,o=a.style,s=e.u,l=a._gsap;if("all"===s||!0===s)o.cssText="",i=1;else for(r=(s=s.split(",")).length;-1<--r;)n=s[r],ci[n]&&(i=1,n="transformOrigin"===n?yi:vi),An(a,n);i&&(An(a,vi),l&&(l.svg&&a.removeAttribute("transform"),Ei(a,1),l.uncache=1))}}function Dn(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t}function Nn(t){var e=bn(t,vi);return Dn(e)?Mi:e.substr(7).match(te).map(k)}function In(t,e){var n,i,r,a,o=t._gsap||F(t),s=t.style,l=Nn(t);return o.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(l=[(r=t.transform.baseVal.consolidate().matrix).a,r.b,r.c,r.d,r.e,r.f]).join(",")?Mi:l:(l!==Mi||t.offsetParent||t===zn||o.svg||(r=s.display,s.display="block",(n=t.parentNode)&&t.offsetParent||(a=1,i=t.nextSibling,zn.appendChild(t)),l=Nn(t),r?s.display=r:An(t,"display"),a&&(i?n.insertBefore(t,i):n?n.appendChild(t):zn.removeChild(t))),e&&6<l.length?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)}function Bn(t,e,n,i,r,a){var o,s,l,c=t._gsap,u=r||In(t,!0),h=c.xOrigin||0,d=c.yOrigin||0,p=c.xOffset||0,f=c.yOffset||0,m=u[0],g=u[1],v=u[2],y=u[3],_=u[4],x=u[5],b=e.split(" "),w=parseFloat(b[0])||0,T=parseFloat(b[1])||0;n?u!==Mi&&(s=m*y-g*v)&&(l=w*(-g/s)+T*(m/s)-(m*x-g*_)/s,w=w*(y/s)+T*(-v/s)+(v*x-y*_)/s,T=l):(w=(o=Sn(t)).x+(~b[0].indexOf("%")?w/100*o.width:w),T=o.y+(~(b[1]||b[0]).indexOf("%")?T/100*o.height:T)),i||!1!==i&&c.smooth?(_=w-h,x=T-d,c.xOffset=p+(_*m+x*v)-_,c.yOffset=f+(_*g+x*y)-x):c.xOffset=c.yOffset=0,c.xOrigin=w,c.yOrigin=T,c.smooth=!!i,c.origin=e,c.originIsAbsolute=!!n,t.style[yi]="0px 0px",a&&(Ln(a,c,"xOrigin",h,w),Ln(a,c,"yOrigin",d,T),Ln(a,c,"xOffset",p,c.xOffset),Ln(a,c,"yOffset",f,c.yOffset)),t.setAttribute("data-svg-origin",w+" "+T)}function Fn(t,e,n){var i=q(e);return k(parseFloat(e)+parseFloat(Cn(t,"x",n+"px",i)))+i}Ge.version=Ie.version=sn.version="3.5.0",wt=1,e()&&Te();var kn,zn,Hn,Un,Gn,jn,Vn,Wn=Me.Power0,qn=Me.Power1,Xn=Me.Power2,Yn=Me.Power3,Zn=Me.Power4,Jn=Me.Linear,Qn=Me.Quad,$n=Me.Cubic,Kn=Me.Quart,ti=Me.Quint,ei=Me.Strong,ni=Me.Elastic,ii=Me.Back,ri=Me.SteppedEase,ai=Me.Bounce,oi=Me.Sine,si=Me.Expo,li=Me.Circ,ci={},ui=180/Math.PI,hi=Math.PI/180,di=Math.atan2,pi=/([A-Z])/g,fi=/(?:left|right|width|margin|padding|x)/i,mi=/[\s,\(]\S/,gi={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},vi="transform",yi=vi+"Origin",_i="O,Moz,ms,Ms,Webkit".split(","),xi=function(t,e,n){var i=(e||Un).style,r=5;if(t in i&&!n)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);r--&&!(_i[r]+t in i););return r<0?null:(3===r?"ms":0<=r?_i[r]:"")+t},bi={deg:1,rad:1,turn:1},wi={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Ti={clearProps:function(t,e,n,i,r){if("isFromStart"!==r.data){var a=t._pt=new nn(t._pt,e,n,0,0,On);return a.u=i,a.pr=-10,a.tween=r,t._props.push(n),1}}},Mi=[1,0,0,1,0,0],Si={},Ei=function(t,e){var n=t._gsap||new Oe(t);if("x"in n&&!e&&!n.uncache)return n;var i,r,a,o,s,l,c,u,h,d,p,f,m,g,v,y,_,x,b,w,T,M,S,E,A,L,C,R,P,O=t.style,D=n.scaleX<0,N="deg",I=bn(t,yi)||"0",B=i=r=o=s=l=c=u=0,F=a=1;return n.svg=!(!t.getCTM||!En(t)),p=In(t,n.svg),n.svg&&(T=!n.uncache&&t.getAttribute("data-svg-origin"),Bn(t,T||I,!!T||n.originIsAbsolute,!1!==n.smooth,p)),h=n.xOrigin||0,d=n.yOrigin||0,p!==Mi&&(v=p[0],y=p[1],_=p[2],x=p[3],B=b=p[4],i=w=p[5],6===p.length?(F=Math.sqrt(v*v+y*y),a=Math.sqrt(x*x+_*_),o=v||y?di(y,v)*ui:0,(c=_||x?di(_,x)*ui+o:0)&&(a*=Math.cos(c*hi)),n.svg&&(B-=h-(h*v+d*_),i-=d-(h*y+d*x))):(P=p[6],C=p[7],E=p[8],A=p[9],L=p[10],R=p[11],B=p[12],i=p[13],r=p[14],s=(f=di(P,L))*ui,f&&(T=b*(m=Math.cos(-f))+E*(g=Math.sin(-f)),M=w*m+A*g,S=P*m+L*g,E=b*-g+E*m,A=w*-g+A*m,L=P*-g+L*m,R=C*-g+R*m,b=T,w=M,P=S),l=(f=di(-_,L))*ui,f&&(m=Math.cos(-f),R=x*(g=Math.sin(-f))+R*m,v=T=v*m-E*g,y=M=y*m-A*g,_=S=_*m-L*g),o=(f=di(y,v))*ui,f&&(T=v*(m=Math.cos(f))+y*(g=Math.sin(f)),M=b*m+w*g,y=y*m-v*g,w=w*m-b*g,v=T,b=M),s&&359.9<Math.abs(s)+Math.abs(o)&&(s=o=0,l=180-l),F=k(Math.sqrt(v*v+y*y+_*_)),a=k(Math.sqrt(w*w+P*P)),f=di(b,w),c=2e-4<Math.abs(f)?f*ui:0,u=R?1/(R<0?-R:R):0),n.svg&&(T=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!Dn(bn(t,vi)),T&&t.setAttribute("transform",T))),90<Math.abs(c)&&Math.abs(c)<270&&(D?(F*=-1,c+=o<=0?180:-180,o+=o<=0?180:-180):(a*=-1,c+=c<=0?180:-180)),n.x=((n.xPercent=B&&Math.round(t.offsetWidth/2)===Math.round(-B)?-50:0)?0:B)+"px",n.y=((n.yPercent=i&&Math.round(t.offsetHeight/2)===Math.round(-i)?-50:0)?0:i)+"px",n.z=r+"px",n.scaleX=k(F),n.scaleY=k(a),n.rotation=k(o)+N,n.rotationX=k(s)+N,n.rotationY=k(l)+N,n.skewX=c+N,n.skewY=0+N,n.transformPerspective=u+"px",(n.zOrigin=parseFloat(I.split(" ")[2])||0)&&(O[yi]=Ai(I)),n.xOffset=n.yOffset=0,n.force3D=Ut.force3D,n.renderTransform=n.svg?Di:Vn?Oi:Li,n.uncache=0,n},Ai=function(t){return(t=t.split(" "))[0]+" "+t[1]},Li=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Oi(t,e)},Ci="0deg",Ri="0px",Pi=") ",Oi=function(t,e){var n,i,r,a,o=e||this,s=o.xPercent,l=o.yPercent,c=o.x,u=o.y,h=o.z,d=o.rotation,p=o.rotationY,f=o.rotationX,m=o.skewX,g=o.skewY,v=o.scaleX,y=o.scaleY,_=o.transformPerspective,x=o.force3D,b=o.target,w=o.zOrigin,T="",M="auto"===x&&t&&1!==t||!0===x;!w||f===Ci&&p===Ci||(r=parseFloat(p)*hi,n=Math.sin(r),i=Math.cos(r),r=parseFloat(f)*hi,c=Fn(b,c,n*(a=Math.cos(r))*-w),u=Fn(b,u,-Math.sin(r)*-w),h=Fn(b,h,i*a*-w+w)),_!==Ri&&(T+="perspective("+_+Pi),(s||l)&&(T+="translate("+s+"%, "+l+"%) "),!M&&c===Ri&&u===Ri&&h===Ri||(T+=h!==Ri||M?"translate3d("+c+", "+u+", "+h+") ":"translate("+c+", "+u+Pi),d!==Ci&&(T+="rotate("+d+Pi),p!==Ci&&(T+="rotateY("+p+Pi),f!==Ci&&(T+="rotateX("+f+Pi),m===Ci&&g===Ci||(T+="skew("+m+", "+g+Pi),1===v&&1===y||(T+="scale("+v+", "+y+Pi),b.style[vi]=T||"translate(0, 0)"},Di=function(t,e){var n,i,r,a,o,s=e||this,l=s.xPercent,c=s.yPercent,u=s.x,h=s.y,d=s.rotation,p=s.skewX,f=s.skewY,m=s.scaleX,g=s.scaleY,v=s.target,y=s.xOrigin,_=s.yOrigin,x=s.xOffset,b=s.yOffset,w=s.forceCSS,T=parseFloat(u),M=parseFloat(h),d=parseFloat(d),p=parseFloat(p);(f=parseFloat(f))&&(p+=f=parseFloat(f),d+=f),d||p?(d*=hi,p*=hi,n=Math.cos(d)*m,i=Math.sin(d)*m,r=Math.sin(d-p)*-g,a=Math.cos(d-p)*g,p&&(f*=hi,o=Math.tan(p-f),r*=o=Math.sqrt(1+o*o),a*=o,f&&(o=Math.tan(f),n*=o=Math.sqrt(1+o*o),i*=o)),n=k(n),i=k(i),r=k(r),a=k(a)):(n=m,a=g,i=r=0),(T&&!~(u+"").indexOf("px")||M&&!~(h+"").indexOf("px"))&&(T=Cn(v,"x",u,"px"),M=Cn(v,"y",h,"px")),(y||_||x||b)&&(T=k(T+y-(y*n+_*r)+x),M=k(M+_-(y*i+_*a)+b)),(l||c)&&(T=k(T+l/100*(o=v.getBBox()).width),M=k(M+c/100*o.height)),o="matrix("+n+","+i+","+r+","+a+","+T+","+M+")",v.setAttribute("transform",o),w&&(v.style[vi]=o)};f("padding,margin,Width,Radius",function(e,n){var t="Bottom",s=(n<3?["Top","Right",t,"Left"]:["TopLeft","TopRight",t+"Right",t+"Left"]).map(function(t){return n<2?e+t:"border"+t+e});Ti[1<n?"border"+e:e]=function(e,t,n,i,r){var a,o;if(arguments.length<4)return a=s.map(function(t){return Rn(e,t,n)}),5===(o=a.join(" ")).split(a[0]).length?a[0]:o;a=(i+"").split(" "),o={},s.forEach(function(t,e){return o[t]=a[e]=a[e]||a[(e-1)/2|0]}),e.init(t,o,r)}});var Ni,Ii,Bi={name:"css",register:wn,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,n,i,r){var a,o,s,l,c,u,h,d,p,f,m,g,v,y,_,x,b,w,T,M,S,E,A,L,C,R,P,O,D,N,I,B,F=this._props,k=t.style;for(h in Hn||wn(),e)if("autoRound"!==h&&(o=e[h],!ce[h]||!Be(h,e,n,i,t,r)))if(c=typeof o,u=Ti[h],"function"===c&&(c=typeof(o=o.call(n,i,t,r))),"string"===c&&~o.indexOf("random(")&&(o=tt(o)),u)u(this,t,h,o,n)&&(_=1);else if("--"===h.substr(0,2))this.add(k,"setProperty",getComputedStyle(t).getPropertyValue(h)+"",o+"",i,r,0,0,h);else if("undefined"!==c){if(a=Rn(t,h),l=parseFloat(a),(f="string"===c&&"="===o.charAt(1)?+(o.charAt(0)+"1"):0)&&(o=o.substr(2)),s=parseFloat(o),h in gi&&("autoAlpha"===h&&(1===l&&"hidden"===Rn(t,"visibility")&&s&&(l=0),Ln(this,k,"visibility",l?"inherit":"hidden",s?"inherit":"hidden",!s)),"scale"!==h&&"transform"!==h&&~(h=gi[h]).indexOf(",")&&(h=h.split(",")[0])),m=h in ci)if(g||((v=t._gsap).renderTransform||Ei(t),y=!1!==e.smoothOrigin&&v.smooth,(g=this._pt=new nn(this._pt,k,vi,0,1,v.renderTransform,v,0,-1)).dep=1),"scale"===h)this._pt=new nn(this._pt,v,"scaleY",v.scaleY,f?f*s:s-v.scaleY),F.push("scaleY",h),h+="X";else{if("transformOrigin"===h){B=I=N=void 0,N=(D=o).split(" "),I=N[0],B=N[1]||"50%","top"!==I&&"bottom"!==I&&"left"!==B&&"right"!==B||(D=I,I=B,B=D),N[0]=wi[I]||I,N[1]=wi[B]||B,o=N.join(" "),v.svg?Bn(t,o,0,y,0,this):((p=parseFloat(o.split(" ")[2])||0)!==v.zOrigin&&Ln(this,v,"zOrigin",v.zOrigin,p),Ln(this,k,h,Ai(a),Ai(o)));continue}if("svgOrigin"===h){Bn(t,o,1,y,0,this);continue}if(h in Si){x=this,b=v,w=h,T=l,S=f,O=P=R=C=L=A=E=void 0,L=360,C=z(M=o),R=parseFloat(M)*(C&&~M.indexOf("rad")?ui:1),O=T+(P=S?R*S:R-T)+"deg",C&&("short"===(E=M.split("_")[1])&&(P%=L)!=P%180&&(P+=P<0?L:-L),"cw"===E&&P<0?P=(P+36e9)%L-~~(P/L)*L:"ccw"===E&&0<P&&(P=(P-36e9)%L-~~(P/L)*L)),x._pt=A=new nn(x._pt,b,w,T,P,cn),A.e=O,A.u="deg",x._props.push(w);continue}if("smoothOrigin"===h){Ln(this,v,"smooth",v.smooth,o);continue}if("force3D"===h){v[h]=o;continue}if("transform"===h){!function(t,e,n){var i,r,a,o,s,l,c,u=Gn.style,h=n._gsap;for(r in u.cssText=getComputedStyle(n).cssText+";position:absolute;display:block;",u[vi]=e,kn.body.appendChild(Gn),i=Ei(Gn,1),ci)(a=h[r])!==(o=i[r])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(r)<0&&(s=q(a)!==(c=q(o))?Cn(n,r,a,c):parseFloat(a),l=parseFloat(o),t._pt=new nn(t._pt,h,r,s,l-s,ln),t._pt.u=c||0,t._props.push(r));kn.body.removeChild(Gn)}(this,o,t);continue}}else h in k||(h=xi(h)||h);if(m||(s||0===s)&&(l||0===l)&&!mi.test(o)&&h in k)(d=(a+"").substr((l+"").length))!==(p=(o+"").substr(((s=s||0)+"").length)||(h in Ut.units?Ut.units[h]:d))&&(l=Cn(t,h,a,p)),this._pt=new nn(this._pt,m?v:k,h,l,f?f*s:s-l,"px"!==p||!1===e.autoRound||m?ln:hn),this._pt.u=p||0,d!==p&&(this._pt.b=a,this._pt.r=un);else if(h in k)Pn.call(this,t,h,a,o);else{if(!(h in t)){H(h,o);continue}this.add(t,h,t[h],o,i,r)}F.push(h)}_&&en(this)},get:Rn,aliases:gi,getSetter:function(t,e,n){var i=gi[e];return i&&i.indexOf(",")<0&&(e=i),e in ci&&e!==yi&&(t._gsap.x||Rn(t,"x"))?n&&jn===n?"scale"===e?vn:gn:(jn=n||{})&&("scale"===e?yn:_n):t.style&&!r(t.style[e])?fn:~e.indexOf("-")?mn:Qe(t,e)},core:{_removeProperty:An,_getMatrix:In}};sn.utils.checkPrefix=xi,Ii=f("x,y,z,scale,scaleX,scaleY,xPercent,yPercent"+","+(Ni="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(t){ci[t]=1}),f(Ni,function(t){Ut.units[t]="deg",Si[t]=1}),gi[Ii[13]]="x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+Ni,f("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(t){var e=t.split(":");gi[e[1]]=Ii[e[0]]}),f("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(t){Ut.units[t]="px"}),sn.registerPlugin(Bi);var Fi=sn.registerPlugin(Bi)||sn,ki=Fi.core.Tween;t.Back=ii,t.Bounce=ai,t.CSSPlugin=Bi,t.Circ=li,t.Cubic=$n,t.Elastic=ni,t.Expo=si,t.Linear=Jn,t.Power0=Wn,t.Power1=qn,t.Power2=Xn,t.Power3=Yn,t.Power4=Zn,t.Quad=Qn,t.Quart=Kn,t.Quint=ti,t.Sine=oi,t.SteppedEase=ri,t.Strong=ei,t.TimelineLite=Ie,t.TimelineMax=Ie,t.TweenLite=Ge,t.TweenMax=ki,t.default=Fi,t.gsap=Fi,"undefined"==typeof window||window!==t?Object.defineProperty(t,"__esModule",{value:!0}):delete t.default}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("three"),require("gsap/TweenMax")):"function"==typeof define&&define.amd?define(["three","gsap/TweenMax"],e):t.hoverEffect=e(t.THREE,t.TweenMax)}(this,function(I,B){return B=B&&B.hasOwnProperty("default")?B.default:B,function(t){function e(){for(var t=arguments,e=0;e<arguments.length;e++)if(void 0!==t[e])return t[e]}console.log("%c Hover effect by Robin Delaporte: https://github.com/robin-dela/hover-effect ","color: #bada55; font-size: 0.8rem");var n,i,r,a,o,s,l,c,u,h,d,p,f,m,g,v,y=t.parent,_=t.displacementImage,x=t.image1,b=t.image2,w=e(t.imagesRatio,1),T=e(t.intensity1,t.intensity,1),M=e(t.intensity2,t.intensity,1),S=e(t.angle,Math.PI/4),E=e(t.angle1,S),A=e(t.angle2,3*-S),L=e(t.speedIn,t.speed,1.6),C=e(t.speedOut,t.speed,1.2),R=e(t.hover,!0),P=e(t.easing,Expo.easeOut),O=e(t.video,!1);function D(){B.to(m.uniforms.dispFactor,L,{value:1,ease:P,onUpdate:a,onComplete:a})}function N(){B.to(m.uniforms.dispFactor,C,{value:0,ease:P,onUpdate:a,onComplete:a})}y?x&&b&&_?(n=new I.Scene,(i=new I.OrthographicCamera(y.offsetWidth/-2,y.offsetWidth/2,y.offsetHeight/2,y.offsetHeight/-2,1,1e3)).position.z=1,(r=new I.WebGLRenderer({antialias:!1,alpha:!0})).setPixelRatio(2),r.setClearColor(16777215,0),r.setSize(y.offsetWidth,y.offsetHeight),y.appendChild(r.domElement),a=function(){r.render(n,i)},(o=new I.TextureLoader).crossOrigin="",(l=o.load(_,a)).magFilter=l.minFilter=I.LinearFilter,O?((c=function(){requestAnimationFrame(c),r.render(n,i)})(),(O=document.createElement("video")).autoplay=!0,O.loop=!0,O.src=x,O.load(),(u=document.createElement("video")).autoplay=!0,u.loop=!0,u.src=b,u.load(),h=new I.VideoTexture(O),d=new I.VideoTexture(u),h.magFilter=d.magFilter=I.LinearFilter,h.minFilter=d.minFilter=I.LinearFilter,u.addEventListener("loadeddata",function(){u.play(),(d=new I.VideoTexture(u)).magFilter=I.LinearFilter,d.minFilter=I.LinearFilter,m.uniforms.texture2.value=d},!1),O.addEventListener("loadeddata",function(){O.play(),(h=new I.VideoTexture(O)).magFilter=I.LinearFilter,h.minFilter=I.LinearFilter,m.uniforms.texture1.value=h},!1)):(h=o.load(x,a),d=o.load(b,a),h.magFilter=d.magFilter=I.LinearFilter,h.minFilter=d.minFilter=I.LinearFilter),p=w,f=y.offsetHeight/y.offsetWidth<p?(s=1,y.offsetHeight/y.offsetWidth/p):(s=y.offsetWidth/y.offsetHeight*p,1),m=new I.ShaderMaterial({uniforms:{intensity1:{type:"f",value:T},intensity2:{type:"f",value:M},dispFactor:{type:"f",value:0},angle1:{type:"f",value:E},angle2:{type:"f",value:A},texture1:{type:"t",value:h},texture2:{type:"t",value:d},disp:{type:"t",value:l},res:{type:"vec4",value:new I.Vector4(y.offsetWidth,y.offsetHeight,s,f)},dpr:{type:"f",value:window.devicePixelRatio}},vertexShader:"\nvarying vec2 vUv;\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n",fragmentShader:"\nvarying vec2 vUv;\n\nuniform float dispFactor;\nuniform float dpr;\nuniform sampler2D disp;\n\nuniform sampler2D texture1;\nuniform sampler2D texture2;\nuniform float angle1;\nuniform float angle2;\nuniform float intensity1;\nuniform float intensity2;\nuniform vec4 res;\nuniform vec2 parent;\n\nmat2 getRotM(float angle) {\n  float s = sin(angle);\n  float c = cos(angle);\n  return mat2(c, -s, s, c);\n}\n\nvoid main() {\n  vec4 disp = texture2D(disp, vUv);\n  vec2 dispVec = vec2(disp.r, disp.g);\n\n  vec2 uv = 0.5 * gl_FragCoord.xy / (res.xy) ;\n  vec2 myUV = (uv - vec2(0.5))*res.zw + vec2(0.5);\n\n\n  vec2 distortedPosition1 = myUV + getRotM(angle1) * dispVec * intensity1 * dispFactor;\n  vec2 distortedPosition2 = myUV + getRotM(angle2) * dispVec * intensity2 * (1.0 - dispFactor);\n  vec4 _texture1 = texture2D(texture1, distortedPosition1);\n  vec4 _texture2 = texture2D(texture2, distortedPosition2);\n  gl_FragColor = mix(_texture1, _texture2, dispFactor);\n}\n",transparent:!0,opacity:1}),g=new I.PlaneBufferGeometry(y.offsetWidth,y.offsetHeight,1),v=new I.Mesh(g,m),n.add(v),R&&(y.addEventListener("mouseenter",D),y.addEventListener("touchstart",D),y.addEventListener("mouseleave",N),y.addEventListener("touchend",N)),window.addEventListener("resize",function(t){f=y.offsetHeight/y.offsetWidth<p?(s=1,y.offsetHeight/y.offsetWidth/p):(s=y.offsetWidth/y.offsetHeight*p,1),v.material.uniforms.res.value=new I.Vector4(y.offsetWidth,y.offsetHeight,s,f),r.setSize(y.offsetWidth,y.offsetHeight),a()}),this.next=D,this.previous=N):console.warn("One or more images are missing"):console.warn("Parent missing")}}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).THREE={})}(this,function(t){"use strict";void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:0<t?1:+t}),"name"in Function.prototype==0&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e});var W=100,D=301,N=302,h=303,d=304,I=306,B=307,z=1001,H=1003,U=1004,G=1005,j=1006,u=1008,Et=1009,V=1012,q=1014,At=1015,Lt=1016,X=1020,Y=1022,Ct=1023,Z=1026,J=1027,r=33776,a=33777,o=33778,s=33779,l=35840,c=35841,p=35842,f=35843,m=37492,g=37496,Rt=3e3,v=3001,y=3007,_=3002,e=3004,n=3005,i=3006,x=7680,b=35044,w=35048,F="300 es";function T(){}Object.assign(T.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){var n,i;void 0!==this._listeners&&(void 0===(n=this._listeners[t])||-1!==(i=n.indexOf(e))&&n.splice(i,1))},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=e.slice(0),i=0,r=n.length;i<r;i++)n[i].call(this,t)}}}});for(var M=[],S=0;S<256;S++)M[S]=(S<16?"0":"")+S.toString(16);var E=1234567,Pt={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(M[255&t]+M[t>>8&255]+M[t>>16&255]+M[t>>24&255]+"-"+M[255&e]+M[e>>8&255]+"-"+M[e>>16&15|64]+M[e>>24&255]+"-"+M[63&n|128]+M[n>>8&255]+"-"+M[n>>16&255]+M[n>>24&255]+M[255&i]+M[i>>8&255]+M[i>>16&255]+M[i>>24&255]).toUpperCase()},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:n<=t?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:n<=t?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return void 0!==t&&(E=t%2147483647),((E=16807*E%2147483647)-1)/2147483646},degToRad:function(t){return t*Pt.DEG2RAD},radToDeg:function(t){return t*Pt.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,n,i,r){var a=Math.cos,o=Math.sin,s=a(n/2),l=o(n/2),c=a((e+i)/2),u=o((e+i)/2),h=a((e-i)/2),d=o((e-i)/2),p=a((i-e)/2),f=o((i-e)/2);switch(r){case"XYX":t.set(s*u,l*h,l*d,s*c);break;case"YZY":t.set(l*d,s*u,l*h,s*c);break;case"ZXZ":t.set(l*h,l*d,s*u,s*c);break;case"XZX":t.set(s*u,l*f,l*p,s*c);break;case"YXY":t.set(l*p,s*u,l*f,s*c);break;case"ZYZ":t.set(l*f,l*p,s*u,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}};function A(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function L(t,e,n){return e&&A(t.prototype,e),n&&A(t,n),t}function C(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}function k(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var R,P,O,It=((O=et.prototype).set=function(t,e){return this.x=t,this.y=e,this},O.setScalar=function(t){return this.x=t,this.y=t,this},O.setX=function(t){return this.x=t,this},O.setY=function(t){return this.y=t,this},O.setComponent=function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},O.getComponent=function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},O.clone=function(){return new this.constructor(this.x,this.y)},O.copy=function(t){return this.x=t.x,this.y=t.y,this},O.add=function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},O.addScalar=function(t){return this.x+=t,this.y+=t,this},O.addVectors=function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},O.addScaledVector=function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},O.sub=function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},O.subScalar=function(t){return this.x-=t,this.y-=t,this},O.subVectors=function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},O.multiply=function(t){return this.x*=t.x,this.y*=t.y,this},O.multiplyScalar=function(t){return this.x*=t,this.y*=t,this},O.divide=function(t){return this.x/=t.x,this.y/=t.y,this},O.divideScalar=function(t){return this.multiplyScalar(1/t)},O.applyMatrix3=function(t){var e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this},O.min=function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},O.max=function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},O.clamp=function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},O.clampScalar=function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},O.clampLength=function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},O.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},O.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},O.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},O.roundToZero=function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},O.negate=function(){return this.x=-this.x,this.y=-this.y,this},O.dot=function(t){return this.x*t.x+this.y*t.y},O.cross=function(t){return this.x*t.y-this.y*t.x},O.lengthSq=function(){return this.x*this.x+this.y*this.y},O.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},O.manhattanLength=function(){return Math.abs(this.x)+Math.abs(this.y)},O.normalize=function(){return this.divideScalar(this.length()||1)},O.angle=function(){return Math.atan2(-this.y,-this.x)+Math.PI},O.distanceTo=function(t){return Math.sqrt(this.distanceToSquared(t))},O.distanceToSquared=function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},O.manhattanDistanceTo=function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},O.setLength=function(t){return this.normalize().multiplyScalar(t)},O.lerp=function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},O.lerpVectors=function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this},O.equals=function(t){return t.x===this.x&&t.y===this.y},O.fromArray=function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},O.toArray=function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},O.fromBufferAttribute=function(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},O.rotateAround=function(t,e){var n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,a=this.y-t.y;return this.x=r*n-a*i+t.x,this.y=r*i+a*n+t.y,this},O.random=function(){return this.x=Math.random(),this.y=Math.random(),this},L(et,[{key:"width",get:function(){return this.x},set:function(t){this.x=t}},{key:"height",get:function(){return this.y},set:function(t){this.y=t}}]),et),Q=((P=tt.prototype).set=function(t,e,n,i,r,a,o,s,l){var c=this.elements;return c[0]=t,c[1]=i,c[2]=o,c[3]=e,c[4]=r,c[5]=s,c[6]=n,c[7]=a,c[8]=l,this},P.identity=function(){return this.set(1,0,0,0,1,0,0,0,1),this},P.clone=function(){return(new this.constructor).fromArray(this.elements)},P.copy=function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this},P.extractBasis=function(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this},P.setFromMatrix4=function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},P.multiply=function(t){return this.multiplyMatrices(this,t)},P.premultiply=function(t){return this.multiplyMatrices(t,this)},P.multiplyMatrices=function(t,e){var n=t.elements,i=e.elements,r=this.elements,a=n[0],o=n[3],s=n[6],l=n[1],c=n[4],u=n[7],h=n[2],d=n[5],p=n[8],f=i[0],m=i[3],g=i[6],v=i[1],y=i[4],_=i[7],x=i[2],b=i[5],w=i[8];return r[0]=a*f+o*v+s*x,r[3]=a*m+o*y+s*b,r[6]=a*g+o*_+s*w,r[1]=l*f+c*v+u*x,r[4]=l*m+c*y+u*b,r[7]=l*g+c*_+u*w,r[2]=h*f+d*v+p*x,r[5]=h*m+d*y+p*b,r[8]=h*g+d*_+p*w,this},P.multiplyScalar=function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},P.determinant=function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],s=t[6],l=t[7],c=t[8];return e*a*c-e*o*l-n*r*c+n*o*s+i*r*l-i*a*s},P.invert=function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],s=t[6],l=t[7],c=t[8],u=c*a-o*l,h=o*s-c*r,d=l*r-a*s,p=e*u+n*h+i*d;if(0==p)return this.set(0,0,0,0,0,0,0,0,0);var f=1/p;return t[0]=u*f,t[1]=(i*l-c*n)*f,t[2]=(o*n-i*a)*f,t[3]=h*f,t[4]=(c*e-i*s)*f,t[5]=(i*r-o*e)*f,t[6]=d*f,t[7]=(n*s-l*e)*f,t[8]=(a*e-n*r)*f,this},P.transpose=function(){var t=this.elements,e=t[1];return t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},P.getNormalMatrix=function(t){return this.setFromMatrix4(t).copy(this).invert().transpose()},P.transposeIntoArray=function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},P.setUvTransform=function(t,e,n,i,r,a,o){var s=Math.cos(r),l=Math.sin(r);this.set(n*s,n*l,-n*(s*a+l*o)+a+t,-i*l,i*s,-i*(-l*a+s*o)+o+e,0,0,1)},P.scale=function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this},P.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),i=this.elements,r=i[0],a=i[3],o=i[6],s=i[1],l=i[4],c=i[7];return i[0]=e*r+n*s,i[3]=e*a+n*l,i[6]=e*o+n*c,i[1]=-n*r+e*s,i[4]=-n*a+e*l,i[7]=-n*o+e*c,this},P.translate=function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this},P.equals=function(t){for(var e=this.elements,n=t.elements,i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0},P.fromArray=function(t,e){void 0===e&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},P.toArray=function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t},tt),$={getDataURL:function(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;var e,n=t instanceof HTMLCanvasElement?t:(void 0===R&&(R=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),R.width=t.width,R.height=t.height,e=R.getContext("2d"),t instanceof ImageData?e.putImageData(t,0,0):e.drawImage(t,0,0,t.width,t.height),R);return 2048<n.width||2048<n.height?n.toDataURL("image/jpeg",.6):n.toDataURL("image/png")}},K=0;function tt(){Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function et(t,e){void 0===t&&(t=0),void 0===e&&(e=0),Object.defineProperty(this,"isVector2",{value:!0}),this.x=t,this.y=e}function nt(t,e,n,i,r,a,o,s,l,c){void 0===t&&(t=nt.DEFAULT_IMAGE),void 0===e&&(e=nt.DEFAULT_MAPPING),void 0===n&&(n=z),void 0===i&&(i=z),void 0===r&&(r=j),void 0===a&&(a=u),void 0===o&&(o=Ct),void 0===s&&(s=Et),void 0===l&&(l=1),void 0===c&&(c=Rt),Object.defineProperty(this,"id",{value:K++}),this.uuid=Pt.generateUUID(),this.name="",this.image=t,this.mipmaps=[],this.mapping=e,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=a,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=s,this.offset=new It(0,0),this.repeat=new It(1,1),this.center=new It(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Q,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.version=0,this.onUpdate=null}function it(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?$.getDataURL(t):t.data?{data:Array.prototype.slice.call(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}nt.DEFAULT_IMAGE=void 0,nt.DEFAULT_MAPPING=300,nt.prototype=Object.assign(Object.create(T.prototype),{constructor:nt,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var i,r=this.image;if(void 0===r.uuid&&(r.uuid=Pt.generateUUID()),!e&&void 0===t.images[r.uuid]){if(Array.isArray(r)){i=[];for(var a=0,o=r.length;a<o;a++)r[a].isDataTexture?i.push(it(r[a].image)):i.push(it(r[a]))}else i=it(r);t.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||1<t.x)switch(this.wrapS){case 1e3:t.x=t.x-Math.floor(t.x);break;case z:t.x=t.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||1<t.y)switch(this.wrapT){case 1e3:t.y=t.y-Math.floor(t.y);break;case z:t.y=t.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(nt.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}});var rt,Ot=((rt=at.prototype).set=function(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this},rt.setScalar=function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},rt.setX=function(t){return this.x=t,this},rt.setY=function(t){return this.y=t,this},rt.setZ=function(t){return this.z=t,this},rt.setW=function(t){return this.w=t,this},rt.setComponent=function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},rt.getComponent=function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},rt.clone=function(){return new this.constructor(this.x,this.y,this.z,this.w)},rt.copy=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},rt.add=function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},rt.addScalar=function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},rt.addVectors=function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},rt.addScaledVector=function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},rt.sub=function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},rt.subScalar=function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},rt.subVectors=function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},rt.multiplyScalar=function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},rt.applyMatrix4=function(t){var e=this.x,n=this.y,i=this.z,r=this.w,a=t.elements;return this.x=a[0]*e+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*e+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*e+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*e+a[7]*n+a[11]*i+a[15]*r,this},rt.divideScalar=function(t){return this.multiplyScalar(1/t)},rt.setAxisAngleFromQuaternion=function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},rt.setAxisAngleFromRotationMatrix=function(t){var e,n,i,r,a=t.elements,o=a[0],s=a[4],l=a[8],c=a[1],u=a[5],h=a[9],d=a[2],p=a[6],f=a[10];if(Math.abs(s-c)<.01&&Math.abs(l-d)<.01&&Math.abs(h-p)<.01){if(Math.abs(s+c)<.1&&Math.abs(l+d)<.1&&Math.abs(h+p)<.1&&Math.abs(o+u+f-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var m=(o+1)/2,g=(u+1)/2,v=(f+1)/2,y=(s+c)/4,_=(l+d)/4,x=(h+p)/4;return g<m&&v<m?r=m<.01?(n=0,i=.707106781):(i=y/(n=Math.sqrt(m)),_/n):v<g?r=g<.01?(i=0,n=.707106781):(n=y/(i=Math.sqrt(g)),x/i):v<.01?(i=n=.707106781,r=0):(n=_/(r=Math.sqrt(v)),i=x/r),this.set(n,i,r,e),this}var b=Math.sqrt((p-h)*(p-h)+(l-d)*(l-d)+(c-s)*(c-s));return Math.abs(b)<.001&&(b=1),this.x=(p-h)/b,this.y=(l-d)/b,this.z=(c-s)/b,this.w=Math.acos((o+u+f-1)/2),this},rt.min=function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},rt.max=function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},rt.clamp=function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},rt.clampScalar=function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this},rt.clampLength=function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},rt.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},rt.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},rt.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},rt.roundToZero=function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},rt.negate=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},rt.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},rt.lengthSq=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},rt.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},rt.manhattanLength=function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},rt.normalize=function(){return this.divideScalar(this.length()||1)},rt.setLength=function(t){return this.normalize().multiplyScalar(t)},rt.lerp=function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},rt.lerpVectors=function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this},rt.equals=function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},rt.fromArray=function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},rt.toArray=function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},rt.fromBufferAttribute=function(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this},rt.random=function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this},L(at,[{key:"width",get:function(){return this.z},set:function(t){this.z=t}},{key:"height",get:function(){return this.w},set:function(t){this.w=t}}]),at);function at(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=1),Object.defineProperty(this,"isVector4",{value:!0}),this.x=t,this.y=e,this.z=n,this.w=i}function ot(t,e,n){this.width=t,this.height=e,this.scissor=new Ot(0,0,t,e),this.scissorTest=!1,this.viewport=new Ot(0,0,t,e),n=n||{},this.texture=new nt(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=e,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:j,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function st(t,e,n){ot.call(this,t,e,n),this.samples=4}ot.prototype=Object.assign(Object.create(T.prototype),{constructor:ot,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.texture.image.width=t,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),st.prototype=Object.assign(Object.create(ot.prototype),{constructor:st,isWebGLMultisampleRenderTarget:!0,copy:function(t){return ot.prototype.copy.call(this,t),this.samples=t.samples,this}});var lt,ct,ut=function(){function t(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=1),Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=t,this._y=e,this._z=n,this._w=i}t.slerp=function(t,e,n,i){return n.copy(t).slerp(e,i)},t.slerpFlat=function(t,e,n,i,r,a,o){var s,l,c,u,h,d,p,f,m=n[i+0],g=n[i+1],v=n[i+2],y=n[i+3],_=r[a+0],x=r[a+1],b=r[a+2],w=r[a+3];y===w&&m===_&&g===x&&v===b||(d=1-o,l=0<=(s=m*_+g*x+v*b+y*w)?1:-1,(c=1-s*s)>Number.EPSILON&&(u=Math.sqrt(c),h=Math.atan2(u,s*l),d=Math.sin(d*h)/u,o=Math.sin(o*h)/u),m=m*d+_*(p=o*l),g=g*d+x*p,v=v*d+b*p,y=y*d+w*p,d===1-o&&(m*=f=1/Math.sqrt(m*m+g*g+v*v+y*y),g*=f,v*=f,y*=f)),t[e]=m,t[e+1]=g,t[e+2]=v,t[e+3]=y},t.multiplyQuaternionsFlat=function(t,e,n,i,r,a){var o=n[i],s=n[i+1],l=n[i+2],c=n[i+3],u=r[a],h=r[a+1],d=r[a+2],p=r[a+3];return t[e]=o*p+c*u+s*d-l*h,t[e+1]=s*p+c*h+l*u-o*d,t[e+2]=l*p+c*d+o*h-s*u,t[e+3]=c*p-o*u-s*h-l*d,t};var e=t.prototype;return e.set=function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this},e.clone=function(){return new this.constructor(this._x,this._y,this._z,this._w)},e.copy=function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},e.setFromEuler=function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,i=t._y,r=t._z,a=t._order,o=Math.cos,s=Math.sin,l=o(n/2),c=o(i/2),u=o(r/2),h=s(n/2),d=s(i/2),p=s(r/2);switch(a){case"XYZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"YXZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"ZXY":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"ZYX":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"YZX":this._x=h*c*u+l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u-h*d*p;break;case"XZY":this._x=h*c*u-l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==e&&this._onChangeCallback(),this},e.setFromAxisAngle=function(t,e){var n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this},e.setFromRotationMatrix=function(t){var e,n,i,r,a=t.elements,o=a[0],s=a[4],l=a[8],c=a[1],u=a[5],h=a[9],d=a[2],p=a[6],f=a[10],m=o+u+f;return 0<m?(e=.5/Math.sqrt(m+1),this._w=.25/e,this._x=(p-h)*e,this._y=(l-d)*e,this._z=(c-s)*e):u<o&&f<o?(n=2*Math.sqrt(1+o-u-f),this._w=(p-h)/n,this._x=.25*n,this._y=(s+c)/n,this._z=(l+d)/n):f<u?(i=2*Math.sqrt(1+u-o-f),this._w=(l-d)/i,this._x=(s+c)/i,this._y=.25*i,this._z=(h+p)/i):(r=2*Math.sqrt(1+f-o-u),this._w=(c-s)/r,this._x=(l+d)/r,this._y=(h+p)/r,this._z=.25*r),this._onChangeCallback(),this},e.setFromUnitVectors=function(t,e){var n=t.dot(e)+1;return n<1e-6?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0):(this._x=0,this._y=-t.z,this._z=t.y)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x),this._w=n,this.normalize()},e.angleTo=function(t){return 2*Math.acos(Math.abs(Pt.clamp(this.dot(t),-1,1)))},e.rotateTowards=function(t,e){var n=this.angleTo(t);if(0===n)return this;var i=Math.min(1,e/n);return this.slerp(t,i),this},e.identity=function(){return this.set(0,0,0,1)},e.invert=function(){return this.conjugate()},e.conjugate=function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},e.dot=function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},e.lengthSq=function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},e.length=function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},e.normalize=function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},e.multiply=function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},e.premultiply=function(t){return this.multiplyQuaternions(t,this)},e.multiplyQuaternions=function(t,e){var n=t._x,i=t._y,r=t._z,a=t._w,o=e._x,s=e._y,l=e._z,c=e._w;return this._x=n*c+a*o+i*l-r*s,this._y=i*c+a*s+r*o-n*l,this._z=r*c+a*l+n*s-i*o,this._w=a*c-n*o-i*s-r*l,this._onChangeCallback(),this},e.slerp=function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,i=this._y,r=this._z,a=this._w,o=a*t._w+n*t._x+i*t._y+r*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),1<=o)return this._w=a,this._x=n,this._y=i,this._z=r,this;var s=1-o*o;if(s<=Number.EPSILON){var l=1-e;return this._w=l*a+e*this._w,this._x=l*n+e*this._x,this._y=l*i+e*this._y,this._z=l*r+e*this._z,this.normalize(),this._onChangeCallback(),this}var c=Math.sqrt(s),u=Math.atan2(c,o),h=Math.sin((1-e)*u)/c,d=Math.sin(e*u)/c;return this._w=a*h+this._w*d,this._x=n*h+this._x*d,this._y=i*h+this._y*d,this._z=r*h+this._z*d,this._onChangeCallback(),this},e.equals=function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},e.fromArray=function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this},e.toArray=function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},e.fromBufferAttribute=function(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this},e._onChange=function(t){return this._onChangeCallback=t,this},e._onChangeCallback=function(){},L(t,[{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}]),t}(),Bt=((ct=mt.prototype).set=function(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this},ct.setScalar=function(t){return this.x=t,this.y=t,this.z=t,this},ct.setX=function(t){return this.x=t,this},ct.setY=function(t){return this.y=t,this},ct.setZ=function(t){return this.z=t,this},ct.setComponent=function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},ct.getComponent=function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},ct.clone=function(){return new this.constructor(this.x,this.y,this.z)},ct.copy=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},ct.add=function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},ct.addScalar=function(t){return this.x+=t,this.y+=t,this.z+=t,this},ct.addVectors=function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},ct.addScaledVector=function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},ct.sub=function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},ct.subScalar=function(t){return this.x-=t,this.y-=t,this.z-=t,this},ct.subVectors=function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},ct.multiply=function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},ct.multiplyScalar=function(t){return this.x*=t,this.y*=t,this.z*=t,this},ct.multiplyVectors=function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},ct.applyEuler=function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(dt.setFromEuler(t))},ct.applyAxisAngle=function(t,e){return this.applyQuaternion(dt.setFromAxisAngle(t,e))},ct.applyMatrix3=function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this},ct.applyNormalMatrix=function(t){return this.applyMatrix3(t).normalize()},ct.applyMatrix4=function(t){var e=this.x,n=this.y,i=this.z,r=t.elements,a=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*a,this},ct.applyQuaternion=function(t){var e=this.x,n=this.y,i=this.z,r=t.x,a=t.y,o=t.z,s=t.w,l=s*e+a*i-o*n,c=s*n+o*e-r*i,u=s*i+r*n-a*e,h=-r*e-a*n-o*i;return this.x=l*s+h*-r+c*-o-u*-a,this.y=c*s+h*-a+u*-r-l*-o,this.z=u*s+h*-o+l*-a-c*-r,this},ct.project=function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},ct.unproject=function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},ct.transformDirection=function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()},ct.divide=function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},ct.divideScalar=function(t){return this.multiplyScalar(1/t)},ct.min=function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},ct.max=function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},ct.clamp=function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},ct.clampScalar=function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},ct.clampLength=function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},ct.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ct.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},ct.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},ct.roundToZero=function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},ct.negate=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},ct.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},ct.lengthSq=function(){return this.x*this.x+this.y*this.y+this.z*this.z},ct.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},ct.manhattanLength=function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},ct.normalize=function(){return this.divideScalar(this.length()||1)},ct.setLength=function(t){return this.normalize().multiplyScalar(t)},ct.lerp=function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},ct.lerpVectors=function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this},ct.cross=function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},ct.crossVectors=function(t,e){var n=t.x,i=t.y,r=t.z,a=e.x,o=e.y,s=e.z;return this.x=i*s-r*o,this.y=r*a-n*s,this.z=n*o-i*a,this},ct.projectOnVector=function(t){var e=t.lengthSq();if(0===e)return this.set(0,0,0);var n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)},ct.projectOnPlane=function(t){return ht.copy(this).projectOnVector(t),this.sub(ht)},ct.reflect=function(t){return this.sub(ht.copy(t).multiplyScalar(2*this.dot(t)))},ct.angleTo=function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;var n=this.dot(t)/e;return Math.acos(Pt.clamp(n,-1,1))},ct.distanceTo=function(t){return Math.sqrt(this.distanceToSquared(t))},ct.distanceToSquared=function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i},ct.manhattanDistanceTo=function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},ct.setFromSpherical=function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},ct.setFromSphericalCoords=function(t,e,n){var i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this},ct.setFromCylindrical=function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},ct.setFromCylindricalCoords=function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this},ct.setFromMatrixPosition=function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},ct.setFromMatrixScale=function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this},ct.setFromMatrixColumn=function(t,e){return this.fromArray(t.elements,4*e)},ct.setFromMatrix3Column=function(t,e){return this.fromArray(t.elements,3*e)},ct.equals=function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},ct.fromArray=function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},ct.toArray=function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},ct.fromBufferAttribute=function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this},ct.random=function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this},mt),ht=new Bt,dt=new ut,pt=((lt=ft.prototype).set=function(t,e){return this.min.copy(t),this.max.copy(e),this},lt.setFromArray=function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,l=t.length;s<l;s+=3){var c=t[s],u=t[s+1],h=t[s+2];c<e&&(e=c),u<n&&(n=u),h<i&&(i=h),r<c&&(r=c),a<u&&(a=u),o<h&&(o=h)}return this.min.set(e,n,i),this.max.set(r,a,o),this},lt.setFromBufferAttribute=function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,l=t.count;s<l;s++){var c=t.getX(s),u=t.getY(s),h=t.getZ(s);c<e&&(e=c),u<n&&(n=u),h<i&&(i=h),r<c&&(r=c),a<u&&(a=u),o<h&&(o=h)}return this.min.set(e,n,i),this.max.set(r,a,o),this},lt.setFromPoints=function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},lt.setFromCenterAndSize=function(t,e){var n=wt.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this},lt.setFromObject=function(t){return this.makeEmpty(),this.expandByObject(t)},lt.clone=function(){return(new this.constructor).copy(this)},lt.copy=function(t){return this.min.copy(t.min),this.max.copy(t.max),this},lt.makeEmpty=function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},lt.isEmpty=function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},lt.getCenter=function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new Bt),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},lt.getSize=function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new Bt),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},lt.expandByPoint=function(t){return this.min.min(t),this.max.max(t),this},lt.expandByVector=function(t){return this.min.sub(t),this.max.add(t),this},lt.expandByScalar=function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},lt.expandByObject=function(t){t.updateWorldMatrix(!1,!1);var e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),Tt.copy(e.boundingBox),Tt.applyMatrix4(t.matrixWorld),this.union(Tt));for(var n=t.children,i=0,r=n.length;i<r;i++)this.expandByObject(n[i]);return this},lt.containsPoint=function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},lt.containsBox=function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},lt.getParameter=function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new Bt),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},lt.intersectsBox=function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},lt.intersectsSphere=function(t){return this.clampPoint(t.center,wt),wt.distanceToSquared(t.center)<=t.radius*t.radius},lt.intersectsPlane=function(t){var e,n=0<t.normal.x?(e=t.normal.x*this.min.x,t.normal.x*this.max.x):(e=t.normal.x*this.max.x,t.normal.x*this.min.x);return 0<t.normal.y?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),0<t.normal.z?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant},lt.intersectsTriangle=function(t){return!this.isEmpty()&&(this.getCenter(zt),Ht.subVectors(this.max,zt),Mt.subVectors(t.a,zt),St.subVectors(t.b,zt),Dt.subVectors(t.c,zt),Nt.subVectors(St,Mt),Ft.subVectors(Dt,St),kt.subVectors(Mt,Dt),!!gt([0,-Nt.z,Nt.y,0,-Ft.z,Ft.y,0,-kt.z,kt.y,Nt.z,0,-Nt.x,Ft.z,0,-Ft.x,kt.z,0,-kt.x,-Nt.y,Nt.x,0,-Ft.y,Ft.x,0,-kt.y,kt.x,0],Mt,St,Dt,Ht)&&!!gt([1,0,0,0,1,0,0,0,1],Mt,St,Dt,Ht)&&(Ut.crossVectors(Nt,Ft),gt([Ut.x,Ut.y,Ut.z],Mt,St,Dt,Ht)))},lt.clampPoint=function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new Bt),e.copy(t).clamp(this.min,this.max)},lt.distanceToPoint=function(t){return wt.copy(t).clamp(this.min,this.max).sub(t).length()},lt.getBoundingSphere=function(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(wt).length(),t},lt.intersect=function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},lt.union=function(t){return this.min.min(t.min),this.max.max(t.max),this},lt.applyMatrix4=function(t){return this.isEmpty()||(bt[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),bt[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),bt[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),bt[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),bt[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),bt[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),bt[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),bt[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(bt)),this},lt.translate=function(t){return this.min.add(t),this.max.add(t),this},lt.equals=function(t){return t.min.equals(this.min)&&t.max.equals(this.max)},ft);function ft(t,e){Object.defineProperty(this,"isBox3",{value:!0}),this.min=void 0!==t?t:new Bt(1/0,1/0,1/0),this.max=void 0!==e?e:new Bt(-1/0,-1/0,-1/0)}function mt(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),Object.defineProperty(this,"isVector3",{value:!0}),this.x=t,this.y=e,this.z=n}function gt(t,e,n,i,r){for(var a=0,o=t.length-3;a<=o;a+=3){Gt.fromArray(t,a);var s=r.x*Math.abs(Gt.x)+r.y*Math.abs(Gt.y)+r.z*Math.abs(Gt.z),l=e.dot(Gt),c=n.dot(Gt),u=i.dot(Gt);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>s)return!1}return!0}var vt,yt,_t,xt,bt=[new Bt,new Bt,new Bt,new Bt,new Bt,new Bt,new Bt,new Bt],wt=new Bt,Tt=new pt,Mt=new Bt,St=new Bt,Dt=new Bt,Nt=new Bt,Ft=new Bt,kt=new Bt,zt=new Bt,Ht=new Bt,Ut=new Bt,Gt=new Bt,jt=new pt,Vt=((xt=he.prototype).set=function(t,e){return this.center.copy(t),this.radius=e,this},xt.setFromPoints=function(t,e){var n=this.center;void 0!==e?n.copy(e):jt.setFromPoints(t).getCenter(n);for(var i=0,r=0,a=t.length;r<a;r++)i=Math.max(i,n.distanceToSquared(t[r]));return this.radius=Math.sqrt(i),this},xt.clone=function(){return(new this.constructor).copy(this)},xt.copy=function(t){return this.center.copy(t.center),this.radius=t.radius,this},xt.isEmpty=function(){return this.radius<0},xt.makeEmpty=function(){return this.center.set(0,0,0),this.radius=-1,this},xt.containsPoint=function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},xt.distanceToPoint=function(t){return t.distanceTo(this.center)-this.radius},xt.intersectsSphere=function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},xt.intersectsBox=function(t){return t.intersectsSphere(this)},xt.intersectsPlane=function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},xt.clampPoint=function(t,e){var n=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new Bt),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},xt.getBoundingBox=function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new pt),this.isEmpty()?t.makeEmpty():(t.set(this.center,this.center),t.expandByScalar(this.radius)),t},xt.applyMatrix4=function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},xt.translate=function(t){return this.center.add(t),this},xt.equals=function(t){return t.center.equals(this.center)&&t.radius===this.radius},he),Wt=new Bt,qt=new Bt,Xt=new Bt,Yt=new Bt,Zt=new Bt,Jt=new Bt,Qt=new Bt,$t=((_t=ue.prototype).set=function(t,e){return this.origin.copy(t),this.direction.copy(e),this},_t.clone=function(){return(new this.constructor).copy(this)},_t.copy=function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},_t.at=function(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new Bt),e.copy(this.direction).multiplyScalar(t).add(this.origin)},_t.lookAt=function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},_t.recast=function(t){return this.origin.copy(this.at(t,Wt)),this},_t.closestPointToPoint=function(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new Bt),e.subVectors(t,this.origin);var n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)},_t.distanceToPoint=function(t){return Math.sqrt(this.distanceSqToPoint(t))},_t.distanceSqToPoint=function(t){var e=Wt.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Wt.copy(this.direction).multiplyScalar(e).add(this.origin),Wt.distanceToSquared(t))},_t.distanceSqToSegment=function(t,e,n,i){qt.copy(t).add(e).multiplyScalar(.5),Xt.copy(e).sub(t).normalize(),Yt.copy(this.origin).sub(qt);var r,a,o,s,l,c=.5*t.distanceTo(e),u=-this.direction.dot(Xt),h=Yt.dot(this.direction),d=-Yt.dot(Xt),p=Yt.lengthSq(),f=Math.abs(1-u*u);return l=0<f?(a=u*h-d,o=c*f,0<=(r=u*d-h)?-o<=a?a<=o?(r*=s=1/f)*(r+u*(a*=s)+2*h)+a*(u*r+a+2*d)+p:(a=c,-(r=Math.max(0,-(u*a+h)))*r+a*(a+2*d)+p):(a=-c,-(r=Math.max(0,-(u*a+h)))*r+a*(a+2*d)+p):a<=-o?-(r=Math.max(0,-(-u*c+h)))*r+(a=0<r?-c:Math.min(Math.max(-c,-d),c))*(a+2*d)+p:a<=o?(r=0,(a=Math.min(Math.max(-c,-d),c))*(a+2*d)+p):-(r=Math.max(0,-(u*c+h)))*r+(a=0<r?c:Math.min(Math.max(-c,-d),c))*(a+2*d)+p):(a=0<u?-c:c,-(r=Math.max(0,-(u*a+h)))*r+a*(a+2*d)+p),n&&n.copy(this.direction).multiplyScalar(r).add(this.origin),i&&i.copy(Xt).multiplyScalar(a).add(qt),l},_t.intersectSphere=function(t,e){Wt.subVectors(t.center,this.origin);var n=Wt.dot(this.direction),i=Wt.dot(Wt)-n*n,r=t.radius*t.radius;if(r<i)return null;var a=Math.sqrt(r-i),o=n-a,s=n+a;return o<0&&s<0?null:o<0?this.at(s,e):this.at(o,e)},_t.intersectsSphere=function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},_t.distanceToPlane=function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return 0<=n?n:null},_t.intersectPlane=function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)},_t.intersectsPlane=function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0},_t.intersectBox=function(t,e){var n,i,r,a,o=1/this.direction.x,s=1/this.direction.y,l=1/this.direction.z,c=this.origin,u=0<=o?(n=(t.min.x-c.x)*o,(t.max.x-c.x)*o):(n=(t.max.x-c.x)*o,(t.min.x-c.x)*o),h=0<=s?(i=(t.min.y-c.y)*s,(t.max.y-c.y)*s):(i=(t.max.y-c.y)*s,(t.min.y-c.y)*s);return h<n||u<i?null:((n<i||n!=n)&&(n=i),(h<u||u!=u)&&(u=h),(a=0<=l?(r=(t.min.z-c.z)*l,(t.max.z-c.z)*l):(r=(t.max.z-c.z)*l,(t.min.z-c.z)*l))<n||u<r?null:((n<r||n!=n)&&(n=r),(a<u||u!=u)&&(u=a),u<0?null:this.at(0<=n?n:u,e)))},_t.intersectsBox=function(t){return null!==this.intersectBox(t,Wt)},_t.intersectTriangle=function(t,e,n,i,r){Zt.subVectors(e,t),Jt.subVectors(n,t),Qt.crossVectors(Zt,Jt);var a,o=this.direction.dot(Qt);if(0<o){if(i)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Yt.subVectors(this.origin,t);var s=a*this.direction.dot(Jt.crossVectors(Yt,Jt));if(s<0)return null;var l=a*this.direction.dot(Zt.cross(Yt));if(l<0)return null;if(o<s+l)return null;var c=-a*Yt.dot(Qt);return c<0?null:this.at(c/o,r)},_t.applyMatrix4=function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},_t.equals=function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)},ue),Kt=((yt=ce.prototype).set=function(t,e,n,i,r,a,o,s,l,c,u,h,d,p,f,m){var g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=i,g[1]=r,g[5]=a,g[9]=o,g[13]=s,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this},yt.identity=function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},yt.clone=function(){return(new ce).fromArray(this.elements)},yt.copy=function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},yt.copyPosition=function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},yt.extractBasis=function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},yt.makeBasis=function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},yt.extractRotation=function(t){var e=this.elements,n=t.elements,i=1/te.setFromMatrixColumn(t,0).length(),r=1/te.setFromMatrixColumn(t,1).length(),a=1/te.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*a,e[9]=n[9]*a,e[10]=n[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},yt.makeRotationFromEuler=function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e,n,i,r,a,o,s,l,c,u,h,d,p,f,m,g,v,y,_,x,b,w,T,M,S=this.elements,E=t.x,A=t.y,L=t.z,C=Math.cos(E),R=Math.sin(E),P=Math.cos(A),O=Math.sin(A),D=Math.cos(L),N=Math.sin(L);return"XYZ"===t.order?(e=C*D,n=C*N,i=R*D,r=R*N,S[0]=P*D,S[4]=-P*N,S[8]=O,S[1]=n+i*O,S[5]=e-r*O,S[9]=-R*P,S[2]=r-e*O,S[6]=i+n*O,S[10]=C*P):"YXZ"===t.order?(a=P*D,o=P*N,s=O*D,l=O*N,S[0]=a+l*R,S[4]=s*R-o,S[8]=C*O,S[1]=C*N,S[5]=C*D,S[9]=-R,S[2]=o*R-s,S[6]=l+a*R,S[10]=C*P):"ZXY"===t.order?(c=P*D,u=P*N,h=O*D,d=O*N,S[0]=c-d*R,S[4]=-C*N,S[8]=h+u*R,S[1]=u+h*R,S[5]=C*D,S[9]=d-c*R,S[2]=-C*O,S[6]=R,S[10]=C*P):"ZYX"===t.order?(p=C*D,f=C*N,m=R*D,g=R*N,S[0]=P*D,S[4]=m*O-f,S[8]=p*O+g,S[1]=P*N,S[5]=g*O+p,S[9]=f*O-m,S[2]=-O,S[6]=R*P,S[10]=C*P):"YZX"===t.order?(v=C*P,y=C*O,_=R*P,x=R*O,S[0]=P*D,S[4]=x-v*N,S[8]=_*N+y,S[1]=N,S[5]=C*D,S[9]=-R*D,S[2]=-O*D,S[6]=y*N+_,S[10]=v-x*N):"XZY"===t.order&&(b=C*P,w=C*O,T=R*P,M=R*O,S[0]=P*D,S[4]=-N,S[8]=O*D,S[1]=b*N+M,S[5]=C*D,S[9]=w*N-T,S[2]=T*N-w,S[6]=R*D,S[10]=M*N+b),S[3]=0,S[7]=0,S[11]=0,S[12]=0,S[13]=0,S[14]=0,S[15]=1,this},yt.makeRotationFromQuaternion=function(t){return this.compose(ne,t,ie)},yt.lookAt=function(t,e,n){var i=this.elements;return oe.subVectors(t,e),0===oe.lengthSq()&&(oe.z=1),oe.normalize(),re.crossVectors(n,oe),0===re.lengthSq()&&(1===Math.abs(n.z)?oe.x+=1e-4:oe.z+=1e-4,oe.normalize(),re.crossVectors(n,oe)),re.normalize(),ae.crossVectors(oe,re),i[0]=re.x,i[4]=ae.x,i[8]=oe.x,i[1]=re.y,i[5]=ae.y,i[9]=oe.y,i[2]=re.z,i[6]=ae.z,i[10]=oe.z,this},yt.multiply=function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},yt.premultiply=function(t){return this.multiplyMatrices(t,this)},yt.multiplyMatrices=function(t,e){var n=t.elements,i=e.elements,r=this.elements,a=n[0],o=n[4],s=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],y=n[7],_=n[11],x=n[15],b=i[0],w=i[4],T=i[8],M=i[12],S=i[1],E=i[5],A=i[9],L=i[13],C=i[2],R=i[6],P=i[10],O=i[14],D=i[3],N=i[7],I=i[11],B=i[15];return r[0]=a*b+o*S+s*C+l*D,r[4]=a*w+o*E+s*R+l*N,r[8]=a*T+o*A+s*P+l*I,r[12]=a*M+o*L+s*O+l*B,r[1]=c*b+u*S+h*C+d*D,r[5]=c*w+u*E+h*R+d*N,r[9]=c*T+u*A+h*P+d*I,r[13]=c*M+u*L+h*O+d*B,r[2]=p*b+f*S+m*C+g*D,r[6]=p*w+f*E+m*R+g*N,r[10]=p*T+f*A+m*P+g*I,r[14]=p*M+f*L+m*O+g*B,r[3]=v*b+y*S+_*C+x*D,r[7]=v*w+y*E+_*R+x*N,r[11]=v*T+y*A+_*P+x*I,r[15]=v*M+y*L+_*O+x*B,this},yt.multiplyScalar=function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},yt.determinant=function(){var t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],a=t[1],o=t[5],s=t[9],l=t[13],c=t[2],u=t[6],h=t[10],d=t[14];return t[3]*(r*s*u-i*l*u-r*o*h+n*l*h+i*o*d-n*s*d)+t[7]*(e*s*d-e*l*h+r*a*h-i*a*d+i*l*c-r*s*c)+t[11]*(e*l*u-e*o*d-r*a*u+n*a*d+r*o*c-n*l*c)+t[15]*(-i*o*c-e*s*u+e*o*h+i*a*u-n*a*h+n*s*c)},yt.transpose=function(){var t=this.elements,e=t[1];return t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},yt.setPosition=function(t,e,n){var i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this},yt.invert=function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],s=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11],p=t[12],f=t[13],m=t[14],g=t[15],v=u*m*l-f*h*l+f*s*d-o*m*d-u*s*g+o*h*g,y=p*h*l-c*m*l-p*s*d+a*m*d+c*s*g-a*h*g,_=c*f*l-p*u*l+p*o*d-a*f*d-c*o*g+a*u*g,x=p*u*s-c*f*s-p*o*h+a*f*h+c*o*m-a*u*m,b=e*v+n*y+i*_+r*x;if(0==b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var w=1/b;return t[0]=v*w,t[1]=(f*h*r-u*m*r-f*i*d+n*m*d+u*i*g-n*h*g)*w,t[2]=(o*m*r-f*s*r+f*i*l-n*m*l-o*i*g+n*s*g)*w,t[3]=(u*s*r-o*h*r-u*i*l+n*h*l+o*i*d-n*s*d)*w,t[4]=y*w,t[5]=(c*m*r-p*h*r+p*i*d-e*m*d-c*i*g+e*h*g)*w,t[6]=(p*s*r-a*m*r-p*i*l+e*m*l+a*i*g-e*s*g)*w,t[7]=(a*h*r-c*s*r+c*i*l-e*h*l-a*i*d+e*s*d)*w,t[8]=_*w,t[9]=(p*u*r-c*f*r-p*n*d+e*f*d+c*n*g-e*u*g)*w,t[10]=(a*f*r-p*o*r+p*n*l-e*f*l-a*n*g+e*o*g)*w,t[11]=(c*o*r-a*u*r-c*n*l+e*u*l+a*n*d-e*o*d)*w,t[12]=x*w,t[13]=(c*f*i-p*u*i+p*n*h-e*f*h-c*n*m+e*u*m)*w,t[14]=(p*o*i-a*f*i-p*n*s+e*f*s+a*n*m-e*o*m)*w,t[15]=(a*u*i-c*o*i+c*n*s-e*u*s-a*n*h+e*o*h)*w,this},yt.scale=function(t){var e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this},yt.getMaxScaleOnAxis=function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))},yt.makeTranslation=function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},yt.makeRotationX=function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},yt.makeRotationY=function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},yt.makeRotationZ=function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},yt.makeRotationAxis=function(t,e){var n=Math.cos(e),i=Math.sin(e),r=1-n,a=t.x,o=t.y,s=t.z,l=r*a,c=r*o;return this.set(l*a+n,l*o-i*s,l*s+i*o,0,l*o+i*s,c*o+n,c*s-i*a,0,l*s-i*o,c*s+i*a,r*s*s+n,0,0,0,0,1),this},yt.makeScale=function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},yt.makeShear=function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},yt.compose=function(t,e,n){var i=this.elements,r=e._x,a=e._y,o=e._z,s=e._w,l=r+r,c=a+a,u=o+o,h=r*l,d=r*c,p=r*u,f=a*c,m=a*u,g=o*u,v=s*l,y=s*c,_=s*u,x=n.x,b=n.y,w=n.z;return i[0]=(1-(f+g))*x,i[1]=(d+_)*x,i[2]=(p-y)*x,i[3]=0,i[4]=(d-_)*b,i[5]=(1-(h+g))*b,i[6]=(m+v)*b,i[7]=0,i[8]=(p+y)*w,i[9]=(m-v)*w,i[10]=(1-(h+f))*w,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this},yt.decompose=function(t,e,n){var i=this.elements,r=te.set(i[0],i[1],i[2]).length(),a=te.set(i[4],i[5],i[6]).length(),o=te.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],ee.copy(this);var s=1/r,l=1/a,c=1/o;return ee.elements[0]*=s,ee.elements[1]*=s,ee.elements[2]*=s,ee.elements[4]*=l,ee.elements[5]*=l,ee.elements[6]*=l,ee.elements[8]*=c,ee.elements[9]*=c,ee.elements[10]*=c,e.setFromRotationMatrix(ee),n.x=r,n.y=a,n.z=o,this},yt.makePerspective=function(t,e,n,i,r,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*r/(e-t),l=2*r/(n-i),c=(e+t)/(e-t),u=(n+i)/(n-i),h=-(a+r)/(a-r),d=-2*a*r/(a-r);return o[0]=s,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=l,o[9]=u,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},yt.makeOrthographic=function(t,e,n,i,r,a){var o=this.elements,s=1/(e-t),l=1/(n-i),c=1/(a-r),u=(e+t)*s,h=(n+i)*l,d=(a+r)*c;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-u,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},yt.equals=function(t){for(var e=this.elements,n=t.elements,i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0},yt.fromArray=function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},yt.toArray=function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t},ce),te=new Bt,ee=new Kt,ne=new Bt(0,0,0),ie=new Bt(1,1,1),re=new Bt,ae=new Bt,oe=new Bt,se=((vt=le.prototype).set=function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._order=i||this._order,this._onChangeCallback(),this},vt.clone=function(){return new this.constructor(this._x,this._y,this._z,this._order)},vt.copy=function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},vt.setFromRotationMatrix=function(t,e,n){var i=Pt.clamp,r=t.elements,a=r[0],o=r[4],s=r[8],l=r[1],c=r[5],u=r[9],h=r[2],d=r[6],p=r[10];switch(e=e||this._order){case"XYZ":this._y=Math.asin(i(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-i(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(s,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,a),this._z=0);break;case"ZXY":this._x=Math.asin(i(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,a));break;case"ZYX":this._y=Math.asin(-i(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,p),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(i(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,a)):(this._x=0,this._y=Math.atan2(s,p));break;case"XZY":this._z=Math.asin(-i(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!1!==n&&this._onChangeCallback(),this},vt.setFromQuaternion=function(t,e,n){return pe.makeRotationFromQuaternion(t),this.setFromRotationMatrix(pe,e,n)},vt.setFromVector3=function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},vt.reorder=function(t){return fe.setFromEuler(this),this.setFromQuaternion(fe,t)},vt.equals=function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},vt.fromArray=function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this},vt.toArray=function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},vt.toVector3=function(t){return t?t.set(this._x,this._y,this._z):new Bt(this._x,this._y,this._z)},vt._onChange=function(t){return this._onChangeCallback=t,this},vt._onChangeCallback=function(){},L(le,[{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}}]),le);function le(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=le.DefaultOrder),Object.defineProperty(this,"isEuler",{value:!0}),this._x=t,this._y=e,this._z=n,this._order=i}function ce(){Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function ue(t,e){this.origin=void 0!==t?t:new Bt,this.direction=void 0!==e?e:new Bt(0,0,-1)}function he(t,e){this.center=void 0!==t?t:new Bt,this.radius=void 0!==e?e:-1}se.DefaultOrder="XYZ",se.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var de,pe=new Kt,fe=new ut,me=((de=Ce.prototype).set=function(t){this.mask=1<<t|0},de.enable=function(t){this.mask|=1<<t|0},de.enableAll=function(){this.mask=-1},de.toggle=function(t){this.mask^=1<<t|0},de.disable=function(t){this.mask&=~(1<<t|0)},de.disableAll=function(){this.mask=0},de.test=function(t){return 0!=(this.mask&t.mask)},Ce),ge=0,ve=new Bt,ye=new ut,_e=new Kt,xe=new Bt,be=new Bt,we=new Bt,Te=new ut,Me=new Bt(1,0,0),Se=new Bt(0,1,0),Ee=new Bt(0,0,1),Ae={type:"added"},Le={type:"removed"};function Ce(){this.mask=1}function Re(){Object.defineProperty(this,"id",{value:ge++}),this.uuid=Pt.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Re.DefaultUp.clone();var t=new Bt,e=new se,n=new ut,i=new Bt(1,1,1);e._onChange(function(){n.setFromEuler(e,!1)}),n._onChange(function(){e.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Kt},normalMatrix:{value:new Q}}),this.matrix=new Kt,this.matrixWorld=new Kt,this.matrixAutoUpdate=Re.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new me,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}Re.DefaultUp=new Bt(0,1,0),Re.DefaultMatrixAutoUpdate=!0,Re.prototype=Object.assign(Object.create(T.prototype),{constructor:Re,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return ye.setFromAxisAngle(t,e),this.quaternion.multiply(ye),this},rotateOnWorldAxis:function(t,e){return ye.setFromAxisAngle(t,e),this.quaternion.premultiply(ye),this},rotateX:function(t){return this.rotateOnAxis(Me,t)},rotateY:function(t){return this.rotateOnAxis(Se,t)},rotateZ:function(t){return this.rotateOnAxis(Ee,t)},translateOnAxis:function(t,e){return ve.copy(t).applyQuaternion(this.quaternion),this.position.add(ve.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(Me,t)},translateY:function(t){return this.translateOnAxis(Se,t)},translateZ:function(t){return this.translateOnAxis(Ee,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(_e.copy(this.matrixWorld).invert())},lookAt:function(t,e,n){t.isVector3?xe.copy(t):xe.set(t,e,n);var i=this.parent;this.updateWorldMatrix(!0,!1),be.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_e.lookAt(be,xe,this.up):_e.lookAt(xe,be,this.up),this.quaternion.setFromRotationMatrix(_e),i&&(_e.extractRotation(i.matrixWorld),ye.setFromRotationMatrix(_e),this.quaternion.premultiply(ye.invert()))},add:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?console.error("THREE.Object3D.add: object can't be added as a child of itself.",t):t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),(t.parent=this).children.push(t),t.dispatchEvent(Ae)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this},remove:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var n=this.children.indexOf(t);return-1!==n&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(Le)),this},clear:function(){for(var t=0;t<this.children.length;t++){var e=this.children[t];e.parent=null,e.dispatchEvent(Le)}return this.children.length=0,this},attach:function(t){return this.updateWorldMatrix(!0,!1),_e.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),_e.multiply(t.parent.matrixWorld)),t.applyMatrix4(_e),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n].getObjectByProperty(t,e);if(void 0!==r)return r}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new Bt),this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new ut),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(be,t,we),t},getWorldScale:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new Bt),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(be,Te,t),t},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new Bt),this.updateWorldMatrix(!0,!1);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t=!(this.matrixWorldNeedsUpdate=!1));for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var i=this.children,r=0,a=i.length;r<a;r++)i[r].updateWorldMatrix(!1,!0)},toJSON:function(n){var t=void 0===n||"string"==typeof n,e={};t&&(n={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},e.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i,r,a,o,s,l,c,u={};function h(t,e){return void 0===t[e.uuid]&&(t[e.uuid]=e.toJSON(n)),e.uuid}if(u.uuid=this.uuid,u.type=this.type,""!==this.name&&(u.name=this.name),!0===this.castShadow&&(u.castShadow=!0),!0===this.receiveShadow&&(u.receiveShadow=!0),!1===this.visible&&(u.visible=!1),!1===this.frustumCulled&&(u.frustumCulled=!1),0!==this.renderOrder&&(u.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(u.userData=this.userData),u.layers=this.layers.mask,u.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(u.matrixAutoUpdate=!1),this.isInstancedMesh&&(u.type="InstancedMesh",u.count=this.count,u.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){u.geometry=h(n.geometries,this.geometry);var d=this.geometry.parameters;if(void 0!==d&&void 0!==d.shapes){var p=d.shapes;if(Array.isArray(p))for(var f=0,m=p.length;f<m;f++){var g=p[f];h(n.shapes,g)}else h(n.shapes,p)}}if(this.isSkinnedMesh&&(u.bindMode=this.bindMode,u.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(h(n.skeletons,this.skeleton),u.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var v=[],y=0,_=this.material.length;y<_;y++)v.push(h(n.materials,this.material[y]));u.material=v}else u.material=h(n.materials,this.material);if(0<this.children.length){u.children=[];for(var x=0;x<this.children.length;x++)u.children.push(this.children[x].toJSON(n).object)}if(0<this.animations.length){u.animations=[];for(var b=0;b<this.animations.length;b++){var w=this.animations[b];u.animations.push(h(n.animations,w))}}return t&&(i=T(n.geometries),r=T(n.materials),a=T(n.textures),o=T(n.images),s=T(n.shapes),l=T(n.skeletons),c=T(n.animations),0<i.length&&(e.geometries=i),0<r.length&&(e.materials=r),0<a.length&&(e.textures=a),0<o.length&&(e.images=o),0<s.length&&(e.shapes=s),0<l.length&&(e.skeletons=l),0<c.length&&(e.animations=c)),e.object=u,e;function T(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var n=0;n<t.children.length;n++){var i=t.children[n];this.add(i.clone())}return this}});var Pe,Oe=new Bt,De=new Bt,Ne=new Q,Ie=((Pe=Je.prototype).set=function(t,e){return this.normal.copy(t),this.constant=e,this},Pe.setComponents=function(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this},Pe.setFromNormalAndCoplanarPoint=function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},Pe.setFromCoplanarPoints=function(t,e,n){var i=Oe.subVectors(n,e).cross(De.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this},Pe.clone=function(){return(new this.constructor).copy(this)},Pe.copy=function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},Pe.normalize=function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},Pe.negate=function(){return this.constant*=-1,this.normal.negate(),this},Pe.distanceToPoint=function(t){return this.normal.dot(t)+this.constant},Pe.distanceToSphere=function(t){return this.distanceToPoint(t.center)-t.radius},Pe.projectPoint=function(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new Bt),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},Pe.intersectLine=function(t,e){void 0===e&&(console.warn("THREE.Plane: .intersectLine() target is now required"),e=new Bt);var n=t.delta(Oe),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(t.start)?e.copy(t.start):void 0;var r=-(t.start.dot(this.normal)+this.constant)/i;return r<0||1<r?void 0:e.copy(n).multiplyScalar(r).add(t.start)},Pe.intersectsLine=function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&0<n||n<0&&0<e},Pe.intersectsBox=function(t){return t.intersectsPlane(this)},Pe.intersectsSphere=function(t){return t.intersectsPlane(this)},Pe.coplanarPoint=function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new Bt),t.copy(this.normal).multiplyScalar(-this.constant)},Pe.applyMatrix4=function(t,e){var n=e||Ne.getNormalMatrix(t),i=this.coplanarPoint(Oe).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this},Pe.translate=function(t){return this.constant-=t.dot(this.normal),this},Pe.equals=function(t){return t.normal.equals(this.normal)&&t.constant===this.constant},Je),Be=new Bt,Fe=new Bt,ke=new Bt,ze=new Bt,He=new Bt,Ue=new Bt,Ge=new Bt,je=new Bt,Ve=new Bt,We=new Bt,qe=function(){function a(t,e,n){this.a=void 0!==t?t:new Bt,this.b=void 0!==e?e:new Bt,this.c=void 0!==n?n:new Bt}a.getNormal=function(t,e,n,i){void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new Bt),i.subVectors(n,e),Be.subVectors(t,e),i.cross(Be);var r=i.lengthSq();return 0<r?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)},a.getBarycoord=function(t,e,n,i,r){Be.subVectors(i,e),Fe.subVectors(n,e),ke.subVectors(t,e);var a=Be.dot(Be),o=Be.dot(Fe),s=Be.dot(ke),l=Fe.dot(Fe),c=Fe.dot(ke),u=a*l-o*o;if(void 0===r&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),r=new Bt),0==u)return r.set(-2,-1,-1);var h=1/u,d=(l*s-o*c)*h,p=(a*c-o*s)*h;return r.set(1-d-p,p,d)},a.containsPoint=function(t,e,n,i){return this.getBarycoord(t,e,n,i,ze),0<=ze.x&&0<=ze.y&&ze.x+ze.y<=1},a.getUV=function(t,e,n,i,r,a,o,s){return this.getBarycoord(t,e,n,i,ze),s.set(0,0),s.addScaledVector(r,ze.x),s.addScaledVector(a,ze.y),s.addScaledVector(o,ze.z),s},a.isFrontFacing=function(t,e,n,i){return Be.subVectors(n,e),Fe.subVectors(t,e),Be.cross(Fe).dot(i)<0};var t=a.prototype;return t.set=function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},t.setFromPointsAndIndices=function(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this},t.clone=function(){return(new this.constructor).copy(this)},t.copy=function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},t.getArea=function(){return Be.subVectors(this.c,this.b),Fe.subVectors(this.a,this.b),.5*Be.cross(Fe).length()},t.getMidpoint=function(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new Bt),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},t.getNormal=function(t){return a.getNormal(this.a,this.b,this.c,t)},t.getPlane=function(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new Ie),t.setFromCoplanarPoints(this.a,this.b,this.c)},t.getBarycoord=function(t,e){return a.getBarycoord(t,this.a,this.b,this.c,e)},t.getUV=function(t,e,n,i,r){return a.getUV(t,this.a,this.b,this.c,e,n,i,r)},t.containsPoint=function(t){return a.containsPoint(t,this.a,this.b,this.c)},t.isFrontFacing=function(t){return a.isFrontFacing(this.a,this.b,this.c,t)},t.intersectsBox=function(t){return t.intersectsTriangle(this)},t.closestPointToPoint=function(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new Bt);var n=this.a,i=this.b,r=this.c;He.subVectors(i,n),Ue.subVectors(r,n),je.subVectors(t,n);var a=He.dot(je),o=Ue.dot(je);if(a<=0&&o<=0)return e.copy(n);Ve.subVectors(t,i);var s=He.dot(Ve),l=Ue.dot(Ve);if(0<=s&&l<=s)return e.copy(i);var c=a*l-s*o;if(c<=0&&0<=a&&s<=0)return m=a/(a-s),e.copy(n).addScaledVector(He,m);We.subVectors(t,r);var u=He.dot(We),h=Ue.dot(We);if(0<=h&&u<=h)return e.copy(r);var d=u*o-a*h;if(d<=0&&0<=o&&h<=0)return g=o/(o-h),e.copy(n).addScaledVector(Ue,g);var p=s*h-u*l;if(p<=0&&0<=l-s&&0<=u-h)return Ge.subVectors(r,i),g=(l-s)/(l-s+(u-h)),e.copy(i).addScaledVector(Ge,g);var f=1/(p+d+c),m=d*f,g=c*f;return e.copy(n).addScaledVector(He,m).addScaledVector(Ue,g)},t.equals=function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)},a}(),Xe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ye={h:0,s:0,l:0},Ze={h:0,s:0,l:0};function Je(t,e){Object.defineProperty(this,"isPlane",{value:!0}),this.normal=void 0!==t?t:new Bt(1,0,0),this.constant=void 0!==e?e:0}function Qe(t,e,n){return n<0&&(n+=1),1<n&&--n,n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function $e(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function Ke(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}var tn,en=((tn=nn.prototype).set=function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},tn.setScalar=function(t){return this.r=t,this.g=t,this.b=t,this},tn.setHex=function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},tn.setRGB=function(t,e,n){return this.r=t,this.g=e,this.b=n,this},tn.setHSL=function(t,e,n){var i,r;return t=Pt.euclideanModulo(t,1),e=Pt.clamp(e,0,1),n=Pt.clamp(n,0,1),0===e?this.r=this.g=this.b=n:(r=2*n-(i=n<=.5?n*(1+e):n+e-n*e),this.r=Qe(r,i,t+1/3),this.g=Qe(r,i,t),this.b=Qe(r,i,t-1/3)),this},tn.setStyle=function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var i,r=n[1],a=n[2];switch(r){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(i[1])/360,s=parseInt(i[2],10)/100,l=parseInt(i[3],10)/100;return t(i[5]),this.setHSL(o,s,l)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var c=n[1],u=c.length;if(3===u)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===u)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}return e&&0<e.length?this.setColorName(e):this},tn.setColorName=function(t){var e=Xe[t];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this},tn.clone=function(){return new this.constructor(this.r,this.g,this.b)},tn.copy=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},tn.copyGammaToLinear=function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},tn.copyLinearToGamma=function(t,e){void 0===e&&(e=2);var n=0<e?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},tn.convertGammaToLinear=function(t){return this.copyGammaToLinear(this,t),this},tn.convertLinearToGamma=function(t){return this.copyLinearToGamma(this,t),this},tn.copySRGBToLinear=function(t){return this.r=$e(t.r),this.g=$e(t.g),this.b=$e(t.b),this},tn.copyLinearToSRGB=function(t){return this.r=Ke(t.r),this.g=Ke(t.g),this.b=Ke(t.b),this},tn.convertSRGBToLinear=function(){return this.copySRGBToLinear(this),this},tn.convertLinearToSRGB=function(){return this.copyLinearToSRGB(this),this},tn.getHex=function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},tn.getHexString=function(){return("000000"+this.getHex().toString(16)).slice(-6)},tn.getHSL=function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,n=this.r,i=this.g,r=this.b,a=Math.max(n,i,r),o=Math.min(n,i,r),s=(o+a)/2;if(o===a)c=e=0;else{var l=a-o,c=s<=.5?l/(a+o):l/(2-a-o);switch(a){case n:e=(i-r)/l+(i<r?6:0);break;case i:e=(r-n)/l+2;break;case r:e=(n-i)/l+4}e/=6}return t.h=e,t.s=c,t.l=s,t},tn.getStyle=function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},tn.offsetHSL=function(t,e,n){return this.getHSL(Ye),Ye.h+=t,Ye.s+=e,Ye.l+=n,this.setHSL(Ye.h,Ye.s,Ye.l),this},tn.add=function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},tn.addColors=function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},tn.addScalar=function(t){return this.r+=t,this.g+=t,this.b+=t,this},tn.sub=function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},tn.multiply=function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},tn.multiplyScalar=function(t){return this.r*=t,this.g*=t,this.b*=t,this},tn.lerp=function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},tn.lerpHSL=function(t,e){this.getHSL(Ye),t.getHSL(Ze);var n=Pt.lerp(Ye.h,Ze.h,e),i=Pt.lerp(Ye.s,Ze.s,e),r=Pt.lerp(Ye.l,Ze.l,e);return this.setHSL(n,i,r),this},tn.equals=function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},tn.fromArray=function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},tn.toArray=function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},tn.fromBufferAttribute=function(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this},tn.toJSON=function(){return this.getHex()},nn);function nn(t,e,n){return Object.defineProperty(this,"isColor",{value:!0}),void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}en.NAMES=Xe,en.prototype.r=1,en.prototype.g=1,en.prototype.b=1;var rn,an=((rn=sn.prototype).clone=function(){return(new this.constructor).copy(this)},rn.copy=function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(var i=0,r=t.vertexColors.length;i<r;i++)this.vertexColors[i]=t.vertexColors[i].clone();return this},sn),on=0;function sn(t,e,n,i,r,a){void 0===a&&(a=0),this.a=t,this.b=e,this.c=n,this.normal=i&&i.isVector3?i:new Bt,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new en,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=a}function ln(){Object.defineProperty(this,"id",{value:on++}),this.uuid=Pt.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=W,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=x,this.stencilZFail=x,this.stencilZPass=x,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function cn(t){ln.call(this),this.type="MeshBasicMaterial",this.color=new en(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(t)}ln.prototype=Object.assign(Object.create(T.prototype),{constructor:ln,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(t){if(void 0!==t)for(var e in t){var n,i=t[e];void 0!==i?"shading"!==e?void 0!==(n=this[e])?n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[e]=i:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material."):(console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===i):console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(t){var e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});var n,i,r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function a(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}return r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(r.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearcoat&&(r.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(t).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(t).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(t).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(t).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(t).uuid,r.reflectivity=this.reflectivity,r.refractionRatio=this.refractionRatio,void 0!==this.combine&&(r.combine=this.combine),void 0!==this.envMapIntensity&&(r.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(r.size=this.size),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(r.blending=this.blending),!0===this.flatShading&&(r.flatShading=this.flatShading),0!==this.side&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(r.rotation=this.rotation),!0===this.polygonOffset&&(r.polygonOffset=!0),0!==this.polygonOffsetFactor&&(r.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),0<this.alphaTest&&(r.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),1<this.wireframeLinewidth&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(r.morphTargets=!0),!0===this.morphNormals&&(r.morphNormals=!0),!0===this.skinning&&(r.skinning=!0),!1===this.visible&&(r.visible=!1),!1===this.toneMapped&&(r.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),e&&(n=a(t.textures),i=a(t.images),0<n.length&&(r.textures=n),0<i.length&&(r.images=i)),r},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;var e=t.clippingPlanes,n=null;if(null!==e)for(var i=e.length,n=new Array(i),r=0;r!==i;++r)n[r]=e[r].clone();return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(ln.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),((cn.prototype=Object.create(ln.prototype)).constructor=cn).prototype.isMeshBasicMaterial=!0,cn.prototype.copy=function(t){return ln.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this};var un=new Bt,hn=new It;function dn(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=b,this.updateRange={offset:0,count:-1},this.version=0}function pn(t,e,n){dn.call(this,new Int8Array(t),e,n)}function fn(t,e,n){dn.call(this,new Uint8Array(t),e,n)}function mn(t,e,n){dn.call(this,new Uint8ClampedArray(t),e,n)}function gn(t,e,n){dn.call(this,new Int16Array(t),e,n)}function vn(t,e,n){dn.call(this,new Uint16Array(t),e,n)}function yn(t,e,n){dn.call(this,new Int32Array(t),e,n)}function _n(t,e,n){dn.call(this,new Uint32Array(t),e,n)}function xn(t,e,n){dn.call(this,new Uint16Array(t),e,n)}function bn(t,e,n){dn.call(this,new Float32Array(t),e,n)}function wn(t,e,n){dn.call(this,new Float64Array(t),e,n)}Object.defineProperty(dn.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(dn.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),a=new en),e[n++]=a.r,e[n++]=a.g,e[n++]=a.b}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),a=new It),e[n++]=a.x,e[n++]=a.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),a=new Bt),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),a=new Ot),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z,e[n++]=a.w}return this},applyMatrix3:function(t){if(2===this.itemSize)for(var e=0,n=this.count;e<n;e++)hn.fromBufferAttribute(this,e),hn.applyMatrix3(t),this.setXY(e,hn.x,hn.y);else if(3===this.itemSize)for(var i=0,r=this.count;i<r;i++)un.fromBufferAttribute(this,i),un.applyMatrix3(t),this.setXYZ(i,un.x,un.y,un.z);return this},applyMatrix4:function(t){for(var e=0,n=this.count;e<n;e++)un.x=this.getX(e),un.y=this.getY(e),un.z=this.getZ(e),un.applyMatrix4(t),this.setXYZ(e,un.x,un.y,un.z);return this},applyNormalMatrix:function(t){for(var e=0,n=this.count;e<n;e++)un.x=this.getX(e),un.y=this.getY(e),un.z=this.getZ(e),un.applyNormalMatrix(t),this.setXYZ(e,un.x,un.y,un.z);return this},transformDirection:function(t){for(var e=0,n=this.count;e<n;e++)un.x=this.getX(e),un.y=this.getY(e),un.z=this.getZ(e),un.transformDirection(t),this.setXYZ(e,un.x,un.y,un.z);return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),(pn.prototype=Object.create(dn.prototype)).constructor=pn,(fn.prototype=Object.create(dn.prototype)).constructor=fn,(mn.prototype=Object.create(dn.prototype)).constructor=mn,(gn.prototype=Object.create(dn.prototype)).constructor=gn,(vn.prototype=Object.create(dn.prototype)).constructor=vn,(yn.prototype=Object.create(dn.prototype)).constructor=yn,(_n.prototype=Object.create(dn.prototype)).constructor=_n,((xn.prototype=Object.create(dn.prototype)).constructor=xn).prototype.isFloat16BufferAttribute=!0,(bn.prototype=Object.create(dn.prototype)).constructor=bn,(wn.prototype=Object.create(dn.prototype)).constructor=wn;var Tn,Mn=((Tn=Sn.prototype).computeGroups=function(t){for(var e,n=[],i=void 0,r=t.faces,a=0;a<r.length;a++){var o=r[a];o.materialIndex!==i&&(i=o.materialIndex,void 0!==e&&(e.count=3*a-e.start,n.push(e)),e={start:3*a,materialIndex:i})}void 0!==e&&(e.count=3*a-e.start,n.push(e)),this.groups=n},Tn.fromGeometry=function(t){var e,n=t.faces,i=t.vertices,r=t.faceVertexUvs,a=r[0]&&0<r[0].length,o=r[1]&&0<r[1].length,s=t.morphTargets,l=s.length;if(0<l){e=[];for(var c=0;c<l;c++)e[c]={name:s[c].name,data:[]};this.morphTargets.position=e}var u,h=t.morphNormals,d=h.length;if(0<d){u=[];for(var p=0;p<d;p++)u[p]={name:h[p].name,data:[]};this.morphTargets.normal=u}var f=t.skinIndices,m=t.skinWeights,g=f.length===i.length,v=m.length===i.length;0<i.length&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var y=0;y<n.length;y++){var _=n[y];this.vertices.push(i[_.a],i[_.b],i[_.c]);var x,b=_.vertexNormals;3===b.length?this.normals.push(b[0],b[1],b[2]):(x=_.normal,this.normals.push(x,x,x));var w,T,M,S=_.vertexColors;3===S.length?this.colors.push(S[0],S[1],S[2]):(w=_.color,this.colors.push(w,w,w)),!0===a&&(void 0!==(T=r[0][y])?this.uvs.push(T[0],T[1],T[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",y),this.uvs.push(new It,new It,new It))),!0===o&&(void 0!==(M=r[1][y])?this.uvs2.push(M[0],M[1],M[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",y),this.uvs2.push(new It,new It,new It)));for(var E=0;E<l;E++){var A=s[E].vertices;e[E].data.push(A[_.a],A[_.b],A[_.c])}for(var L=0;L<d;L++){var C=h[L].vertexNormals[y];u[L].data.push(C.a,C.b,C.c)}g&&this.skinIndices.push(f[_.a],f[_.b],f[_.c]),v&&this.skinWeights.push(m[_.a],m[_.b],m[_.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},Sn);function Sn(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function En(t){if(0===t.length)return-1/0;for(var e=t[0],n=1,i=t.length;n<i;++n)t[n]>e&&(e=t[n]);return e}var An={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Ln(t,e){return new An[t](e)}var Cn=1,Rn=new Kt,Pn=new Re,On=new Bt,Dn=new pt,Nn=new pt,In=new Bt;function Bn(){Object.defineProperty(this,"id",{value:Cn+=2}),this.uuid=Pt.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}Bn.prototype=Object.assign(Object.create(T.prototype),{constructor:Bn,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){return Array.isArray(t)?this.index=new(65535<En(t)?_n:vn)(t,1):this.index=t,this},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,e){return this.attributes[t]=e,this},deleteAttribute:function(t){return delete this.attributes[t],this},hasAttribute:function(t){return void 0!==this.attributes[t]},addGroup:function(t,e,n){void 0===n&&(n=0),this.groups.push({start:t,count:e,materialIndex:n})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix4:function(t){var e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);var n,i=this.attributes.normal;void 0!==i&&(n=(new Q).getNormalMatrix(t),i.applyNormalMatrix(n),i.needsUpdate=!0);var r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(t){return Rn.makeRotationX(t),this.applyMatrix4(Rn),this},rotateY:function(t){return Rn.makeRotationY(t),this.applyMatrix4(Rn),this},rotateZ:function(t){return Rn.makeRotationZ(t),this.applyMatrix4(Rn),this},translate:function(t,e,n){return Rn.makeTranslation(t,e,n),this.applyMatrix4(Rn),this},scale:function(t,e,n){return Rn.makeScale(t,e,n),this.applyMatrix4(Rn),this},lookAt:function(t){return Pn.lookAt(t),Pn.updateMatrix(),this.applyMatrix4(Pn.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(On).negate(),this.translate(On.x,On.y,On.z),this},setFromObject:function(t){var e,n,i,r=t.geometry;return t.isPoints||t.isLine?(e=new bn(3*r.vertices.length,3),n=new bn(3*r.colors.length,3),this.setAttribute("position",e.copyVector3sArray(r.vertices)),this.setAttribute("color",n.copyColorsArray(r.colors)),r.lineDistances&&r.lineDistances.length===r.vertices.length&&(i=new bn(r.lineDistances.length,1),this.setAttribute("lineDistance",i.copyArray(r.lineDistances))),null!==r.boundingSphere&&(this.boundingSphere=r.boundingSphere.clone()),null!==r.boundingBox&&(this.boundingBox=r.boundingBox.clone())):t.isMesh&&r&&r.isGeometry&&this.fromGeometry(r),this},setFromPoints:function(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new bn(e,3)),this},updateFromObject:function(t){var e,n,i,r,a,o=t.geometry;if(t.isMesh){var s=o.__directGeometry;if(!0===o.elementsNeedUpdate&&(s=void 0,o.elementsNeedUpdate=!1),void 0===s)return this.fromGeometry(o);s.verticesNeedUpdate=o.verticesNeedUpdate,s.normalsNeedUpdate=o.normalsNeedUpdate,s.colorsNeedUpdate=o.colorsNeedUpdate,s.uvsNeedUpdate=o.uvsNeedUpdate,s.groupsNeedUpdate=o.groupsNeedUpdate,o.verticesNeedUpdate=!1,o.normalsNeedUpdate=!1,o.colorsNeedUpdate=!1,o.uvsNeedUpdate=!1,o.groupsNeedUpdate=!1,o=s}return!0===o.verticesNeedUpdate&&(void 0!==(e=this.attributes.position)&&(e.copyVector3sArray(o.vertices),e.needsUpdate=!0),o.verticesNeedUpdate=!1),!0===o.normalsNeedUpdate&&(void 0!==(n=this.attributes.normal)&&(n.copyVector3sArray(o.normals),n.needsUpdate=!0),o.normalsNeedUpdate=!1),!0===o.colorsNeedUpdate&&(void 0!==(i=this.attributes.color)&&(i.copyColorsArray(o.colors),i.needsUpdate=!0),o.colorsNeedUpdate=!1),o.uvsNeedUpdate&&(void 0!==(r=this.attributes.uv)&&(r.copyVector2sArray(o.uvs),r.needsUpdate=!0),o.uvsNeedUpdate=!1),o.lineDistancesNeedUpdate&&(void 0!==(a=this.attributes.lineDistance)&&(a.copyArray(o.lineDistances),a.needsUpdate=!0),o.lineDistancesNeedUpdate=!1),o.groupsNeedUpdate&&(o.computeGroups(t.geometry),this.groups=o.groups,o.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new Mn).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e,n,i,r,a,o,s=new Float32Array(3*t.vertices.length);for(var l in this.setAttribute("position",new dn(s,3).copyVector3sArray(t.vertices)),0<t.normals.length&&(e=new Float32Array(3*t.normals.length),this.setAttribute("normal",new dn(e,3).copyVector3sArray(t.normals))),0<t.colors.length&&(n=new Float32Array(3*t.colors.length),this.setAttribute("color",new dn(n,3).copyColorsArray(t.colors))),0<t.uvs.length&&(i=new Float32Array(2*t.uvs.length),this.setAttribute("uv",new dn(i,2).copyVector2sArray(t.uvs))),0<t.uvs2.length&&(r=new Float32Array(2*t.uvs2.length),this.setAttribute("uv2",new dn(r,2).copyVector2sArray(t.uvs2))),this.groups=t.groups,t.morphTargets){for(var c=[],u=t.morphTargets[l],h=0,d=u.length;h<d;h++){var p=u[h],f=new bn(3*p.data.length,3);f.name=p.name,c.push(f.copyVector3sArray(p.data))}this.morphAttributes[l]=c}return 0<t.skinIndices.length&&(a=new bn(4*t.skinIndices.length,4),this.setAttribute("skinIndex",a.copyVector4sArray(t.skinIndices))),0<t.skinWeights.length&&(o=new bn(4*t.skinWeights.length,4),this.setAttribute("skinWeight",o.copyVector4sArray(t.skinWeights))),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new pt);var t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Bt(-1/0,-1/0,-1/0),new Bt(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(var n=0,i=e.length;n<i;n++){var r=e[n];Dn.setFromBufferAttribute(r),this.morphTargetsRelative?(In.addVectors(this.boundingBox.min,Dn.min),this.boundingBox.expandByPoint(In),In.addVectors(this.boundingBox.max,Dn.max),this.boundingBox.expandByPoint(In)):(this.boundingBox.expandByPoint(Dn.min),this.boundingBox.expandByPoint(Dn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Vt);var t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Bt,1/0);if(t){var n=this.boundingSphere.center;if(Dn.setFromBufferAttribute(t),e)for(var i=0,r=e.length;i<r;i++){var a=e[i];Nn.setFromBufferAttribute(a),this.morphTargetsRelative?(In.addVectors(Dn.min,Nn.min),Dn.expandByPoint(In),In.addVectors(Dn.max,Nn.max),Dn.expandByPoint(In)):(Dn.expandByPoint(Nn.min),Dn.expandByPoint(Nn.max))}Dn.getCenter(n);for(var o=0,s=0,l=t.count;s<l;s++)In.fromBufferAttribute(t,s),o=Math.max(o,n.distanceToSquared(In));if(e)for(var c=0,u=e.length;c<u;c++)for(var h=e[c],d=this.morphTargetsRelative,p=0,f=h.count;p<f;p++)In.fromBufferAttribute(h,p),d&&(On.fromBufferAttribute(t,p),In.add(On)),o=Math.max(o,n.distanceToSquared(In));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.getAttribute("position");if(void 0!==e){var n=this.getAttribute("normal");if(void 0===n)n=new dn(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(var i=0,r=n.count;i<r;i++)n.setXYZ(i,0,0,0);var a=new Bt,o=new Bt,s=new Bt,l=new Bt,c=new Bt,u=new Bt,h=new Bt,d=new Bt;if(t)for(var p=0,f=t.count;p<f;p+=3){var m=t.getX(p+0),g=t.getX(p+1),v=t.getX(p+2);a.fromBufferAttribute(e,m),o.fromBufferAttribute(e,g),s.fromBufferAttribute(e,v),h.subVectors(s,o),d.subVectors(a,o),h.cross(d),l.fromBufferAttribute(n,m),c.fromBufferAttribute(n,g),u.fromBufferAttribute(n,v),l.add(h),c.add(h),u.add(h),n.setXYZ(m,l.x,l.y,l.z),n.setXYZ(g,c.x,c.y,c.z),n.setXYZ(v,u.x,u.y,u.z)}else for(var y=0,_=e.count;y<_;y+=3)a.fromBufferAttribute(e,y+0),o.fromBufferAttribute(e,y+1),s.fromBufferAttribute(e,y+2),h.subVectors(s,o),d.subVectors(a,o),h.cross(d),n.setXYZ(y+0,h.x,h.y,h.z),n.setXYZ(y+1,h.x,h.y,h.z),n.setXYZ(y+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var i in n)if(void 0!==t.attributes[i])for(var r=n[i].array,a=t.attributes[i],o=a.array,s=a.itemSize*e,l=Math.min(o.length,r.length-s),c=0,u=s;c<l;c++,u++)r[u]=o[c];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){for(var t=this.attributes.normal,e=0,n=t.count;e<n;e++)In.fromBufferAttribute(t,e),In.normalize(),t.setXYZ(e,In.x,In.y,In.z)},toNonIndexed:function(){function t(t,e){for(var n=t.array,i=t.itemSize,r=t.normalized,a=new n.constructor(e.length*i),o=0,s=0,l=0,c=e.length;l<c;l++){o=e[l]*i;for(var u=0;u<i;u++)a[s++]=n[o++]}return new dn(a,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new Bn,n=this.index.array,i=this.attributes;for(var r in i){var a=t(i[r],n);e.setAttribute(r,a)}var o=this.morphAttributes;for(var s in o){for(var l=[],c=o[s],u=0,h=c.length;u<h;u++){var d=t(c[u],n);l.push(d)}e.morphAttributes[s]=l}e.morphTargetsRelative=this.morphTargetsRelative;for(var p=this.groups,f=0,m=p.length;f<m;f++){var g=p[f];e.addGroup(g.start,g.count,g.materialIndex)}return e},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),0<Object.keys(this.userData).length&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var i=this.index;null!==i&&(t.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});var r=this.attributes;for(var a in r){var o=r[a],s=o.toJSON(t.data);""!==o.name&&(s.name=o.name),t.data.attributes[a]=s}var l={},c=!1;for(var u in this.morphAttributes){for(var h=this.morphAttributes[u],d=[],p=0,f=h.length;p<f;p++){var m=h[p],g=m.toJSON(t.data);""!==m.name&&(g.name=m.name),d.push(g)}0<d.length&&(l[u]=d,c=!0)}c&&(t.data.morphAttributes=l,t.data.morphTargetsRelative=this.morphTargetsRelative);var v=this.groups;0<v.length&&(t.data.groups=JSON.parse(JSON.stringify(v)));var y=this.boundingSphere;return null!==y&&(t.data.boundingSphere={center:y.center.toArray(),radius:y.radius}),t},clone:function(){return(new Bn).copy(this)},copy:function(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var e={};this.name=t.name;var n=t.index;null!==n&&this.setIndex(n.clone(e));var i=t.attributes;for(var r in i){var a=i[r];this.setAttribute(r,a.clone(e))}var o=t.morphAttributes;for(var s in o){for(var l=[],c=o[s],u=0,h=c.length;u<h;u++)l.push(c[u].clone(e));this.morphAttributes[s]=l}this.morphTargetsRelative=t.morphTargetsRelative;for(var d=t.groups,p=0,f=d.length;p<f;p++){var m=d[p];this.addGroup(m.start,m.count,m.materialIndex)}var g=t.boundingBox;null!==g&&(this.boundingBox=g.clone());var v=t.boundingSphere;return null!==v&&(this.boundingSphere=v.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Fn=new Kt,kn=new $t,zn=new Vt,Hn=new Bt,Un=new Bt,Gn=new Bt,jn=new Bt,Vn=new Bt,Wn=new Bt,qn=new Bt,Xn=new Bt,Yn=new Bt,Zn=new It,Jn=new It,Qn=new It,$n=new Bt,Kn=new Bt;function ti(t,e){Re.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new Bn,this.material=void 0!==e?e:new cn,this.updateMorphTargets()}function ei(t,e,n,i,r,a,o,s){if(null===(1===e.side?i.intersectTriangle(o,a,r,!0,s):i.intersectTriangle(r,a,o,2!==e.side,s)))return null;Kn.copy(s),Kn.applyMatrix4(t.matrixWorld);var l=n.ray.origin.distanceTo(Kn);return l<n.near||l>n.far?null:{distance:l,point:Kn.clone(),object:t}}function ni(t,e,n,i,r,a,o,s,l,c,u,h){Hn.fromBufferAttribute(r,c),Un.fromBufferAttribute(r,u),Gn.fromBufferAttribute(r,h);var d=t.morphTargetInfluences;if(e.morphTargets&&a&&d){qn.set(0,0,0),Xn.set(0,0,0),Yn.set(0,0,0);for(var p=0,f=a.length;p<f;p++){var m=d[p],g=a[p];0!==m&&(jn.fromBufferAttribute(g,c),Vn.fromBufferAttribute(g,u),Wn.fromBufferAttribute(g,h),o?(qn.addScaledVector(jn,m),Xn.addScaledVector(Vn,m),Yn.addScaledVector(Wn,m)):(qn.addScaledVector(jn.sub(Hn),m),Xn.addScaledVector(Vn.sub(Un),m),Yn.addScaledVector(Wn.sub(Gn),m)))}Hn.add(qn),Un.add(Xn),Gn.add(Yn)}t.isSkinnedMesh&&(t.boneTransform(c,Hn),t.boneTransform(u,Un),t.boneTransform(h,Gn));var v,y=ei(t,e,n,i,Hn,Un,Gn,$n);return y&&(s&&(Zn.fromBufferAttribute(s,c),Jn.fromBufferAttribute(s,u),Qn.fromBufferAttribute(s,h),y.uv=qe.getUV($n,Hn,Un,Gn,Zn,Jn,Qn,new It)),l&&(Zn.fromBufferAttribute(l,c),Jn.fromBufferAttribute(l,u),Qn.fromBufferAttribute(l,h),y.uv2=qe.getUV($n,Hn,Un,Gn,Zn,Jn,Qn,new It)),v=new an(c,u,h),qe.getNormal(Hn,Un,Gn,v.normal),y.face=v),y}ti.prototype=Object.assign(Object.create(Re.prototype),{constructor:ti,isMesh:!0,copy:function(t){return Re.prototype.copy.call(this,t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(0<n.length){var i=e[n[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,a=i.length;r<a;r++){var o=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}else{var s=t.morphTargets;void 0!==s&&0<s.length&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(t,e){var n,i=this.geometry,r=this.material,a=this.matrixWorld;if(void 0!==r&&(null===i.boundingSphere&&i.computeBoundingSphere(),zn.copy(i.boundingSphere),zn.applyMatrix4(a),!1!==t.ray.intersectsSphere(zn)&&(Fn.copy(a).invert(),kn.copy(t.ray).applyMatrix4(Fn),null===i.boundingBox||!1!==kn.intersectsBox(i.boundingBox))))if(i.isBufferGeometry){var o=i.index,s=i.attributes.position,l=i.morphAttributes.position,c=i.morphTargetsRelative,u=i.attributes.uv,h=i.attributes.uv2,d=i.groups,p=i.drawRange;if(null!==o)if(Array.isArray(r))for(var f=0,m=d.length;f<m;f++)for(var g=d[f],v=r[g.materialIndex],y=Math.max(g.start,p.start),_=Math.min(g.start+g.count,p.start+p.count);y<_;y+=3){var x=o.getX(y),b=o.getX(y+1),w=o.getX(y+2);(n=ni(this,v,t,kn,s,l,c,u,h,x,b,w))&&(n.faceIndex=Math.floor(y/3),n.face.materialIndex=g.materialIndex,e.push(n))}else for(var T=Math.max(0,p.start),M=Math.min(o.count,p.start+p.count);T<M;T+=3){var S=o.getX(T),E=o.getX(T+1),A=o.getX(T+2);(n=ni(this,r,t,kn,s,l,c,u,h,S,E,A))&&(n.faceIndex=Math.floor(T/3),e.push(n))}else if(void 0!==s)if(Array.isArray(r))for(var L=0,C=d.length;L<C;L++)for(var R=d[L],P=r[R.materialIndex],O=Math.max(R.start,p.start),D=Math.min(R.start+R.count,p.start+p.count);O<D;O+=3)(n=ni(this,P,t,kn,s,l,c,u,h,O,O+1,O+2))&&(n.faceIndex=Math.floor(O/3),n.face.materialIndex=R.materialIndex,e.push(n));else for(var N=Math.max(0,p.start),I=Math.min(s.count,p.start+p.count);N<I;N+=3)(n=ni(this,r,t,kn,s,l,c,u,h,N,N+1,N+2))&&(n.faceIndex=Math.floor(N/3),e.push(n))}else if(i.isGeometry){var B,F=Array.isArray(r),k=i.vertices,z=i.faces,H=i.faceVertexUvs[0];0<H.length&&(B=H);for(var U=0,G=z.length;U<G;U++){var j,V,W,q,X=z[U],Y=F?r[X.materialIndex]:r;void 0!==Y&&(j=k[X.a],V=k[X.b],W=k[X.c],(n=ei(this,Y,t,kn,j,V,W,$n))&&(B&&B[U]&&(q=B[U],Zn.copy(q[0]),Jn.copy(q[1]),Qn.copy(q[2]),n.uv=qe.getUV($n,j,V,W,Zn,Jn,Qn,new It)),n.face=X,n.faceIndex=U,e.push(n)))}}}});var ii,ri=(C(ai,ii=Bn),ai);function ai(t,e,n,i,r,a){var o;void 0===t&&(t=1),void 0===e&&(e=1),void 0===n&&(n=1),void 0===i&&(i=1),void 0===r&&(r=1),void 0===a&&(a=1),(o=ii.call(this)||this).type="BoxBufferGeometry",o.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};var P=k(o);i=Math.floor(i),r=Math.floor(r),a=Math.floor(a);var O=[],D=[],N=[],I=[],B=0,F=0;function s(t,e,n,i,r,a,o,s,l,c,u){for(var h=a/l,d=o/c,p=a/2,f=o/2,m=s/2,g=l+1,v=c+1,y=0,_=0,x=new Bt,b=0;b<v;b++)for(var w=b*d-f,T=0;T<g;T++){var M=T*h-p;x[t]=M*i,x[e]=w*r,x[n]=m,D.push(x.x,x.y,x.z),x[t]=0,x[e]=0,x[n]=0<s?1:-1,N.push(x.x,x.y,x.z),I.push(T/l),I.push(1-b/c),y+=1}for(var S=0;S<c;S++)for(var E=0;E<l;E++){var A=B+E+g*S,L=B+E+g*(S+1),C=B+(E+1)+g*(S+1),R=B+(E+1)+g*S;O.push(A,L,R),O.push(L,C,R),_+=6}P.addGroup(F,_,u),F+=_,B+=y}return s("z","y","x",-1,-1,n,e,t,a,r,0),s("z","y","x",1,-1,n,e,-t,a,r,1),s("x","z","y",1,1,t,n,e,i,a,2),s("x","z","y",1,-1,t,n,-e,i,a,3),s("x","y","z",1,-1,t,e,n,i,r,4),s("x","y","z",-1,-1,t,e,-n,i,r,5),o.setIndex(O),o.setAttribute("position",new bn(D,3)),o.setAttribute("normal",new bn(N,3)),o.setAttribute("uv",new bn(I,2)),o}function oi(t){var e={};for(var n in t)for(var i in e[n]={},t[n]){var r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}return e}function si(t){for(var e={},n=0;n<t.length;n++){var i=oi(t[n]);for(var r in i)e[r]=i[r]}return e}var li={clone:oi,merge:si};function ci(t){ln.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function ui(){Re.call(this),this.type="Camera",this.matrixWorldInverse=new Kt,this.projectionMatrix=new Kt,this.projectionMatrixInverse=new Kt}function hi(t,e,n,i){void 0===t&&(t=50),void 0===e&&(e=1),void 0===n&&(n=.1),void 0===i&&(i=2e3),ui.call(this),this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}((ci.prototype=Object.create(ln.prototype)).constructor=ci).prototype.isShaderMaterial=!0,ci.prototype.copy=function(t){return ln.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=oi(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this},ci.prototype.toJSON=function(t){var e=ln.prototype.toJSON.call(this,t);for(var n in e.glslVersion=this.glslVersion,e.uniforms={},this.uniforms){var i=this.uniforms[n].value;i&&i.isTexture?e.uniforms[n]={type:"t",value:i.toJSON(t).uuid}:i&&i.isColor?e.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?e.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?e.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?e.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?e.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?e.uniforms[n]={type:"m4",value:i.toArray()}:e.uniforms[n]={value:i}}0<Object.keys(this.defines).length&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;var r={};for(var a in this.extensions)!0===this.extensions[a]&&(r[a]=!0);return 0<Object.keys(r).length&&(e.extensions=r),e},ui.prototype=Object.assign(Object.create(Re.prototype),{constructor:ui,isCamera:!0,copy:function(t,e){return Re.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new Bt),this.updateWorldMatrix(!0,!1);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){Re.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()},updateWorldMatrix:function(t,e){Re.prototype.updateWorldMatrix.call(this,t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()},clone:function(){return(new this.constructor).copy(this)}}),hi.prototype=Object.assign(Object.create(ui.prototype),{constructor:hi,isPerspectiveCamera:!0,copy:function(t,e){return ui.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*Pt.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*Pt.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*Pt.RAD2DEG*Math.atan(Math.tan(.5*Pt.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,i,r,a){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t,e,n=this.near,i=n*Math.tan(.5*Pt.DEG2RAD*this.fov)/this.zoom,r=2*i,a=this.aspect*r,o=-.5*a,s=this.view;null!==this.view&&this.view.enabled&&(t=s.fullWidth,e=s.fullHeight,o+=s.offsetX*a/t,i-=s.offsetY*r/e,a*=s.width/t,r*=s.height/e);var l=this.filmOffset;0!==l&&(o+=n*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+a,i,i-r,n,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(t){var e=Re.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}});function di(t,e,a){var o,s,l,c,u,h;Re.call(this),this.type="CubeCamera",!0===a.isWebGLCubeRenderTarget?(this.renderTarget=a,(o=new hi(90,1,t,e)).layers=this.layers,o.up.set(0,-1,0),o.lookAt(new Bt(1,0,0)),this.add(o),(s=new hi(90,1,t,e)).layers=this.layers,s.up.set(0,-1,0),s.lookAt(new Bt(-1,0,0)),this.add(s),(l=new hi(90,1,t,e)).layers=this.layers,l.up.set(0,0,1),l.lookAt(new Bt(0,1,0)),this.add(l),(c=new hi(90,1,t,e)).layers=this.layers,c.up.set(0,0,-1),c.lookAt(new Bt(0,-1,0)),this.add(c),(u=new hi(90,1,t,e)).layers=this.layers,u.up.set(0,-1,0),u.lookAt(new Bt(0,0,1)),this.add(u),(h=new hi(90,1,t,e)).layers=this.layers,h.up.set(0,-1,0),h.lookAt(new Bt(0,0,-1)),this.add(h),this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var n=t.xr.enabled,i=t.getRenderTarget();t.xr.enabled=!1;var r=a.texture.generateMipmaps;a.texture.generateMipmaps=!1,t.setRenderTarget(a,0),t.render(e,o),t.setRenderTarget(a,1),t.render(e,s),t.setRenderTarget(a,2),t.render(e,l),t.setRenderTarget(a,3),t.render(e,c),t.setRenderTarget(a,4),t.render(e,u),a.texture.generateMipmaps=r,t.setRenderTarget(a,5),t.render(e,h),t.setRenderTarget(i),t.xr.enabled=n}):console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.")}function pi(t,e,n,i,r,a,o,s,l,c){nt.call(this,t=void 0!==t?t:[],e=void 0!==e?e:D,n,i,r,a,o=void 0!==o?o:Y,s,l,c),this.flipY=!1,this._needsFlipEnvMap=!0}function fi(t,e,n){Number.isInteger(e)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),e=n),ot.call(this,t,t,e),e=e||{},this.texture=new pi(void 0,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture._needsFlipEnvMap=!1}function mi(t,e,n,i,r,a,o,s,l,c,u,h){nt.call(this,null,a,o,s,l,c,i,r,u,h),this.image={data:t||null,width:e||1,height:n||1},this.magFilter=void 0!==l?l:H,this.minFilter=void 0!==c?c:H,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}(di.prototype=Object.create(Re.prototype)).constructor=di,((pi.prototype=Object.create(nt.prototype)).constructor=pi).prototype.isCubeTexture=!0,Object.defineProperty(pi.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),((fi.prototype=Object.create(ot.prototype)).constructor=fi).prototype.isWebGLCubeRenderTarget=!0,fi.prototype.fromEquirectangularTexture=function(t,e){this.texture.type=e.type,this.texture.format=Ct,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;var n=new ri(5,5,5),i=new ci({name:"CubemapFromEquirect",uniforms:oi({tEquirect:{value:null}}),vertexShader:"\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t#include <begin_vertex>\n\t\t\t\t#include <project_vertex>\n\n\t\t\t}\n\t\t",fragmentShader:"\n\n\t\t\tuniform sampler2D tEquirect;\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t}\n\t\t",side:1,blending:0});i.uniforms.tEquirect.value=e;var r=new ti(n,i),a=e.minFilter;return e.minFilter===u&&(e.minFilter=j),new di(1,10,this).update(t,r),e.minFilter=a,r.geometry.dispose(),r.material.dispose(),this},fi.prototype.clear=function(t,e,n,i){for(var r=t.getRenderTarget(),a=0;a<6;a++)t.setRenderTarget(this,a),t.clear(e,n,i);t.setRenderTarget(r)},((mi.prototype=Object.create(nt.prototype)).constructor=mi).prototype.isDataTexture=!0;var gi,vi=new Vt,yi=new Bt,_i=((gi=xi.prototype).set=function(t,e,n,i,r,a){var o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(a),this},gi.clone=function(){return(new this.constructor).copy(this)},gi.copy=function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this},gi.setFromProjectionMatrix=function(t){var e=this.planes,n=t.elements,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],l=n[5],c=n[6],u=n[7],h=n[8],d=n[9],p=n[10],f=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return e[0].setComponents(o-i,u-s,f-h,y-m).normalize(),e[1].setComponents(o+i,u+s,f+h,y+m).normalize(),e[2].setComponents(o+r,u+l,f+d,y+g).normalize(),e[3].setComponents(o-r,u-l,f-d,y-g).normalize(),e[4].setComponents(o-a,u-c,f-p,y-v).normalize(),e[5].setComponents(o+a,u+c,f+p,y+v).normalize(),this},gi.intersectsObject=function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),vi.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(vi)},gi.intersectsSprite=function(t){return vi.center.set(0,0,0),vi.radius=.7071067811865476,vi.applyMatrix4(t.matrixWorld),this.intersectsSphere(vi)},gi.intersectsSphere=function(t){for(var e=this.planes,n=t.center,i=-t.radius,r=0;r<6;r++)if(e[r].distanceToPoint(n)<i)return!1;return!0},gi.intersectsBox=function(t){for(var e=this.planes,n=0;n<6;n++){var i=e[n];if(yi.x=0<i.normal.x?t.max.x:t.min.x,yi.y=0<i.normal.y?t.max.y:t.min.y,yi.z=0<i.normal.z?t.max.z:t.min.z,i.distanceToPoint(yi)<0)return!1}return!0},gi.containsPoint=function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0},xi);function xi(t,e,n,i,r,a){this.planes=[void 0!==t?t:new Ie,void 0!==e?e:new Ie,void 0!==n?n:new Ie,void 0!==i?i:new Ie,void 0!==r?r:new Ie,void 0!==a?a:new Ie]}function bi(){var n=null,t=!1,i=null,r=null;function a(t,e){i(t,e),r=n.requestAnimationFrame(a)}return{start:function(){!0!==t&&null!==i&&(r=n.requestAnimationFrame(a),t=!0)},stop:function(){n.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(t){i=t},setContext:function(t){n=t}}}function wi(l,t){var c=t.isWebGL2,u=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),u.get(t)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var e=u.get(t);e&&(l.deleteBuffer(e.buffer),u.delete(t))},update:function(t,e){var n,i,r,a,o,s;t.isGLBufferAttribute?(!(n=u.get(t))||n.version<t.version)&&u.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}):(t.isInterleavedBufferAttribute&&(t=t.data),void 0===(i=u.get(t))?u.set(t,function(t,e){var n=t.array,i=t.usage,r=l.createBuffer();l.bindBuffer(e,r),l.bufferData(e,n,i),t.onUploadCallback();var a=5126;return n instanceof Float32Array?a=5126:n instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):n instanceof Uint16Array?t.isFloat16BufferAttribute?c?a=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):a=5123:n instanceof Int16Array?a=5122:n instanceof Uint32Array?a=5125:n instanceof Int32Array?a=5124:n instanceof Int8Array?a=5120:n instanceof Uint8Array&&(a=5121),{buffer:r,type:a,bytesPerElement:n.BYTES_PER_ELEMENT,version:t.version}}(t,e)):i.version<t.version&&(r=i.buffer,a=e,o=t.array,s=t.updateRange,l.bindBuffer(a,r),-1===s.count?l.bufferSubData(a,0,o):(c?l.bufferSubData(a,s.offset*o.BYTES_PER_ELEMENT,o,s.offset,s.count):l.bufferSubData(a,s.offset*o.BYTES_PER_ELEMENT,o.subarray(s.offset,s.offset+s.count)),s.count=-1),i.version=t.version))}}}var Ti,Mi=(C(Li,Ti=Bn),Li),Si={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor.xyz *= color.xyz;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(\t\t0, 1,\t\t0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t\tf.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t\tf.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(\t1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,\t1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,\t1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},Ei={common:{diffuse:{value:new en(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Q},uv2Transform:{value:new Q},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new It(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new en(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new en(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Q}},sprite:{diffuse:{value:new en(15658734)},opacity:{value:1},center:{value:new It(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Q}}},Ai={basic:{uniforms:si([Ei.common,Ei.specularmap,Ei.envmap,Ei.aomap,Ei.lightmap,Ei.fog]),vertexShader:Si.meshbasic_vert,fragmentShader:Si.meshbasic_frag},lambert:{uniforms:si([Ei.common,Ei.specularmap,Ei.envmap,Ei.aomap,Ei.lightmap,Ei.emissivemap,Ei.fog,Ei.lights,{emissive:{value:new en(0)}}]),vertexShader:Si.meshlambert_vert,fragmentShader:Si.meshlambert_frag},phong:{uniforms:si([Ei.common,Ei.specularmap,Ei.envmap,Ei.aomap,Ei.lightmap,Ei.emissivemap,Ei.bumpmap,Ei.normalmap,Ei.displacementmap,Ei.fog,Ei.lights,{emissive:{value:new en(0)},specular:{value:new en(1118481)},shininess:{value:30}}]),vertexShader:Si.meshphong_vert,fragmentShader:Si.meshphong_frag},standard:{uniforms:si([Ei.common,Ei.envmap,Ei.aomap,Ei.lightmap,Ei.emissivemap,Ei.bumpmap,Ei.normalmap,Ei.displacementmap,Ei.roughnessmap,Ei.metalnessmap,Ei.fog,Ei.lights,{emissive:{value:new en(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Si.meshphysical_vert,fragmentShader:Si.meshphysical_frag},toon:{uniforms:si([Ei.common,Ei.aomap,Ei.lightmap,Ei.emissivemap,Ei.bumpmap,Ei.normalmap,Ei.displacementmap,Ei.gradientmap,Ei.fog,Ei.lights,{emissive:{value:new en(0)}}]),vertexShader:Si.meshtoon_vert,fragmentShader:Si.meshtoon_frag},matcap:{uniforms:si([Ei.common,Ei.bumpmap,Ei.normalmap,Ei.displacementmap,Ei.fog,{matcap:{value:null}}]),vertexShader:Si.meshmatcap_vert,fragmentShader:Si.meshmatcap_frag},points:{uniforms:si([Ei.points,Ei.fog]),vertexShader:Si.points_vert,fragmentShader:Si.points_frag},dashed:{uniforms:si([Ei.common,Ei.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Si.linedashed_vert,fragmentShader:Si.linedashed_frag},depth:{uniforms:si([Ei.common,Ei.displacementmap]),vertexShader:Si.depth_vert,fragmentShader:Si.depth_frag},normal:{uniforms:si([Ei.common,Ei.bumpmap,Ei.normalmap,Ei.displacementmap,{opacity:{value:1}}]),vertexShader:Si.normal_vert,fragmentShader:Si.normal_frag},sprite:{uniforms:si([Ei.sprite,Ei.fog]),vertexShader:Si.sprite_vert,fragmentShader:Si.sprite_frag},background:{uniforms:{uvTransform:{value:new Q},t2D:{value:null}},vertexShader:Si.background_vert,fragmentShader:Si.background_frag},cube:{uniforms:si([Ei.envmap,{opacity:{value:1}}]),vertexShader:Si.cube_vert,fragmentShader:Si.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Si.equirect_vert,fragmentShader:Si.equirect_frag},distanceRGBA:{uniforms:si([Ei.common,Ei.displacementmap,{referencePosition:{value:new Bt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Si.distanceRGBA_vert,fragmentShader:Si.distanceRGBA_frag},shadow:{uniforms:si([Ei.lights,Ei.fog,{color:{value:new en(0)},opacity:{value:1}}]),vertexShader:Si.shadow_vert,fragmentShader:Si.shadow_frag}};function Li(t,e,n,i){var r;void 0===t&&(t=1),void 0===e&&(e=1),void 0===n&&(n=1),void 0===i&&(i=1),(r=Ti.call(this)||this).type="PlaneBufferGeometry",r.parameters={width:t,height:e,widthSegments:n,heightSegments:i};for(var a=t/2,o=e/2,s=Math.floor(n),l=Math.floor(i),c=s+1,u=l+1,h=t/s,d=e/l,p=[],f=[],m=[],g=[],v=0;v<u;v++)for(var y=v*d-o,_=0;_<c;_++){var x=_*h-a;f.push(x,-y,0),m.push(0,0,1),g.push(_/s),g.push(1-v/l)}for(var b=0;b<l;b++)for(var w=0;w<s;w++){var T=w+c*b,M=w+c*(b+1),S=w+1+c*(b+1),E=w+1+c*b;p.push(T,M,E),p.push(M,S,E)}return r.setIndex(p),r.setAttribute("position",new bn(f,3)),r.setAttribute("normal",new bn(m,3)),r.setAttribute("uv",new bn(g,2)),r}function Ci(s,l,n,c,i){var u,h,d=new en(0),p=0,f=null,m=0,g=null;function v(t,e){n.buffers.color.setClear(t.r,t.g,t.b,e,i)}return{getClearColor:function(){return d},setClearColor:function(t,e){void 0===e&&(e=1),d.set(t),v(d,p=e)},getClearAlpha:function(){return p},setClearAlpha:function(t){v(d,p=t)},render:function(t,e,n,i){var r=!0===e.isScene?e.background:null;r&&r.isTexture&&(r=l.get(r));var a=s.xr,o=a.getSession&&a.getSession();o&&"additive"===o.environmentBlendMode&&(r=null),null===r?v(d,p):r&&r.isColor&&(v(r,1),i=!0),(s.autoClear||i)&&s.clear(s.autoClearColor,s.autoClearDepth,s.autoClearStencil),r&&(r.isCubeTexture||r.isWebGLCubeRenderTarget||r.mapping===I)?(void 0===h&&((h=new ti(new ri(1,1,1),new ci({name:"BackgroundCubeMaterial",uniforms:oi(Ai.cube.uniforms),vertexShader:Ai.cube.vertexShader,fragmentShader:Ai.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),c.update(h)),r.isWebGLCubeRenderTarget&&(r=r.texture),h.material.uniforms.envMap.value=r,h.material.uniforms.flipEnvMap.value=r.isCubeTexture&&r._needsFlipEnvMap?-1:1,f===r&&m===r.version&&g===s.toneMapping||(h.material.needsUpdate=!0,m=(f=r).version,g=s.toneMapping),t.unshift(h,h.geometry,h.material,0,0,null)):r&&r.isTexture&&(void 0===u&&((u=new ti(new Mi(2,2),new ci({name:"BackgroundMaterial",uniforms:oi(Ai.background.uniforms),vertexShader:Ai.background.vertexShader,fragmentShader:Ai.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),c.update(u)),!0===(u.material.uniforms.t2D.value=r).matrixAutoUpdate&&r.updateMatrix(),u.material.uniforms.uvTransform.value.copy(r.matrix),f===r&&m===r.version&&g===s.toneMapping||(u.material.needsUpdate=!0,m=(f=r).version,g=s.toneMapping),t.unshift(u,u.geometry,u.material,0,0,null))}}}function Ri(E,A,L,C){var a=E.getParameter(34921),l=C.isWebGL2?null:A.get("OES_vertex_array_object"),c=C.isWebGL2||null!==l,u={},t=p(null),h=t;function d(t){return C.isWebGL2?E.bindVertexArray(t):l.bindVertexArrayOES(t)}function o(t){return C.isWebGL2?E.deleteVertexArray(t):l.deleteVertexArrayOES(t)}function p(t){for(var e=[],n=[],i=[],r=0;r<a;r++)e[r]=0,n[r]=0,i[r]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:i,object:t,attributes:{},index:null}}function R(){for(var t=h.newAttributes,e=0,n=t.length;e<n;e++)t[e]=0}function P(t){O(t,0)}function O(t,e){var n=h.newAttributes,i=h.enabledAttributes,r=h.attributeDivisors;n[t]=1,0===i[t]&&(E.enableVertexAttribArray(t),i[t]=1),r[t]!==e&&((C.isWebGL2?E:A.get("ANGLE_instanced_arrays"))[C.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](t,e),r[t]=e)}function D(){for(var t=h.newAttributes,e=h.enabledAttributes,n=0,i=e.length;n<i;n++)e[n]!==t[n]&&(E.disableVertexAttribArray(n),e[n]=0)}function N(t,e,n,i,r,a){!0!==C.isWebGL2||5124!==n&&5125!==n?E.vertexAttribPointer(t,e,n,i,r,a):E.vertexAttribIPointer(t,e,n,r,a)}function s(){e(),h!==t&&d((h=t).object)}function e(){t.geometry=null,t.program=null,t.wireframe=!1}return{setup:function(t,a,e,s,n){var i,r,o=!1;c?(i=function(t){var e=!0===a.wireframe,n=u[s.id];void 0===n&&(n={},u[s.id]=n);var i=n[t.id];void 0===i&&(i={},n[t.id]=i);var r=i[e];return void 0===r&&(r=p(C.isWebGL2?E.createVertexArray():l.createVertexArrayOES()),i[e]=r),r}(e),h!==i&&d((h=i).object),(o=function(t){var e=h.attributes,n=s.attributes,i=0;for(var r in n){var a=e[r],o=n[r];if(void 0===a)return!0;if(a.attribute!==o)return!0;if(a.data!==o.data)return!0;i++}return h.attributesNum!==i||h.index!==t}(n))&&function(t){var e={},n=s.attributes,i=0;for(var r in n){var a=n[r],o={};(o.attribute=a).data&&(o.data=a.data),e[r]=o,i++}h.attributes=e,h.attributesNum=i,h.index=t}(n)):(r=!0===a.wireframe,h.geometry===s.id&&h.program===e.id&&h.wireframe===r||(h.geometry=s.id,h.program=e.id,h.wireframe=r,o=!0)),!0===t.isInstancedMesh&&(o=!0),null!==n&&L.update(n,34963),o&&(function(t,e,n,i){if(!1!==C.isWebGL2||!t.isInstancedMesh&&!i.isInstancedBufferGeometry||null!==A.get("ANGLE_instanced_arrays")){R();var r=i.attributes,a=n.getAttributes(),o=e.defaultAttributeValues;for(var s in a){var l=a[s];if(0<=l){var c=r[s];if(void 0!==c){var u=c.normalized,h=c.itemSize,d=L.get(c);if(void 0===d)continue;var p,f,m,g=d.buffer,v=d.type,y=d.bytesPerElement;c.isInterleavedBufferAttribute?(f=(p=c.data).stride,m=c.offset,p&&p.isInstancedInterleavedBuffer?(O(l,p.meshPerAttribute),void 0===i._maxInstanceCount&&(i._maxInstanceCount=p.meshPerAttribute*p.count)):P(l),E.bindBuffer(34962,g),N(l,h,v,u,f*y,m*y)):(c.isInstancedBufferAttribute?(O(l,c.meshPerAttribute),void 0===i._maxInstanceCount&&(i._maxInstanceCount=c.meshPerAttribute*c.count)):P(l),E.bindBuffer(34962,g),N(l,h,v,u,0,0))}else if("instanceMatrix"===s){var _=L.get(t.instanceMatrix);if(void 0===_)continue;var x=_.buffer,b=_.type;O(l+0,1),O(l+1,1),O(l+2,1),O(l+3,1),E.bindBuffer(34962,x),E.vertexAttribPointer(l+0,4,b,!1,64,0),E.vertexAttribPointer(l+1,4,b,!1,64,16),E.vertexAttribPointer(l+2,4,b,!1,64,32),E.vertexAttribPointer(l+3,4,b,!1,64,48)}else if("instanceColor"===s){var w=L.get(t.instanceColor);if(void 0===w)continue;var T=w.buffer,M=w.type;O(l,1),E.bindBuffer(34962,T),E.vertexAttribPointer(l,3,M,!1,12,0)}else if(void 0!==o){var S=o[s];if(void 0!==S)switch(S.length){case 2:E.vertexAttrib2fv(l,S);break;case 3:E.vertexAttrib3fv(l,S);break;case 4:E.vertexAttrib4fv(l,S);break;default:E.vertexAttrib1fv(l,S)}}}}D()}}(t,a,e,s),null!==n&&E.bindBuffer(34963,L.get(n).buffer))},reset:s,resetDefaultState:e,dispose:function(){for(var t in s(),u){var e=u[t];for(var n in e){var i=e[n];for(var r in i)o(i[r].object),delete i[r];delete e[n]}delete u[t]}},releaseStatesOfGeometry:function(t){if(void 0!==u[t.id]){var e=u[t.id];for(var n in e){var i=e[n];for(var r in i)o(i[r].object),delete i[r];delete e[n]}delete u[t.id]}},releaseStatesOfProgram:function(t){for(var e in u){var n=u[e];if(void 0!==n[t.id]){var i=n[t.id];for(var r in i)o(i[r].object),delete i[r];delete n[t.id]}}},initAttributes:R,enableAttribute:P,disableUnusedAttributes:D}}function Pi(a,o,s,t){var l,c=t.isWebGL2;this.setMode=function(t){l=t},this.render=function(t,e){a.drawArrays(l,t,e),s.update(e,l,1)},this.renderInstances=function(t,e,n){if(0!==n){var i,r;if(c)i=a,r="drawArraysInstanced";else if(r="drawArraysInstancedANGLE",null===(i=o.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");i[r](l,t,e,n),s.update(e,l,n)}}}function Oi(e,n,t){var i;function r(t){if("highp"===t){if(0<e.getShaderPrecisionFormat(35633,36338).precision&&0<e.getShaderPrecisionFormat(35632,36338).precision)return"highp";t="mediump"}return"mediump"===t&&0<e.getShaderPrecisionFormat(35633,36337).precision&&0<e.getShaderPrecisionFormat(35632,36337).precision?"mediump":"lowp"}var a="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,o=void 0!==t.precision?t.precision:"highp",s=r(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var l=!0===t.logarithmicDepthBuffer,c=e.getParameter(34930),u=e.getParameter(35660),h=e.getParameter(3379),d=e.getParameter(34076),p=e.getParameter(34921),f=e.getParameter(36347),m=e.getParameter(36348),g=e.getParameter(36349),v=0<u,y=a||!!n.get("OES_texture_float");return{isWebGL2:a,getMaxAnisotropy:function(){if(void 0!==i)return i;var t=n.get("EXT_texture_filter_anisotropic");return i=null!==t?e.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:r,precision:o,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:u,maxTextureSize:h,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:v,floatFragmentTextures:y,floatVertexTextures:v&&y,maxSamples:a?e.getParameter(36183):0}}function Di(h){var u=this,d=null,p=0,f=!1,m=!1,g=new Ie,v=new Q,y={value:null,needsUpdate:!1};function _(){y.value!==d&&(y.value=d,y.needsUpdate=0<p),u.numPlanes=p,u.numIntersection=0}function x(t,e,n,i){var r=null!==t?t.length:0,a=null;if(0!==r){if(a=y.value,!0!==i||null===a){var o=n+4*r,s=e.matrixWorldInverse;v.getNormalMatrix(s),(null===a||a.length<o)&&(a=new Float32Array(o));for(var l=0,c=n;l!==r;++l,c+=4)g.copy(t[l]).applyMatrix4(s,v),g.normal.toArray(a,c),a[c+3]=g.constant}y.value=a,y.needsUpdate=!0}return u.numPlanes=r,u.numIntersection=0,a}this.uniform=y,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,n){var i=0!==t.length||e||0!==p||f;return f=e,d=x(t,n,0),p=t.length,i},this.beginShadows=function(){m=!0,x(null)},this.endShadows=function(){m=!1,_()},this.setState=function(t,e,n){var i=t.clippingPlanes,r=t.clipIntersection,a=t.clipShadows,o=h.get(t);if(!f||null===i||0===i.length||m&&!a)m?x(null):_();else{var s=m?0:p,l=4*s,c=o.clippingState||null;y.value=c,c=x(i,e,l,n);for(var u=0;u!==l;++u)c[u]=d[u];o.clippingState=c,this.numIntersection=r?this.numPlanes:0,this.numPlanes+=s}}}function Ni(s){var l=new WeakMap;function c(t,e){return e===h?t.mapping=D:e===d&&(t.mapping=N),t}function u(t){var e=t.target;e.removeEventListener("dispose",u);var n=l.get(e);void 0!==n&&(l.delete(e),n.dispose())}return{get:function(t){if(t&&t.isTexture){var e=t.mapping;if(e===h||e===d){if(l.has(t))return c(l.get(t).texture,t.mapping);var n=t.image;if(n&&0<n.height){var i=s.getRenderList(),r=s.getRenderTarget(),a=s.getRenderState(),o=new fi(n.height/2);return o.fromEquirectangularTexture(s,t),l.set(t,o),s.setRenderTarget(r),s.setRenderList(i),s.setRenderState(a),t.addEventListener("dispose",u),c(o.texture,t.mapping)}return null}}return t},dispose:function(){l=new WeakMap}}}function Ii(n){var i={};return{has:function(t){if(void 0!==i[t])return null!==i[t];var e;switch(t){case"WEBGL_depth_texture":e=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":e=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":e=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":e=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:e=n.getExtension(t)}return null!==(i[t]=e)},get:function(t){return this.has(t)||console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),i[t]}}}function Bi(t,_,a,o){var s=new WeakMap,x=new WeakMap;function l(t){var e=t.target,n=s.get(e);for(var i in null!==n.index&&_.remove(n.index),n.attributes)_.remove(n.attributes[i]);e.removeEventListener("dispose",l),s.delete(e);var r=x.get(n);r&&(_.remove(r),x.delete(n)),o.releaseStatesOfGeometry(n),!0===e.isInstancedBufferGeometry&&delete e._maxInstanceCount,a.memory.geometries--}function i(t){var e=[],n=t.index,i=t.attributes.position,r=0;if(null!==n)for(var a=n.array,r=n.version,o=0,s=a.length;o<s;o+=3){var l=a[o+0],c=a[o+1],u=a[o+2];e.push(l,c,c,u,u,l)}else{var h=i.array;r=i.version;for(var d=0,p=h.length/3-1;d<p;d+=3){var f=d+0,m=d+1,g=d+2;e.push(f,m,m,g,g,f)}}var v=new(65535<En(e)?_n:vn)(e,1);v.version=r;var y=x.get(t);y&&_.remove(y),x.set(t,v)}return{get:function(t,e){var n=s.get(e);return n||(e.addEventListener("dispose",l),e.isBufferGeometry?n=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new Bn).setFromObject(t)),n=e._bufferGeometry),s.set(e,n),a.memory.geometries++,n)},update:function(t){var e=t.attributes;for(var n in e)_.update(e[n],34962);var i=t.morphAttributes;for(var r in i)for(var a=i[r],o=0,s=a.length;o<s;o++)_.update(a[o],34962)},getWireframeAttribute:function(t){var e,n=x.get(t);return(!n||null!==(e=t.index)&&n.version<e.version)&&i(t),x.get(t)}}}function Fi(a,o,s,t){var l,c,u,h=t.isWebGL2;this.setMode=function(t){l=t},this.setIndex=function(t){c=t.type,u=t.bytesPerElement},this.render=function(t,e){a.drawElements(l,e,c,t*u),s.update(e,l,1)},this.renderInstances=function(t,e,n){if(0!==n){var i,r;if(h)i=a,r="drawElementsInstanced";else if(r="drawElementsInstancedANGLE",null===(i=o.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");i[r](l,e,c,t*u,n),s.update(e,l,n)}}}function ki(t){var i={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:i,programs:null,autoReset:!0,reset:function(){i.frame++,i.calls=0,i.triangles=0,i.points=0,i.lines=0},update:function(t,e,n){switch(i.calls++,e){case 4:i.triangles+=n*(t/3);break;case 1:i.lines+=n*(t/2);break;case 3:i.lines+=n*(t-1);break;case 2:i.lines+=n*t;break;case 0:i.points+=n*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",e)}}}}function zi(t,e){return t[0]-e[0]}function Hi(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Ui(_){for(var x={},b=new Float32Array(8),w=[],t=0;t<8;t++)w[t]=[t,0];return{update:function(t,e,n,i){var r=t.morphTargetInfluences,a=void 0===r?0:r.length,o=x[e.id];if(void 0===o){o=[];for(var s=0;s<a;s++)o[s]=[s,0];x[e.id]=o}for(var l=0;l<a;l++){var c=o[l];c[0]=l,c[1]=r[l]}o.sort(Hi);for(var u=0;u<8;u++)u<a&&o[u][1]?(w[u][0]=o[u][0],w[u][1]=o[u][1]):(w[u][0]=Number.MAX_SAFE_INTEGER,w[u][1]=0);w.sort(zi);for(var h=n.morphTargets&&e.morphAttributes.position,d=n.morphNormals&&e.morphAttributes.normal,p=0,f=0;f<8;f++){var m=w[f],g=m[0],v=m[1];g!==Number.MAX_SAFE_INTEGER&&v?(h&&e.getAttribute("morphTarget"+f)!==h[g]&&e.setAttribute("morphTarget"+f,h[g]),d&&e.getAttribute("morphNormal"+f)!==d[g]&&e.setAttribute("morphNormal"+f,d[g]),p+=b[f]=v):(h&&!0===e.hasAttribute("morphTarget"+f)&&e.deleteAttribute("morphTarget"+f),d&&!0===e.hasAttribute("morphNormal"+f)&&e.deleteAttribute("morphNormal"+f),b[f]=0)}var y=e.morphTargetsRelative?1:1-p;i.getUniforms().setValue(_,"morphTargetBaseInfluence",y),i.getUniforms().setValue(_,"morphTargetInfluences",b)}}}function Gi(t,r,a,o){var s=new WeakMap;return{update:function(t){var e=o.render.frame,n=t.geometry,i=r.get(t,n);return s.get(i)!==e&&(n.isGeometry&&i.updateFromObject(t),r.update(i),s.set(i,e)),t.isInstancedMesh&&(a.update(t.instanceMatrix,34962),null!==t.instanceColor&&a.update(t.instanceColor,34962)),i},dispose:function(){s=new WeakMap}}}function ji(t,e,n,i){void 0===t&&(t=null),void 0===e&&(e=1),void 0===n&&(n=1),void 0===i&&(i=1),nt.call(this,null),this.image={data:t,width:e,height:n,depth:i},this.magFilter=H,this.minFilter=H,this.wrapR=z,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function Vi(t,e,n,i){void 0===t&&(t=null),void 0===e&&(e=1),void 0===n&&(n=1),void 0===i&&(i=1),nt.call(this,null),this.image={data:t,width:e,height:n,depth:i},this.magFilter=H,this.minFilter=H,this.wrapR=z,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}Ai.physical={uniforms:si([Ai.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new It(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new en(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:Si.meshphysical_vert,fragmentShader:Si.meshphysical_frag},((ji.prototype=Object.create(nt.prototype)).constructor=ji).prototype.isDataTexture2DArray=!0,((Vi.prototype=Object.create(nt.prototype)).constructor=Vi).prototype.isDataTexture3D=!0;var Wi=new nt,qi=new ji,Xi=new Vi,Yi=new pi,Zi=[],Ji=[],Qi=new Float32Array(16),$i=new Float32Array(9),Ki=new Float32Array(4);function tr(t,e,n){var i=t[0];if(i<=0||0<i)return t;var r=e*n,a=Zi[r];if(void 0===a&&(a=new Float32Array(r),Zi[r]=a),0!==e){i.toArray(a,0);for(var o=1,s=0;o!==e;++o)s+=n,t[o].toArray(a,s)}return a}function er(t,e){if(t.length===e.length){for(var n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return;return 1}}function nr(t,e){for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}function ir(t,e){var n=Ji[e];void 0===n&&(n=new Int32Array(e),Ji[e]=n);for(var i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function rr(t,e){var n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function ar(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(er(n,e))return;t.uniform2fv(this.addr,e),nr(n,e)}}function or(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(er(n,e))return;t.uniform3fv(this.addr,e),nr(n,e)}}function sr(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(er(n,e))return;t.uniform4fv(this.addr,e),nr(n,e)}}function lr(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(er(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),nr(n,e)}else{if(er(n,i))return;Ki.set(i),t.uniformMatrix2fv(this.addr,!1,Ki),nr(n,i)}}function cr(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(er(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),nr(n,e)}else{if(er(n,i))return;$i.set(i),t.uniformMatrix3fv(this.addr,!1,$i),nr(n,i)}}function ur(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(er(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),nr(n,e)}else{if(er(n,i))return;Qi.set(i),t.uniformMatrix4fv(this.addr,!1,Qi),nr(n,i)}}function hr(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(e||Wi,r)}function dr(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||qi,r)}function pr(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||Xi,r)}function fr(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(e||Yi,r)}function mr(t,e){var n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function gr(t,e){var n=this.cache;er(n,e)||(t.uniform2iv(this.addr,e),nr(n,e))}function vr(t,e){var n=this.cache;er(n,e)||(t.uniform3iv(this.addr,e),nr(n,e))}function yr(t,e){var n=this.cache;er(n,e)||(t.uniform4iv(this.addr,e),nr(n,e))}function _r(t,e){var n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function xr(t,e){t.uniform1fv(this.addr,e)}function br(t,e){t.uniform1iv(this.addr,e)}function wr(t,e){t.uniform2iv(this.addr,e)}function Tr(t,e){t.uniform3iv(this.addr,e)}function Mr(t,e){t.uniform4iv(this.addr,e)}function Sr(t,e){var n=tr(e,this.size,2);t.uniform2fv(this.addr,n)}function Er(t,e){var n=tr(e,this.size,3);t.uniform3fv(this.addr,n)}function Ar(t,e){var n=tr(e,this.size,4);t.uniform4fv(this.addr,n)}function Lr(t,e){var n=tr(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Cr(t,e){var n=tr(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function Rr(t,e){var n=tr(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Pr(t,e,n){var i=e.length,r=ir(n,i);t.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.safeSetTexture2D(e[a]||Wi,r[a])}function Or(t,e,n){var i=e.length,r=ir(n,i);t.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.safeSetTextureCube(e[a]||Yi,r[a])}function Dr(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(){switch(e.type){case 5126:return rr;case 35664:return ar;case 35665:return or;case 35666:return sr;case 35674:return lr;case 35675:return cr;case 35676:return ur;case 5124:case 35670:return mr;case 35667:case 35671:return gr;case 35668:case 35672:return vr;case 35669:case 35673:return yr;case 5125:return _r;case 35678:case 36198:case 36298:case 36306:case 35682:return hr;case 35679:case 36299:case 36307:return pr;case 35680:case 36300:case 36308:case 36293:return fr;case 36289:case 36303:case 36311:case 36292:return dr}}()}function Nr(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(){switch(e.type){case 5126:return xr;case 35664:return Sr;case 35665:return Er;case 35666:return Ar;case 35674:return Lr;case 35675:return Cr;case 35676:return Rr;case 5124:case 35670:return br;case 35667:case 35671:return wr;case 35668:case 35672:return Tr;case 35669:case 35673:return Mr;case 35678:case 36198:case 36298:case 36306:case 35682:return Pr;case 35680:case 36300:case 36308:case 36293:return Or}}()}function Ir(t){this.id=t,this.seq=[],this.map={}}Nr.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),nr(e,t)},Ir.prototype.setValue=function(t,e,n){for(var i=this.seq,r=0,a=i.length;r!==a;++r){var o=i[r];o.setValue(t,e[o.id],n)}};var Br=/([\w\d_]+)(\])?(\[|\.)?/g;function Fr(t,e){t.seq.push(e),t.map[e.id]=e}function kr(t,e){this.seq=[],this.map={};for(var n=t.getProgramParameter(e,35718),i=0;i<n;++i){var r=t.getActiveUniform(e,i);!function(t,e,n){var i=t.name,r=i.length;for(Br.lastIndex=0;;){var a=Br.exec(i),o=Br.lastIndex,s=a[1],l="]"===a[2],c=a[3];if(l&&(s|=0),void 0===c||"["===c&&o+2===r){Fr(n,new(void 0===c?Dr:Nr)(s,t,e));break}var u=n.map[s];void 0===u&&Fr(n,u=new Ir(s)),n=u}}(r,t.getUniformLocation(e,r.name),this)}}function zr(t,e,n){var i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}kr.prototype.setValue=function(t,e,n,i){var r=this.map[e];void 0!==r&&r.setValue(t,n,i)},kr.prototype.setOptional=function(t,e,n){var i=e[n];void 0!==i&&this.setValue(t,n,i)},kr.upload=function(t,e,n,i){for(var r=0,a=e.length;r!==a;++r){var o=e[r],s=n[o.id];!1!==s.needsUpdate&&o.setValue(t,s.value,i)}},kr.seqWithValue=function(t,e){for(var n=[],i=0,r=t.length;i!==r;++i){var a=t[i];a.id in e&&n.push(a)}return n};var Hr=0;function Ur(t){switch(t){case Rt:return["Linear","( value )"];case v:return["sRGB","( value )"];case _:return["RGBE","( value )"];case e:return["RGBM","( value, 7.0 )"];case n:return["RGBM","( value, 16.0 )"];case i:return["RGBD","( value, 256.0 )"];case y:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function Gr(n,i,t){var e=n.getShaderParameter(i,35713),r=n.getShaderInfoLog(i).trim();return e&&""===r?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+t+"\n"+r+function(){for(var t=n.getShaderSource(i).split("\n"),e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join("\n")}()}function jr(t,e){var n=Ur(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Vr(t){return""!==t}function Wr(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function qr(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var Xr=/^[ \t]*#include +<([\w\d./]+)>/gm;function Yr(t){return t.replace(Xr,Zr)}function Zr(t,e){var n=Si[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return Yr(n)}var Jr=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Qr=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function $r(t){return t.replace(Qr,ta).replace(Jr,Kr)}function Kr(t,e,n,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),ta(0,e,n,i)}function ta(t,e,n,i){for(var r="",a=parseInt(e);a<parseInt(n);a++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function ea(t){var e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function na(t,e,n,i){var r,a,o,s,l=t.getContext(),c=n.defines,u=n.vertexShader,h=n.fragmentShader,d=(s="SHADOWMAP_TYPE_BASIC",1===n.shadowMapType?s="SHADOWMAP_TYPE_PCF":2===n.shadowMapType?s="SHADOWMAP_TYPE_PCF_SOFT":3===n.shadowMapType&&(s="SHADOWMAP_TYPE_VSM"),s),p=function(){var t="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case D:case N:t="ENVMAP_TYPE_CUBE";break;case I:case B:t="ENVMAP_TYPE_CUBE_UV"}return t}(),f=function(){var t="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case N:case B:t="ENVMAP_MODE_REFRACTION"}return t}(),m=function(){var t="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(),g=0<t.gammaFactor?t.gammaFactor:1,v=n.isWebGL2?"":[n.extensionDerivatives||n.envMapCubeUV||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Vr).join("\n"),y=function(t){var e=[];for(var n in t){var i=t[n];!1!==i&&e.push("#define "+n+" "+i)}return e.join("\n")}(c),_=l.createProgram(),x=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(0<(r=[y].filter(Vr).join("\n")).length&&(r+="\n"),0<(a=[v,y].filter(Vr).join("\n")).length&&(a+="\n")):(r=[ea(n),"#define SHADER_NAME "+n.shaderName,y,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+g,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+d:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Vr).join("\n"),a=[v,ea(n),"#define SHADER_NAME "+n.shaderName,y,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+g,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+p:"",n.envMap?"#define "+f:"",n.envMap?"#define "+m:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+d:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?Si.tonemapping_pars_fragment:"",0!==n.toneMapping?function(t,e){var n;switch(e){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",Si.encodings_pars_fragment,n.map?jr("mapTexelToLinear",n.mapEncoding):"",n.matcap?jr("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?jr("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?jr("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?jr("lightMapTexelToLinear",n.lightMapEncoding):"","vec4 linearToOutputTexel( vec4 value ) { return LinearTo"+(o=Ur(n.outputEncoding))[0]+o[1]+"; }",n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Vr).join("\n")),u=qr(Wr(Yr(u),n),n),h=qr(Wr(Yr(h),n),n),u=$r(u),h=$r(h),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(x="#version 300 es\n",r=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+r,a=["#define varying in",n.glslVersion===F?"":"out highp vec4 pc_fragColor;",n.glslVersion===F?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+a);var b,w,T,M,S,E,A,L,C,R=x+a+h,P=zr(l,35633,x+r+u),O=zr(l,35632,R);return l.attachShader(_,P),l.attachShader(_,O),void 0!==n.index0AttributeName?l.bindAttribLocation(_,0,n.index0AttributeName):!0===n.morphTargets&&l.bindAttribLocation(_,0,"position"),l.linkProgram(_),t.debug.checkShaderErrors&&(T=l.getProgramInfoLog(_).trim(),M=l.getShaderInfoLog(P).trim(),S=l.getShaderInfoLog(O).trim(),!(A=E=!0)===l.getProgramParameter(_,35714)?(E=!1,L=Gr(l,P,"vertex"),C=Gr(l,O,"fragment"),console.error("THREE.WebGLProgram: shader error: ",l.getError(),"35715",l.getProgramParameter(_,35715),"gl.getProgramInfoLog",T,L,C)):""!==T?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",T):""!==M&&""!==S||(A=!1),A&&(this.diagnostics={runnable:E,programLog:T,vertexShader:{log:M,prefix:r},fragmentShader:{log:S,prefix:a}})),l.deleteShader(P),l.deleteShader(O),this.getUniforms=function(){return void 0===b&&(b=new kr(l,_)),b},this.getAttributes=function(){return void 0===w&&(w=function(t,e){for(var n={},i=t.getProgramParameter(e,35721),r=0;r<i;r++){var a=t.getActiveAttrib(e,r).name;n[a]=t.getAttribLocation(e,a)}return n}(l,_)),w},this.destroy=function(){i.releaseStatesOfProgram(this),l.deleteProgram(_),this.program=void 0},this.name=n.shaderName,this.id=Hr++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=P,this.fragmentShader=O,this}function ia(f,m,g,v,o,y){var s=[],_=v.isWebGL2,x=v.logarithmicDepthBuffer,b=v.floatVertexTextures,w=v.maxVertexUniforms,T=v.vertexTextures,M=v.precision,S={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},r=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function E(t){var e;return t?t.isTexture?e=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),e=t.texture.encoding):e=Rt,e}return{getParameters:function(t,e,n,i,r){var a,o,s,l=i.fog,c=t.isMeshStandardMaterial?i.environment:null,u=m.get(t.envMap||c),h=S[t.type],d=r.isSkinnedMesh?function(){var t=r.skeleton.bones;if(b)return 1024;var e=Math.floor((w-20)/4),n=Math.min(e,t.length);return n<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+n+"."),0):n}():0;null!==t.precision&&(M=v.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",M,"instead."),s=h?(o=(a=Ai[h]).vertexShader,a.fragmentShader):(o=t.vertexShader,t.fragmentShader);var p=f.getRenderTarget();return{isWebGL2:_,shaderID:h,shaderName:t.type,vertexShader:o,fragmentShader:s,defines:t.defines,isRawShaderMaterial:!0===t.isRawShaderMaterial,glslVersion:t.glslVersion,precision:M,instancing:!0===r.isInstancedMesh,instancingColor:!0===r.isInstancedMesh&&null!==r.instanceColor,supportsVertexTextures:T,outputEncoding:null!==p?E(p.texture):f.outputEncoding,map:!!t.map,mapEncoding:E(t.map),matcap:!!t.matcap,matcapEncoding:E(t.matcap),envMap:!!u,envMapMode:u&&u.mapping,envMapEncoding:E(u),envMapCubeUV:!!u&&(u.mapping===I||u.mapping===B),lightMap:!!t.lightMap,lightMapEncoding:E(t.lightMap),aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:E(t.emissiveMap),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,objectSpaceNormalMap:1===t.normalMapType,tangentSpaceNormalMap:0===t.normalMapType,clearcoatMap:!!t.clearcoatMap,clearcoatRoughnessMap:!!t.clearcoatRoughnessMap,clearcoatNormalMap:!!t.clearcoatNormalMap,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,sheen:!!t.sheen,transmissionMap:!!t.transmissionMap,combine:t.combine,vertexTangents:t.normalMap&&t.vertexTangents,vertexColors:t.vertexColors,vertexUvs:!!(t.map||t.bumpMap||t.normalMap||t.specularMap||t.alphaMap||t.emissiveMap||t.roughnessMap||t.metalnessMap||t.clearcoatMap||t.clearcoatRoughnessMap||t.clearcoatNormalMap||t.displacementMap||t.transmissionMap),uvsVertexOnly:!(t.map||t.bumpMap||t.normalMap||t.specularMap||t.alphaMap||t.emissiveMap||t.roughnessMap||t.metalnessMap||t.clearcoatNormalMap||t.transmissionMap||!t.displacementMap),fog:!!l,useFog:t.fog,fogExp2:l&&l.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:x,skinning:t.skinning&&0<d,maxBones:d,useVertexTexture:b,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:f.maxMorphTargets,maxMorphNormals:f.maxMorphNormals,numDirLights:e.directional.length,numPointLights:e.point.length,numSpotLights:e.spot.length,numRectAreaLights:e.rectArea.length,numHemiLights:e.hemi.length,numDirLightShadows:e.directionalShadowMap.length,numPointLightShadows:e.pointShadowMap.length,numSpotLightShadows:e.spotShadowMap.length,numClippingPlanes:y.numPlanes,numClipIntersection:y.numIntersection,dithering:t.dithering,shadowMapEnabled:f.shadowMap.enabled&&0<n.length,shadowMapType:f.shadowMap.type,toneMapping:t.toneMapped?f.toneMapping:0,physicallyCorrectLights:f.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:2===t.side,flipSided:1===t.side,depthPacking:void 0!==t.depthPacking&&t.depthPacking,index0AttributeName:t.index0AttributeName,extensionDerivatives:t.extensions&&t.extensions.derivatives,extensionFragDepth:t.extensions&&t.extensions.fragDepth,extensionDrawBuffers:t.extensions&&t.extensions.drawBuffers,extensionShaderTextureLOD:t.extensions&&t.extensions.shaderTextureLOD,rendererExtensionFragDepth:_||g.has("EXT_frag_depth"),rendererExtensionDrawBuffers:_||g.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:_||g.has("EXT_shader_texture_lod"),customProgramCacheKey:t.customProgramCacheKey()}},getProgramCacheKey:function(t){var e=[];if(t.shaderID?e.push(t.shaderID):(e.push(t.fragmentShader),e.push(t.vertexShader)),void 0!==t.defines)for(var n in t.defines)e.push(n),e.push(t.defines[n]);if(!1===t.isRawShaderMaterial){for(var i=0;i<r.length;i++)e.push(t[r[i]]);e.push(f.outputEncoding),e.push(f.gammaFactor)}return e.push(t.customProgramCacheKey),e.join()},getUniforms:function(t){var e,n=S[t.type];return n?(e=Ai[n],li.clone(e.uniforms)):t.uniforms},acquireProgram:function(t,e){for(var n,i=0,r=s.length;i<r;i++){var a=s[i];if(a.cacheKey===e){++(n=a).usedTimes;break}}return void 0===n&&(n=new na(f,e,t,o),s.push(n)),n},releaseProgram:function(t){var e;0==--t.usedTimes&&(e=s.indexOf(t),s[e]=s[s.length-1],s.pop(),t.destroy())},programs:s}}function ra(){var i=new WeakMap;return{get:function(t){var e=i.get(t);return void 0===e&&(e={},i.set(t,e)),e},remove:function(t){i.delete(t)},update:function(t,e,n){i.get(t)[e]=n},dispose:function(){i=new WeakMap}}}function aa(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function oa(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function sa(l){var c=[],u=0,s=[],h=[],d={id:-1};function p(t,e,n,i,r,a){var o=c[u],s=l.get(n);return void 0===o?(o={id:t.id,object:t,geometry:e,material:n,program:s.program||d,groupOrder:i,renderOrder:t.renderOrder,z:r,group:a},c[u]=o):(o.id=t.id,o.object=t,o.geometry=e,o.material=n,o.program=s.program||d,o.groupOrder=i,o.renderOrder=t.renderOrder,o.z=r,o.group=a),u++,o}return{opaque:s,transparent:h,init:function(){u=0,s.length=0,h.length=0},push:function(t,e,n,i,r,a){var o=p(t,e,n,i,r,a);(!0===n.transparent?h:s).push(o)},unshift:function(t,e,n,i,r,a){var o=p(t,e,n,i,r,a);(!0===n.transparent?h:s).unshift(o)},finish:function(){for(var t=u,e=c.length;t<e;t++){var n=c[t];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.program=null,n.group=null}},sort:function(t,e){1<s.length&&s.sort(t||aa),1<h.length&&h.sort(e||oa)}}}function la(r){var a=new WeakMap;return{get:function(t,e){var n,i=a.get(t);return void 0===i?(n=new sa(r),a.set(t,new WeakMap),a.get(t).set(e,n)):void 0===(n=i.get(e))&&(n=new sa(r),i.set(e,n)),n},dispose:function(){a=new WeakMap}}}function ca(){var n={};return{get:function(t){if(void 0!==n[t.id])return n[t.id];var e;switch(t.type){case"DirectionalLight":e={direction:new Bt,color:new en};break;case"SpotLight":e={position:new Bt,direction:new Bt,color:new en,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new Bt,color:new en,distance:0,decay:0};break;case"HemisphereLight":e={direction:new Bt,skyColor:new en,groundColor:new en};break;case"RectAreaLight":e={color:new en,position:new Bt,halfWidth:new Bt,halfHeight:new Bt}}return n[t.id]=e}}}var ua=0;function ha(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function da(B,F){for(var n,k=new ca,z=(n={},{get:function(t){if(void 0!==n[t.id])return n[t.id];var e;switch(t.type){case"DirectionalLight":case"SpotLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new It};break;case"PointLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new It,shadowCameraNear:1,shadowCameraFar:1e3}}return n[t.id]=e}}),H={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},t=0;t<9;t++)H.probe.push(new Bt);var U=new Bt,G=new Kt,j=new Kt;return{setup:function(t,e,n){for(var i=0,r=0,a=0,o=0;o<9;o++)H.probe[o].set(0,0,0);var s=0,l=0,c=0,u=0,h=0,d=0,p=0,f=0,m=n.matrixWorldInverse;t.sort(ha);for(var g=0,v=t.length;g<v;g++){var y,_,x,b,w,T,M,S,E,A,L,C=t[g],R=C.color,P=C.intensity,O=C.distance,D=C.shadow&&C.shadow.map?C.shadow.map.texture:null;if(C.isAmbientLight)i+=R.r*P,r+=R.g*P,a+=R.b*P;else if(C.isLightProbe)for(var N=0;N<9;N++)H.probe[N].addScaledVector(C.sh.coefficients[N],P);else{C.isDirectionalLight?((y=k.get(C)).color.copy(C.color).multiplyScalar(C.intensity),y.direction.setFromMatrixPosition(C.matrixWorld),U.setFromMatrixPosition(C.target.matrixWorld),y.direction.sub(U),y.direction.transformDirection(m),C.castShadow&&(_=C.shadow,(x=z.get(C)).shadowBias=_.bias,x.shadowNormalBias=_.normalBias,x.shadowRadius=_.radius,x.shadowMapSize=_.mapSize,H.directionalShadow[s]=x,H.directionalShadowMap[s]=D,H.directionalShadowMatrix[s]=C.shadow.matrix,d++),H.directional[s]=y,s++):C.isSpotLight?((b=k.get(C)).position.setFromMatrixPosition(C.matrixWorld),b.position.applyMatrix4(m),b.color.copy(R).multiplyScalar(P),b.distance=O,b.direction.setFromMatrixPosition(C.matrixWorld),U.setFromMatrixPosition(C.target.matrixWorld),b.direction.sub(U),b.direction.transformDirection(m),b.coneCos=Math.cos(C.angle),b.penumbraCos=Math.cos(C.angle*(1-C.penumbra)),b.decay=C.decay,C.castShadow&&(w=C.shadow,(T=z.get(C)).shadowBias=w.bias,T.shadowNormalBias=w.normalBias,T.shadowRadius=w.radius,T.shadowMapSize=w.mapSize,H.spotShadow[c]=T,H.spotShadowMap[c]=D,H.spotShadowMatrix[c]=C.shadow.matrix,f++),H.spot[c]=b,c++):C.isRectAreaLight?((M=k.get(C)).color.copy(R).multiplyScalar(P),M.position.setFromMatrixPosition(C.matrixWorld),M.position.applyMatrix4(m),j.identity(),G.copy(C.matrixWorld),G.premultiply(m),j.extractRotation(G),M.halfWidth.set(.5*C.width,0,0),M.halfHeight.set(0,.5*C.height,0),M.halfWidth.applyMatrix4(j),M.halfHeight.applyMatrix4(j),H.rectArea[u]=M,u++):C.isPointLight?((S=k.get(C)).position.setFromMatrixPosition(C.matrixWorld),S.position.applyMatrix4(m),S.color.copy(C.color).multiplyScalar(C.intensity),S.distance=C.distance,S.decay=C.decay,C.castShadow&&(E=C.shadow,(A=z.get(C)).shadowBias=E.bias,A.shadowNormalBias=E.normalBias,A.shadowRadius=E.radius,A.shadowMapSize=E.mapSize,A.shadowCameraNear=E.camera.near,A.shadowCameraFar=E.camera.far,H.pointShadow[l]=A,H.pointShadowMap[l]=D,H.pointShadowMatrix[l]=C.shadow.matrix,p++),H.point[l]=S,l++):C.isHemisphereLight&&((L=k.get(C)).direction.setFromMatrixPosition(C.matrixWorld),L.direction.transformDirection(m),L.direction.normalize(),L.skyColor.copy(C.color).multiplyScalar(P),L.groundColor.copy(C.groundColor).multiplyScalar(P),H.hemi[h]=L,h++)}}0<u&&(F.isWebGL2||!0===B.has("OES_texture_float_linear")?(H.rectAreaLTC1=Ei.LTC_FLOAT_1,H.rectAreaLTC2=Ei.LTC_FLOAT_2):!0===B.has("OES_texture_half_float_linear")?(H.rectAreaLTC1=Ei.LTC_HALF_1,H.rectAreaLTC2=Ei.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),H.ambient[0]=i,H.ambient[1]=r,H.ambient[2]=a;var I=H.hash;I.directionalLength===s&&I.pointLength===l&&I.spotLength===c&&I.rectAreaLength===u&&I.hemiLength===h&&I.numDirectionalShadows===d&&I.numPointShadows===p&&I.numSpotShadows===f||(H.directional.length=s,H.spot.length=c,H.rectArea.length=u,H.point.length=l,H.hemi.length=h,H.directionalShadow.length=d,H.directionalShadowMap.length=d,H.pointShadow.length=p,H.pointShadowMap.length=p,H.spotShadow.length=f,H.spotShadowMap.length=f,H.directionalShadowMatrix.length=d,H.pointShadowMatrix.length=p,H.spotShadowMatrix.length=f,I.directionalLength=s,I.pointLength=l,I.spotLength=c,I.rectAreaLength=u,I.hemiLength=h,I.numDirectionalShadows=d,I.numPointShadows=p,I.numSpotShadows=f,H.version=ua++)},state:H}}function pa(t,e){var n=new da(t,e),i=[],r=[];return{init:function(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:function(t){n.setup(i,r,t)},pushLight:function(t){i.push(t)},pushShadow:function(t){r.push(t)}}}function fa(i,r){var a=new WeakMap;return{get:function(t,e){var n;return!1===a.has(t)?(n=new pa(i,r),a.set(t,new WeakMap),a.get(t).set(e,n)):!1===a.get(t).has(e)?(n=new pa(i,r),a.get(t).set(e,n)):n=a.get(t).get(e),n},dispose:function(){a=new WeakMap}}}function ma(t){ln.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}function ga(t){ln.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Bt,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}function va(x,b,w){var T=new _i,M=new It,S=new It,E=new Ot,a=[],o=[],g={},v={0:1,1:0,2:2},A=new ci({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new It},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),L=A.clone();L.defines.HORIZONAL_PASS=1;var t=new Bn;t.setAttribute("position",new dn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var C=new ti(t,A),R=this;function y(t,e,n){var i=t<<0|e<<1|n<<2,r=a[i];return void 0===r&&(r=new ma({depthPacking:3201,morphTargets:t,skinning:e}),a[i]=r),r}function _(t,e,n){var i=t<<0|e<<1|n<<2,r=o[i];return void 0===r&&(r=new ga({morphTargets:t,skinning:e}),o[i]=r),r}function P(t,e,n,i,r,a,o){var s,l,c,u,h,d,p=null,f=y,m=t.customDepthMaterial;return!0===i.isPointLight&&(f=_,m=t.customDistanceMaterial),p=void 0===m?(!(s=!1)===n.morphTargets&&(s=e.morphAttributes&&e.morphAttributes.position&&0<e.morphAttributes.position.length),!(l=!1)===t.isSkinnedMesh&&(!0===n.skinning?l=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t)),f(s,l,!0===t.isInstancedMesh)):m,x.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length&&(c=p.uuid,u=n.uuid,void 0===(h=g[c])&&(h={},g[c]=h),void 0===(d=h[u])&&(d=p.clone(),h[u]=d),p=d),p.visible=n.visible,p.wireframe=n.wireframe,p.side=3===o?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:v[n.side],p.clipShadows=n.clipShadows,p.clippingPlanes=n.clippingPlanes,p.clipIntersection=n.clipIntersection,p.wireframeLinewidth=n.wireframeLinewidth,p.linewidth=n.linewidth,!0===i.isPointLight&&!0===p.isMeshDistanceMaterial&&(p.referencePosition.setFromMatrixPosition(i.matrixWorld),p.nearDistance=r,p.farDistance=a),p}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,e,n){if(!1!==R.enabled&&(!1!==R.autoUpdate||!1!==R.needsUpdate)&&0!==t.length){var i=x.getRenderTarget(),r=x.getActiveCubeFace(),a=x.getActiveMipmapLevel(),o=x.state;o.setBlending(0),o.buffers.color.setClear(1,1,1,1),o.buffers.depth.setTest(!0),o.setScissorTest(!1);for(var s=0,l=t.length;s<l;s++){var c=t[s],u=c.shadow;if(void 0!==u){if(!1!==u.autoUpdate||!1!==u.needsUpdate){M.copy(u.mapSize);var h,d,p=u.getFrameExtents();M.multiply(p),S.copy(u.mapSize),(M.x>w||M.y>w)&&(M.x>w&&(S.x=Math.floor(w/p.x),M.x=S.x*p.x,u.mapSize.x=S.x),M.y>w&&(S.y=Math.floor(w/p.y),M.y=S.y*p.y,u.mapSize.y=S.y)),null!==u.map||u.isPointLightShadow||3!==this.type||(h={minFilter:j,magFilter:j,format:Ct},u.map=new ot(M.x,M.y,h),u.map.texture.name=c.name+".shadowMap",u.mapPass=new ot(M.x,M.y,h),u.camera.updateProjectionMatrix()),null===u.map&&(d={minFilter:H,magFilter:H,format:Ct},u.map=new ot(M.x,M.y,d),u.map.texture.name=c.name+".shadowMap",u.camera.updateProjectionMatrix()),x.setRenderTarget(u.map),x.clear();for(var f=u.getViewportCount(),m=0;m<f;m++){var g=u.getViewport(m);E.set(S.x*g.x,S.y*g.y,S.x*g.z,S.y*g.w),o.viewport(E),u.updateMatrices(c,m),T=u.getFrustum(),function t(e,n,i,r,a){if(!1!==e.visible){if(e.layers.test(n.layers)&&(e.isMesh||e.isLine||e.isPoints)&&(e.castShadow||e.receiveShadow&&3===a)&&(!e.frustumCulled||T.intersectsObject(e))){e.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,e.matrixWorld);var o,s=b.update(e),l=e.material;if(Array.isArray(l))for(var c=s.groups,u=0,h=c.length;u<h;u++){var d,p=c[u],f=l[p.materialIndex];f&&f.visible&&(d=P(e,s,f,r,i.near,i.far,a),x.renderBufferDirect(i,null,s,d,e,p))}else l.visible&&(o=P(e,s,l,r,i.near,i.far,a),x.renderBufferDirect(i,null,s,o,e,null))}for(var m=e.children,g=0,v=m.length;g<v;g++)t(m[g],n,i,r,a)}}(e,n,u.camera,c,this.type)}u.isPointLightShadow||3!==this.type||(v=u,y=n,_=void 0,_=b.update(C),A.uniforms.shadow_pass.value=v.map.texture,A.uniforms.resolution.value=v.mapSize,A.uniforms.radius.value=v.radius,x.setRenderTarget(v.mapPass),x.clear(),x.renderBufferDirect(y,null,_,A,C,null),L.uniforms.shadow_pass.value=v.mapPass.texture,L.uniforms.resolution.value=v.mapSize,L.uniforms.radius.value=v.radius,x.setRenderTarget(v.map),x.clear(),x.renderBufferDirect(y,null,_,L,C,null)),u.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",c,"has no shadow.")}R.needsUpdate=!1,x.setRenderTarget(i,r,a)}var v,y,_}}function ya(u,t,e){var n,i,r=e.isWebGL2,a=new function(){var e=!1,a=new Ot,n=null,o=new Ot(0,0,0,0);return{setMask:function(t){n===t||e||(u.colorMask(t,t,t,t),n=t)},setLocked:function(t){e=t},setClear:function(t,e,n,i,r){!0===r&&(t*=i,e*=i,n*=i),a.set(t,e,n,i),!1===o.equals(a)&&(u.clearColor(t,e,n,i),o.copy(a))},reset:function(){e=!1,n=null,o.set(-1,0,0,0)}}},o=new function(){var e=!1,n=null,i=null,r=null;return{setTest:function(t){(t?I:B)(2929)},setMask:function(t){n===t||e||(u.depthMask(t),n=t)},setFunc:function(t){if(i!==t){if(t)switch(t){case 0:u.depthFunc(512);break;case 1:u.depthFunc(519);break;case 2:u.depthFunc(513);break;case 3:u.depthFunc(515);break;case 4:u.depthFunc(514);break;case 5:u.depthFunc(518);break;case 6:u.depthFunc(516);break;case 7:u.depthFunc(517);break;default:u.depthFunc(515)}else u.depthFunc(515);i=t}},setLocked:function(t){e=t},setClear:function(t){r!==t&&(u.clearDepth(t),r=t)},reset:function(){e=!1,r=i=n=null}}},s=new function(){var e=!1,n=null,i=null,r=null,a=null,o=null,s=null,l=null,c=null;return{setTest:function(t){e||(t?I:B)(2960)},setMask:function(t){n===t||e||(u.stencilMask(t),n=t)},setFunc:function(t,e,n){i===t&&r===e&&a===n||(u.stencilFunc(t,e,n),i=t,r=e,a=n)},setOp:function(t,e,n){o===t&&s===e&&l===n||(u.stencilOp(t,e,n),o=t,s=e,l=n)},setLocked:function(t){e=t},setClear:function(t){c!==t&&(u.clearStencil(t),c=t)},reset:function(){e=!1,c=l=s=o=a=r=i=n=null}}},l={},c=null,h=null,d=null,p=null,f=null,m=null,g=null,v=null,y=null,_=!1,x=null,b=null,w=null,T=null,M=null,S=u.getParameter(35661),E=!1,A=0,L=u.getParameter(7938);-1!==L.indexOf("WebGL")?(A=parseFloat(/^WebGL\ ([0-9])/.exec(L)[1]),E=1<=A):-1!==L.indexOf("OpenGL ES")&&(A=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(L)[1]),E=2<=A);var C=null,R={},P=new Ot,O=new Ot;function D(t,e,n){var i=new Uint8Array(4),r=u.createTexture();u.bindTexture(t,r),u.texParameteri(t,10241,9728),u.texParameteri(t,10240,9728);for(var a=0;a<n;a++)u.texImage2D(e+a,0,6408,1,1,0,6408,5121,i);return r}var N={};function I(t){!0!==l[t]&&(u.enable(t),l[t]=!0)}function B(t){!1!==l[t]&&(u.disable(t),l[t]=!1)}N[3553]=D(3553,3553,1),N[34067]=D(34067,34069,6),a.setClear(0,0,0,1),o.setClear(1),s.setClear(0),I(2929),o.setFunc(3),U(!1),G(1),I(2884),H(0);var F,k=((n={})[100]=32774,n[101]=32778,n[102]=32779,n);r?(k[103]=32775,k[104]=32776):null!==(F=t.get("EXT_blend_minmax"))&&(k[103]=F.MIN_EXT,k[104]=F.MAX_EXT);var z=((i={})[200]=0,i[201]=1,i[202]=768,i[204]=770,i[210]=776,i[208]=774,i[206]=772,i[203]=769,i[205]=771,i[209]=775,i[207]=773,i);function H(t,e,n,i,r,a,o,s){if(0!==t){if(h||(I(3042),h=!0),5===t)r=r||e,a=a||n,o=o||i,e===p&&r===g||(u.blendEquationSeparate(k[e],k[r]),p=e,g=r),n===f&&i===m&&a===v&&o===y||(u.blendFuncSeparate(z[n],z[i],z[a],z[o]),f=n,m=i,v=a,y=o),d=t,_=null;else if(t!==d||s!==_){if(p===W&&g===W||(u.blendEquation(32774),g=p=W),s)switch(t){case 1:u.blendFuncSeparate(1,771,1,771);break;case 2:u.blendFunc(1,1);break;case 3:u.blendFuncSeparate(0,0,769,771);break;case 4:u.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:u.blendFuncSeparate(770,771,1,771);break;case 2:u.blendFunc(770,1);break;case 3:u.blendFunc(0,769);break;case 4:u.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}y=v=m=f=null,d=t,_=s}}else h&&(B(3042),h=!1)}function U(t){x!==t&&(t?u.frontFace(2304):u.frontFace(2305),x=t)}function G(t){0!==t?(I(2884),t!==b&&(1===t?u.cullFace(1029):2===t?u.cullFace(1028):u.cullFace(1032))):B(2884),b=t}function j(t,e,n){t?(I(32823),T===e&&M===n||(u.polygonOffset(e,n),T=e,M=n)):B(32823)}function V(t){void 0===t&&(t=33984+S-1),C!==t&&(u.activeTexture(t),C=t)}return{buffers:{color:a,depth:o,stencil:s},enable:I,disable:B,useProgram:function(t){return c!==t&&(u.useProgram(t),c=t,!0)},setBlending:H,setMaterial:function(t,e){(2===t.side?B:I)(2884);var n=1===t.side;e&&(n=!n),U(n),1===t.blending&&!1===t.transparent?H(0):H(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),o.setFunc(t.depthFunc),o.setTest(t.depthTest),o.setMask(t.depthWrite),a.setMask(t.colorWrite);var i=t.stencilWrite;s.setTest(i),i&&(s.setMask(t.stencilWriteMask),s.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),s.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),j(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:U,setCullFace:G,setLineWidth:function(t){t!==w&&(E&&u.lineWidth(t),w=t)},setPolygonOffset:j,setScissorTest:function(t){(t?I:B)(3089)},activeTexture:V,bindTexture:function(t,e){null===C&&V();var n=R[C];void 0===n&&(n={type:void 0,texture:void 0},R[C]=n),n.type===t&&n.texture===e||(u.bindTexture(t,e||N[t]),n.type=t,n.texture=e)},unbindTexture:function(){var t=R[C];void 0!==t&&void 0!==t.type&&(u.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{u.compressedTexImage2D.apply(u,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{u.texImage2D.apply(u,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{u.texImage3D.apply(u,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===P.equals(t)&&(u.scissor(t.x,t.y,t.z,t.w),P.copy(t))},viewport:function(t){!1===O.equals(t)&&(u.viewport(t.x,t.y,t.z,t.w),O.copy(t))},reset:function(){l={},_=!(R={}),M=T=w=b=x=y=v=g=m=f=p=d=h=c=C=null,a.reset(),o.reset(),s.reset()}}}function _a(b,r,w,d,a,T,p){var t,e,c,M=a.isWebGL2,n=a.maxTextures,S=a.maxCubemapSize,y=a.maxTextureSize,i=a.maxSamples,o=new WeakMap,s=!1;try{s="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(b){}function u(t,e){return s?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function E(t,e,n,i){var r=1;if((t.width>i||t.height>i)&&(r=i/Math.max(t.width,t.height)),r<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){var a=e?Pt.floorPowerOfTwo:Math.floor,o=a(r*t.width),s=a(r*t.height);void 0===c&&(c=u(o,s));var l=n?u(o,s):c;return l.width=o,l.height=s,l.getContext("2d").drawImage(t,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+o+"x"+s+")."),l}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function A(t){return Pt.isPowerOfTwo(t.width)&&Pt.isPowerOfTwo(t.height)}function L(t,e){return t.generateMipmaps&&e&&t.minFilter!==H&&t.minFilter!==j}function C(t,e,n,i){b.generateMipmap(t),d.get(e).__maxMipLevel=Math.log(Math.max(n,i))*Math.LOG2E}function R(t,e,n){if(!1===M)return e;if(null!==t){if(void 0!==b[t])return b[t];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+t+"'")}var i=e;return 6403===e&&(5126===n&&(i=33326),5131===n&&(i=33325),5121===n&&(i=33321)),6407===e&&(5126===n&&(i=34837),5131===n&&(i=34843),5121===n&&(i=32849)),6408===e&&(5126===n&&(i=34836),5131===n&&(i=34842),5121===n&&(i=32856)),33325!==i&&33326!==i&&34842!==i&&34836!==i||r.get("EXT_color_buffer_float"),i}function l(t){return t===H||t===U||t===G?9728:9729}function h(t){var e,n,i=t.target;i.removeEventListener("dispose",h),e=i,void 0!==(n=d.get(e)).__webglInit&&(b.deleteTexture(n.__webglTexture),d.remove(e)),i.isVideoTexture&&o.delete(i),p.memory.textures--}function f(t){var e=t.target;e.removeEventListener("dispose",f),function(t){var e=d.get(t),n=d.get(t.texture);if(t){if(void 0!==n.__webglTexture&&b.deleteTexture(n.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(var i=0;i<6;i++)b.deleteFramebuffer(e.__webglFramebuffer[i]),e.__webglDepthbuffer&&b.deleteRenderbuffer(e.__webglDepthbuffer[i]);else b.deleteFramebuffer(e.__webglFramebuffer),e.__webglDepthbuffer&&b.deleteRenderbuffer(e.__webglDepthbuffer),e.__webglMultisampledFramebuffer&&b.deleteFramebuffer(e.__webglMultisampledFramebuffer),e.__webglColorRenderbuffer&&b.deleteRenderbuffer(e.__webglColorRenderbuffer),e.__webglDepthRenderbuffer&&b.deleteRenderbuffer(e.__webglDepthRenderbuffer);d.remove(t.texture),d.remove(t)}}(e),p.memory.textures--}var m=0;function g(t,e){var n,i,r=d.get(t);if(t.isVideoTexture&&(n=t,i=p.render.frame,o.get(n)!==i&&(o.set(n,i),n.update())),0<t.version&&r.__version!==t.version){var a=t.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==a.complete)return void D(r,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}w.activeTexture(33984+e),w.bindTexture(3553,r.__webglTexture)}function v(t,e){var n=d.get(t);0<t.version&&n.__version!==t.version?function(t,e,n){if(6===e.image.length){O(t,e),w.activeTexture(33984+n),w.bindTexture(34067,t.__webglTexture),b.pixelStorei(37440,e.flipY);for(var i=e&&(e.isCompressedTexture||e.image[0].isCompressedTexture),r=e.image[0]&&e.image[0].isDataTexture,a=[],o=0;o<6;o++)a[o]=i||r?r?e.image[o].image:e.image[o]:E(e.image[o],!1,!0,S);var s,l=a[0],c=A(l)||M,u=T.convert(e.format),h=T.convert(e.type),d=R(e.internalFormat,u,h);if(P(34067,e,c),i){for(var p=0;p<6;p++){s=a[p].mipmaps;for(var f=0;f<s.length;f++){var m=s[f];e.format!==Ct&&e.format!==Y?null!==u?w.compressedTexImage2D(34069+p,f,d,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):w.texImage2D(34069+p,f,d,m.width,m.height,0,u,h,m.data)}}t.__maxMipLevel=s.length-1}else{s=e.mipmaps;for(var g=0;g<6;g++)if(r){w.texImage2D(34069+g,0,d,a[g].width,a[g].height,0,u,h,a[g].data);for(var v=0;v<s.length;v++){var y=s[v].image[g].image;w.texImage2D(34069+g,v+1,d,y.width,y.height,0,u,h,y.data)}}else{w.texImage2D(34069+g,0,d,u,h,a[g]);for(var _=0;_<s.length;_++){var x=s[_];w.texImage2D(34069+g,_+1,d,u,h,x.image[g])}}t.__maxMipLevel=s.length}L(e,c)&&C(34067,e,l.width,l.height),t.__version=e.version,e.onUpdate&&e.onUpdate(e)}}(n,t,e):(w.activeTexture(33984+e),w.bindTexture(34067,n.__webglTexture))}var _=((t={})[1e3]=10497,t[1001]=33071,t[1002]=33648,t),x=((e={})[1003]=9728,e[1004]=9984,e[1005]=9986,e[1006]=9729,e[1007]=9985,e[1008]=9987,e);function P(t,e,n){n?(b.texParameteri(t,10242,_[e.wrapS]),b.texParameteri(t,10243,_[e.wrapT]),32879!==t&&35866!==t||b.texParameteri(t,32882,_[e.wrapR]),b.texParameteri(t,10240,x[e.magFilter]),b.texParameteri(t,10241,x[e.minFilter])):(b.texParameteri(t,10242,33071),b.texParameteri(t,10243,33071),32879!==t&&35866!==t||b.texParameteri(t,32882,33071),e.wrapS===z&&e.wrapT===z||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),b.texParameteri(t,10240,l(e.magFilter)),b.texParameteri(t,10241,l(e.minFilter)),e.minFilter!==H&&e.minFilter!==j&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var i=r.get("EXT_texture_filter_anisotropic");if(i){if(e.type===At&&null===r.get("OES_texture_float_linear"))return;if(e.type===Lt&&null===(M||r.get("OES_texture_half_float_linear")))return;(1<e.anisotropy||d.get(e).__currentAnisotropy)&&(b.texParameterf(t,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(e.anisotropy,a.getMaxAnisotropy())),d.get(e).__currentAnisotropy=e.anisotropy)}}function O(t,e){void 0===t.__webglInit&&(t.__webglInit=!0,e.addEventListener("dispose",h),t.__webglTexture=b.createTexture(),p.memory.textures++)}function D(t,e,n){var i=3553;e.isDataTexture2DArray&&(i=35866),e.isDataTexture3D&&(i=32879),O(t,e),w.activeTexture(33984+n),w.bindTexture(i,t.__webglTexture),b.pixelStorei(37440,e.flipY),b.pixelStorei(37441,e.premultiplyAlpha),b.pixelStorei(3317,e.unpackAlignment);var r,a=!M&&(e.wrapS!==z||e.wrapT!==z||e.minFilter!==H&&e.minFilter!==j)&&!1===A(e.image),o=E(e.image,a,!1,y),s=A(o)||M,l=T.convert(e.format),c=T.convert(e.type),u=R(e.internalFormat,l,c);P(i,e,s);var h=e.mipmaps;if(e.isDepthTexture)u=6402,M?u=e.type===At?36012:e.type===q?33190:e.type===X?35056:33189:e.type===At&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),e.format===Z&&6402===u&&e.type!==V&&e.type!==q&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),e.type=V,c=T.convert(e.type)),e.format===J&&6402===u&&(u=34041,e.type!==X&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),e.type=X,c=T.convert(e.type))),w.texImage2D(3553,0,u,o.width,o.height,0,l,c,null);else if(e.isDataTexture)if(0<h.length&&s){for(var d=0,p=h.length;d<p;d++)r=h[d],w.texImage2D(3553,d,u,r.width,r.height,0,l,c,r.data);e.generateMipmaps=!1,t.__maxMipLevel=h.length-1}else w.texImage2D(3553,0,u,o.width,o.height,0,l,c,o.data),t.__maxMipLevel=0;else if(e.isCompressedTexture){for(var f=0,m=h.length;f<m;f++)r=h[f],e.format!==Ct&&e.format!==Y?null!==l?w.compressedTexImage2D(3553,f,u,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):w.texImage2D(3553,f,u,r.width,r.height,0,l,c,r.data);t.__maxMipLevel=h.length-1}else if(e.isDataTexture2DArray)w.texImage3D(35866,0,u,o.width,o.height,o.depth,0,l,c,o.data),t.__maxMipLevel=0;else if(e.isDataTexture3D)w.texImage3D(32879,0,u,o.width,o.height,o.depth,0,l,c,o.data),t.__maxMipLevel=0;else if(0<h.length&&s){for(var g=0,v=h.length;g<v;g++)r=h[g],w.texImage2D(3553,g,u,l,c,r);e.generateMipmaps=!1,t.__maxMipLevel=h.length-1}else w.texImage2D(3553,0,u,l,c,o),t.__maxMipLevel=0;L(e,s)&&C(i,e,o.width,o.height),t.__version=e.version,e.onUpdate&&e.onUpdate(e)}function N(t,e,n,i){var r=T.convert(e.texture.format),a=T.convert(e.texture.type),o=R(e.texture.internalFormat,r,a);w.texImage2D(i,0,o,e.width,e.height,0,r,a,null),b.bindFramebuffer(36160,t),b.framebufferTexture2D(36160,n,i,d.get(e.texture).__webglTexture,0),b.bindFramebuffer(36160,null)}function I(t,e,n){var i,r,a,o,s,l,c,u;b.bindRenderbuffer(36161,t),e.depthBuffer&&!e.stencilBuffer?(i=33189,n?((r=e.depthTexture)&&r.isDepthTexture&&(r.type===At?i=36012:r.type===q&&(i=33190)),a=B(e),b.renderbufferStorageMultisample(36161,a,i,e.width,e.height)):b.renderbufferStorage(36161,i,e.width,e.height),b.framebufferRenderbuffer(36160,36096,36161,t)):e.depthBuffer&&e.stencilBuffer?(n?(o=B(e),b.renderbufferStorageMultisample(36161,o,35056,e.width,e.height)):b.renderbufferStorage(36161,34041,e.width,e.height),b.framebufferRenderbuffer(36160,33306,36161,t)):(s=T.convert(e.texture.format),l=T.convert(e.texture.type),c=R(e.texture.internalFormat,s,l),n?(u=B(e),b.renderbufferStorageMultisample(36161,u,c,e.width,e.height)):b.renderbufferStorage(36161,c,e.width,e.height)),b.bindRenderbuffer(36161,null)}function B(t){return M&&t.isWebGLMultisampleRenderTarget?Math.min(i,t.samples):0}var F=!1,k=!1;this.allocateTextureUnit=function(){var t=m;return n<=t&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+n),m+=1,t},this.resetTextureUnits=function(){m=0},this.setTexture2D=g,this.setTexture2DArray=function(t,e){var n=d.get(t);0<t.version&&n.__version!==t.version?D(n,t,e):(w.activeTexture(33984+e),w.bindTexture(35866,n.__webglTexture))},this.setTexture3D=function(t,e){var n=d.get(t);0<t.version&&n.__version!==t.version?D(n,t,e):(w.activeTexture(33984+e),w.bindTexture(32879,n.__webglTexture))},this.setTextureCube=v,this.setupRenderTarget=function(t){var e=d.get(t),n=d.get(t.texture);t.addEventListener("dispose",f),n.__webglTexture=b.createTexture(),p.memory.textures++;var i,r,a,o,s=!0===t.isWebGLCubeRenderTarget,l=!0===t.isWebGLMultisampleRenderTarget,c=A(t)||M;if(!M||t.texture.format!==Y||t.texture.type!==At&&t.texture.type!==Lt||(t.texture.format=Ct,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),s){e.__webglFramebuffer=[];for(var u=0;u<6;u++)e.__webglFramebuffer[u]=b.createFramebuffer()}else{e.__webglFramebuffer=b.createFramebuffer(),l&&(M?(e.__webglMultisampledFramebuffer=b.createFramebuffer(),e.__webglColorRenderbuffer=b.createRenderbuffer(),b.bindRenderbuffer(36161,e.__webglColorRenderbuffer),i=T.convert(t.texture.format),r=T.convert(t.texture.type),a=R(t.texture.internalFormat,i,r),o=B(t),b.renderbufferStorageMultisample(36161,o,a,t.width,t.height),b.bindFramebuffer(36160,e.__webglMultisampledFramebuffer),b.framebufferRenderbuffer(36160,36064,36161,e.__webglColorRenderbuffer),b.bindRenderbuffer(36161,null),t.depthBuffer&&(e.__webglDepthRenderbuffer=b.createRenderbuffer(),I(e.__webglDepthRenderbuffer,t,!0)),b.bindFramebuffer(36160,null)):console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2."))}if(s){w.bindTexture(34067,n.__webglTexture),P(34067,t.texture,c);for(var h=0;h<6;h++)N(e.__webglFramebuffer[h],t,36064,34069+h);L(t.texture,c)&&C(34067,t.texture,t.width,t.height),w.bindTexture(34067,null)}else w.bindTexture(3553,n.__webglTexture),P(3553,t.texture,c),N(e.__webglFramebuffer,t,36064,3553),L(t.texture,c)&&C(3553,t.texture,t.width,t.height),w.bindTexture(3553,null);t.depthBuffer&&function(t){var e=d.get(t),n=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(n)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,e){if(e&&e.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(b.bindFramebuffer(36160,t),!e.depthTexture||!e.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");d.get(e.depthTexture).__webglTexture&&e.depthTexture.image.width===e.width&&e.depthTexture.image.height===e.height||(e.depthTexture.image.width=e.width,e.depthTexture.image.height=e.height,e.depthTexture.needsUpdate=!0),g(e.depthTexture,0);var n=d.get(e.depthTexture).__webglTexture;if(e.depthTexture.format===Z)b.framebufferTexture2D(36160,36096,3553,n,0);else{if(e.depthTexture.format!==J)throw new Error("Unknown depthTexture format");b.framebufferTexture2D(36160,33306,3553,n,0)}}(e.__webglFramebuffer,t)}else if(n){e.__webglDepthbuffer=[];for(var i=0;i<6;i++)b.bindFramebuffer(36160,e.__webglFramebuffer[i]),e.__webglDepthbuffer[i]=b.createRenderbuffer(),I(e.__webglDepthbuffer[i],t,!1)}else b.bindFramebuffer(36160,e.__webglFramebuffer),e.__webglDepthbuffer=b.createRenderbuffer(),I(e.__webglDepthbuffer,t,!1);b.bindFramebuffer(36160,null)}(t)},this.updateRenderTargetMipmap=function(t){var e,n,i=t.texture;L(i,A(t)||M)&&(e=t.isWebGLCubeRenderTarget?34067:3553,n=d.get(i).__webglTexture,w.bindTexture(e,n),C(e,i,t.width,t.height),w.bindTexture(e,null))},this.updateMultisampleRenderTarget=function(t){var e,n,i,r;t.isWebGLMultisampleRenderTarget&&(M?(e=d.get(t),b.bindFramebuffer(36008,e.__webglMultisampledFramebuffer),b.bindFramebuffer(36009,e.__webglFramebuffer),n=t.width,i=t.height,r=16384,t.depthBuffer&&(r|=256),t.stencilBuffer&&(r|=1024),b.blitFramebuffer(0,0,n,i,0,0,n,i,r,9728),b.bindFramebuffer(36160,e.__webglMultisampledFramebuffer)):console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2."))},this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===F&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),F=!0),t=t.texture),g(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLCubeRenderTarget&&(!1===k&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),k=!0),t=t.texture),v(t,e)}}function xa(t,n,e){var i=e.isWebGL2;return{convert:function(t){var e;if(t===Et)return 5121;if(1017===t)return 32819;if(1018===t)return 32820;if(1019===t)return 33635;if(1010===t)return 5120;if(1011===t)return 5122;if(t===V)return 5123;if(1013===t)return 5124;if(t===q)return 5125;if(t===At)return 5126;if(t===Lt)return i?5131:null!==(e=n.get("OES_texture_half_float"))?e.HALF_FLOAT_OES:null;if(1021===t)return 6406;if(t===Y)return 6407;if(t===Ct)return 6408;if(1024===t)return 6409;if(1025===t)return 6410;if(t===Z)return 6402;if(t===J)return 34041;if(1028===t)return 6403;if(1029===t)return 36244;if(1030===t)return 33319;if(1031===t)return 33320;if(1032===t)return 36248;if(1033===t)return 36249;if(t===r||t===a||t===o||t===s){if(null===(e=n.get("WEBGL_compressed_texture_s3tc")))return null;if(t===r)return e.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===a)return e.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===o)return e.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===s)return e.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(t===l||t===c||t===p||t===f){if(null===(e=n.get("WEBGL_compressed_texture_pvrtc")))return null;if(t===l)return e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===c)return e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===p)return e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===f)return e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===t)return null!==(e=n.get("WEBGL_compressed_texture_etc1"))?e.COMPRESSED_RGB_ETC1_WEBGL:null;if((t===m||t===g)&&null!==(e=n.get("WEBGL_compressed_texture_etc"))){if(t===m)return e.COMPRESSED_RGB8_ETC2;if(t===g)return e.COMPRESSED_RGBA8_ETC2_EAC}return 37808===t||37809===t||37810===t||37811===t||37812===t||37813===t||37814===t||37815===t||37816===t||37817===t||37818===t||37819===t||37820===t||37821===t||37840===t||37841===t||37842===t||37843===t||37844===t||37845===t||37846===t||37847===t||37848===t||37849===t||37850===t||37851===t||37852===t||37853===t?null!==(e=n.get("WEBGL_compressed_texture_astc"))?t:null:36492===t?null!==(e=n.get("EXT_texture_compression_bptc"))?t:null:t===X?i?34042:null!==(e=n.get("WEBGL_depth_texture"))?e.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}function ba(t){void 0===t&&(t=[]),hi.call(this),this.cameras=t}function wa(){Re.call(this),this.type="Group"}function Ta(){this._targetRay=null,this._grip=null,this._hand=null}function Ma(p,r){var f,e=this,m=null,a=1,g=null,o="local-floor",v=[],c=new Map,s=new hi;s.layers.enable(1),s.viewport=new Ot;var l=new hi;l.layers.enable(2),l.viewport=new Ot;var y=[s,l],_=new ba;_.layers.enable(1),_.layers.enable(2);var u=null,h=null;function d(t){var e=c.get(t.inputSource);e&&e.dispatchEvent({type:t.type,data:t.inputSource})}function x(){c.forEach(function(t,e){t.disconnect(e)}),c.clear(),p.setFramebuffer(null),p.setRenderTarget(p.getRenderTarget()),n.stop(),e.isPresenting=!1,e.dispatchEvent({type:"sessionend"})}function b(t){g=t,n.setContext(m),n.start(),e.isPresenting=!0,e.dispatchEvent({type:"sessionstart"})}function w(t){for(var e=m.inputSources,n=0;n<v.length;n++)c.set(e[n],v[n]);for(var i=0;i<t.removed.length;i++){var r=t.removed[i],a=c.get(r);a&&(a.dispatchEvent({type:"disconnected",data:r}),c.delete(r))}for(var o=0;o<t.added.length;o++){var s=t.added[o],l=c.get(s);l&&l.dispatchEvent({type:"connected",data:s})}}this.enabled=!1,this.isPresenting=!1,this.getController=function(t){var e=v[t];return void 0===e&&(e=new Ta,v[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){var e=v[t];return void 0===e&&(e=new Ta,v[t]=e),e.getGripSpace()},this.getHand=function(t){var e=v[t];return void 0===e&&(e=new Ta,v[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){a=t,!0===e.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){o=t,!0===e.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return g},this.getSession=function(){return m},this.setSession=function(t){var e,n,i;null!==(m=t)&&(m.addEventListener("select",d),m.addEventListener("selectstart",d),m.addEventListener("selectend",d),m.addEventListener("squeeze",d),m.addEventListener("squeezestart",d),m.addEventListener("squeezeend",d),m.addEventListener("end",x),!0!==(e=r.getContextAttributes()).xrCompatible&&r.makeXRCompatible(),n={antialias:e.antialias,alpha:e.alpha,depth:e.depth,stencil:e.stencil,framebufferScaleFactor:a},i=new XRWebGLLayer(m,r,n),m.updateRenderState({baseLayer:i}),m.requestReferenceSpace(o).then(b),m.addEventListener("inputsourceschange",w))};var T=new Bt,M=new Bt;function S(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.getCamera=function(t){_.near=l.near=s.near=t.near,_.far=l.far=s.far=t.far,u===_.near&&h===_.far||(m.updateRenderState({depthNear:_.near,depthFar:_.far}),u=_.near,h=_.far);var e=t.parent,n=_.cameras;S(_,e);for(var i=0;i<n.length;i++)S(n[i],e);t.matrixWorld.copy(_.matrixWorld);for(var r=t.children,a=0,o=r.length;a<o;a++)r[a].updateMatrixWorld(!0);return 2===n.length?function(t,e,n){T.setFromMatrixPosition(e.matrixWorld),M.setFromMatrixPosition(n.matrixWorld);var i=T.distanceTo(M),r=e.projectionMatrix.elements,a=n.projectionMatrix.elements,o=r[14]/(r[10]-1),s=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],u=(r[8]-1)/r[0],h=(a[8]+1)/a[0],d=o*u,p=o*h,f=i/(h-u),m=f*-u;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(f),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();var g=o+f,v=s+f,y=d-m,_=i-m+p,x=l*s/v*g,b=c*s/v*g;t.projectionMatrix.makePerspective(y,_,x,b,g,v)}(_,s,l):_.projectionMatrix.copy(s.projectionMatrix),_};var E=null,n=new bi;n.setAnimationLoop(function(t,e){if(null!==(f=e.getViewerPose(g))){var n=f.views,i=m.renderState.baseLayer;p.setFramebuffer(i.framebuffer);var r=!1;n.length!==_.cameras.length&&(r=!(_.cameras.length=0));for(var a=0;a<n.length;a++){var o=n[a],s=i.getViewport(o),l=y[a];l.matrix.fromArray(o.transform.matrix),l.projectionMatrix.fromArray(o.projectionMatrix),l.viewport.set(s.x,s.y,s.width,s.height),0===a&&_.matrix.copy(l.matrix),!0===r&&_.cameras.push(l)}}for(var c=m.inputSources,u=0;u<v.length;u++){var h=v[u],d=c[u];h.update(d,e,g)}E&&E(t,e)}),this.setAnimationLoop=function(t){E=t},this.dispose=function(){}}function Sa(o){function R(t,e){t.opacity.value=e.opacity,e.color&&t.diffuse.value.copy(e.color),e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.specularMap&&(t.specularMap.value=e.specularMap);var n,i,r,a=o.get(e).envMap;a&&(t.envMap.value=a,t.flipEnvMap.value=a.isCubeTexture&&a._needsFlipEnvMap?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio,void 0!==(r=o.get(a).__maxMipLevel)&&(t.maxMipLevel.value=r)),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity),e.map?n=e.map:e.specularMap?n=e.specularMap:e.displacementMap?n=e.displacementMap:e.normalMap?n=e.normalMap:e.bumpMap?n=e.bumpMap:e.roughnessMap?n=e.roughnessMap:e.metalnessMap?n=e.metalnessMap:e.alphaMap?n=e.alphaMap:e.emissiveMap?n=e.emissiveMap:e.clearcoatMap?n=e.clearcoatMap:e.clearcoatNormalMap?n=e.clearcoatNormalMap:e.clearcoatRoughnessMap&&(n=e.clearcoatRoughnessMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix)),e.aoMap?i=e.aoMap:e.lightMap&&(i=e.lightMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uv2Transform.value.copy(i.matrix))}function P(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),o.get(e).envMap&&(t.envMapIntensity.value=e.envMapIntensity)}return{refreshFogUniforms:function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)},refreshMaterialUniforms:function(t,e,n,i){var r,a,o,s,l,c,u,h,d,p,f,m,g,v,y,_,x,b,w,T,M,S,E,A,L,C;e.isMeshBasicMaterial?R(t,e):e.isMeshLambertMaterial?(R(t,e),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)):e.isMeshToonMaterial?(R(t,e),L=t,(C=e).gradientMap&&(L.gradientMap.value=C.gradientMap),C.emissiveMap&&(L.emissiveMap.value=C.emissiveMap),C.bumpMap&&(L.bumpMap.value=C.bumpMap,L.bumpScale.value=C.bumpScale,1===C.side&&(L.bumpScale.value*=-1)),C.normalMap&&(L.normalMap.value=C.normalMap,L.normalScale.value.copy(C.normalScale),1===C.side&&L.normalScale.value.negate()),C.displacementMap&&(L.displacementMap.value=C.displacementMap,L.displacementScale.value=C.displacementScale,L.displacementBias.value=C.displacementBias)):e.isMeshPhongMaterial?(R(t,e),A=e,(E=t).specular.value.copy(A.specular),E.shininess.value=Math.max(A.shininess,1e-4),A.emissiveMap&&(E.emissiveMap.value=A.emissiveMap),A.bumpMap&&(E.bumpMap.value=A.bumpMap,E.bumpScale.value=A.bumpScale,1===A.side&&(E.bumpScale.value*=-1)),A.normalMap&&(E.normalMap.value=A.normalMap,E.normalScale.value.copy(A.normalScale),1===A.side&&E.normalScale.value.negate()),A.displacementMap&&(E.displacementMap.value=A.displacementMap,E.displacementScale.value=A.displacementScale,E.displacementBias.value=A.displacementBias)):e.isMeshStandardMaterial?(R(t,e),e.isMeshPhysicalMaterial?(P(M=t,S=e),M.reflectivity.value=S.reflectivity,M.clearcoat.value=S.clearcoat,M.clearcoatRoughness.value=S.clearcoatRoughness,S.sheen&&M.sheen.value.copy(S.sheen),S.clearcoatMap&&(M.clearcoatMap.value=S.clearcoatMap),S.clearcoatRoughnessMap&&(M.clearcoatRoughnessMap.value=S.clearcoatRoughnessMap),S.clearcoatNormalMap&&(M.clearcoatNormalScale.value.copy(S.clearcoatNormalScale),M.clearcoatNormalMap.value=S.clearcoatNormalMap,1===S.side&&M.clearcoatNormalScale.value.negate()),M.transmission.value=S.transmission,S.transmissionMap&&(M.transmissionMap.value=S.transmissionMap)):P(t,e)):e.isMeshMatcapMaterial?(R(t,e),w=t,(T=e).matcap&&(w.matcap.value=T.matcap),T.bumpMap&&(w.bumpMap.value=T.bumpMap,w.bumpScale.value=T.bumpScale,1===T.side&&(w.bumpScale.value*=-1)),T.normalMap&&(w.normalMap.value=T.normalMap,w.normalScale.value.copy(T.normalScale),1===T.side&&w.normalScale.value.negate()),T.displacementMap&&(w.displacementMap.value=T.displacementMap,w.displacementScale.value=T.displacementScale,w.displacementBias.value=T.displacementBias)):e.isMeshDepthMaterial?(R(t,e),x=t,(b=e).displacementMap&&(x.displacementMap.value=b.displacementMap,x.displacementScale.value=b.displacementScale,x.displacementBias.value=b.displacementBias)):e.isMeshDistanceMaterial?(R(t,e),y=t,(_=e).displacementMap&&(y.displacementMap.value=_.displacementMap,y.displacementScale.value=_.displacementScale,y.displacementBias.value=_.displacementBias),y.referencePosition.value.copy(_.referencePosition),y.nearDistance.value=_.nearDistance,y.farDistance.value=_.farDistance):e.isMeshNormalMaterial?(R(t,e),g=t,(v=e).bumpMap&&(g.bumpMap.value=v.bumpMap,g.bumpScale.value=v.bumpScale,1===v.side&&(g.bumpScale.value*=-1)),v.normalMap&&(g.normalMap.value=v.normalMap,g.normalScale.value.copy(v.normalScale),1===v.side&&g.normalScale.value.negate()),v.displacementMap&&(g.displacementMap.value=v.displacementMap,g.displacementScale.value=v.displacementScale,g.displacementBias.value=v.displacementBias)):e.isLineBasicMaterial?(m=e,(f=t).diffuse.value.copy(m.color),f.opacity.value=m.opacity,e.isLineDashedMaterial&&(p=e,(d=t).dashSize.value=p.dashSize,d.totalSize.value=p.dashSize+p.gapSize,d.scale.value=p.scale)):e.isPointsMaterial?(l=e,c=n,u=i,(s=t).diffuse.value.copy(l.color),s.opacity.value=l.opacity,s.size.value=l.size*c,s.scale.value=.5*u,l.map&&(s.map.value=l.map),l.alphaMap&&(s.alphaMap.value=l.alphaMap),l.map?h=l.map:l.alphaMap&&(h=l.alphaMap),void 0!==h&&(!0===h.matrixAutoUpdate&&h.updateMatrix(),s.uvTransform.value.copy(h.matrix))):e.isSpriteMaterial?(a=e,(r=t).diffuse.value.copy(a.color),r.opacity.value=a.opacity,r.rotation.value=a.rotation,a.map&&(r.map.value=a.map),a.alphaMap&&(r.alphaMap.value=a.alphaMap),a.map?o=a.map:a.alphaMap&&(o=a.alphaMap),void 0!==o&&(!0===o.matrixAutoUpdate&&o.updateMatrix(),r.uvTransform.value.copy(o.matrix))):e.isShadowMaterial?(t.color.value.copy(e.color),t.opacity.value=e.opacity):e.isShaderMaterial&&(e.uniformsNeedUpdate=!1)}}}function Ea(t){var e,a=void 0!==(t=t||{}).canvas?t.canvas:((e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).style.display="block",e),n=void 0!==t.context?t.context:null,i=void 0!==t.alpha&&t.alpha,r=void 0===t.depth||t.depth,o=void 0===t.stencil||t.stencil,s=void 0!==t.antialias&&t.antialias,l=void 0===t.premultipliedAlpha||t.premultipliedAlpha,c=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,u=void 0!==t.powerPreference?t.powerPreference:"default",h=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat,v=null,S=null;this.domElement=a,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Rt,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var E=this,d=!1,p=null,f=0,m=0,A=null,g=null,L=-1,C=null,y=null,_=new Ot,x=new Ot,b=null,w=a.width,R=a.height,P=1,T=null,M=null,O=new Ot(0,0,w,R),D=new Ot(0,0,w,R),N=!1,I=new _i,B=!1,F=!1,k=new Kt,z=new Bt,H={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function U(){return null===A?P:1}var G,j,V,W,q,X,Y,Z,J,Q,$,K,tt,et,nt,it,rt,at,ot,st,lt,ct=n;function ut(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=a.getContext(i,e);if(null!==r)return r}return null}try{var ht={alpha:i,depth:r,stencil:o,antialias:s,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:h};if(a.addEventListener("webglcontextlost",gt,!1),a.addEventListener("webglcontextrestored",vt,!1),null===ct){var dt=["webgl2","webgl","experimental-webgl"];if(!0===E.isWebGL1Renderer&&dt.shift(),null===(ct=ut(dt,ht)))throw ut(dt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ct.getShaderPrecisionFormat&&(ct.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function pt(){G=new Ii(ct),!1===(j=new Oi(ct,G,t)).isWebGL2&&(G.get("WEBGL_depth_texture"),G.get("OES_texture_float"),G.get("OES_texture_half_float"),G.get("OES_texture_half_float_linear"),G.get("OES_standard_derivatives"),G.get("OES_element_index_uint"),G.get("OES_vertex_array_object"),G.get("ANGLE_instanced_arrays")),G.get("OES_texture_float_linear"),st=new xa(0,G,j),(V=new ya(ct,G,j)).scissor(x.copy(D).multiplyScalar(P).floor()),V.viewport(_.copy(O).multiplyScalar(P).floor()),W=new ki,q=new ra,X=new _a(ct,G,V,q,j,st,W),Y=new Ni(E),Z=new wi(ct,j),lt=new Ri(ct,G,Z,j),J=new Bi(0,Z,W,lt),Q=new Gi(0,J,Z,W),rt=new Ui(ct),nt=new Di(q),$=new ia(E,Y,G,j,lt,nt),K=new Sa(q),tt=new la(q),et=new fa(G,j),it=new Ci(E,Y,V,Q,l),at=new Pi(ct,G,W,j),ot=new Fi(ct,G,W,j),W.programs=$.programs,E.capabilities=j,E.extensions=G,E.properties=q,E.renderLists=tt,E.state=V,E.info=W}pt();var ft=new Ma(E,ct);this.xr=ft;var mt=new va(E,Q,j.maxTextureSize);function gt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),d=!0}function vt(){console.log("THREE.WebGLRenderer: Context Restored."),d=!1,pt()}function yt(t){var e,n=t.target;n.removeEventListener("dispose",yt),_t(e=n),q.remove(e)}function _t(t){var e=q.get(t).program;void 0!==e&&$.releaseProgram(e)}this.shadowMap=mt,this.getContext=function(){return ct},this.getContextAttributes=function(){return ct.getContextAttributes()},this.forceContextLoss=function(){var t=G.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=G.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return P},this.setPixelRatio=function(t){void 0!==t&&(P=t,this.setSize(w,R,!1))},this.getSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),t=new It),t.set(w,R)},this.setSize=function(t,e,n){ft.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(w=t,R=e,a.width=Math.floor(t*P),a.height=Math.floor(e*P),!1!==n&&(a.style.width=t+"px",a.style.height=e+"px"),this.setViewport(0,0,t,e))},this.getDrawingBufferSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),t=new It),t.set(w*P,R*P).floor()},this.setDrawingBufferSize=function(t,e,n){w=t,R=e,P=n,a.width=Math.floor(t*n),a.height=Math.floor(e*n),this.setViewport(0,0,t,e)},this.getCurrentViewport=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),t=new Ot),t.copy(_)},this.getViewport=function(t){return t.copy(O)},this.setViewport=function(t,e,n,i){t.isVector4?O.set(t.x,t.y,t.z,t.w):O.set(t,e,n,i),V.viewport(_.copy(O).multiplyScalar(P).floor())},this.getScissor=function(t){return t.copy(D)},this.setScissor=function(t,e,n,i){t.isVector4?D.set(t.x,t.y,t.z,t.w):D.set(t,e,n,i),V.scissor(x.copy(D).multiplyScalar(P).floor())},this.getScissorTest=function(){return N},this.setScissorTest=function(t){V.setScissorTest(N=t)},this.setOpaqueSort=function(t){T=t},this.setTransparentSort=function(t){M=t},this.getClearColor=function(){return it.getClearColor()},this.setClearColor=function(){it.setClearColor.apply(it,arguments)},this.getClearAlpha=function(){return it.getClearAlpha()},this.setClearAlpha=function(){it.setClearAlpha.apply(it,arguments)},this.clear=function(t,e,n){var i=0;void 0!==t&&!t||(i|=16384),void 0!==e&&!e||(i|=256),void 0!==n&&!n||(i|=1024),ct.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){a.removeEventListener("webglcontextlost",gt,!1),a.removeEventListener("webglcontextrestored",vt,!1),tt.dispose(),et.dispose(),q.dispose(),Y.dispose(),Q.dispose(),lt.dispose(),ft.dispose(),bt.stop()},this.renderBufferImmediate=function(t,e){lt.initAttributes();var n=q.get(t);t.hasPositions&&!n.position&&(n.position=ct.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=ct.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=ct.createBuffer()),t.hasColors&&!n.color&&(n.color=ct.createBuffer());var i=e.getAttributes();t.hasPositions&&(ct.bindBuffer(34962,n.position),ct.bufferData(34962,t.positionArray,35048),lt.enableAttribute(i.position),ct.vertexAttribPointer(i.position,3,5126,!1,0,0)),t.hasNormals&&(ct.bindBuffer(34962,n.normal),ct.bufferData(34962,t.normalArray,35048),lt.enableAttribute(i.normal),ct.vertexAttribPointer(i.normal,3,5126,!1,0,0)),t.hasUvs&&(ct.bindBuffer(34962,n.uv),ct.bufferData(34962,t.uvArray,35048),lt.enableAttribute(i.uv),ct.vertexAttribPointer(i.uv,2,5126,!1,0,0)),t.hasColors&&(ct.bindBuffer(34962,n.color),ct.bufferData(34962,t.colorArray,35048),lt.enableAttribute(i.color),ct.vertexAttribPointer(i.color,3,5126,!1,0,0)),lt.disableUnusedAttributes(),ct.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,n,i,r,a){null===e&&(e=H);var o=r.isMesh&&r.matrixWorld.determinant()<0,s=St(t,e,i,r);V.setMaterial(i,o);var l=n.index,c=n.attributes.position;if(null===l){if(void 0===c||0===c.count)return}else if(0===l.count)return;var u,h=1;!0===i.wireframe&&(l=J.getWireframeAttribute(n),h=2),(i.morphTargets||i.morphNormals)&&rt.update(r,n,i,s),lt.setup(r,i,s,n,l);var d=at;null!==l&&(u=Z.get(l),(d=ot).setIndex(u));var p,f,m=null!==l?l.count:c.count,g=n.drawRange.start*h,v=n.drawRange.count*h,y=null!==a?a.start*h:0,_=null!==a?a.count*h:1/0,x=Math.max(g,y),b=Math.min(m,g+v,y+_)-1,w=Math.max(0,b-x+1);0!==w&&(r.isMesh?!0===i.wireframe?(V.setLineWidth(i.wireframeLinewidth*U()),d.setMode(1)):d.setMode(4):r.isLine?(void 0===(p=i.linewidth)&&(p=1),V.setLineWidth(p*U()),r.isLineSegments?d.setMode(1):r.isLineLoop?d.setMode(2):d.setMode(3)):r.isPoints?d.setMode(0):r.isSprite&&d.setMode(4),r.isInstancedMesh?d.renderInstances(x,w,r.count):n.isInstancedBufferGeometry?(f=Math.min(n.instanceCount,n._maxInstanceCount),d.renderInstances(x,w,f)):d.render(x,w))},this.compile=function(r,e){(S=et.get(r,e)).init(),r.traverseVisible(function(t){t.isLight&&t.layers.test(e.layers)&&(S.pushLight(t),t.castShadow&&S.pushShadow(t))}),S.setupLights(e);var a=new WeakMap;r.traverse(function(t){var e=t.material;if(e)if(Array.isArray(e))for(var n=0;n<e.length;n++){var i=e[n];!1===a.has(i)&&(Mt(i,r,t),a.set(i))}else!1===a.has(e)&&(Mt(e,r,t),a.set(e))})};var xt=null,bt=new bi;function wt(t,e,n){for(var i=!0===e.isScene?e.overrideMaterial:null,r=0,a=t.length;r<a;r++){var o=t[r],s=o.object,l=o.geometry,c=null===i?o.material:i,u=o.group;if(n.isArrayCamera)for(var h=(y=n).cameras,d=0,p=h.length;d<p;d++){var f=h[d];s.layers.test(f.layers)&&(V.viewport(_.copy(f.viewport)),S.setupLights(f),Tt(s,e,f,l,c,u))}else y=null,Tt(s,e,n,l,c,u)}}function Tt(t,e,n,i,r,a){var o,s;t.onBeforeRender(E,e,n,i,r,a),S=et.get(e,y||n),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject?(o=St(n,e,r,t),V.setMaterial(r),lt.reset(),s=o,t.render(function(t){E.renderBufferImmediate(t,s)})):E.renderBufferDirect(n,e,i,r,t,a),t.onAfterRender(E,e,n,i,r,a),S=et.get(e,y||n)}function Mt(t,e,n){!0!==e.isScene&&(e=H);var i=q.get(t),r=S.state.lights,a=S.state.shadowsArray,o=r.state.version,s=$.getParameters(t,r.state,a,e,n),l=$.getProgramCacheKey(s),c=i.program,u=!0;if(void 0===c)t.addEventListener("dispose",yt);else if(c.cacheKey!==l)_t(t);else if(i.lightsStateVersion!==o)u=!1;else{if(void 0!==s.shaderID){var h=t.isMeshStandardMaterial?e.environment:null;return i.envMap=Y.get(t.envMap||h),0}u=!1}u&&(s.uniforms=$.getUniforms(t),t.onBeforeCompile(s,E),c=$.acquireProgram(s,l),i.program=c,i.uniforms=s.uniforms,i.outputEncoding=s.outputEncoding);var d=i.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(i.numClippingPlanes=nt.numPlanes,i.numIntersection=nt.numIntersection,d.clippingPlanes=nt.uniform),i.environment=t.isMeshStandardMaterial?e.environment:null,i.fog=e.fog,i.envMap=Y.get(t.envMap||i.environment),i.needsLights=t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights,i.lightsStateVersion=o,i.needsLights&&(d.ambientLightColor.value=r.state.ambient,d.lightProbe.value=r.state.probe,d.directionalLights.value=r.state.directional,d.directionalLightShadows.value=r.state.directionalShadow,d.spotLights.value=r.state.spot,d.spotLightShadows.value=r.state.spotShadow,d.rectAreaLights.value=r.state.rectArea,d.ltc_1.value=r.state.rectAreaLTC1,d.ltc_2.value=r.state.rectAreaLTC2,d.pointLights.value=r.state.point,d.pointLightShadows.value=r.state.pointShadow,d.hemisphereLights.value=r.state.hemi,d.directionalShadowMap.value=r.state.directionalShadowMap,d.directionalShadowMatrix.value=r.state.directionalShadowMatrix,d.spotShadowMap.value=r.state.spotShadowMap,d.spotShadowMatrix.value=r.state.spotShadowMatrix,d.pointShadowMap.value=r.state.pointShadowMap,d.pointShadowMatrix.value=r.state.pointShadowMatrix);var p=i.program.getUniforms(),f=kr.seqWithValue(p.seq,d);i.uniformsList=f}function St(t,e,n,i){!0!==e.isScene&&(e=H),X.resetTextureUnits();var r,a=e.fog,o=n.isMeshStandardMaterial?e.environment:null,s=null===A?E.outputEncoding:A.texture.encoding,l=Y.get(n.envMap||o),c=q.get(n),u=S.state.lights;!0!==B||!0!==F&&t===C||(r=t===C&&n.id===L,nt.setState(n,t,r)),n.version===c.__version?(n.fog&&c.fog!==a||c.environment!==o||c.needsLights&&c.lightsStateVersion!==u.state.version||void 0!==c.numClippingPlanes&&(c.numClippingPlanes!==nt.numPlanes||c.numIntersection!==nt.numIntersection)||c.outputEncoding!==s||c.envMap!==l)&&Mt(n,e,i):(Mt(n,e,i),c.__version=n.version);var h,d,p,f,m,g,v,y,_=!1,x=!1,b=!1,w=c.program,T=w.getUniforms(),M=c.uniforms;return V.useProgram(w.program)&&(b=x=_=!0),n.id!==L&&(L=n.id,x=!0),!_&&C===t||(T.setValue(ct,"projectionMatrix",t.projectionMatrix),j.logarithmicDepthBuffer&&T.setValue(ct,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),C!==t&&(C=t,b=x=!0),(n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap)&&void 0!==(p=T.map.cameraPosition)&&p.setValue(ct,z.setFromMatrixPosition(t.matrixWorld)),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&T.setValue(ct,"isOrthographic",!0===t.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||n.skinning)&&T.setValue(ct,"viewMatrix",t.matrixWorldInverse)),n.skinning&&(T.setOptional(ct,i,"bindMatrix"),T.setOptional(ct,i,"bindMatrixInverse"),(f=i.skeleton)&&(m=f.bones,j.floatVertexTextures?(null===f.boneTexture&&(g=Math.sqrt(4*m.length),g=Pt.ceilPowerOfTwo(g),g=Math.max(g,4),(v=new Float32Array(g*g*4)).set(f.boneMatrices),y=new mi(v,g,g,Ct,At),f.boneMatrices=v,f.boneTexture=y,f.boneTextureSize=g),T.setValue(ct,"boneTexture",f.boneTexture,X),T.setValue(ct,"boneTextureSize",f.boneTextureSize)):T.setOptional(ct,f,"boneMatrices"))),!x&&c.receiveShadow===i.receiveShadow||(c.receiveShadow=i.receiveShadow,T.setValue(ct,"receiveShadow",i.receiveShadow)),x&&(T.setValue(ct,"toneMappingExposure",E.toneMappingExposure),c.needsLights&&(d=b,(h=M).ambientLightColor.needsUpdate=d,h.lightProbe.needsUpdate=d,h.directionalLights.needsUpdate=d,h.directionalLightShadows.needsUpdate=d,h.pointLights.needsUpdate=d,h.pointLightShadows.needsUpdate=d,h.spotLights.needsUpdate=d,h.spotLightShadows.needsUpdate=d,h.rectAreaLights.needsUpdate=d,h.hemisphereLights.needsUpdate=d),a&&n.fog&&K.refreshFogUniforms(M,a),K.refreshMaterialUniforms(M,n,P,R),kr.upload(ct,c.uniformsList,M,X)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(kr.upload(ct,c.uniformsList,M,X),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&T.setValue(ct,"center",i.center),T.setValue(ct,"modelViewMatrix",i.modelViewMatrix),T.setValue(ct,"normalMatrix",i.normalMatrix),T.setValue(ct,"modelMatrix",i.matrixWorld),w}bt.setAnimationLoop(function(t){ft.isPresenting||xt&&xt(t)}),"undefined"!=typeof window&&bt.setContext(window),this.setAnimationLoop=function(t){xt=t,ft.setAnimationLoop(t),null===t?bt.stop():bt.start()},this.render=function(t,e){var n,i,r,a,o;void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),i=arguments[3]),void 0===e||!0===e.isCamera?!0!==d&&(lt.resetDefaultState(),L=-1,!(C=null)===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),!0===ft.enabled&&!0===ft.isPresenting&&(e=ft.getCamera(e)),!0===t.isScene&&t.onBeforeRender(E,t,e,n||A),(S=et.get(t,e)).init(),k.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),I.setFromProjectionMatrix(k),F=this.localClippingEnabled,B=nt.init(this.clippingPlanes,F,e),(v=tt.get(t,e)).init(),function t(e,n,i,r){if(!1!==e.visible){if(e.layers.test(n.layers))if(e.isGroup)i=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(n);else if(e.isLight)S.pushLight(e),e.castShadow&&S.pushShadow(e);else if(e.isSprite){var a,o;e.frustumCulled&&!I.intersectsSprite(e)||(r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(k),a=Q.update(e),(o=e.material).visible&&v.push(e,a,o,i,z.z,null))}else if(e.isImmediateRenderObject)r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(k),v.push(e,null,e.material,i,z.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==W.render.frame&&(e.skeleton.update(),e.skeleton.frame=W.render.frame),!e.frustumCulled||I.intersectsObject(e))){r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(k);var s=Q.update(e),l=e.material;if(Array.isArray(l))for(var c=s.groups,u=0,h=c.length;u<h;u++){var d=c[u],p=l[d.materialIndex];p&&p.visible&&v.push(e,s,p,i,z.z,d)}else l.visible&&v.push(e,s,l,i,z.z,null)}for(var f=e.children,m=0,g=f.length;m<g;m++)t(f[m],n,i,r)}}(t,e,0,E.sortObjects),v.finish(),!0===E.sortObjects&&v.sort(T,M),!0===B&&nt.beginShadows(),r=S.state.shadowsArray,mt.render(r,t,e),S.setupLights(e),!0===B&&nt.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),it.render(v,t,e,i),a=v.opaque,o=v.transparent,0<a.length&&wt(a,t,e),0<o.length&&wt(o,t,e),!0===t.isScene&&t.onAfterRender(E,t,e),null!==A&&(X.updateRenderTargetMipmap(A),X.updateMultisampleRenderTarget(A)),V.buffers.depth.setTest(!0),V.buffers.depth.setMask(!0),V.buffers.color.setMask(!0),V.setPolygonOffset(!1),S=v=null):console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(t){p!==t&&null===A&&ct.bindFramebuffer(36160,t),p=t},this.getActiveCubeFace=function(){return f},this.getActiveMipmapLevel=function(){return m},this.getRenderList=function(){return v},this.setRenderList=function(t){v=t},this.getRenderState=function(){return S},this.setRenderState=function(t){S=t},this.getRenderTarget=function(){return A},this.setRenderTarget=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0),f=e,m=n,(A=t)&&void 0===q.get(t).__webglFramebuffer&&X.setupRenderTarget(t);var i,r,a=p,o=!1;b=t?(i=q.get(t).__webglFramebuffer,t.isWebGLCubeRenderTarget?(a=i[e],o=!0):a=t.isWebGLMultisampleRenderTarget?q.get(t).__webglMultisampledFramebuffer:i,_.copy(t.viewport),x.copy(t.scissor),t.scissorTest):(_.copy(O).multiplyScalar(P).floor(),x.copy(D).multiplyScalar(P).floor(),N),g!==a&&(ct.bindFramebuffer(36160,a),g=a),V.viewport(_),V.scissor(x),V.setScissorTest(b),o&&(r=q.get(t.texture),ct.framebufferTexture2D(36160,36064,34069+e,r.__webglTexture,n))},this.readRenderTargetPixels=function(t,e,n,i,r,a,o){if(t&&t.isWebGLRenderTarget){var s=q.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){var l=!1;s!==g&&(ct.bindFramebuffer(36160,s),l=!0);try{var c=t.texture,u=c.format,h=c.type;if(u!==Ct&&st.convert(u)!==ct.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(h===Et||st.convert(h)===ct.getParameter(35738)||h===At&&(j.isWebGL2||G.get("OES_texture_float")||G.get("WEBGL_color_buffer_float"))||h===Lt&&(j.isWebGL2?G.get("EXT_color_buffer_float"):G.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ct.checkFramebufferStatus(36160)?0<=e&&e<=t.width-i&&0<=n&&n<=t.height-r&&ct.readPixels(e,n,i,r,st.convert(u),st.convert(h),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{l&&ct.bindFramebuffer(36160,g)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e,n){void 0===n&&(n=0);var i=Math.pow(2,-n),r=Math.floor(e.image.width*i),a=Math.floor(e.image.height*i),o=st.convert(e.format);X.setTexture2D(e,0),ct.copyTexImage2D(3553,n,o,t.x,t.y,r,a,0),V.unbindTexture()},this.copyTextureToTexture=function(t,e,n,i){void 0===i&&(i=0);var r=e.image.width,a=e.image.height,o=st.convert(n.format),s=st.convert(n.type);X.setTexture2D(n,0),ct.pixelStorei(37440,n.flipY),ct.pixelStorei(37441,n.premultiplyAlpha),ct.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?ct.texSubImage2D(3553,i,t.x,t.y,r,a,o,s,e.image.data):e.isCompressedTexture?ct.compressedTexSubImage2D(3553,i,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,o,e.mipmaps[0].data):ct.texSubImage2D(3553,i,t.x,t.y,o,s,e.image),0===i&&n.generateMipmaps&&ct.generateMipmap(3553),V.unbindTexture()},this.initTexture=function(t){X.setTexture2D(t,0),V.unbindTexture()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Aa(t){Ea.call(this,t)}((ma.prototype=Object.create(ln.prototype)).constructor=ma).prototype.isMeshDepthMaterial=!0,ma.prototype.copy=function(t){return ln.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},((ga.prototype=Object.create(ln.prototype)).constructor=ga).prototype.isMeshDistanceMaterial=!0,ga.prototype.copy=function(t){return ln.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this},ba.prototype=Object.assign(Object.create(hi.prototype),{constructor:ba,isArrayCamera:!0}),wa.prototype=Object.assign(Object.create(Re.prototype),{constructor:wa,isGroup:!0}),Object.assign(Ta.prototype,{constructor:Ta,getHandSpace:function(){if(null===this._hand&&(this._hand=new wa,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints=[],this._hand.inputState={pinching:!1},window.XRHand))for(var t=0;t<=window.XRHand.LITTLE_PHALANX_TIP;t++){var e=new wa;e.matrixAutoUpdate=!1,e.visible=!1,this._hand.joints.push(e),this._hand.add(e)}return this._hand},getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new wa,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new wa,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this},disconnect:function(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this},update:function(t,e,n){var i=null,r=null,a=null,o=this._targetRay,s=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState)if(l&&t.hand){a=!0;for(var c,u,h,d,p,f=0;f<=window.XRHand.LITTLE_PHALANX_TIP;f++){t.hand[f]&&(c=e.getJointPose(t.hand[f],n),u=l.joints[f],null!==c&&(u.matrix.fromArray(c.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.jointRadius=c.radius),u.visible=null!==c,h=l.joints[window.XRHand.INDEX_PHALANX_TIP],d=l.joints[window.XRHand.THUMB_PHALANX_TIP],p=h.position.distanceTo(d.position),l.inputState.pinching&&.025<p?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&p<=.015&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this})))}}else null!==o&&null!==(i=e.getPose(t.targetRaySpace,n))&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale)),null!==s&&t.gripSpace&&null!==(r=e.getPose(t.gripSpace,n))&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale));return null!==o&&(o.visible=null!==i),null!==s&&(s.visible=null!==r),null!==l&&(l.visible=null!==a),this}}),Object.assign(Ma.prototype,T.prototype),Aa.prototype=Object.assign(Object.create(Ea.prototype),{constructor:Aa,isWebGL1Renderer:!0});var La,Ca,Ra=((Ca=Na.prototype).clone=function(){return new Na(this.color,this.density)},Ca.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},Na),Pa=((La=Da.prototype).clone=function(){return new Da(this.color,this.near,this.far)},La.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Da),Oa=function(n){function t(){var t=n.call(this)||this;return Object.defineProperty(k(t),"isScene",{value:!0}),t.type="Scene",t.background=null,t.environment=null,t.fog=null,t.overrideMaterial=null,t.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:k(t)})),t}C(t,n);var e=t.prototype;return e.copy=function(t,e){return n.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},e.toJSON=function(t){var e=n.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.environment&&(e.object.environment=this.environment.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},t}(Re);function Da(t,e,n){Object.defineProperty(this,"isFog",{value:!0}),this.name="",this.color=new en(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}function Na(t,e){Object.defineProperty(this,"isFogExp2",{value:!0}),this.name="",this.color=new en(t),this.density=void 0!==e?e:25e-5}function Ia(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=b,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Pt.generateUUID()}Object.defineProperty(Ia.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Ia.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Pt.generateUUID()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var e=new Ia(new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),this.stride);return e.setUsage(this.usage),e},onUpload:function(t){return this.onUploadCallback=t,this},toJSON:function(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Pt.generateUUID()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});var Ba,Fa=new Bt;function ka(t,e,n,i){this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===i}function za(t){ln.call(this),this.type="SpriteMaterial",this.color=new en(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}Object.defineProperties(ka.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(t){this.data.needsUpdate=t}}}),Object.assign(ka.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(t){for(var e=0,n=this.data.count;e<n;e++)Fa.x=this.getX(e),Fa.y=this.getY(e),Fa.z=this.getZ(e),Fa.applyMatrix4(t),this.setXYZ(e,Fa.x,Fa.y,Fa.z);return this},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this},clone:function(t){if(void 0!==t)return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new ka(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized);console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var e=[],n=0;n<this.count;n++)for(var i=n*this.data.stride+this.offset,r=0;r<this.itemSize;r++)e.push(this.data.array[i+r]);return new dn(new this.array.constructor(e),this.itemSize,this.normalized)},toJSON:function(t){if(void 0!==t)return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized};console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var e=[],n=0;n<this.count;n++)for(var i=n*this.data.stride+this.offset,r=0;r<this.itemSize;r++)e.push(this.data.array[i+r]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}}),((za.prototype=Object.create(ln.prototype)).constructor=za).prototype.isSpriteMaterial=!0,za.prototype.copy=function(t){return ln.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this};var Ha=new Bt,Ua=new Bt,Ga=new Bt,ja=new It,Va=new It,Wa=new Kt,qa=new Bt,Xa=new Bt,Ya=new Bt,Za=new It,Ja=new It,Qa=new It;function $a(t){var e;Re.call(this),this.type="Sprite",void 0===Ba&&(Ba=new Bn,e=new Ia(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5),Ba.setIndex([0,1,2,0,2,3]),Ba.setAttribute("position",new ka(e,3,0,!1)),Ba.setAttribute("uv",new ka(e,2,3,!1))),this.geometry=Ba,this.material=void 0!==t?t:new za,this.center=new It(.5,.5)}function Ka(t,e,n,i,r,a){ja.subVectors(t,n).addScalar(.5).multiply(i),void 0!==r?(Va.x=a*ja.x-r*ja.y,Va.y=r*ja.x+a*ja.y):Va.copy(ja),t.copy(e),t.x+=Va.x,t.y+=Va.y,t.applyMatrix4(Wa)}$a.prototype=Object.assign(Object.create(Re.prototype),{constructor:$a,isSprite:!0,raycast:function(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ua.setFromMatrixScale(this.matrixWorld),Wa.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Ga.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Ua.multiplyScalar(-Ga.z);var n,i,r=this.material.rotation;0!==r&&(i=Math.cos(r),n=Math.sin(r));var a,o=this.center;Ka(qa.set(-.5,-.5,0),Ga,o,Ua,n,i),Ka(Xa.set(.5,-.5,0),Ga,o,Ua,n,i),Ka(Ya.set(.5,.5,0),Ga,o,Ua,n,i),Za.set(0,0),Ja.set(1,0),Qa.set(1,1),null===t.ray.intersectTriangle(qa,Xa,Ya,!1,Ha)&&(Ka(Xa.set(-.5,.5,0),Ga,o,Ua,n,i),Ja.set(0,1),null===t.ray.intersectTriangle(qa,Ya,Xa,!1,Ha))||((a=t.ray.origin.distanceTo(Ha))<t.near||a>t.far||e.push({distance:a,point:Ha.clone(),uv:qe.getUV(Ha,qa,Xa,Ya,Za,Ja,Qa,new It),face:null,object:this}))},copy:function(t){return Re.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}});var to,eo,no,io,ro,ao=new Bt,oo=new Bt;function so(){Re.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function lo(t,e){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),ti.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Kt,this.bindMatrixInverse=new Kt}function co(){Re.call(this),this.type="Bone"}so.prototype=Object.assign(Object.create(Re.prototype),{constructor:so,isLOD:!0,copy:function(t){Re.prototype.copy.call(this,t,!1);for(var e=t.levels,n=0,i=e.length;n<i;n++){var r=e[n];this.addLevel(r.object.clone(),r.distance)}return this.autoUpdate=t.autoUpdate,this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var n=this.levels,i=0;i<n.length&&!(e<n[i].distance);i++);return n.splice(i,0,{distance:e,object:t}),this.add(t),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(t){var e=this.levels;if(0<e.length){for(var n=1,i=e.length;n<i&&!(t<e[n].distance);n++);return e[n-1].object}return null},raycast:function(t,e){var n;0<this.levels.length&&(ao.setFromMatrixPosition(this.matrixWorld),n=t.ray.origin.distanceTo(ao),this.getObjectForDistance(n).raycast(t,e))},update:function(t){var e=this.levels;if(1<e.length){ao.setFromMatrixPosition(t.matrixWorld),oo.setFromMatrixPosition(this.matrixWorld);var n,i,r=ao.distanceTo(oo)/t.zoom;for(e[0].object.visible=!0,n=1,i=e.length;n<i&&r>=e[n].distance;n++)e[n-1].object.visible=!1,e[n].object.visible=!0;for(this._currentLevel=n-1;n<i;n++)e[n].object.visible=!1}},toJSON:function(t){var e=Re.prototype.toJSON.call(this,t);!1===this.autoUpdate&&(e.object.autoUpdate=!1),e.object.levels=[];for(var n=this.levels,i=0,r=n.length;i<r;i++){var a=n[i];e.object.levels.push({object:a.object.uuid,distance:a.distance})}return e}}),lo.prototype=Object.assign(Object.create(ti.prototype),{constructor:lo,isSkinnedMesh:!0,copy:function(t){return ti.prototype.copy.call(this,t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this},bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new Ot,e=this.geometry.attributes.skinWeight,n=0,i=e.count;n<i;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);var r=1/t.manhattanLength();r!=1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){ti.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:(to=new Bt,eo=new Ot,no=new Ot,io=new Bt,ro=new Kt,function(t,e){var n=this.skeleton,i=this.geometry;eo.fromBufferAttribute(i.attributes.skinIndex,t),no.fromBufferAttribute(i.attributes.skinWeight,t),to.fromBufferAttribute(i.attributes.position,t).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(var r=0;r<4;r++){var a,o=no.getComponent(r);0!==o&&(a=eo.getComponent(r),ro.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),e.addScaledVector(io.copy(to).applyMatrix4(ro),o))}return e.applyMatrix4(this.bindMatrixInverse)})}),co.prototype=Object.assign(Object.create(Re.prototype),{constructor:co,isBone:!0});var uo=new Kt,ho=new Kt;function po(t,e){void 0===t&&(t=[]),void 0===e&&(e=[]),this.uuid=Pt.generateUUID(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}Object.assign(po.prototype,{init:function(){var t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Kt)}},calculateInverses:function(){for(var t=this.boneInverses.length=0,e=this.bones.length;t<e;t++){var n=new Kt;this.bones[t]&&n.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(n)}},pose:function(){for(var t=0,e=this.bones.length;t<e;t++){var n=this.bones[t];n&&n.matrixWorld.copy(this.boneInverses[t]).invert()}for(var i=0,r=this.bones.length;i<r;i++){var a=this.bones[i];a&&(a.parent&&a.parent.isBone?(a.matrix.copy(a.parent.matrixWorld).invert(),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}},update:function(){for(var t=this.bones,e=this.boneInverses,n=this.boneMatrices,i=this.boneTexture,r=0,a=t.length;r<a;r++){var o=t[r]?t[r].matrixWorld:ho;uo.multiplyMatrices(o,e[r]),uo.toArray(n,16*r)}null!==i&&(i.needsUpdate=!0)},clone:function(){return new po(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,n=this.bones.length;e<n;e++){var i=this.bones[e];if(i.name===t)return i}},dispose:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)},fromJSON:function(t,e){this.uuid=t.uuid;for(var n=0,i=t.bones.length;n<i;n++){var r=t.bones[n],a=e[r];void 0===a&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),a=new co),this.bones.push(a),this.boneInverses.push((new Kt).fromArray(t.boneInverses[n]))}return this.init(),this},toJSON:function(){var t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;for(var e=this.bones,n=this.boneInverses,i=0,r=e.length;i<r;i++){var a=e[i];t.bones.push(a.uuid);var o=n[i];t.boneInverses.push(o.toArray())}return t}});var fo=new Kt,mo=new Kt,go=[],vo=new ti;function yo(t,e,n){ti.call(this,t,e),this.instanceMatrix=new dn(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}function _o(t){ln.call(this),this.type="LineBasicMaterial",this.color=new en(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(t)}yo.prototype=Object.assign(Object.create(ti.prototype),{constructor:yo,isInstancedMesh:!0,copy:function(t){return ti.prototype.copy.call(this,t),this.instanceMatrix.copy(t.instanceMatrix),this.count=t.count,this},getColorAt:function(t,e){e.fromArray(this.instanceColor.array,3*t)},getMatrixAt:function(t,e){e.fromArray(this.instanceMatrix.array,16*t)},raycast:function(t,e){var n=this.matrixWorld,i=this.count;if(vo.geometry=this.geometry,vo.material=this.material,void 0!==vo.material)for(var r=0;r<i;r++){this.getMatrixAt(r,fo),mo.multiplyMatrices(n,fo),vo.matrixWorld=mo,vo.raycast(t,go);for(var a=0,o=go.length;a<o;a++){var s=go[a];s.instanceId=r,s.object=this,e.push(s)}go.length=0}},setColorAt:function(t,e){null===this.instanceColor&&(this.instanceColor=new dn(new Float32Array(3*this.count),3)),e.toArray(this.instanceColor.array,3*t)},setMatrixAt:function(t,e){e.toArray(this.instanceMatrix.array,16*t)},updateMorphTargets:function(){}}),((_o.prototype=Object.create(ln.prototype)).constructor=_o).prototype.isLineBasicMaterial=!0,_o.prototype.copy=function(t){return ln.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.morphTargets=t.morphTargets,this};var xo=new Bt,bo=new Bt,wo=new Kt,To=new $t,Mo=new Vt;function So(t,e,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Re.call(this),this.type="Line",this.geometry=void 0!==t?t:new Bn,this.material=void 0!==e?e:new _o,this.updateMorphTargets()}So.prototype=Object.assign(Object.create(Re.prototype),{constructor:So,isLine:!0,copy:function(t){return Re.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[0],i=1,r=e.count;i<r;i++)xo.fromBufferAttribute(e,i-1),bo.fromBufferAttribute(e,i),n[i]=n[i-1],n[i]+=xo.distanceTo(bo);t.setAttribute("lineDistance",new bn(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){var a=t.vertices,o=t.lineDistances;o[0]=0;for(var s=1,l=a.length;s<l;s++)o[s]=o[s-1],o[s]+=a[s-1].distanceTo(a[s])}return this},raycast:function(t,e){var n=this.geometry,i=this.matrixWorld,r=t.params.Line.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Mo.copy(n.boundingSphere),Mo.applyMatrix4(i),Mo.radius+=r,!1!==t.ray.intersectsSphere(Mo)){wo.copy(i).invert(),To.copy(t.ray).applyMatrix4(wo);var a,o=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=new Bt,c=new Bt,u=new Bt,h=new Bt,d=this.isLineSegments?2:1;if(n.isBufferGeometry){var p,f=n.index,m=n.attributes.position;if(null!==f)for(var g=f.array,v=0,y=g.length-1;v<y;v+=d){var _,x=g[v],b=g[v+1];l.fromBufferAttribute(m,x),c.fromBufferAttribute(m,b),To.distanceSqToSegment(l,c,h,u)>s||(h.applyMatrix4(this.matrixWorld),(_=t.ray.origin.distanceTo(h))<t.near||_>t.far||e.push({distance:_,point:u.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this}))}else for(var w=0,T=m.count-1;w<T;w+=d){l.fromBufferAttribute(m,w),c.fromBufferAttribute(m,w+1),To.distanceSqToSegment(l,c,h,u)>s||(h.applyMatrix4(this.matrixWorld),(p=t.ray.origin.distanceTo(h))<t.near||p>t.far||e.push({distance:p,point:u.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this}))}}else if(n.isGeometry)for(var M=n.vertices,S=M.length,E=0;E<S-1;E+=d){To.distanceSqToSegment(M[E],M[E+1],h,u)>s||(h.applyMatrix4(this.matrixWorld),(a=t.ray.origin.distanceTo(h))<t.near||a>t.far||e.push({distance:a,point:u.clone().applyMatrix4(this.matrixWorld),index:E,face:null,faceIndex:null,object:this}))}}},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(0<n.length){var i=e[n[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,a=i.length;r<a;r++){var o=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}else{var s=t.morphTargets;void 0!==s&&0<s.length&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});var Eo=new Bt,Ao=new Bt;function Lo(t,e){So.call(this,t,e),this.type="LineSegments"}function Co(t,e){So.call(this,t,e),this.type="LineLoop"}function Ro(t){ln.call(this),this.type="PointsMaterial",this.color=new en(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(t)}Lo.prototype=Object.assign(Object.create(So.prototype),{constructor:Lo,isLineSegments:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[],i=0,r=e.count;i<r;i+=2)Eo.fromBufferAttribute(e,i),Ao.fromBufferAttribute(e,i+1),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+Eo.distanceTo(Ao);t.setAttribute("lineDistance",new bn(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry)for(var a=t.vertices,o=t.lineDistances,s=0,l=a.length;s<l;s+=2)Eo.copy(a[s]),Ao.copy(a[s+1]),o[s]=0===s?0:o[s-1],o[s+1]=o[s]+Eo.distanceTo(Ao);return this}}),Co.prototype=Object.assign(Object.create(So.prototype),{constructor:Co,isLineLoop:!0}),((Ro.prototype=Object.create(ln.prototype)).constructor=Ro).prototype.isPointsMaterial=!0,Ro.prototype.copy=function(t){return ln.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this};var Po=new Kt,Oo=new $t,Do=new Vt,No=new Bt;function Io(t,e){Re.call(this),this.type="Points",this.geometry=void 0!==t?t:new Bn,this.material=void 0!==e?e:new Ro,this.updateMorphTargets()}function Bo(t,e,n,i,r,a,o){var s=Oo.distanceSqToPoint(t);if(s<n){var l=new Bt;Oo.closestPointToPoint(t,l),l.applyMatrix4(i);var c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;a.push({distance:c,distanceToRay:Math.sqrt(s),point:l,index:e,face:null,object:o})}}function Fo(e,t,n,i,r,a,o,s,l){nt.call(this,e,t,n,i,r,a,o,s,l),this.format=void 0!==o?o:Y,this.minFilter=void 0!==a?a:j,this.magFilter=void 0!==r?r:j,this.generateMipmaps=!1;var c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)})}function ko(t,e,n,i,r,a,o,s,l,c,u,h){nt.call(this,null,a,o,s,l,c,i,r,u,h),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function zo(t,e,n,i,r,a,o,s,l){nt.call(this,t,e,n,i,r,a,o,s,l),this.needsUpdate=!0}function Ho(t,e,n,i,r,a,o,s,l,c){if((c=void 0!==c?c:Z)!==Z&&c!==J)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Z&&(n=V),void 0===n&&c===J&&(n=X),nt.call(this,null,i,r,a,o,s,c,n,l),this.image={width:t,height:e},this.magFilter=void 0!==o?o:H,this.minFilter=void 0!==s?s:H,this.flipY=!1,this.generateMipmaps=!1}Io.prototype=Object.assign(Object.create(Re.prototype),{constructor:Io,isPoints:!0,copy:function(t){return Re.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},raycast:function(t,e){var n=this.geometry,i=this.matrixWorld,r=t.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Do.copy(n.boundingSphere),Do.applyMatrix4(i),Do.radius+=r,!1!==t.ray.intersectsSphere(Do)){Po.copy(i).invert(),Oo.copy(t.ray).applyMatrix4(Po);var a=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a;if(n.isBufferGeometry){var s=n.index,l=n.attributes.position;if(null!==s)for(var c=s.array,u=0,h=c.length;u<h;u++){var d=c[u];No.fromBufferAttribute(l,d),Bo(No,d,o,i,t,e,this)}else for(var p=0,f=l.count;p<f;p++)No.fromBufferAttribute(l,p),Bo(No,p,o,i,t,e,this)}else for(var m=n.vertices,g=0,v=m.length;g<v;g++)Bo(m[g],g,o,i,t,e,this)}},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(0<n.length){var i=e[n[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,a=i.length;r<a;r++){var o=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}else{var s=t.morphTargets;void 0!==s&&0<s.length&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}),Fo.prototype=Object.assign(Object.create(nt.prototype),{constructor:Fo,clone:function(){return new this.constructor(this.image).copy(this)},isVideoTexture:!0,update:function(){var t=this.image;!1=="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),((ko.prototype=Object.create(nt.prototype)).constructor=ko).prototype.isCompressedTexture=!0,((zo.prototype=Object.create(nt.prototype)).constructor=zo).prototype.isCanvasTexture=!0,((Ho.prototype=Object.create(nt.prototype)).constructor=Ho).prototype.isDepthTexture=!0;var Uo=0,Go=new Kt,jo=new Re,Vo=new Bt;function Wo(){Object.defineProperty(this,"id",{value:Uo+=2}),this.uuid=Pt.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Wo.prototype=Object.assign(Object.create(T.prototype),{constructor:Wo,isGeometry:!0,applyMatrix4:function(t){for(var e=(new Q).getNormalMatrix(t),n=0,i=this.vertices.length;n<i;n++)this.vertices[n].applyMatrix4(t);for(var r=0,a=this.faces.length;r<a;r++){var o=this.faces[r];o.normal.applyMatrix3(e).normalize();for(var s=0,l=o.vertexNormals.length;s<l;s++)o.vertexNormals[s].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(t){return Go.makeRotationX(t),this.applyMatrix4(Go),this},rotateY:function(t){return Go.makeRotationY(t),this.applyMatrix4(Go),this},rotateZ:function(t){return Go.makeRotationZ(t),this.applyMatrix4(Go),this},translate:function(t,e,n){return Go.makeTranslation(t,e,n),this.applyMatrix4(Go),this},scale:function(t,e,n){return Go.makeScale(t,e,n),this.applyMatrix4(Go),this},lookAt:function(t){return jo.lookAt(t),jo.updateMatrix(),this.applyMatrix4(jo.matrix),this},fromBufferGeometry:function(t){var s=this,e=null!==t.index?t.index:void 0,n=t.attributes;if(void 0===n.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var i=n.position,l=n.normal,c=n.color,u=n.uv,h=n.uv2;void 0!==h&&(this.faceVertexUvs[1]=[]);for(var r=0;r<i.count;r++)s.vertices.push((new Bt).fromBufferAttribute(i,r)),void 0!==c&&s.colors.push((new en).fromBufferAttribute(c,r));function a(t,e,n,i){var r=void 0===c?[]:[s.colors[t].clone(),s.colors[e].clone(),s.colors[n].clone()],a=void 0===l?[]:[(new Bt).fromBufferAttribute(l,t),(new Bt).fromBufferAttribute(l,e),(new Bt).fromBufferAttribute(l,n)],o=new an(t,e,n,a,r,i);s.faces.push(o),void 0!==u&&s.faceVertexUvs[0].push([(new It).fromBufferAttribute(u,t),(new It).fromBufferAttribute(u,e),(new It).fromBufferAttribute(u,n)]),void 0!==h&&s.faceVertexUvs[1].push([(new It).fromBufferAttribute(h,t),(new It).fromBufferAttribute(h,e),(new It).fromBufferAttribute(h,n)])}var o=t.groups;if(0<o.length)for(var d=0;d<o.length;d++)for(var p=o[d],f=p.start,m=f,g=f+p.count;m<g;m+=3)void 0!==e?a(e.getX(m),e.getX(m+1),e.getX(m+2),p.materialIndex):a(m,m+1,m+2,p.materialIndex);else if(void 0!==e)for(var v=0;v<e.count;v+=3)a(e.getX(v),e.getX(v+1),e.getX(v+2));else for(var y=0;y<i.count;y+=3)a(y,y+1,y+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Vo).negate(),this.translate(Vo.x,Vo.y,Vo.z),this},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,i=new Kt;return i.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix4(i),this},computeFaceNormals:function(){for(var t=new Bt,e=new Bt,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],a=this.vertices[r.a],o=this.vertices[r.b],s=this.vertices[r.c];t.subVectors(s,o),e.subVectors(a,o),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function(t){void 0===t&&(t=!0);for(var e=new Array(this.vertices.length),n=0,i=this.vertices.length;n<i;n++)e[n]=new Bt;if(t)for(var r=new Bt,a=new Bt,o=0,s=this.faces.length;o<s;o++){var l=this.faces[o],c=this.vertices[l.a],u=this.vertices[l.b],h=this.vertices[l.c];r.subVectors(h,u),a.subVectors(c,u),r.cross(a),e[l.a].add(r),e[l.b].add(r),e[l.c].add(r)}else{this.computeFaceNormals();for(var d=0,p=this.faces.length;d<p;d++){var f=this.faces[d];e[f.a].add(f.normal),e[f.b].add(f.normal),e[f.c].add(f.normal)}}for(var m=0,g=this.vertices.length;m<g;m++)e[m].normalize();for(var v=0,y=this.faces.length;v<y;v++){var _=this.faces[v],x=_.vertexNormals;3===x.length?(x[0].copy(e[_.a]),x[1].copy(e[_.b]),x[2].copy(e[_.c])):(x[0]=e[_.a].clone(),x[1]=e[_.b].clone(),x[2]=e[_.c].clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(var t=0,e=this.faces.length;t<e;t++){var n=this.faces[t],i=n.vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(var t=0,e=this.faces.length;t<e;t++){var n=this.faces[t];n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]);for(var i=0,r=n.vertexNormals.length;i<r;i++)n.__originalVertexNormals[i]?n.__originalVertexNormals[i].copy(n.vertexNormals[i]):n.__originalVertexNormals[i]=n.vertexNormals[i].clone()}var a=new Wo;a.faces=this.faces;for(var o=0,s=this.morphTargets.length;o<s;o++){if(!this.morphNormals[o]){this.morphNormals[o]={},this.morphNormals[o].faceNormals=[],this.morphNormals[o].vertexNormals=[];for(var l=this.morphNormals[o].faceNormals,c=this.morphNormals[o].vertexNormals,u=0,h=this.faces.length;u<h;u++){var d=new Bt,p={a:new Bt,b:new Bt,c:new Bt};l.push(d),c.push(p)}}var f=this.morphNormals[o];a.vertices=this.morphTargets[o].vertices,a.computeFaceNormals(),a.computeVertexNormals();for(var m=0,g=this.faces.length;m<g;m++){var v=this.faces[m],y=f.faceNormals[m],_=f.vertexNormals[m];y.copy(v.normal),_.a.copy(v.vertexNormals[0]),_.b.copy(v.vertexNormals[1]),_.c.copy(v.vertexNormals[2])}}for(var x=0,b=this.faces.length;x<b;x++){var w=this.faces[x];w.normal=w.__originalFaceNormal,w.vertexNormals=w.__originalVertexNormals}},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new pt),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Vt),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(void 0===n&&(n=0),t&&t.isGeometry){var i,r=this.vertices.length,a=this.vertices,o=t.vertices,s=this.faces,l=t.faces,c=this.colors,u=t.colors;void 0!==e&&(i=(new Q).getNormalMatrix(e));for(var h=0,d=o.length;h<d;h++){var p=o[h].clone();void 0!==e&&p.applyMatrix4(e),a.push(p)}for(var f=0,m=u.length;f<m;f++)c.push(u[f].clone());for(var g=0,v=l.length;g<v;g++){var y=l[g],_=void 0,x=void 0,b=y.vertexNormals,w=y.vertexColors,T=new an(y.a+r,y.b+r,y.c+r);T.normal.copy(y.normal),void 0!==i&&T.normal.applyMatrix3(i).normalize();for(var M=0,S=b.length;M<S;M++)_=b[M].clone(),void 0!==i&&_.applyMatrix3(i).normalize(),T.vertexNormals.push(_);T.color.copy(y.color);for(var E=0,A=w.length;E<A;E++)x=w[E],T.vertexColors.push(x.clone());T.materialIndex=y.materialIndex+n,s.push(T)}for(var L=0,C=t.faceVertexUvs.length;L<C;L++){var R=t.faceVertexUvs[L];void 0===this.faceVertexUvs[L]&&(this.faceVertexUvs[L]=[]);for(var P=0,O=R.length;P<O;P++){for(var D=R[P],N=[],I=0,B=D.length;I<B;I++)N.push(D[I].clone());this.faceVertexUvs[L].push(N)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(t){void 0===t&&(t=4);for(var e={},n=[],i=[],r=Math.pow(10,t),a=0,o=this.vertices.length;a<o;a++){var s=this.vertices[a],l=Math.round(s.x*r)+"_"+Math.round(s.y*r)+"_"+Math.round(s.z*r);void 0===e[l]?(e[l]=a,n.push(this.vertices[a]),i[a]=n.length-1):i[a]=i[e[l]]}for(var c=[],u=0,h=this.faces.length;u<h;u++){var d=this.faces[u];d.a=i[d.a],d.b=i[d.b],d.c=i[d.c];for(var p=[d.a,d.b,d.c],f=0;f<3;f++)if(p[f]===p[(f+1)%3]){c.push(u);break}}for(var m=c.length-1;0<=m;m--){var g=c[m];this.faces.splice(g,1);for(var v=0,y=this.faceVertexUvs.length;v<y;v++)this.faceVertexUvs[v].splice(g,1)}var _=this.vertices.length-n.length;return this.vertices=n,_},setFromPoints:function(t){this.vertices=[];for(var e=0,n=t.length;e<n;e++){var i=t[e];this.vertices.push(new Bt(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,n=0;n<e;n++)t[n]._id=n;t.sort(function(t,e){return t.materialIndex-e.materialIndex});var i,r,a=this.faceVertexUvs[0],o=this.faceVertexUvs[1];a&&a.length===e&&(i=[]),o&&o.length===e&&(r=[]);for(var s=0;s<e;s++){var l=t[s]._id;i&&i.push(a[l]),r&&r.push(o[l])}i&&(this.faceVertexUvs[0]=i),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){var t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}for(var i=[],r=0;r<this.vertices.length;r++){var a=this.vertices[r];i.push(a.x,a.y,a.z)}for(var o=[],s=[],l={},c=[],u={},h=[],d={},p=0;p<this.faces.length;p++){var f,m,g,v,y=this.faces[p],_=void 0!==this.faceVertexUvs[0][p],x=0<y.normal.length(),b=0<y.vertexNormals.length,w=1!==y.color.r||1!==y.color.g||1!==y.color.b,T=0<y.vertexColors.length;m=M(2,3,_),m=M(m,4,x),m=M(m,5,b),m=M(m,6,w),m=M(m,7,T),o.push(m),o.push(y.a,y.b,y.c),o.push(y.materialIndex),_&&(f=this.faceVertexUvs[0][p],o.push(A(f[0]),A(f[1]),A(f[2]))),x&&o.push(S(y.normal)),b&&(g=y.vertexNormals,o.push(S(g[0]),S(g[1]),S(g[2]))),w&&o.push(E(y.color)),T&&(v=y.vertexColors,o.push(E(v[0]),E(v[1]),E(v[2])))}function M(t,e,n){return n?t|1<<e:t&~(1<<e)}function S(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==l[e]||(l[e]=s.length/3,s.push(t.x,t.y,t.z)),l[e]}function E(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==u[e]||(u[e]=c.length,c.push(t.getHex())),u[e]}function A(t){var e=t.x.toString()+t.y.toString();return void 0!==d[e]||(d[e]=h.length/2,h.push(t.x,t.y)),d[e]}return t.data={},t.data.vertices=i,t.data.normals=s,0<c.length&&(t.data.colors=c),0<h.length&&(t.data.uvs=[h]),t.data.faces=o,t},clone:function(){return(new Wo).copy(this)},copy:function(t){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;for(var e=t.vertices,n=0,i=e.length;n<i;n++)this.vertices.push(e[n].clone());for(var r=t.colors,a=0,o=r.length;a<o;a++)this.colors.push(r[a].clone());for(var s=t.faces,l=0,c=s.length;l<c;l++)this.faces.push(s[l].clone());for(var u=0,h=t.faceVertexUvs.length;u<h;u++){var d=t.faceVertexUvs[u];void 0===this.faceVertexUvs[u]&&(this.faceVertexUvs[u]=[]);for(var p=0,f=d.length;p<f;p++){for(var m=d[p],g=[],v=0,y=m.length;v<y;v++){var _=m[v];g.push(_.clone())}this.faceVertexUvs[u].push(g)}}for(var x=t.morphTargets,b=0,w=x.length;b<w;b++){var T={};if(T.name=x[b].name,void 0!==x[b].vertices){T.vertices=[];for(var M=0,S=x[b].vertices.length;M<S;M++)T.vertices.push(x[b].vertices[M].clone())}if(void 0!==x[b].normals){T.normals=[];for(var E=0,A=x[b].normals.length;E<A;E++)T.normals.push(x[b].normals[E].clone())}this.morphTargets.push(T)}for(var L=t.morphNormals,C=0,R=L.length;C<R;C++){var P={};if(void 0!==L[C].vertexNormals){P.vertexNormals=[];for(var O=0,D=L[C].vertexNormals.length;O<D;O++){var N=L[C].vertexNormals[O],I={};I.a=N.a.clone(),I.b=N.b.clone(),I.c=N.c.clone(),P.vertexNormals.push(I)}}if(void 0!==L[C].faceNormals){P.faceNormals=[];for(var B=0,F=L[C].faceNormals.length;B<F;B++)P.faceNormals.push(L[C].faceNormals[B].clone())}this.morphNormals.push(P)}for(var k=t.skinWeights,z=0,H=k.length;z<H;z++)this.skinWeights.push(k[z].clone());for(var U=t.skinIndices,G=0,j=U.length;G<j;G++)this.skinIndices.push(U[G].clone());for(var V=t.lineDistances,W=0,q=V.length;W<q;W++)this.lineDistances.push(V[W]);var X=t.boundingBox;null!==X&&(this.boundingBox=X.clone());var Y=t.boundingSphere;return null!==Y&&(this.boundingSphere=Y.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function qo(t,e,n){n=n||2;var i,r,a,o,s,l,c,u=e&&e.length,h=u?e[0]*n:t.length,d=Rs(t,0,h,n,!0),p=[];if(!d||d.next===d.prev)return p;if(u&&(d=function(t,e,n,i){for(var r,a=[],o=0,s=e.length;o<s;o++)(r=Rs(t,e[o]*i,o<s-1?e[o+1]*i:t.length,i,!1))===r.next&&(r.steiner=!0),a.push(function(t){var e=t,n=t;for(;(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next,e!==t;);return n}(r));for(a.sort(Ds),o=0;o<a.length;o++)(function(t,e){{var n;(e=function(t,e){var n,i=e,r=t.x,a=t.y,o=-1/0;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){var s=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&o<s){if((o=s)===r){if(a===i.y)return i;if(a===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===o)return n;for(var l,c,u,h=n,d=n.x,p=n.y,f=1/0,i=n;r>=i.x&&i.x>=d&&r!==i.x&&Is(a<p?r:o,a,d,p,a<p?o:r,a,i.x,i.y)&&(l=Math.abs(a-i.y)/(r-i.x),Us(i,t)&&(l<f||l===f&&(i.x>n.x||i.x===n.x&&(u=i,Bs((c=n).prev,c,u.prev)<0&&Bs(u.next,c,c.next)<0)))&&(n=i,f=l)),(i=i.next)!==h;);return n}(t,e))&&(n=Gs(e,t),Ps(e,e.next),Ps(n,n.next))}})(a[o],n),n=Ps(n,n.next);return n}(t,e,d,n)),t.length>80*n){i=a=t[0],r=o=t[1];for(var f=n;f<h;f+=n)(s=t[f])<i&&(i=s),(l=t[f+1])<r&&(r=l),a<s&&(a=s),o<l&&(o=l);c=0!==(c=Math.max(a-i,o-r))?1/c:0}return Os(d,p,n,i,r,c),p}var Xo,Yo,Zo,Jo,Qo,$o,Ko,ts,es,ns,is,rs=(C(Cs,is=Wo),Cs),as=(C(Ls,ns=Bn),Ls),os=(C(As,es=Wo),As),ss=(C(Es,ts=Bn),Es),ls=(C(Ss,Ko=Wo),Ss),cs=(C(Ms,$o=ls),Ms),us=(C(Ts,Qo=ss),Ts),hs=(C(ws,Jo=Bn),ws),ds=(C(bs,Zo=hs),bs),ps=(C(xs,Yo=Wo),xs),fs=new Bt,ms=new Bt,gs=new Bt,vs=new qe,ys=(C(_s,Xo=Bn),_s);function _s(t,e){var n;(n=Xo.call(this)||this).type="EdgesGeometry",n.parameters={thresholdAngle:e},e=void 0!==e?e:1,t.isGeometry&&(t=(new Bn).fromGeometry(t));for(var i,r,a,o=Math.pow(10,4),s=Math.cos(Pt.DEG2RAD*e),l=t.getIndex(),c=t.getAttribute("position"),u=l?l.count:c.count,h=[0,0,0],d=["a","b","c"],p=new Array(3),f={},m=[],g=0;g<u;g+=3){l?(h[0]=l.getX(g),h[1]=l.getX(g+1),h[2]=l.getX(g+2)):(h[0]=g,h[1]=g+1,h[2]=g+2);var v=vs.a,y=vs.b,_=vs.c;if(v.fromBufferAttribute(c,h[0]),y.fromBufferAttribute(c,h[1]),_.fromBufferAttribute(c,h[2]),vs.getNormal(gs),p[0]=Math.round(v.x*o)+","+Math.round(v.y*o)+","+Math.round(v.z*o),p[1]=Math.round(y.x*o)+","+Math.round(y.y*o)+","+Math.round(y.z*o),p[2]=Math.round(_.x*o)+","+Math.round(_.y*o)+","+Math.round(_.z*o),p[0]!==p[1]&&p[1]!==p[2]&&p[2]!==p[0])for(var x=0;x<3;x++){var b=(x+1)%3,w=p[x],T=p[b],M=vs[d[x]],S=vs[d[b]],E=w+"_"+T,A=T+"_"+w;A in f&&f[A]?(gs.dot(f[A].normal)<=s&&(m.push(M.x,M.y,M.z),m.push(S.x,S.y,S.z)),f[A]=null):E in f||(f[E]={index0:h[x],index1:h[b],normal:gs.clone()})}}for(var L in f){f[L]&&(r=(i=f[L]).index0,a=i.index1,fs.fromBufferAttribute(c,r),ms.fromBufferAttribute(c,a),m.push(fs.x,fs.y,fs.z),m.push(ms.x,ms.y,ms.z))}return n.setAttribute("position",new bn(m,3)),n}function xs(t,e){var n;return(n=Yo.call(this)||this).type="DodecahedronGeometry",n.parameters={radius:t,detail:e},n.fromBufferGeometry(new ds(t,e)),n.mergeVertices(),n}function bs(t,e){var n;void 0===t&&(t=1),void 0===e&&(e=0);var i=(1+Math.sqrt(5))/2,r=1/i,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r];return(n=Zo.call(this,a,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e)||this).type="DodecahedronBufferGeometry",n.parameters={radius:t,detail:e},n}function ws(i,a,t,e){var n;void 0===t&&(t=1),void 0===e&&(e=0),(n=Jo.call(this)||this).type="PolyhedronBufferGeometry",n.parameters={vertices:i,indices:a,radius:t,detail:e};var u=[],h=[];function f(t){u.push(t.x,t.y,t.z)}function o(t,e){var n=3*t;e.x=i[0+n],e.y=i[1+n],e.z=i[2+n]}function d(t,e,n,i){i<0&&1===t.x&&(h[e]=t.x-1),0===n.x&&0===n.z&&(h[e]=i/2/Math.PI+.5)}function p(t){return Math.atan2(t.z,-t.x)}return function(t){for(var e=new Bt,n=new Bt,i=new Bt,r=0;r<a.length;r+=3)o(a[r+0],e),o(a[r+1],n),o(a[r+2],i),function(t,e,n,i){for(var r=i+1,a=[],o=0;o<=r;o++){a[o]=[];for(var s=t.clone().lerp(n,o/r),l=e.clone().lerp(n,o/r),c=r-o,u=0;u<=c;u++)a[o][u]=0===u&&o===r?s:s.clone().lerp(l,u/c)}for(var h=0;h<r;h++)for(var d=0;d<2*(r-h)-1;d++){var p=Math.floor(d/2);d%2==0?(f(a[h][p+1]),f(a[h+1][p]),f(a[h][p])):(f(a[h][p+1]),f(a[h+1][p+1]),f(a[h+1][p]))}}(e,n,i,t)}(e),function(t){for(var e=new Bt,n=0;n<u.length;n+=3)e.x=u[n+0],e.y=u[n+1],e.z=u[n+2],e.normalize().multiplyScalar(t),u[n+0]=e.x,u[n+1]=e.y,u[n+2]=e.z}(t),function(){for(var t,e=new Bt,n=0;n<u.length;n+=3){e.x=u[n+0],e.y=u[n+1],e.z=u[n+2];var i=p(e)/2/Math.PI+.5,r=(t=e,Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5);h.push(i,1-r)}(function(){for(var t=new Bt,e=new Bt,n=new Bt,i=new Bt,r=new It,a=new It,o=new It,s=0,l=0;s<u.length;s+=9,l+=6){t.set(u[s+0],u[s+1],u[s+2]),e.set(u[s+3],u[s+4],u[s+5]),n.set(u[s+6],u[s+7],u[s+8]),r.set(h[l+0],h[l+1]),a.set(h[l+2],h[l+3]),o.set(h[l+4],h[l+5]),i.copy(t).add(e).add(n).divideScalar(3);var c=p(i);d(r,l+0,t,c),d(a,l+2,e,c),d(o,l+4,n,c)}})(),function(){for(var t=0;t<h.length;t+=6){var e=h[t+0],n=h[t+2],i=h[t+4],r=Math.max(e,n,i),a=Math.min(e,n,i);.9<r&&a<.1&&(e<.2&&(h[t+0]+=1),n<.2&&(h[t+2]+=1),i<.2&&(h[t+4]+=1))}}()}(),n.setAttribute("position",new bn(u,3)),n.setAttribute("normal",new bn(u.slice(),3)),n.setAttribute("uv",new bn(h,2)),0===e?n.computeVertexNormals():n.normalizeNormals(),n}function Ts(t,e,n,i,r,a,o){var s;return void 0===t&&(t=1),void 0===e&&(e=1),void 0===n&&(n=8),void 0===i&&(i=1),void 0===r&&(r=!1),void 0===a&&(a=0),void 0===o&&(o=2*Math.PI),(s=Qo.call(this,0,t,e,n,i,r,a,o)||this).type="ConeBufferGeometry",s.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:o},s}function Ms(t,e,n,i,r,a,o){var s;return(s=$o.call(this,0,t,e,n,i,r,a,o)||this).type="ConeGeometry",s.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:o},s}function Ss(t,e,n,i,r,a,o,s){var l;return(l=Ko.call(this)||this).type="CylinderGeometry",l.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:s},l.fromBufferGeometry(new ss(t,e,n,i,r,a,o,s)),l.mergeVertices(),l}function Es(_,x,b,w,T,t,M,S){var e;void 0===_&&(_=1),void 0===x&&(x=1),void 0===b&&(b=1),void 0===w&&(w=8),void 0===T&&(T=1),void 0===t&&(t=!1),void 0===M&&(M=0),void 0===S&&(S=2*Math.PI),(e=ts.call(this)||this).type="CylinderBufferGeometry",e.parameters={radiusTop:_,radiusBottom:x,height:b,radialSegments:w,heightSegments:T,openEnded:t,thetaStart:M,thetaLength:S};var E=k(e);w=Math.floor(w),T=Math.floor(T);var A=[],L=[],C=[],R=[],P=0,O=[],D=b/2,N=0;function n(t){for(var e=P,n=new It,i=new Bt,r=0,a=!0===t?_:x,o=!0===t?1:-1,s=1;s<=w;s++)L.push(0,D*o,0),C.push(0,o,0),R.push(.5,.5),P++;for(var l=P,c=0;c<=w;c++){var u=c/w*S+M,h=Math.cos(u),d=Math.sin(u);i.x=a*d,i.y=D*o,i.z=a*h,L.push(i.x,i.y,i.z),C.push(0,o,0),n.x=.5*h+.5,n.y=.5*d*o+.5,R.push(n.x,n.y),P++}for(var p=0;p<w;p++){var f=e+p,m=l+p;!0===t?A.push(m,m+1,f):A.push(m+1,m,f),r+=3}E.addGroup(N,r,!0===t?1:2),N+=r}return function(){for(var t=new Bt,e=new Bt,n=0,i=(x-_)/b,r=0;r<=T;r++){for(var a=[],o=r/T,s=o*(x-_)+_,l=0;l<=w;l++){var c=l/w,u=c*S+M,h=Math.sin(u),d=Math.cos(u);e.x=s*h,e.y=-o*b+D,e.z=s*d,L.push(e.x,e.y,e.z),t.set(h,i,d).normalize(),C.push(t.x,t.y,t.z),R.push(c,1-o),a.push(P++)}O.push(a)}for(var p=0;p<w;p++)for(var f=0;f<T;f++){var m=O[f][p],g=O[f+1][p],v=O[f+1][p+1],y=O[f][p+1];A.push(m,g,y),A.push(g,v,y),n+=6}E.addGroup(N,n,0),N+=n}(),!1===t&&(0<_&&n(!0),0<x&&n(!1)),e.setIndex(A),e.setAttribute("position",new bn(L,3)),e.setAttribute("normal",new bn(C,3)),e.setAttribute("uv",new bn(R,2)),e}function As(t,e,n,i){var r;return(r=es.call(this)||this).type="CircleGeometry",r.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},r.fromBufferGeometry(new as(t,e,n,i)),r.mergeVertices(),r}function Ls(t,e,n,i){var r;void 0===t&&(t=1),void 0===e&&(e=8),void 0===n&&(n=0),void 0===i&&(i=2*Math.PI),(r=ns.call(this)||this).type="CircleBufferGeometry",r.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},e=Math.max(3,e);var a=[],o=[],s=[],l=[],c=new Bt,u=new It;o.push(0,0,0),s.push(0,0,1),l.push(.5,.5);for(var h=0,d=3;h<=e;h++,d+=3){var p=n+h/e*i;c.x=t*Math.cos(p),c.y=t*Math.sin(p),o.push(c.x,c.y,c.z),s.push(0,0,1),u.x=(o[d]/t+1)/2,u.y=(o[d+1]/t+1)/2,l.push(u.x,u.y)}for(var f=1;f<=e;f++)a.push(f,f+1,0);return r.setIndex(a),r.setAttribute("position",new bn(o,3)),r.setAttribute("normal",new bn(s,3)),r.setAttribute("uv",new bn(l,2)),r}function Cs(t,e,n,i,r,a){var o;return(o=is.call(this)||this).type="BoxGeometry",o.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:a},o.fromBufferGeometry(new ri(t,e,n,i,r,a)),o.mergeVertices(),o}function Rs(t,o,e,n,i){var r,a;if(i===0<function(t,e,n){for(var i=0,r=o,a=e-n;r<e;r+=n)i+=(t[a]-t[r])*(t[r+1]+t[a+1]),a=r;return i}(t,e,n))for(r=o;r<e;r+=n)a=js(r,t[r],t[r+1],a);else for(r=e-n;o<=r;r-=n)a=js(r,t[r],t[r+1],a);return a&&Fs(a,a.next)&&(Vs(a),a=a.next),a}function Ps(t,e){if(!t)return t;e=e||t;var n,i=t;do{if(n=!1,i.steiner||!Fs(i,i.next)&&0!==Bs(i.prev,i,i.next))i=i.next;else{if(Vs(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function Os(t,e,n,i,r,a,o){if(t){!o&&a&&function(t,e,n,i){for(var r=t;null===r.z&&(r.z=Ns(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,(r=r.next)!==t;);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,a,o,s,l,c=1;do{for(n=t,a=t=null,o=0;n;){for(o++,i=n,e=s=0;e<c&&(s++,i=i.nextZ);e++);for(l=c;0<s||0<l&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(n=(r=n).nextZ,s--):(i=(r=i).nextZ,l--),a?a.nextZ=r:t=r,r.prevZ=a,a=r;n=i}a.nextZ=null,c*=2}while(1<o)}(r)}(t,i,r,a);for(var s,l,c=t;t.prev!==t.next;)if(s=t.prev,l=t.next,a?function(t,e,n,i){var r=t.prev,a=t,o=t.next;if(0<=Bs(r,a,o))return!1;for(var s=r.x<a.x?r.x<o.x?r.x:o.x:a.x<o.x?a.x:o.x,l=r.y<a.y?r.y<o.y?r.y:o.y:a.y<o.y?a.y:o.y,c=r.x>a.x?r.x>o.x?r.x:o.x:a.x>o.x?a.x:o.x,u=r.y>a.y?r.y>o.y?r.y:o.y:a.y>o.y?a.y:o.y,h=Ns(s,l,e,n,i),d=Ns(c,u,e,n,i),p=t.prevZ,f=t.nextZ;p&&p.z>=h&&f&&f.z<=d;){if(p!==t.prev&&p!==t.next&&Is(r.x,r.y,a.x,a.y,o.x,o.y,p.x,p.y)&&0<=Bs(p.prev,p,p.next))return!1;if(p=p.prevZ,f!==t.prev&&f!==t.next&&Is(r.x,r.y,a.x,a.y,o.x,o.y,f.x,f.y)&&0<=Bs(f.prev,f,f.next))return!1;f=f.nextZ}for(;p&&p.z>=h;){if(p!==t.prev&&p!==t.next&&Is(r.x,r.y,a.x,a.y,o.x,o.y,p.x,p.y)&&0<=Bs(p.prev,p,p.next))return!1;p=p.prevZ}for(;f&&f.z<=d;){if(f!==t.prev&&f!==t.next&&Is(r.x,r.y,a.x,a.y,o.x,o.y,f.x,f.y)&&0<=Bs(f.prev,f,f.next))return!1;f=f.nextZ}return!0}(t,i,r,a):function(t){var e=t.prev,n=t,i=t.next;if(0<=Bs(e,n,i))return!1;for(var r=t.next.next;r!==t.prev;){if(Is(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&0<=Bs(r.prev,r,r.next))return!1;r=r.next}return!0}(t))e.push(s.i/n),e.push(t.i/n),e.push(l.i/n),Vs(t),t=l.next,c=l.next;else if((t=l)===c){o?1===o?Os(t=function(t,e,n){var i=t;do{var r=i.prev,a=i.next.next;!Fs(r,a)&&ks(r,i,i.next,a)&&Us(r,a)&&Us(a,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(a.i/n),Vs(i),Vs(i.next),i=t=a),i=i.next}while(i!==t);return Ps(i)}(Ps(t),e,n),e,n,i,r,a,2):2===o&&function(t,e,n,i,r,a){var o=t;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&function(t,a){return t.next.i!==a.i&&t.prev.i!==a.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&ks(n,n.next,t,e))return 1;n=n.next}while(n!==t)}(t,a)&&(Us(t,a)&&Us(a,t)&&function(t){for(var e=t,n=!1,i=(t.x+a.x)/2,r=(t.y+a.y)/2;e.y>r!=e.next.y>r&&e.next.y!==e.y&&i<(e.next.x-e.x)*(r-e.y)/(e.next.y-e.y)+e.x&&(n=!n),(e=e.next)!==t;);return n}(t)&&(Bs(t.prev,t,a.prev)||Bs(t,a.prev,a))||Fs(t,a)&&0<Bs(t.prev,t,t.next)&&0<Bs(a.prev,a,a.next))}(o,s)){var l=Gs(o,s);return o=Ps(o,o.next),l=Ps(l,l.next),Os(o,e,n,i,r,a),Os(l,e,n,i,r,a)}s=s.next}o=o.next}while(o!==t)}(t,e,n,i,r,a):Os(Ps(t),e,n,i,r,a,1);break}}}function Ds(t,e){return t.x-e.x}function Ns(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Is(t,e,n,i,r,a,o,s){return 0<=(r-o)*(e-s)-(t-o)*(a-s)&&0<=(t-o)*(i-s)-(n-o)*(e-s)&&0<=(n-o)*(a-s)-(r-o)*(i-s)}function Bs(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Fs(t,e){return t.x===e.x&&t.y===e.y}function ks(t,e,n,i){var r=Hs(Bs(t,e,n)),a=Hs(Bs(t,e,i)),o=Hs(Bs(n,i,t)),s=Hs(Bs(n,i,e));return r!==a&&o!==s||0===r&&zs(t,n,e)||0===a&&zs(t,i,e)||0===o&&zs(n,t,i)||0===s&&zs(n,e,i)}function zs(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Hs(t){return 0<t?1:t<0?-1:0}function Us(t,e){return Bs(t.prev,t,t.next)<0?0<=Bs(t,e,t.next)&&0<=Bs(t,t.prev,e):Bs(t,e,t.prev)<0||Bs(t,t.next,e)<0}function Gs(t,e){var n=new Ws(t.i,t.x,t.y),i=new Ws(e.i,e.x,e.y),r=t.next,a=e.prev;return(t.next=e).prev=t,(n.next=r).prev=n,(i.next=n).prev=i,(a.next=i).prev=a,i}function js(t,e,n,i){var r=new Ws(t,e,n);return i?(r.next=i.next,(r.prev=i).next.prev=r,i.next=r):(r.prev=r).next=r,r}function Vs(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Ws(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var qs={area:function(t){for(var e=t.length,n=0,i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*n},isClockWise:function(t){return qs.area(t)<0},triangulateShape:function(t,e){var n=[],i=[],r=[];Xs(t),Ys(n,t);var a=t.length;e.forEach(Xs);for(var o=0;o<e.length;o++)i.push(a),a+=e[o].length,Ys(n,e[o]);for(var s=qo(n,i),l=0;l<s.length;l+=3)r.push(s.slice(l,l+3));return r}};function Xs(t){var e=t.length;2<e&&t[e-1].equals(t[0])&&t.pop()}function Ys(t,e){for(var n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}var Zs,Js=(C($s,Zs=Bn),$s.prototype.toJSON=function(){var t=Bn.prototype.toJSON.call(this);return function(t,e,n){if(n.shapes=[],Array.isArray(t))for(var i=0,r=t.length;i<r;i++){var a=t[i];n.shapes.push(a.uuid)}else n.shapes.push(t.uuid);return void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,t)},$s),Qs={generateTopUV:function(t,e,n,i,r){var a=e[3*n],o=e[3*n+1],s=e[3*i],l=e[3*i+1],c=e[3*r],u=e[3*r+1];return[new It(a,o),new It(s,l),new It(c,u)]},generateSideWallUV:function(t,e,n,i,r,a){var o=e[3*n],s=e[3*n+1],l=e[3*n+2],c=e[3*i],u=e[3*i+1],h=e[3*i+2],d=e[3*r],p=e[3*r+1],f=e[3*r+2],m=e[3*a],g=e[3*a+1],v=e[3*a+2];return Math.abs(s-u)<.01?[new It(o,1-l),new It(c,1-h),new It(d,1-f),new It(m,1-v)]:[new It(s,1-l),new It(u,1-h),new It(p,1-f),new It(g,1-v)]}};function $s(t,Pt){var e;(e=Zs.call(this)||this).type="ExtrudeBufferGeometry",e.parameters={shapes:t,options:Pt},t=Array.isArray(t)?t:[t];for(var Ot=k(e),Dt=[],Nt=[],n=0,i=t.length;n<i;n++)!function(t){var i=[],e=void 0!==Pt.curveSegments?Pt.curveSegments:12,u=void 0!==Pt.steps?Pt.steps:1,n=void 0!==Pt.depth?Pt.depth:100,h=void 0===Pt.bevelEnabled||Pt.bevelEnabled,r=void 0!==Pt.bevelThickness?Pt.bevelThickness:6,a=void 0!==Pt.bevelSize?Pt.bevelSize:r-2,o=void 0!==Pt.bevelOffset?Pt.bevelOffset:0,d=void 0!==Pt.bevelSegments?Pt.bevelSegments:3,s=Pt.extrudePath,c=void 0!==Pt.UVGenerator?Pt.UVGenerator:Qs;void 0!==Pt.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),n=Pt.amount);var l,p,f,m,g,v=!1;s&&(l=s.getSpacedPoints(u),h=!(v=!0),p=s.computeFrenetFrames(u,!1),f=new Bt,m=new Bt,g=new Bt),h||(o=a=r=d=0);var y=t.extractPoints(e),_=y.shape,x=y.holes;if(!qs.isClockWise(_)){_=_.reverse();for(var b=0,w=x.length;b<w;b++){var T=x[b];qs.isClockWise(T)&&(x[b]=T.reverse())}}for(var M=qs.triangulateShape(_,x),S=_,E=0,A=x.length;E<A;E++){var L=x[E];_=_.concat(L)}function C(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}var R=_.length,P=M.length;function O(t,e,n){var i,r,a,o=t.x-e.x,s=t.y-e.y,l=n.x-t.x,c=n.y-t.y,u=o*o+s*s,h=o*c-s*l;if(Math.abs(h)>Number.EPSILON){var d=Math.sqrt(u),p=Math.sqrt(l*l+c*c),f=e.x-s/d,m=e.y+o/d,g=((n.x-c/p-f)*c-(n.y+l/p-m)*l)/(o*c-s*l),v=(i=f+o*g-t.x)*i+(r=m+s*g-t.y)*r;if(v<=2)return new It(i,r);a=Math.sqrt(v/2)}else{var y=!1;o>Number.EPSILON?l>Number.EPSILON&&(y=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(c)&&(y=!0),a=y?(i=-s,r=o,Math.sqrt(u)):(i=o,r=s,Math.sqrt(u/2))}return new It(i/a,r/a)}for(var D=[],N=0,I=S.length,B=I-1,F=N+1;N<I;N++,B++,F++)B===I&&(B=0),F===I&&(F=0),D[N]=O(S[N],S[B],S[F]);for(var k,z=[],H=D.concat(),U=0,G=x.length;U<G;U++){var j=x[U];k=[];for(var V=0,W=j.length,q=W-1,X=V+1;V<W;V++,q++,X++)q===W&&(q=0),X===W&&(X=0),k[V]=O(j[V],j[q],j[X]);z.push(k),H=H.concat(k)}for(var Y=0;Y<d;Y++){for(var Z=Y/d,J=r*Math.cos(Z*Math.PI/2),Q=a*Math.sin(Z*Math.PI/2)+o,$=0,K=S.length;$<K;$++){var tt=C(S[$],D[$],Q);At(tt.x,tt.y,-J)}for(var et=0,nt=x.length;et<nt;et++){var it=x[et];k=z[et];for(var rt=0,at=it.length;rt<at;rt++){var ot=C(it[rt],k[rt],Q);At(ot.x,ot.y,-J)}}}for(var st=a+o,lt=0;lt<R;lt++){var ct=h?C(_[lt],H[lt],st):_[lt];v?(m.copy(p.normals[0]).multiplyScalar(ct.x),f.copy(p.binormals[0]).multiplyScalar(ct.y),g.copy(l[0]).add(m).add(f),At(g.x,g.y,g.z)):At(ct.x,ct.y,0)}for(var ut=1;ut<=u;ut++)for(var ht=0;ht<R;ht++){var dt=h?C(_[ht],H[ht],st):_[ht];v?(m.copy(p.normals[ut]).multiplyScalar(dt.x),f.copy(p.binormals[ut]).multiplyScalar(dt.y),g.copy(l[ut]).add(m).add(f),At(g.x,g.y,g.z)):At(dt.x,dt.y,n/u*ut)}for(var pt=d-1;0<=pt;pt--){for(var ft=pt/d,mt=r*Math.cos(ft*Math.PI/2),gt=a*Math.sin(ft*Math.PI/2)+o,vt=0,yt=S.length;vt<yt;vt++){var _t=C(S[vt],D[vt],gt);At(_t.x,_t.y,n+mt)}for(var xt=0,bt=x.length;xt<bt;xt++){var wt=x[xt];k=z[xt];for(var Tt=0,Mt=wt.length;Tt<Mt;Tt++){var St=C(wt[Tt],k[Tt],gt);v?At(St.x,St.y+l[u-1].y,l[u-1].x+mt):At(St.x,St.y,n+mt)}}}function Et(t,e){for(var n=t.length;0<=--n;){var i=n,r=n-1;r<0&&(r=t.length-1);for(var a=0,o=u+2*d;a<o;a++){var s=R*a,l=R*(a+1);!function(t,e,n,i){Ct(t),Ct(e),Ct(i),Ct(e),Ct(n),Ct(i);var r=Dt.length/3,a=c.generateSideWallUV(Ot,Dt,r-6,r-3,r-2,r-1);Rt(a[0]),Rt(a[1]),Rt(a[3]),Rt(a[1]),Rt(a[2]),Rt(a[3])}(e+i+s,e+r+s,e+r+l,e+i+l)}}}function At(t,e,n){i.push(t),i.push(e),i.push(n)}function Lt(t,e,n){Ct(t),Ct(e),Ct(n);var i=Dt.length/3,r=c.generateTopUV(Ot,Dt,i-3,i-2,i-1);Rt(r[0]),Rt(r[1]),Rt(r[2])}function Ct(t){Dt.push(i[3*t+0]),Dt.push(i[3*t+1]),Dt.push(i[3*t+2])}function Rt(t){Nt.push(t.x),Nt.push(t.y)}!function(){var t=Dt.length/3;if(h){for(var e=0*R,n=0;n<P;n++){var i=M[n];Lt(i[2]+e,i[1]+e,i[0]+e)}e=R*(u+2*d);for(var r=0;r<P;r++){var a=M[r];Lt(a[0]+e,a[1]+e,a[2]+e)}}else{for(var o=0;o<P;o++){var s=M[o];Lt(s[2],s[1],s[0])}for(var l=0;l<P;l++){var c=M[l];Lt(c[0]+R*u,c[1]+R*u,c[2]+R*u)}}Ot.addGroup(t,Dt.length/3-t,0)}(),function(){var t=Dt.length/3,e=0;Et(S,e),e+=S.length;for(var n=0,i=x.length;n<i;n++){var r=x[n];Et(r,e),e+=r.length}Ot.addGroup(t,Dt.length/3-t,1)}()}(t[n]);return e.setAttribute("position",new bn(Dt,3)),e.setAttribute("uv",new bn(Nt,2)),e.computeVertexNormals(),e}var Ks,tl=(C(el,Ks=Wo),el.prototype.toJSON=function(){var t=Ks.prototype.toJSON.call(this);return function(t,e,n){if(n.shapes=[],Array.isArray(t))for(var i=0,r=t.length;i<r;i++){var a=t[i];n.shapes.push(a.uuid)}else n.shapes.push(t.uuid);return void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,t)},el);function el(t,e){var n;return(n=Ks.call(this)||this).type="ExtrudeGeometry",n.parameters={shapes:t,options:e},n.fromBufferGeometry(new Js(t,e)),n.mergeVertices(),n}var nl,il,rl,al,ol,sl,ll=(C(_l,sl=hs),_l),cl=(C(yl,ol=Wo),yl),ul=(C(vl,al=Bn),vl),hl=(C(gl,rl=Wo),gl),dl=(C(ml,il=hs),ml),pl=(C(fl,nl=Wo),fl);function fl(t,e){var n;return(n=nl.call(this)||this).type="OctahedronGeometry",n.parameters={radius:t,detail:e},n.fromBufferGeometry(new dl(t,e)),n.mergeVertices(),n}function ml(t,e){var n;return void 0===t&&(t=1),void 0===e&&(e=0),(n=il.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e)||this).type="OctahedronBufferGeometry",n.parameters={radius:t,detail:e},n}function gl(t,e,n,i){var r;return(r=rl.call(this)||this).type="LatheGeometry",r.parameters={points:t,segments:e,phiStart:n,phiLength:i},r.fromBufferGeometry(new ul(t,e,n,i)),r.mergeVertices(),r}function vl(t,e,n,i){var r;void 0===e&&(e=12),void 0===n&&(n=0),void 0===i&&(i=2*Math.PI),(r=al.call(this)||this).type="LatheBufferGeometry",r.parameters={points:t,segments:e,phiStart:n,phiLength:i},e=Math.floor(e),i=Pt.clamp(i,0,2*Math.PI);for(var a=[],o=[],s=[],l=1/e,c=new Bt,u=new It,h=0;h<=e;h++)for(var d=n+h*l*i,p=Math.sin(d),f=Math.cos(d),m=0;m<=t.length-1;m++)c.x=t[m].x*p,c.y=t[m].y,c.z=t[m].x*f,o.push(c.x,c.y,c.z),u.x=h/e,u.y=m/(t.length-1),s.push(u.x,u.y);for(var g=0;g<e;g++)for(var v=0;v<t.length-1;v++){var y=v+g*t.length,_=y+t.length,x=y+t.length+1,b=y+1;a.push(y,_,b),a.push(_,x,b)}if(r.setIndex(a),r.setAttribute("position",new bn(o,3)),r.setAttribute("uv",new bn(s,2)),r.computeVertexNormals(),i===2*Math.PI)for(var w=r.attributes.normal.array,T=new Bt,M=new Bt,S=new Bt,E=e*t.length*3,A=0,L=0;A<t.length;A++,L+=3)T.x=w[L+0],T.y=w[L+1],T.z=w[L+2],M.x=w[E+L+0],M.y=w[E+L+1],M.z=w[E+L+2],S.addVectors(T,M).normalize(),w[L+0]=w[E+L+0]=S.x,w[L+1]=w[E+L+1]=S.y,w[L+2]=w[E+L+2]=S.z;return r}function yl(t,e){var n;return(n=ol.call(this)||this).type="IcosahedronGeometry",n.parameters={radius:t,detail:e},n.fromBufferGeometry(new ll(t,e)),n.mergeVertices(),n}function _l(t,e){var n;void 0===t&&(t=1),void 0===e&&(e=0);var i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1];return(n=sl.call(this,r,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e)||this).type="IcosahedronBufferGeometry",n.parameters={radius:t,detail:e},n}function xl(t,e,n){Bn.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:n};var i=[],r=[],a=[],o=[],s=new Bt,l=new Bt,c=new Bt,u=new Bt,h=new Bt;t.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");for(var d=e+1,p=0;p<=n;p++)for(var f=p/n,m=0;m<=e;m++){var g=m/e;t(g,f,l),r.push(l.x,l.y,l.z),0<=g-1e-5?(t(g-1e-5,f,c),u.subVectors(l,c)):(t(1e-5+g,f,c),u.subVectors(c,l)),0<=f-1e-5?(t(g,f-1e-5,c),h.subVectors(l,c)):(t(g,1e-5+f,c),h.subVectors(c,l)),s.crossVectors(u,h).normalize(),a.push(s.x,s.y,s.z),o.push(g,f)}for(var v=0;v<n;v++)for(var y=0;y<e;y++){var _=v*d+y,x=v*d+y+1,b=(v+1)*d+y+1,w=(v+1)*d+y;i.push(_,x,w),i.push(x,b,w)}this.setIndex(i),this.setAttribute("position",new bn(r,3)),this.setAttribute("normal",new bn(a,3)),this.setAttribute("uv",new bn(o,2))}function bl(t,e,n){Wo.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new xl(t,e,n)),this.mergeVertices()}(xl.prototype=Object.create(Bn.prototype)).constructor=xl,(bl.prototype=Object.create(Wo.prototype)).constructor=bl;var wl,Tl,Ml,Sl,El,Al=(C(Bl,El=Wo),Bl),Ll=(C(Il,Sl=Wo),Il),Cl=(C(Nl,Ml=Bn),Nl),Rl=(C(Dl,Tl=Wo),Dl),Pl=(C(Ol,wl=Bn),Ol.prototype.toJSON=function(){var t=Bn.prototype.toJSON.call(this);return function(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,i=t.length;n<i;n++){var r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)},Ol);function Ol(t,b){var e;void 0===b&&(b=12),(e=wl.call(this)||this).type="ShapeBufferGeometry",e.parameters={shapes:t,curveSegments:b};var w=[],T=[],M=[],S=[],n=0,E=0;if(!1===Array.isArray(t))r(t);else for(var i=0;i<t.length;i++)r(t[i]),e.addGroup(n,E,i),n+=E,E=0;function r(t){var e=T.length/3,n=t.extractPoints(b),i=n.shape,r=n.holes;!1===qs.isClockWise(i)&&(i=i.reverse());for(var a=0,o=r.length;a<o;a++){var s=r[a];!0===qs.isClockWise(s)&&(r[a]=s.reverse())}for(var l=qs.triangulateShape(i,r),c=0,u=r.length;c<u;c++)var h=r[c],i=i.concat(h);for(var d=0,p=i.length;d<p;d++){var f=i[d];T.push(f.x,f.y,0),M.push(0,0,1),S.push(f.x,f.y)}for(var m=0,g=l.length;m<g;m++){var v=l[m],y=v[0]+e,_=v[1]+e,x=v[2]+e;w.push(y,_,x),E+=3}}return e.setIndex(w),e.setAttribute("position",new bn(T,3)),e.setAttribute("normal",new bn(M,3)),e.setAttribute("uv",new bn(S,2)),e}function Dl(t,e,n,i,r,a){var o;return(o=Tl.call(this)||this).type="RingGeometry",o.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},o.fromBufferGeometry(new Cl(t,e,n,i,r,a)),o.mergeVertices(),o}function Nl(t,e,n,i,r,a){var o;void 0===t&&(t=.5),void 0===e&&(e=1),void 0===n&&(n=8),void 0===i&&(i=1),void 0===r&&(r=0),void 0===a&&(a=2*Math.PI),(o=Ml.call(this)||this).type="RingBufferGeometry",o.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},n=Math.max(3,n);for(var s=[],l=[],c=[],u=[],h=t,d=(e-t)/(i=Math.max(1,i)),p=new Bt,f=new It,m=0;m<=i;m++){for(var g=0;g<=n;g++){var v=r+g/n*a;p.x=h*Math.cos(v),p.y=h*Math.sin(v),l.push(p.x,p.y,p.z),c.push(0,0,1),f.x=(p.x/e+1)/2,f.y=(p.y/e+1)/2,u.push(f.x,f.y)}h+=d}for(var y=0;y<i;y++)for(var _=y*(n+1),x=0;x<n;x++){var b=x+_,w=b+n+1,T=b+n+2,M=b+1;s.push(b,w,M),s.push(w,T,M)}return o.setIndex(s),o.setAttribute("position",new bn(l,3)),o.setAttribute("normal",new bn(c,3)),o.setAttribute("uv",new bn(u,2)),o}function Il(t,e,n,i){var r;return(r=Sl.call(this)||this).type="PolyhedronGeometry",r.parameters={vertices:t,indices:e,radius:n,detail:i},r.fromBufferGeometry(new hs(t,e,n,i)),r.mergeVertices(),r}function Bl(t,e,n,i){var r;return(r=El.call(this)||this).type="PlaneGeometry",r.parameters={width:t,height:e,widthSegments:n,heightSegments:i},r.fromBufferGeometry(new Mi(t,e,n,i)),r.mergeVertices(),r}var Fl,kl=(C(zl,Fl=Wo),zl.prototype.toJSON=function(){var t=Wo.prototype.toJSON.call(this);return function(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,i=t.length;n<i;n++){var r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)},zl);function zl(t,e){var n;return(n=Fl.call(this)||this).type="ShapeGeometry","object"==typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),n.parameters={shapes:t,curveSegments:e},n.fromBufferGeometry(new Pl(t,e)),n.mergeVertices(),n}var Hl,Ul,Gl,jl,Vl,Wl,ql,Xl,Yl,Zl,Jl,Ql,$l,Kl=(C(Sc,$l=Bn),Sc),tc=(C(Mc,Ql=Wo),Mc),ec=(C(Tc,Jl=hs),Tc),nc=(C(wc,Zl=Wo),wc),ic=(C(bc,Yl=Js),bc),rc=(C(xc,Xl=Wo),xc),ac=(C(_c,ql=Bn),_c),oc=(C(yc,Wl=Wo),yc),sc=(C(vc,Vl=Bn),vc),lc=(C(gc,jl=Wo),gc),cc=(C(mc,Gl=Bn),mc.prototype.toJSON=function(){var t=Bn.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t},mc),uc=(C(fc,Ul=Wo),fc),hc=(C(pc,Hl=Bn),pc),dc=Object.freeze({__proto__:null,BoxGeometry:rs,BoxBufferGeometry:ri,CircleGeometry:os,CircleBufferGeometry:as,ConeGeometry:cs,ConeBufferGeometry:us,CylinderGeometry:ls,CylinderBufferGeometry:ss,DodecahedronGeometry:ps,DodecahedronBufferGeometry:ds,EdgesGeometry:ys,ExtrudeGeometry:tl,ExtrudeBufferGeometry:Js,IcosahedronGeometry:cl,IcosahedronBufferGeometry:ll,LatheGeometry:hl,LatheBufferGeometry:ul,OctahedronGeometry:pl,OctahedronBufferGeometry:dl,ParametricGeometry:bl,ParametricBufferGeometry:xl,PlaneGeometry:Al,PlaneBufferGeometry:Mi,PolyhedronGeometry:Ll,PolyhedronBufferGeometry:hs,RingGeometry:Rl,RingBufferGeometry:Cl,ShapeGeometry:kl,ShapeBufferGeometry:Pl,SphereGeometry:tc,SphereBufferGeometry:Kl,TetrahedronGeometry:nc,TetrahedronBufferGeometry:ec,TextGeometry:rc,TextBufferGeometry:ic,TorusGeometry:oc,TorusBufferGeometry:ac,TorusKnotGeometry:lc,TorusKnotBufferGeometry:sc,TubeGeometry:uc,TubeBufferGeometry:cc,WireframeGeometry:hc});function pc(t){var e;(e=Hl.call(this)||this).type="WireframeGeometry";var n=[],i=[0,0],r={},a=["a","b","c"];if(t&&t.isGeometry){for(var o=t.faces,s=0,l=o.length;s<l;s++)for(var c=o[s],u=0;u<3;u++){var h=c[a[u]],d=c[a[(u+1)%3]];i[0]=Math.min(h,d),i[1]=Math.max(h,d);var p=i[0]+","+i[1];void 0===r[p]&&(r[p]={index1:i[0],index2:i[1]})}for(var f in r){var m=r[f],g=t.vertices[m.index1];n.push(g.x,g.y,g.z),g=t.vertices[m.index2],n.push(g.x,g.y,g.z)}}else if(t&&t.isBufferGeometry){var v=new Bt;if(null!==t.index){var y=t.attributes.position,_=t.index,x=t.groups;0===x.length&&(x=[{start:0,count:_.count,materialIndex:0}]);for(var b=0,w=x.length;b<w;++b)for(var T=x[b],M=T.start,S=M,E=M+T.count;S<E;S+=3)for(var A=0;A<3;A++){var L=_.getX(S+A),C=_.getX(S+(A+1)%3);i[0]=Math.min(L,C),i[1]=Math.max(L,C);var R=i[0]+","+i[1];void 0===r[R]&&(r[R]={index1:i[0],index2:i[1]})}for(var P in r){var O=r[P];v.fromBufferAttribute(y,O.index1),n.push(v.x,v.y,v.z),v.fromBufferAttribute(y,O.index2),n.push(v.x,v.y,v.z)}}else for(var D=t.attributes.position,N=0,I=D.count/3;N<I;N++)for(var B=0;B<3;B++){var F=3*N+B;v.fromBufferAttribute(D,F),n.push(v.x,v.y,v.z);var k=3*N+(B+1)%3;v.fromBufferAttribute(D,k),n.push(v.x,v.y,v.z)}}return e.setAttribute("position",new bn(n,3)),e}function fc(t,e,n,i,r,a){var o;(o=Ul.call(this)||this).type="TubeGeometry",o.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:r},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed.");var s=new cc(t,e,n,i,r);return o.tangents=s.tangents,o.normals=s.normals,o.binormals=s.binormals,o.fromBufferGeometry(s),o.mergeVertices(),o}function mc(s,l,c,u,e){var t;void 0===l&&(l=64),void 0===c&&(c=1),void 0===u&&(u=8),void 0===e&&(e=!1),(t=Gl.call(this)||this).type="TubeBufferGeometry",t.parameters={path:s,tubularSegments:l,radius:c,radialSegments:u,closed:e};var h=s.computeFrenetFrames(l,e);t.tangents=h.tangents,t.normals=h.normals,t.binormals=h.binormals;var d=new Bt,p=new Bt,n=new It,f=new Bt,m=[],g=[],i=[],o=[];function r(t){f=s.getPointAt(t/l,f);for(var e=h.normals[t],n=h.binormals[t],i=0;i<=u;i++){var r=i/u*Math.PI*2,a=Math.sin(r),o=-Math.cos(r);p.x=o*e.x+a*n.x,p.y=o*e.y+a*n.y,p.z=o*e.z+a*n.z,p.normalize(),g.push(p.x,p.y,p.z),d.x=f.x+c*p.x,d.y=f.y+c*p.y,d.z=f.z+c*p.z,m.push(d.x,d.y,d.z)}}return function(){for(var t=0;t<l;t++)r(t);r(!1===e?l:0),function(){for(var t=0;t<=l;t++)for(var e=0;e<=u;e++)n.x=t/l,n.y=e/u,i.push(n.x,n.y)}(),function(){for(var t=1;t<=l;t++)for(var e=1;e<=u;e++){var n=(u+1)*(t-1)+(e-1),i=(u+1)*t+(e-1),r=(u+1)*t+e,a=(u+1)*(t-1)+e;o.push(n,i,a),o.push(i,r,a)}}()}(),t.setIndex(o),t.setAttribute("position",new bn(m,3)),t.setAttribute("normal",new bn(g,3)),t.setAttribute("uv",new bn(i,2)),t}function gc(t,e,n,i,r,a,o){var s;return(s=jl.call(this)||this).type="TorusKnotGeometry",s.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:a},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),s.fromBufferGeometry(new sc(t,e,n,i,r,a)),s.mergeVertices(),s}function vc(t,e,n,i,r,a){var o;void 0===t&&(t=1),void 0===e&&(e=.4),void 0===n&&(n=64),void 0===i&&(i=8),void 0===r&&(r=2),void 0===a&&(a=3),(o=Vl.call(this)||this).type="TorusKnotBufferGeometry",o.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:a},n=Math.floor(n),i=Math.floor(i);for(var s=[],l=[],c=[],u=[],h=new Bt,d=new Bt,p=new Bt,f=new Bt,m=new Bt,g=new Bt,v=new Bt,y=0;y<=n;++y){var _=y/n*r*Math.PI*2;R(_,r,a,t,p),R(.01+_,r,a,t,f),g.subVectors(f,p),v.addVectors(f,p),m.crossVectors(g,v),v.crossVectors(m,g),m.normalize(),v.normalize();for(var x=0;x<=i;++x){var b=x/i*Math.PI*2,w=-e*Math.cos(b),T=e*Math.sin(b);h.x=p.x+(w*v.x+T*m.x),h.y=p.y+(w*v.y+T*m.y),h.z=p.z+(w*v.z+T*m.z),l.push(h.x,h.y,h.z),d.subVectors(h,p).normalize(),c.push(d.x,d.y,d.z),u.push(y/n),u.push(x/i)}}for(var M=1;M<=n;M++)for(var S=1;S<=i;S++){var E=(i+1)*(M-1)+(S-1),A=(i+1)*M+(S-1),L=(i+1)*M+S,C=(i+1)*(M-1)+S;s.push(E,A,C),s.push(A,L,C)}function R(t,e,n,i,r){var a=Math.cos(t),o=Math.sin(t),s=n/e*t,l=Math.cos(s);r.x=i*(2+l)*.5*a,r.y=i*(2+l)*o*.5,r.z=i*Math.sin(s)*.5}return o.setIndex(s),o.setAttribute("position",new bn(l,3)),o.setAttribute("normal",new bn(c,3)),o.setAttribute("uv",new bn(u,2)),o}function yc(t,e,n,i,r){var a;return(a=Wl.call(this)||this).type="TorusGeometry",a.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},a.fromBufferGeometry(new ac(t,e,n,i,r)),a.mergeVertices(),a}function _c(t,e,n,i,r){var a;void 0===t&&(t=1),void 0===e&&(e=.4),void 0===n&&(n=8),void 0===i&&(i=6),void 0===r&&(r=2*Math.PI),(a=ql.call(this)||this).type="TorusBufferGeometry",a.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},n=Math.floor(n),i=Math.floor(i);for(var o=[],s=[],l=[],c=[],u=new Bt,h=new Bt,d=new Bt,p=0;p<=n;p++)for(var f=0;f<=i;f++){var m=f/i*r,g=p/n*Math.PI*2;h.x=(t+e*Math.cos(g))*Math.cos(m),h.y=(t+e*Math.cos(g))*Math.sin(m),h.z=e*Math.sin(g),s.push(h.x,h.y,h.z),u.x=t*Math.cos(m),u.y=t*Math.sin(m),d.subVectors(h,u).normalize(),l.push(d.x,d.y,d.z),c.push(f/i),c.push(p/n)}for(var v=1;v<=n;v++)for(var y=1;y<=i;y++){var _=(i+1)*v+y-1,x=(i+1)*(v-1)+y-1,b=(i+1)*(v-1)+y,w=(i+1)*v+y;o.push(_,x,w),o.push(x,b,w)}return a.setIndex(o),a.setAttribute("position",new bn(s,3)),a.setAttribute("normal",new bn(l,3)),a.setAttribute("uv",new bn(c,2)),a}function xc(t,e){var n;return(n=Xl.call(this)||this).type="TextGeometry",n.parameters={text:t,parameters:e},n.fromBufferGeometry(new ic(t,e)),n.mergeVertices(),n}function bc(t,e){var n;void 0===e&&(e={});var i=e.font;if(!i||!i.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Bn||k(n);var r=i.generateShapes(t,e.size);return e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),(n=Yl.call(this,r,e)||this).type="TextBufferGeometry",n}function wc(t,e){var n;return(n=Zl.call(this)||this).type="TetrahedronGeometry",n.parameters={radius:t,detail:e},n.fromBufferGeometry(new ec(t,e)),n.mergeVertices(),n}function Tc(t,e){var n;return void 0===t&&(t=1),void 0===e&&(e=0),(n=Jl.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e)||this).type="TetrahedronBufferGeometry",n.parameters={radius:t,detail:e},n}function Mc(t,e,n,i,r,a,o){var s;return(s=Ql.call(this)||this).type="SphereGeometry",s.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:o},s.fromBufferGeometry(new Kl(t,e,n,i,r,a,o)),s.mergeVertices(),s}function Sc(t,e,n,i,r,a,o){var s;void 0===t&&(t=1),void 0===e&&(e=8),void 0===n&&(n=6),void 0===i&&(i=0),void 0===r&&(r=2*Math.PI),void 0===a&&(a=0),void 0===o&&(o=Math.PI),(s=$l.call(this)||this).type="SphereBufferGeometry",s.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:o},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));for(var l=Math.min(a+o,Math.PI),c=0,u=[],h=new Bt,d=new Bt,p=[],f=[],m=[],g=[],v=0;v<=n;v++){var y=[],_=v/n,x=0;0==v&&0==a?x=.5/e:v==n&&l==Math.PI&&(x=-.5/e);for(var b=0;b<=e;b++){var w=b/e;h.x=-t*Math.cos(i+w*r)*Math.sin(a+_*o),h.y=t*Math.cos(a+_*o),h.z=t*Math.sin(i+w*r)*Math.sin(a+_*o),f.push(h.x,h.y,h.z),d.copy(h).normalize(),m.push(d.x,d.y,d.z),g.push(w+x,1-_),y.push(c++)}u.push(y)}for(var T=0;T<n;T++)for(var M=0;M<e;M++){var S=u[T][M+1],E=u[T][M],A=u[T+1][M],L=u[T+1][M+1];(0!==T||0<a)&&p.push(S,E,L),(T!==n-1||l<Math.PI)&&p.push(E,A,L)}return s.setIndex(p),s.setAttribute("position",new bn(f,3)),s.setAttribute("normal",new bn(m,3)),s.setAttribute("uv",new bn(g,2)),s}function Ec(t){ln.call(this),this.type="ShadowMaterial",this.color=new en(0),this.transparent=!0,this.setValues(t)}function Ac(t){ci.call(this,t),this.type="RawShaderMaterial"}function Lc(t){ln.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new en(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new en(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new It(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(t)}function Cc(t){Lc.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new It(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(t){this.reflectivity=Pt.clamp(2.5*(t-1)/(t+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(t)}function Rc(t){ln.call(this),this.type="MeshPhongMaterial",this.color=new en(16777215),this.specular=new en(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new en(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new It(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Pc(t){ln.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new en(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new en(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new It(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Oc(t){ln.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new It(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Dc(t){ln.call(this),this.type="MeshLambertMaterial",this.color=new en(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new en(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Nc(t){ln.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new en(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new It(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Ic(t){_o.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}((Ec.prototype=Object.create(ln.prototype)).constructor=Ec).prototype.isShadowMaterial=!0,Ec.prototype.copy=function(t){return ln.prototype.copy.call(this,t),this.color.copy(t.color),this},((Ac.prototype=Object.create(ci.prototype)).constructor=Ac).prototype.isRawShaderMaterial=!0,((Lc.prototype=Object.create(ln.prototype)).constructor=Lc).prototype.isMeshStandardMaterial=!0,Lc.prototype.copy=function(t){return ln.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.vertexTangents=t.vertexTangents,this},((Cc.prototype=Object.create(Lc.prototype)).constructor=Cc).prototype.isMeshPhysicalMaterial=!0,Cc.prototype.copy=function(t){return Lc.prototype.copy.call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.reflectivity=t.reflectivity,t.sheen?this.sheen=(this.sheen||new en).copy(t.sheen):this.sheen=null,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this},((Rc.prototype=Object.create(ln.prototype)).constructor=Rc).prototype.isMeshPhongMaterial=!0,Rc.prototype.copy=function(t){return ln.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},((Pc.prototype=Object.create(ln.prototype)).constructor=Pc).prototype.isMeshToonMaterial=!0,Pc.prototype.copy=function(t){return ln.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},((Oc.prototype=Object.create(ln.prototype)).constructor=Oc).prototype.isMeshNormalMaterial=!0,Oc.prototype.copy=function(t){return ln.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},((Dc.prototype=Object.create(ln.prototype)).constructor=Dc).prototype.isMeshLambertMaterial=!0,Dc.prototype.copy=function(t){return ln.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},((Nc.prototype=Object.create(ln.prototype)).constructor=Nc).prototype.isMeshMatcapMaterial=!0,Nc.prototype.copy=function(t){return ln.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},((Ic.prototype=Object.create(_o.prototype)).constructor=Ic).prototype.isLineDashedMaterial=!0,Ic.prototype.copy=function(t){return _o.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var Bc=Object.freeze({__proto__:null,ShadowMaterial:Ec,SpriteMaterial:za,RawShaderMaterial:Ac,ShaderMaterial:ci,PointsMaterial:Ro,MeshPhysicalMaterial:Cc,MeshStandardMaterial:Lc,MeshPhongMaterial:Rc,MeshToonMaterial:Pc,MeshNormalMaterial:Oc,MeshLambertMaterial:Dc,MeshDepthMaterial:ma,MeshDistanceMaterial:ga,MeshBasicMaterial:cn,MeshMatcapMaterial:Nc,LineDashedMaterial:Ic,LineBasicMaterial:_o,Material:ln}),Fc={arraySlice:function(t,e,n){return Fc.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(n){for(var t=n.length,e=new Array(t),i=0;i!==t;++i)e[i]=i;return e.sort(function(t,e){return n[t]-n[e]}),e},sortedArray:function(t,e,n){for(var i=t.length,r=new t.constructor(i),a=0,o=0;o!==i;++a)for(var s=n[a]*e,l=0;l!==e;++l)r[o++]=t[s+l];return r},flattenJSON:function(t,e,n,i){for(var r=1,a=t[0];void 0!==a&&void 0===a[i];)a=t[r++];if(void 0!==a){var o=a[i];if(void 0!==o)if(Array.isArray(o))for(;void 0!==(o=a[i])&&(e.push(a.time),n.push.apply(n,o)),void 0!==(a=t[r++]););else if(void 0!==o.toArray)for(;void 0!==(o=a[i])&&(e.push(a.time),o.toArray(n,n.length)),void 0!==(a=t[r++]););else for(;void 0!==(o=a[i])&&(e.push(a.time),n.push(o)),void 0!==(a=t[r++]););}},subclip:function(t,e,n,i,r){void 0===r&&(r=30);var a=t.clone();a.name=e;for(var o=[],s=0;s<a.tracks.length;++s){for(var l=a.tracks[s],c=l.getValueSize(),u=[],h=[],d=0;d<l.times.length;++d){var p=l.times[d]*r;if(!(p<n||i<=p)){u.push(l.times[d]);for(var f=0;f<c;++f)h.push(l.values[d*c+f])}}0!==u.length&&(l.times=Fc.convertArray(u,l.times.constructor),l.values=Fc.convertArray(h,l.values.constructor),o.push(l))}a.tracks=o;for(var m=1/0,g=0;g<a.tracks.length;++g)m>a.tracks[g].times[0]&&(m=a.tracks[g].times[0]);for(var v=0;v<a.tracks.length;++v)a.tracks[v].shift(-1*m);return a.resetDuration(),a},makeClipAdditive:function(b,t,w,e){void 0===t&&(t=0),void 0===w&&(w=b),void 0===e&&(e=30),e<=0&&(e=30);for(var n=w.tracks.length,T=t/e,i=0;i<n;++i)!function(t){var e=w.tracks[t],n=e.ValueTypeName;if("bool"===n||"string"===n)return;var i=b.tracks.find(function(t){return t.name===e.name&&t.ValueTypeName===n});if(void 0===i)return;var r=0,a=e.getValueSize();e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(r=a/3);var o=0,s=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=s/3);var l,c,u,h,d,p,f=e.times.length-1,m=void 0;m=T<=e.times[0]?(l=a-r,Fc.arraySlice(e.values,r,l)):T>=e.times[f]?(u=(c=f*a+r)+a-r,Fc.arraySlice(e.values,c,u)):(p=a-(d=r),(h=e.createInterpolant()).evaluate(T),Fc.arraySlice(h.resultBuffer,d,p)),"quaternion"===n&&(new ut).fromArray(m).normalize().conjugate().toArray(m);for(var g=i.times.length,v=0;v<g;++v){var y=v*s+o;if("quaternion"===n)ut.multiplyQuaternionsFlat(i.values,y,m,0,i.values,y);else for(var _=s-2*o,x=0;x<_;++x)i.values[y+x]-=m[x]}}(i);return b.blendMode=2501,b}};function kc(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function zc(t,e,n,i){kc.call(this,t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Hc(t,e,n,i){kc.call(this,t,e,n,i)}function Uc(t,e,n,i){kc.call(this,t,e,n,i)}function Gc(t,e,n,i){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Fc.convertArray(e,this.TimeBufferType),this.values=Fc.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}function jc(t,e,n){Gc.call(this,t,e,n)}function Vc(t,e,n,i){Gc.call(this,t,e,n,i)}function Wc(t,e,n,i){Gc.call(this,t,e,n,i)}function qc(t,e,n,i){kc.call(this,t,e,n,i)}function Xc(t,e,n,i){Gc.call(this,t,e,n,i)}function Yc(t,e,n,i){Gc.call(this,t,e,n,i)}function Zc(t,e,n,i){Gc.call(this,t,e,n,i)}function Jc(t,e,n,i){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.blendMode=void 0!==i?i:2500,this.uuid=Pt.generateUUID(),this.duration<0&&this.resetDuration()}Object.assign(kc.prototype,{evaluate:function(t){var e,n=this.parameterPositions,i=this._cachedIndex,r=n[i],a=n[i-1];t:{e:{n:{i:if(!(t<r)){for(var o=i+2;;){if(void 0===r){if(t<a)break i;return i=n.length,this._cachedIndex=i,this.afterEnd_(i-1,t,a)}if(i===o)break;if(a=r,t<(r=n[++i]))break e}e=n.length;break n}if(a<=t)break t;var s=n[1];t<s&&(i=2,a=s);for(var l=i-2;;){if(void 0===a)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(i===l)break;if(r=a,t>=(a=n[--i-1]))break e}e=i,i=0}for(;i<e;){var c=i+e>>>1;t<n[c]?e=c:i=1+c}if(r=n[i],void 0===(a=n[i-1]))return this._cachedIndex=0,this.beforeStart_(0,t,r);if(void 0===r)return i=n.length,this._cachedIndex=i,this.afterEnd_(i-1,a,t)}this._cachedIndex=i,this.intervalChanged_(i,a,r)}return this.interpolate_(i,a,t,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i,a=0;a!==i;++a)e[a]=n[r+a];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(kc.prototype,{beforeStart_:kc.prototype.copySampleValue_,afterEnd_:kc.prototype.copySampleValue_}),zc.prototype=Object.assign(Object.create(kc.prototype),{constructor:zc,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(t,e,n){var i=this.parameterPositions,r=t-2,a=t+1,o=i[r],s=i[a];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:r=t,o=2*e-n;break;case 2402:o=e+i[r=i.length-2]-i[r+1];break;default:r=t,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:a=t,s=2*n-e;break;case 2402:s=n+i[a=1]-i[0];break;default:a=t-1,s=e}var l=.5*(n-e),c=this.valueSize;this._weightPrev=l/(e-o),this._weightNext=l/(s-n),this._offsetPrev=r*c,this._offsetNext=a*c},interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,l=s-o,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-e)/(i-e),f=p*p,m=f*p,g=-h*m+2*h*f-h*p,v=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,_=d*m-d*f,x=0;x!==o;++x)r[x]=g*a[c+x]+v*a[l+x]+y*a[s+x]+_*a[u+x];return r}}),Hc.prototype=Object.assign(Object.create(kc.prototype),{constructor:Hc,interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,l=s-o,c=(n-e)/(i-e),u=1-c,h=0;h!==o;++h)r[h]=a[l+h]*u+a[s+h]*c;return r}}),Uc.prototype=Object.assign(Object.create(kc.prototype),{constructor:Uc,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(Gc,{toJSON:function(t){var e,n,i=t.constructor;return void 0!==i.toJSON?e=i.toJSON(t):(e={name:t.name,times:Fc.convertArray(t.times,Array),values:Fc.convertArray(t.values,Array)},(n=t.getInterpolation())!==t.DefaultInterpolation&&(e.interpolation=n)),e.type=t.ValueTypeName,e}}),Object.assign(Gc.prototype,{constructor:Gc,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(t){return new Uc(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new Hc(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new zc(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case 2300:e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0!==e)return this.createInterpolant=e,this;var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]*=t;return this},trim:function(t,e){for(var n,i=this.times,r=i.length,a=0,o=r-1;a!==r&&i[a]<t;)++a;for(;-1!==o&&i[o]>e;)--o;return++o,0===a&&o===r||(o<=a&&(a=(o=Math.max(o,1))-1),n=this.getValueSize(),this.times=Fc.arraySlice(i,a,o),this.values=Fc.arraySlice(this.values,a*n,o*n)),this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var a=null,o=0;o!==r;o++){var s=n[o];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),t=!1;break}if(null!==a&&s<a){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),t=!1;break}a=s}if(void 0!==i&&Fc.isTypedArray(i))for(var l=0,c=i.length;l!==c;++l){var u=i[l];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,u),t=!1;break}}return t},optimize:function(){for(var t=Fc.arraySlice(this.times),e=Fc.arraySlice(this.values),n=this.getValueSize(),i=2302===this.getInterpolation(),r=t.length-1,a=1,o=1;o<r;++o){var s=!1,l=t[o];if(l!==t[o+1]&&(1!==o||l!==l[0]))if(i)s=!0;else for(var c=o*n,u=c-n,h=c+n,d=0;d!==n;++d){var p=e[c+d];if(p!==e[u+d]||p!==e[h+d]){s=!0;break}}if(s){if(o!==a){t[a]=t[o];for(var f=o*n,m=a*n,g=0;g!==n;++g)e[m+g]=e[f+g]}++a}}if(0<r){t[a]=t[r];for(var v=r*n,y=a*n,_=0;_!==n;++_)e[y+_]=e[v+_];++a}return a!==t.length?(this.times=Fc.arraySlice(t,0,a),this.values=Fc.arraySlice(e,0,a*n)):(this.times=t,this.values=e),this},clone:function(){var t=Fc.arraySlice(this.times,0),e=Fc.arraySlice(this.values,0),n=new this.constructor(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}),jc.prototype=Object.assign(Object.create(Gc.prototype),{constructor:jc,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Vc.prototype=Object.assign(Object.create(Gc.prototype),{constructor:Vc,ValueTypeName:"color"}),Wc.prototype=Object.assign(Object.create(Gc.prototype),{constructor:Wc,ValueTypeName:"number"}),qc.prototype=Object.assign(Object.create(kc.prototype),{constructor:qc,interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-e)/(i-e),l=t*o,c=l+o;l!==c;l+=4)ut.slerpFlat(r,0,a,l-o,a,l,s);return r}}),Xc.prototype=Object.assign(Object.create(Gc.prototype),{constructor:Xc,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(t){return new qc(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),Yc.prototype=Object.assign(Object.create(Gc.prototype),{constructor:Yc,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Zc.prototype=Object.assign(Object.create(Gc.prototype),{constructor:Zc,ValueTypeName:"vector"}),Object.assign(Jc,{parse:function(t){for(var e=[],n=t.tracks,i=1/(t.fps||1),r=0,a=n.length;r!==a;++r)e.push(function(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e,n,i=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Wc;case"vector":case"vector2":case"vector3":case"vector4":return Zc;case"color":return Vc;case"quaternion":return Xc;case"bool":case"boolean":return jc;case"string":return Yc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);return void 0===t.times&&(e=[],n=[],Fc.flattenJSON(t.keys,e,n,"value"),t.times=e,t.values=n),void 0!==i.parse?i.parse(t):new i(t.name,t.times,t.values,t.interpolation)}(n[r]).scale(i));var o=new Jc(t.name,t.duration,e,t.blendMode);return o.uuid=t.uuid,o},toJSON:function(t){for(var e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode},r=0,a=n.length;r!==a;++r)e.push(Gc.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(t,e,n,i){for(var r=e.length,a=[],o=0;o<r;o++){var s=[];(c=[]).push((o+r-1)%r,o,(o+1)%r),s.push(0,1,0);var l=Fc.getKeyframeOrder(c),c=Fc.sortedArray(c,1,l),s=Fc.sortedArray(s,1,l);i||0!==c[0]||(c.push(r),s.push(s[0])),a.push(new Wc(".morphTargetInfluences["+e[o].name+"]",c,s).scale(1/n))}return new Jc(t,-1,a)},findByName:function(t,e){var n=t;Array.isArray(t)||(n=t.geometry&&t.geometry.animations||t.animations);for(var i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,a=0,o=t.length;a<o;a++){var s,l,c=t[a],u=c.name.match(r);u&&1<u.length&&((l=i[s=u[1]])||(i[s]=l=[]),l.push(c))}var h=[];for(var d in i)h.push(Jc.CreateFromMorphTargetSequence(d,i[d],e,n));return h},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(t,e,n,i,r){var a,o;0!==n.length&&(a=[],o=[],Fc.flattenJSON(n,a,o,i),0!==a.length&&r.push(new t(e,a,o)))},i=[],r=t.name||"default",a=t.fps||30,o=t.blendMode,s=t.length||-1,l=t.hierarchy||[],c=0;c<l.length;c++){var u=l[c].keys;if(u&&0!==u.length)if(u[0].morphTargets){for(var h={},d=void 0,d=0;d<u.length;d++)if(u[d].morphTargets)for(var p=0;p<u[d].morphTargets.length;p++)h[u[d].morphTargets[p]]=-1;for(var f in h){for(var m=[],g=[],v=0;v!==u[d].morphTargets.length;++v){var y=u[d];m.push(y.time),g.push(y.morphTarget===f?1:0)}i.push(new Wc(".morphTargetInfluence["+f+"]",m,g))}s=h.length*(a||1)}else{var _=".bones["+e[c].name+"]";n(Zc,_+".position",u,"pos",i),n(Xc,_+".quaternion",u,"rot",i),n(Zc,_+".scale",u,"scl",i)}}return 0===i.length?null:new Jc(r,s,i,o)}}),Object.assign(Jc.prototype,{resetDuration:function(){for(var t=0,e=0,n=this.tracks.length;e!==n;++e)var i=this.tracks[e],t=Math.max(t,i.times[i.times.length-1]);return this.duration=t,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new Jc(this.name,this.duration,t,this.blendMode)},toJSON:function(){return Jc.toJSON(this)}});var Qc={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function $c(t,e,n){var i=this,r=!1,a=0,o=0,s=void 0,l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){o++,!1===r&&void 0!==i.onStart&&i.onStart(t,a,o),r=!0},this.itemEnd=function(t){a++,void 0!==i.onProgress&&i.onProgress(t,a,o),a===o&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(t){void 0!==i.onError&&i.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){var e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(var e=0,n=l.length;e<n;e+=2){var i=l[e],r=l[e+1];if(i.global&&(i.lastIndex=0),i.test(t))return r}return null}}var Kc=new $c;function tu(t){this.manager=void 0!==t?t:Kc,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(tu.prototype,{load:function(){},loadAsync:function(n,i){var r=this;return new Promise(function(t,e){r.load(n,t,i,e)})},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}});var eu={};function nu(t){tu.call(this,t)}function iu(t){tu.call(this,t)}function ru(t){tu.call(this,t)}function au(t){tu.call(this,t)}function ou(t){tu.call(this,t)}function su(t){tu.call(this,t)}function lu(t){tu.call(this,t)}function cu(){this.type="Curve",this.arcLengthDivisions=200}function uu(t,e,n,i,r,a,o,s){cu.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=o||!1,this.aRotation=s||0}function hu(t,e,n,i,r,a){uu.call(this,t,e,n,n,i,r,a),this.type="ArcCurve"}function du(){var r=0,a=0,o=0,s=0;function c(t,e,n,i){o=-3*(r=t)+3*e-2*(a=n)-i,s=2*t-2*e+n+i}return{initCatmullRom:function(t,e,n,i,r){c(e,n,r*(n-t),r*(i-e))},initNonuniformCatmullRom:function(t,e,n,i,r,a,o){var s=(e-t)/r-(n-t)/(r+a)+(n-e)/a,l=(n-e)/a-(i-e)/(a+o)+(i-n)/o;c(e,n,s*=a,l*=a)},calc:function(t){var e=t*t;return r+a*t+o*e+s*(e*t)}}}nu.prototype=Object.assign(Object.create(tu.prototype),{constructor:nu,load:function(c,t,e,n){void 0===c&&(c=""),void 0!==this.path&&(c=this.path+c),c=this.manager.resolveURL(c);var u=this,i=Qc.get(c);if(void 0!==i)return u.manager.itemStart(c),setTimeout(function(){t&&t(i),u.manager.itemEnd(c)},0),i;if(void 0===eu[c]){var r,a=c.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){var o=a[1],s=!!a[2],l=a[3],l=decodeURIComponent(l);s&&(l=atob(l));try{var h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var d=new Uint8Array(l.length),p=0;p<l.length;p++)d[p]=l.charCodeAt(p);f="blob"===h?new Blob([d.buffer],{type:o}):d.buffer;break;case"document":var f=(new DOMParser).parseFromString(l,o);break;case"json":f=JSON.parse(l);break;default:f=l}setTimeout(function(){t&&t(f),u.manager.itemEnd(c)},0)}catch(t){setTimeout(function(){n&&n(t),u.manager.itemError(c),u.manager.itemEnd(c)},0)}}else{for(var m in eu[c]=[],eu[c].push({onLoad:t,onProgress:e,onError:n}),(r=new XMLHttpRequest).open("GET",c,!0),r.addEventListener("load",function(t){var e=this.response,n=eu[c];if(delete eu[c],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Qc.add(c,e);for(var i=0,r=n.length;i<r;i++){var a=n[i];a.onLoad&&a.onLoad(e)}u.manager.itemEnd(c)}else{for(var o=0,s=n.length;o<s;o++){var l=n[o];l.onError&&l.onError(t)}u.manager.itemError(c),u.manager.itemEnd(c)}},!1),r.addEventListener("progress",function(t){for(var e=eu[c],n=0,i=e.length;n<i;n++){var r=e[n];r.onProgress&&r.onProgress(t)}},!1),r.addEventListener("error",function(t){var e=eu[c];delete eu[c];for(var n=0,i=e.length;n<i;n++){var r=e[n];r.onError&&r.onError(t)}u.manager.itemError(c),u.manager.itemEnd(c)},!1),r.addEventListener("abort",function(t){var e=eu[c];delete eu[c];for(var n=0,i=e.length;n<i;n++){var r=e[n];r.onError&&r.onError(t)}u.manager.itemError(c),u.manager.itemEnd(c)},!1),void 0!==this.responseType&&(r.responseType=this.responseType),void 0!==this.withCredentials&&(r.withCredentials=this.withCredentials),r.overrideMimeType&&r.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)r.setRequestHeader(m,this.requestHeader[m]);r.send(null)}return u.manager.itemStart(c),r}eu[c].push({onLoad:t,onProgress:e,onError:n})},setResponseType:function(t){return this.responseType=t,this},setMimeType:function(t){return this.mimeType=t,this}}),iu.prototype=Object.assign(Object.create(tu.prototype),{constructor:iu,load:function(e,n,t,i){var r=this,a=new nu(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,function(t){try{n(r.parse(JSON.parse(t)))}catch(t){i?i(t):console.error(t),r.manager.itemError(e)}},t,i)},parse:function(t){for(var e=[],n=0;n<t.length;n++){var i=Jc.parse(t[n]);e.push(i)}return e}}),ru.prototype=Object.assign(Object.create(tu.prototype),{constructor:ru,load:function(t,a,e,i){var o=this,s=[],l=new ko;l.image=s;var r=new nu(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(o.withCredentials);var c=0;if(Array.isArray(t))for(var n=0,u=t.length;n<u;++n)!function(n){r.load(t[n],function(t){var e=o.parse(t,!0);s[n]={width:e.width,height:e.height,format:e.format,mipmaps:e.mipmaps},6===(c+=1)&&(1===e.mipmapCount&&(l.minFilter=j),l.format=e.format,l.needsUpdate=!0,a&&a(l))},e,i)}(n);else r.load(t,function(t){var e=o.parse(t,!0);if(e.isCubemap)for(var n=e.mipmaps.length/e.mipmapCount,i=0;i<n;i++){s[i]={mipmaps:[]};for(var r=0;r<e.mipmapCount;r++)s[i].mipmaps.push(e.mipmaps[i*e.mipmapCount+r]),s[i].format=e.format,s[i].width=e.width,s[i].height=e.height}else l.image.width=e.width,l.image.height=e.height,l.mipmaps=e.mipmaps;1===e.mipmapCount&&(l.minFilter=j),l.format=e.format,l.needsUpdate=!0,a&&a(l)},e,i);return l}}),au.prototype=Object.assign(Object.create(tu.prototype),{constructor:au,load:function(e,t,n,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,a=Qc.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1),Qc.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(t){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1),i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}return o.addEventListener("load",s,!1),o.addEventListener("error",l,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(e),o.src=e,o}}),ou.prototype=Object.assign(Object.create(tu.prototype),{constructor:ou,load:function(t,n,e,i){var r=new pi,a=new au(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;for(var s=0;s<t.length;++s)!function(e){a.load(t[e],function(t){r.images[e]=t,6==++o&&(r.needsUpdate=!0,n&&n(r))},void 0,i)}(s);return r}}),su.prototype=Object.assign(Object.create(tu.prototype),{constructor:su,load:function(t,n,e,i){var r=this,a=new mi,o=new nu(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(r.withCredentials),o.load(t,function(t){var e=r.parse(t);e&&(void 0!==e.image?a.image=e.image:void 0!==e.data&&(a.image.width=e.width,a.image.height=e.height,a.image.data=e.data),a.wrapS=void 0!==e.wrapS?e.wrapS:z,a.wrapT=void 0!==e.wrapT?e.wrapT:z,a.magFilter=void 0!==e.magFilter?e.magFilter:j,a.minFilter=void 0!==e.minFilter?e.minFilter:j,a.anisotropy=void 0!==e.anisotropy?e.anisotropy:1,void 0!==e.format&&(a.format=e.format),void 0!==e.type&&(a.type=e.type),void 0!==e.mipmaps&&(a.mipmaps=e.mipmaps,a.minFilter=u),1===e.mipmapCount&&(a.minFilter=j),a.needsUpdate=!0,n&&n(a,e))},e,i),a}}),lu.prototype=Object.assign(Object.create(tu.prototype),{constructor:lu,load:function(n,i,t,e){var r=new nt,a=new au(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(n,function(t){r.image=t;var e=0<n.search(/\.jpe?g($|\?)/i)||0===n.search(/^data\:image\/jpeg/);r.format=e?Y:Ct,r.needsUpdate=!0,void 0!==i&&i(r)},t,e),r}}),Object.assign(cu.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){var n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n=[],i=this.getPoint(0),r=0;n.push(0);for(var a=1;a<=t;a++)r+=(e=this.getPoint(a/t)).distanceTo(i),n.push(r),i=e;return this.cacheArcLengths=n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){for(var n,i=this.getLengths(),r=0,a=i.length,o=e||t*i[a-1],s=0,l=a-1;s<=l;)if((n=i[r=Math.floor(s+(l-s)/2)]-o)<0)s=r+1;else{if(!(0<n)){l=r;break}l=r-1}if(i[r=l]===o)return r/(a-1);var c=i[r];return(r+(o-c)/(i[r+1]-c))/(a-1)},getTangent:function(t,e){var n=t-1e-4,i=t+1e-4;n<0&&(n=0),1<i&&(i=1);var r=this.getPoint(n),a=this.getPoint(i),o=e||new(r.isVector2?It:Bt);return o.copy(a).sub(r).normalize(),o},getTangentAt:function(t,e){var n=this.getUtoTmapping(t);return this.getTangent(n,e)},computeFrenetFrames:function(t,e){for(var n=new Bt,i=[],r=[],a=[],o=new Bt,s=new Kt,l=0;l<=t;l++){var c=l/t;i[l]=this.getTangentAt(c,new Bt),i[l].normalize()}r[0]=new Bt,a[0]=new Bt;var u=Number.MAX_VALUE,h=Math.abs(i[0].x),d=Math.abs(i[0].y),p=Math.abs(i[0].z);h<=u&&(u=h,n.set(1,0,0)),d<=u&&(u=d,n.set(0,1,0)),p<=u&&n.set(0,0,1),o.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],o),a[0].crossVectors(i[0],r[0]);for(var f,m=1;m<=t;m++){r[m]=r[m-1].clone(),a[m]=a[m-1].clone(),o.crossVectors(i[m-1],i[m]),o.length()>Number.EPSILON&&(o.normalize(),f=Math.acos(Pt.clamp(i[m-1].dot(i[m]),-1,1)),r[m].applyMatrix4(s.makeRotationAxis(o,f))),a[m].crossVectors(i[m],r[m])}if(!0===e){var g=Math.acos(Pt.clamp(r[0].dot(r[t]),-1,1));g/=t,0<i[0].dot(o.crossVectors(r[0],r[t]))&&(g=-g);for(var v=1;v<=t;v++)r[v].applyMatrix4(s.makeRotationAxis(i[v],g*v)),a[v].crossVectors(i[v],r[v])}return{tangents:i,normals:r,binormals:a}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),((uu.prototype=Object.create(cu.prototype)).constructor=uu).prototype.isEllipseCurve=!0,uu.prototype.getPoint=function(t,e){for(var n=e||new It,i=2*Math.PI,r=this.aEndAngle-this.aStartAngle,a=Math.abs(r)<Number.EPSILON;r<0;)r+=i;for(;i<r;)r-=i;r<Number.EPSILON&&(r=a?0:i),!0!==this.aClockwise||a||(r===i?r=-i:r-=i);var o,s,l,c,u=this.aStartAngle+t*r,h=this.aX+this.xRadius*Math.cos(u),d=this.aY+this.yRadius*Math.sin(u);return 0!==this.aRotation&&(o=Math.cos(this.aRotation),s=Math.sin(this.aRotation),h=(l=h-this.aX)*o-(c=d-this.aY)*s+this.aX,d=l*s+c*o+this.aY),n.set(h,d)},uu.prototype.copy=function(t){return cu.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},uu.prototype.toJSON=function(){var t=cu.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},uu.prototype.fromJSON=function(t){return cu.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},((hu.prototype=Object.create(uu.prototype)).constructor=hu).prototype.isArcCurve=!0;var pu=new Bt,fu=new du,mu=new du,gu=new du;function vu(t,e,n,i){void 0===t&&(t=[]),void 0===e&&(e=!1),void 0===n&&(n="centripetal"),void 0===i&&(i=.5),cu.call(this),this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=i}function yu(t,e,n,i,r){var a=.5*(i-e),o=.5*(r-n),s=t*t;return t*s*(2*n-2*i+a+o)+(-3*n+3*i-2*a-o)*s+a*t+n}function _u(t,e,n,i){return(r=1-t)*r*e+2*(1-t)*t*n+t*t*i;var r}function xu(t,e,n,i,r){return(o=1-t)*o*o*e+3*(a=1-t)*a*t*n+3*(1-t)*t*t*i+t*t*t*r;var a,o}function bu(t,e,n,i){void 0===t&&(t=new It),void 0===e&&(e=new It),void 0===n&&(n=new It),void 0===i&&(i=new It),cu.call(this),this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=i}function wu(t,e,n,i){void 0===t&&(t=new Bt),void 0===e&&(e=new Bt),void 0===n&&(n=new Bt),void 0===i&&(i=new Bt),cu.call(this),this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=i}function Tu(t,e){void 0===t&&(t=new It),void 0===e&&(e=new It),cu.call(this),this.type="LineCurve",this.v1=t,this.v2=e}function Mu(t,e){void 0===t&&(t=new Bt),void 0===e&&(e=new Bt),cu.call(this),this.type="LineCurve3",this.v1=t,this.v2=e}function Su(t,e,n){void 0===t&&(t=new It),void 0===e&&(e=new It),void 0===n&&(n=new It),cu.call(this),this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}function Eu(t,e,n){void 0===t&&(t=new Bt),void 0===e&&(e=new Bt),void 0===n&&(n=new Bt),cu.call(this),this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}function Au(t){void 0===t&&(t=[]),cu.call(this),this.type="SplineCurve",this.points=t}((vu.prototype=Object.create(cu.prototype)).constructor=vu).prototype.isCatmullRomCurve3=!0,vu.prototype.getPoint=function(t,e){void 0===e&&(e=new Bt);var n,i=e,r=this.points,a=r.length,o=(a-(this.closed?0:1))*t,s=Math.floor(o),l=o-s;this.closed?s+=0<s?0:(Math.floor(Math.abs(s)/a)+1)*a:0===l&&s===a-1&&(s=a-2,l=1),n=this.closed||0<s?r[(s-1)%a]:(pu.subVectors(r[0],r[1]).add(r[0]),pu);var c,u,h,d,p=r[s%a],f=r[(s+1)%a],m=this.closed||s+2<a?r[(s+2)%a]:(pu.subVectors(r[a-1],r[a-2]).add(r[a-1]),pu);return"centripetal"===this.curveType||"chordal"===this.curveType?(c="chordal"===this.curveType?.5:.25,u=Math.pow(n.distanceToSquared(p),c),(h=Math.pow(p.distanceToSquared(f),c))<1e-4&&(h=1),u<1e-4&&(u=h),(d=Math.pow(f.distanceToSquared(m),c))<1e-4&&(d=h),fu.initNonuniformCatmullRom(n.x,p.x,f.x,m.x,u,h,d),mu.initNonuniformCatmullRom(n.y,p.y,f.y,m.y,u,h,d),gu.initNonuniformCatmullRom(n.z,p.z,f.z,m.z,u,h,d)):"catmullrom"===this.curveType&&(fu.initCatmullRom(n.x,p.x,f.x,m.x,this.tension),mu.initCatmullRom(n.y,p.y,f.y,m.y,this.tension),gu.initCatmullRom(n.z,p.z,f.z,m.z,this.tension)),i.set(fu.calc(l),mu.calc(l),gu.calc(l)),i},vu.prototype.copy=function(t){cu.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},vu.prototype.toJSON=function(){var t=cu.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var i=this.points[e];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},vu.prototype.fromJSON=function(t){cu.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push((new Bt).fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},((bu.prototype=Object.create(cu.prototype)).constructor=bu).prototype.isCubicBezierCurve=!0,bu.prototype.getPoint=function(t,e){void 0===e&&(e=new It);var n=e,i=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(xu(t,i.x,r.x,a.x,o.x),xu(t,i.y,r.y,a.y,o.y)),n},bu.prototype.copy=function(t){return cu.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},bu.prototype.toJSON=function(){var t=cu.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},bu.prototype.fromJSON=function(t){return cu.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},((wu.prototype=Object.create(cu.prototype)).constructor=wu).prototype.isCubicBezierCurve3=!0,wu.prototype.getPoint=function(t,e){void 0===e&&(e=new Bt);var n=e,i=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(xu(t,i.x,r.x,a.x,o.x),xu(t,i.y,r.y,a.y,o.y),xu(t,i.z,r.z,a.z,o.z)),n},wu.prototype.copy=function(t){return cu.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},wu.prototype.toJSON=function(){var t=cu.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},wu.prototype.fromJSON=function(t){return cu.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},((Tu.prototype=Object.create(cu.prototype)).constructor=Tu).prototype.isLineCurve=!0,Tu.prototype.getPoint=function(t,e){void 0===e&&(e=new It);var n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},Tu.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Tu.prototype.getTangent=function(t,e){var n=e||new It;return n.copy(this.v2).sub(this.v1).normalize(),n},Tu.prototype.copy=function(t){return cu.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Tu.prototype.toJSON=function(){var t=cu.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Tu.prototype.fromJSON=function(t){return cu.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},((Mu.prototype=Object.create(cu.prototype)).constructor=Mu).prototype.isLineCurve3=!0,Mu.prototype.getPoint=function(t,e){void 0===e&&(e=new Bt);var n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},Mu.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Mu.prototype.copy=function(t){return cu.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Mu.prototype.toJSON=function(){var t=cu.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Mu.prototype.fromJSON=function(t){return cu.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},((Su.prototype=Object.create(cu.prototype)).constructor=Su).prototype.isQuadraticBezierCurve=!0,Su.prototype.getPoint=function(t,e){void 0===e&&(e=new It);var n=e,i=this.v0,r=this.v1,a=this.v2;return n.set(_u(t,i.x,r.x,a.x),_u(t,i.y,r.y,a.y)),n},Su.prototype.copy=function(t){return cu.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Su.prototype.toJSON=function(){var t=cu.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Su.prototype.fromJSON=function(t){return cu.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},((Eu.prototype=Object.create(cu.prototype)).constructor=Eu).prototype.isQuadraticBezierCurve3=!0,Eu.prototype.getPoint=function(t,e){void 0===e&&(e=new Bt);var n=e,i=this.v0,r=this.v1,a=this.v2;return n.set(_u(t,i.x,r.x,a.x),_u(t,i.y,r.y,a.y),_u(t,i.z,r.z,a.z)),n},Eu.prototype.copy=function(t){return cu.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Eu.prototype.toJSON=function(){var t=cu.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Eu.prototype.fromJSON=function(t){return cu.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},((Au.prototype=Object.create(cu.prototype)).constructor=Au).prototype.isSplineCurve=!0,Au.prototype.getPoint=function(t,e){void 0===e&&(e=new It);var n=e,i=this.points,r=(i.length-1)*t,a=Math.floor(r),o=r-a,s=i[0===a?a:a-1],l=i[a],c=i[a>i.length-2?i.length-1:a+1],u=i[a>i.length-3?i.length-1:a+2];return n.set(yu(o,s.x,l.x,c.x,u.x),yu(o,s.y,l.y,c.y,u.y)),n},Au.prototype.copy=function(t){cu.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push(i.clone())}return this},Au.prototype.toJSON=function(){var t=cu.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var i=this.points[e];t.points.push(i.toArray())}return t},Au.prototype.fromJSON=function(t){cu.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push((new It).fromArray(i))}return this};var Lu=Object.freeze({__proto__:null,ArcCurve:hu,CatmullRomCurve3:vu,CubicBezierCurve:bu,CubicBezierCurve3:wu,EllipseCurve:uu,LineCurve:Tu,LineCurve3:Mu,QuadraticBezierCurve:Su,QuadraticBezierCurve3:Eu,SplineCurve:Au});function Cu(){cu.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Ru(t){Cu.call(this),this.type="Path",this.currentPoint=new It,t&&this.setFromPoints(t)}function Pu(t){Ru.call(this,t),this.uuid=Pt.generateUUID(),this.type="Shape",this.holes=[]}function Ou(t,e){void 0===e&&(e=1),Re.call(this),this.type="Light",this.color=new en(t),this.intensity=e}function Du(t,e,n){Ou.call(this,t,n),this.type="HemisphereLight",this.position.copy(Re.DefaultUp),this.updateMatrix(),this.groundColor=new en(e)}function Nu(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new It(512,512),this.map=null,this.mapPass=null,this.matrix=new Kt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new _i,this._frameExtents=new It(1,1),this._viewportCount=1,this._viewports=[new Ot(0,0,1,1)]}function Iu(){Nu.call(this,new hi(50,1,.5,500)),this.focus=1}function Bu(t,e,n,i,r,a){Ou.call(this,t,e),this.type="SpotLight",this.position.copy(Re.DefaultUp),this.updateMatrix(),this.target=new Re,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==a?a:1,this.shadow=new Iu}function Fu(){Nu.call(this,new hi(90,1,.5,500)),this._frameExtents=new It(4,2),this._viewportCount=6,this._viewports=[new Ot(2,1,1,1),new Ot(0,1,1,1),new Ot(3,1,1,1),new Ot(1,1,1,1),new Ot(3,0,1,1),new Ot(1,0,1,1)],this._cubeDirections=[new Bt(1,0,0),new Bt(-1,0,0),new Bt(0,0,1),new Bt(0,0,-1),new Bt(0,1,0),new Bt(0,-1,0)],this._cubeUps=[new Bt(0,1,0),new Bt(0,1,0),new Bt(0,1,0),new Bt(0,1,0),new Bt(0,0,1),new Bt(0,0,-1)]}function ku(t,e,n,i){Ou.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new Fu}function zu(t,e,n,i,r,a){ui.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==n?n:1,this.bottom=void 0!==i?i:-1,this.near=void 0!==r?r:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function Hu(){Nu.call(this,new zu(-5,5,5,-5,.5,500))}function Uu(t,e){Ou.call(this,t,e),this.type="DirectionalLight",this.position.copy(Re.DefaultUp),this.updateMatrix(),this.target=new Re,this.shadow=new Hu}function Gu(t,e){Ou.call(this,t,e),this.type="AmbientLight"}function ju(t,e,n,i){Ou.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}Cu.prototype=Object.assign(Object.create(cu.prototype),{constructor:Cu,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Tu(e,t))},getPoint:function(t){for(var e=t*this.getLength(),n=this.getCurveLengths(),i=0;i<n.length;){if(n[i]>=e){var r=n[i]-e,a=this.curves[i],o=a.getLength(),s=0===o?0:1-r/o;return a.getPointAt(s)}i++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){void 0===t&&(t=12);for(var e,n=[],i=0,r=this.curves;i<r.length;i++)for(var a=r[i],o=a&&a.isEllipseCurve?2*t:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?t*a.points.length:t,s=a.getPoints(o),l=0;l<s.length;l++){var c=s[l];e&&e.equals(c)||(n.push(c),e=c)}return this.autoClose&&1<n.length&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(t){cu.prototype.copy.call(this,t),this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var i=t.curves[e];this.curves.push(i.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){var t=cu.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,n=this.curves.length;e<n;e++){var i=this.curves[e];t.curves.push(i.toJSON())}return t},fromJSON:function(t){cu.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var i=t.curves[e];this.curves.push((new Lu[i.type]).fromJSON(i))}return this}}),Ru.prototype=Object.assign(Object.create(Cu.prototype),{constructor:Ru,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this},moveTo:function(t,e){return this.currentPoint.set(t,e),this},lineTo:function(t,e){var n=new Tu(this.currentPoint.clone(),new It(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this},quadraticCurveTo:function(t,e,n,i){var r=new Su(this.currentPoint.clone(),new It(t,e),new It(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this},bezierCurveTo:function(t,e,n,i,r,a){var o=new bu(this.currentPoint.clone(),new It(t,e),new It(n,i),new It(r,a));return this.curves.push(o),this.currentPoint.set(r,a),this},splineThru:function(t){var e=new Au([this.currentPoint.clone()].concat(t));return this.curves.push(e),this.currentPoint.copy(t[t.length-1]),this},arc:function(t,e,n,i,r,a){var o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(t+o,e+s,n,i,r,a),this},absarc:function(t,e,n,i,r,a){return this.absellipse(t,e,n,n,i,r,a),this},ellipse:function(t,e,n,i,r,a,o,s){var l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(t+l,e+c,n,i,r,a,o,s),this},absellipse:function(t,e,n,i,r,a,o,s){var l,c=new uu(t,e,n,i,r,a,o,s);0<this.curves.length&&((l=c.getPoint(0)).equals(this.currentPoint)||this.lineTo(l.x,l.y)),this.curves.push(c);var u=c.getPoint(1);return this.currentPoint.copy(u),this},copy:function(t){return Cu.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=Cu.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return Cu.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),Pu.prototype=Object.assign(Object.create(Ru.prototype),{constructor:Pu,getPointsHoles:function(t){for(var e=[],n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){Ru.prototype.copy.call(this,t),this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var i=t.holes[e];this.holes.push(i.clone())}return this},toJSON:function(){var t=Ru.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,n=this.holes.length;e<n;e++){var i=this.holes[e];t.holes.push(i.toJSON())}return t},fromJSON:function(t){Ru.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var i=t.holes[e];this.holes.push((new Ru).fromJSON(i))}return this}}),Ou.prototype=Object.assign(Object.create(Re.prototype),{constructor:Ou,isLight:!0,copy:function(t){return Re.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=Re.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),Du.prototype=Object.assign(Object.create(Ou.prototype),{constructor:Du,isHemisphereLight:!0,copy:function(t){return Ou.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(Nu.prototype,{_projScreenMatrix:new Kt,_lightPositionWorld:new Bt,_lookTarget:new Bt,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(t){var e=this.camera,n=this.matrix,i=this._projScreenMatrix,r=this._lookTarget,a=this._lightPositionWorld;a.setFromMatrixPosition(t.matrixWorld),e.position.copy(a),r.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(r),e.updateMatrixWorld(),i.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(i),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)},getViewport:function(t){return this._viewports[t]},getFrameExtents:function(){return this._frameExtents},copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),Iu.prototype=Object.assign(Object.create(Nu.prototype),{constructor:Iu,isSpotLightShadow:!0,updateMatrices:function(t){var e=this.camera,n=2*Pt.RAD2DEG*t.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;n===e.fov&&i===e.aspect&&r===e.far||(e.fov=n,e.aspect=i,e.far=r,e.updateProjectionMatrix()),Nu.prototype.updateMatrices.call(this,t)}}),Bu.prototype=Object.assign(Object.create(Ou.prototype),{constructor:Bu,isSpotLight:!0,copy:function(t){return Ou.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Fu.prototype=Object.assign(Object.create(Nu.prototype),{constructor:Fu,isPointLightShadow:!0,updateMatrices:function(t,e){void 0===e&&(e=0);var n=this.camera,i=this.matrix,r=this._lightPositionWorld,a=this._lookTarget,o=this._projScreenMatrix;r.setFromMatrixPosition(t.matrixWorld),n.position.copy(r),a.copy(n.position),a.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(a),n.updateMatrixWorld(),i.makeTranslation(-r.x,-r.y,-r.z),o.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(o)}}),ku.prototype=Object.assign(Object.create(Ou.prototype),{constructor:ku,isPointLight:!0,copy:function(t){return Ou.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),zu.prototype=Object.assign(Object.create(ui.prototype),{constructor:zu,isOrthographicCamera:!0,copy:function(t,e){return ui.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,i,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t,e,n=(this.right-this.left)/(2*this.zoom),i=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,a=(this.top+this.bottom)/2,o=r-n,s=r+n,l=a+i,c=a-i;null!==this.view&&this.view.enabled&&(t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom,s=(o+=t*this.view.offsetX)+t*this.view.width,c=(l-=e*this.view.offsetY)-e*this.view.height),this.projectionMatrix.makeOrthographic(o,s,l,c,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(t){var e=Re.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),Hu.prototype=Object.assign(Object.create(Nu.prototype),{constructor:Hu,isDirectionalLightShadow:!0,updateMatrices:function(t){Nu.prototype.updateMatrices.call(this,t)}}),Uu.prototype=Object.assign(Object.create(Ou.prototype),{constructor:Uu,isDirectionalLight:!0,copy:function(t){return Ou.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Gu.prototype=Object.assign(Object.create(Ou.prototype),{constructor:Gu,isAmbientLight:!0}),ju.prototype=Object.assign(Object.create(Ou.prototype),{constructor:ju,isRectAreaLight:!0,copy:function(t){return Ou.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){var e=Ou.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}});var Vu,Wu=((Vu=qu.prototype).set=function(t){for(var e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this},Vu.zero=function(){for(var t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this},Vu.getAt=function(t,e){var n=t.x,i=t.y,r=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.282095),e.addScaledVector(a[1],.488603*i),e.addScaledVector(a[2],.488603*r),e.addScaledVector(a[3],.488603*n),e.addScaledVector(a[4],n*i*1.092548),e.addScaledVector(a[5],i*r*1.092548),e.addScaledVector(a[6],.315392*(3*r*r-1)),e.addScaledVector(a[7],n*r*1.092548),e.addScaledVector(a[8],.546274*(n*n-i*i)),e},Vu.getIrradianceAt=function(t,e){var n=t.x,i=t.y,r=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.886227),e.addScaledVector(a[1],1.023328*i),e.addScaledVector(a[2],1.023328*r),e.addScaledVector(a[3],1.023328*n),e.addScaledVector(a[4],.858086*n*i),e.addScaledVector(a[5],.858086*i*r),e.addScaledVector(a[6],.743125*r*r-.247708),e.addScaledVector(a[7],.858086*n*r),e.addScaledVector(a[8],.429043*(n*n-i*i)),e},Vu.add=function(t){for(var e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this},Vu.addScaledSH=function(t,e){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this},Vu.scale=function(t){for(var e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this},Vu.lerp=function(t,e){for(var n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this},Vu.equals=function(t){for(var e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0},Vu.copy=function(t){return this.set(t.coefficients)},Vu.clone=function(){return(new this.constructor).copy(this)},Vu.fromArray=function(t,e){void 0===e&&(e=0);for(var n=this.coefficients,i=0;i<9;i++)n[i].fromArray(t,e+3*i);return this},Vu.toArray=function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);for(var n=this.coefficients,i=0;i<9;i++)n[i].toArray(t,e+3*i);return t},qu.getBasisAt=function(t,e){var n=t.x,i=t.y,r=t.z;e[0]=.282095,e[1]=.488603*i,e[2]=.488603*r,e[3]=.488603*n,e[4]=1.092548*n*i,e[5]=1.092548*i*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*n*r,e[8]=.546274*(n*n-i*i)},qu);function qu(){Object.defineProperty(this,"isSphericalHarmonics3",{value:!0}),this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new Bt)}function Xu(t,e){Ou.call(this,void 0,e),this.type="LightProbe",this.sh=void 0!==t?t:new Wu}function Yu(t){tu.call(this,t),this.textures={}}Xu.prototype=Object.assign(Object.create(Ou.prototype),{constructor:Xu,isLightProbe:!0,copy:function(t){return Ou.prototype.copy.call(this,t),this.sh.copy(t.sh),this},fromJSON:function(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this},toJSON:function(t){var e=Ou.prototype.toJSON.call(this,t);return e.object.sh=this.sh.toArray(),e}}),Yu.prototype=Object.assign(Object.create(tu.prototype),{constructor:Yu,load:function(e,n,t,i){var r=this,a=new nu(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,function(t){try{n(r.parse(JSON.parse(t)))}catch(t){i?i(t):console.error(t),r.manager.itemError(e)}},t,i)},parse:function(t){var e=this.textures;function n(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}var i,r=new Bc[t.type];if(void 0!==t.uuid&&(r.uuid=t.uuid),void 0!==t.name&&(r.name=t.name),void 0!==t.color&&void 0!==r.color&&r.color.setHex(t.color),void 0!==t.roughness&&(r.roughness=t.roughness),void 0!==t.metalness&&(r.metalness=t.metalness),void 0!==t.sheen&&(r.sheen=(new en).setHex(t.sheen)),void 0!==t.emissive&&void 0!==r.emissive&&r.emissive.setHex(t.emissive),void 0!==t.specular&&void 0!==r.specular&&r.specular.setHex(t.specular),void 0!==t.shininess&&(r.shininess=t.shininess),void 0!==t.clearcoat&&(r.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(r.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.fog&&(r.fog=t.fog),void 0!==t.flatShading&&(r.flatShading=t.flatShading),void 0!==t.blending&&(r.blending=t.blending),void 0!==t.combine&&(r.combine=t.combine),void 0!==t.side&&(r.side=t.side),void 0!==t.opacity&&(r.opacity=t.opacity),void 0!==t.transparent&&(r.transparent=t.transparent),void 0!==t.alphaTest&&(r.alphaTest=t.alphaTest),void 0!==t.depthTest&&(r.depthTest=t.depthTest),void 0!==t.depthWrite&&(r.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(r.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(r.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(r.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(r.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(r.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(r.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(r.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(r.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(r.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(r.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(r.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(r.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(r.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(r.rotation=t.rotation),1!==t.linewidth&&(r.linewidth=t.linewidth),void 0!==t.dashSize&&(r.dashSize=t.dashSize),void 0!==t.gapSize&&(r.gapSize=t.gapSize),void 0!==t.scale&&(r.scale=t.scale),void 0!==t.polygonOffset&&(r.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(r.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(r.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(r.skinning=t.skinning),void 0!==t.morphTargets&&(r.morphTargets=t.morphTargets),void 0!==t.morphNormals&&(r.morphNormals=t.morphNormals),void 0!==t.dithering&&(r.dithering=t.dithering),void 0!==t.vertexTangents&&(r.vertexTangents=t.vertexTangents),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.toneMapped&&(r.toneMapped=t.toneMapped),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.vertexColors&&("number"==typeof t.vertexColors?r.vertexColors=0<t.vertexColors:r.vertexColors=t.vertexColors),void 0!==t.uniforms)for(var a in t.uniforms){var o=t.uniforms[a];switch(r.uniforms[a]={},o.type){case"t":r.uniforms[a].value=n(o.value);break;case"c":r.uniforms[a].value=(new en).setHex(o.value);break;case"v2":r.uniforms[a].value=(new It).fromArray(o.value);break;case"v3":r.uniforms[a].value=(new Bt).fromArray(o.value);break;case"v4":r.uniforms[a].value=(new Ot).fromArray(o.value);break;case"m3":r.uniforms[a].value=(new Q).fromArray(o.value);break;case"m4":r.uniforms[a].value=(new Kt).fromArray(o.value);break;default:r.uniforms[a].value=o.value}}if(void 0!==t.defines&&(r.defines=t.defines),void 0!==t.vertexShader&&(r.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(r.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(var s in t.extensions)r.extensions[s]=t.extensions[s];return void 0!==t.shading&&(r.flatShading=1===t.shading),void 0!==t.size&&(r.size=t.size),void 0!==t.sizeAttenuation&&(r.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(r.map=n(t.map)),void 0!==t.matcap&&(r.matcap=n(t.matcap)),void 0!==t.alphaMap&&(r.alphaMap=n(t.alphaMap)),void 0!==t.bumpMap&&(r.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(r.bumpScale=t.bumpScale),void 0!==t.normalMap&&(r.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(r.normalMapType=t.normalMapType),void 0!==t.normalScale&&(i=t.normalScale,!1===Array.isArray(i)&&(i=[i,i]),r.normalScale=(new It).fromArray(i)),void 0!==t.displacementMap&&(r.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(r.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(r.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(r.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(r.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(r.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(r.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(r.specularMap=n(t.specularMap)),void 0!==t.envMap&&(r.envMap=n(t.envMap)),void 0!==t.envMapIntensity&&(r.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(r.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(r.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(r.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(r.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(r.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(r.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(r.gradientMap=n(t.gradientMap)),void 0!==t.clearcoatMap&&(r.clearcoatMap=n(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(r.clearcoatNormalMap=n(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(r.clearcoatNormalScale=(new It).fromArray(t.clearcoatNormalScale)),void 0!==t.transmission&&(r.transmission=t.transmission),void 0!==t.transmissionMap&&(r.transmissionMap=n(t.transmissionMap)),r},setTextures:function(t){return this.textures=t,this}});var Zu={decodeText:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",n=0,i=t.length;n<i;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(t){return e}},extractUrlBase:function(t){var e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}};function Ju(){Bn.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function Qu(t,e,n,i){"number"==typeof n&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),dn.call(this,t,e,n),this.meshPerAttribute=i||1}function $u(t){tu.call(this,t)}Ju.prototype=Object.assign(Object.create(Bn.prototype),{constructor:Ju,isInstancedBufferGeometry:!0,copy:function(t){return Bn.prototype.copy.call(this,t),this.instanceCount=t.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t=Bn.prototype.toJSON.call(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}),Qu.prototype=Object.assign(Object.create(dn.prototype),{constructor:Qu,isInstancedBufferAttribute:!0,copy:function(t){return dn.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){var t=dn.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}),$u.prototype=Object.assign(Object.create(tu.prototype),{constructor:$u,load:function(e,n,t,i){var r=this,a=new nu(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,function(t){try{n(r.parse(JSON.parse(t)))}catch(t){i?i(t):console.error(t),r.manager.itemError(e)}},t,i)},parse:function(t){var a={},o={};function e(i,t){if(void 0!==a[t])return a[t];var e=i.interleavedBuffers[t],n=function(t){if(void 0!==o[t])return o[t];var e=i.arrayBuffers[t],n=new Uint32Array(e).buffer;return o[t]=n}(e.buffer),r=new Ia(Ln(e.type,n),e.stride);return r.uuid=e.uuid,a[t]=r}var n,i=new(t.isInstancedBufferGeometry?Ju:Bn),r=t.data.index;void 0!==r&&(n=Ln(r.type,r.array),i.setIndex(new dn(n,1)));var s=t.data.attributes;for(var l in s){var c,u=s[l],h=void 0;h=u.isInterleavedBufferAttribute?new ka(e(t.data,u.data),u.itemSize,u.offset,u.normalized):(c=Ln(u.type,u.array),new(u.isInstancedBufferAttribute?Qu:dn)(c,u.itemSize,u.normalized)),void 0!==u.name&&(h.name=u.name),i.setAttribute(l,h)}var d=t.data.morphAttributes;if(d)for(var p in d){for(var f=d[p],m=[],g=0,v=f.length;g<v;g++){var y=f[g],_=void 0,_=y.isInterleavedBufferAttribute?new ka(e(t.data,y.data),y.itemSize,y.offset,y.normalized):new dn(Ln(y.type,y.array),y.itemSize,y.normalized);void 0!==y.name&&(_.name=y.name),m.push(_)}i.morphAttributes[p]=m}t.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);var x=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==x)for(var b=0,w=x.length;b!==w;++b){var T=x[b];i.addGroup(T.start,T.count,T.materialIndex)}var M,S=t.data.boundingSphere;return void 0!==S&&(M=new Bt,void 0!==S.center&&M.fromArray(S.center),i.boundingSphere=new Vt(M,S.radius)),t.name&&(i.name=t.name),t.userData&&(i.userData=t.userData),i}});var Ku,th=function(e){function t(t){return e.call(this,t)||this}C(t,e);var n=t.prototype;return n.load=function(i,r,t,a){var o=this,e=""===this.path?Zu.extractUrlBase(i):this.path;this.resourcePath=this.resourcePath||e;var n=new nu(this.manager);n.setPath(this.path),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(i,function(t){var e=null;try{e=JSON.parse(t)}catch(t){return void 0!==a&&a(t),void console.error("THREE:ObjectLoader: Can't parse "+i+".",t.message)}var n=e.metadata;void 0!==n&&void 0!==n.type&&"geometry"!==n.type.toLowerCase()?o.parse(e,r):console.error("THREE.ObjectLoader: Can't load "+i)},t,a)},n.parse=function(t,e){var n=this.parseAnimations(t.animations),i=this.parseShapes(t.shapes),r=this.parseGeometries(t.geometries,i),a=this.parseImages(t.images,function(){void 0!==e&&e(l)}),o=this.parseTextures(t.textures,a),s=this.parseMaterials(t.materials,o),l=this.parseObject(t.object,r,s,n),c=this.parseSkeletons(t.skeletons,l);if(this.bindSkeletons(l,c),void 0!==e){var u=!1;for(var h in a)if(a[h]instanceof HTMLImageElement){u=!0;break}!1===u&&e(l)}return l},n.parseShapes=function(t){var e={};if(void 0!==t)for(var n=0,i=t.length;n<i;n++){var r=(new Pu).fromJSON(t[n]);e[r.uuid]=r}return e},n.parseSkeletons=function(t,e){var n={},i={};if(e.traverse(function(t){t.isBone&&(i[t.uuid]=t)}),void 0!==t)for(var r=0,a=t.length;r<a;r++){var o=(new po).fromJSON(t[r],i);n[o.uuid]=o}return n},n.parseGeometries=function(t,e){var n,i={};if(void 0!==t)for(var r=new $u,a=0,o=t.length;a<o;a++){var s=void 0,l=t[a];switch(l.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new dc[l.type](l.width,l.height,l.widthSegments,l.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new dc[l.type](l.width,l.height,l.depth,l.widthSegments,l.heightSegments,l.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new dc[l.type](l.radius,l.segments,l.thetaStart,l.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new dc[l.type](l.radiusTop,l.radiusBottom,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new dc[l.type](l.radius,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new dc[l.type](l.radius,l.widthSegments,l.heightSegments,l.phiStart,l.phiLength,l.thetaStart,l.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new dc[l.type](l.radius,l.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new dc[l.type](l.innerRadius,l.outerRadius,l.thetaSegments,l.phiSegments,l.thetaStart,l.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new dc[l.type](l.radius,l.tube,l.radialSegments,l.tubularSegments,l.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new dc[l.type](l.radius,l.tube,l.tubularSegments,l.radialSegments,l.p,l.q);break;case"TubeGeometry":case"TubeBufferGeometry":s=new dc[l.type]((new Lu[l.path.type]).fromJSON(l.path),l.tubularSegments,l.radius,l.radialSegments,l.closed);break;case"LatheGeometry":case"LatheBufferGeometry":s=new dc[l.type](l.points,l.segments,l.phiStart,l.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new dc[l.type](l.vertices,l.indices,l.radius,l.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":n=[];for(var c=0,u=l.shapes.length;c<u;c++){var h=e[l.shapes[c]];n.push(h)}s=new dc[l.type](n,l.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":n=[];for(var d=0,p=l.shapes.length;d<p;d++){var f=e[l.shapes[d]];n.push(f)}var m=l.options.extrudePath;void 0!==m&&(l.options.extrudePath=(new Lu[m.type]).fromJSON(m)),s=new dc[l.type](n,l.options);break;case"BufferGeometry":case"InstancedBufferGeometry":s=r.parse(l);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+l.type+'"');continue}s.uuid=l.uuid,void 0!==l.name&&(s.name=l.name),!0===s.isBufferGeometry&&void 0!==l.userData&&(s.userData=l.userData),i[l.uuid]=s}return i},n.parseMaterials=function(t,e){var n={},i={};if(void 0!==t){var r=new Yu;r.setTextures(e);for(var a=0,o=t.length;a<o;a++){var s=t[a];if("MultiMaterial"===s.type){for(var l=[],c=0;c<s.materials.length;c++){var u=s.materials[c];void 0===n[u.uuid]&&(n[u.uuid]=r.parse(u)),l.push(n[u.uuid])}i[s.uuid]=l}else void 0===n[s.uuid]&&(n[s.uuid]=r.parse(s)),i[s.uuid]=n[s.uuid]}}return i},n.parseAnimations=function(t){var e={};if(void 0!==t)for(var n=0;n<t.length;n++){var i=t[n],r=Jc.parse(i);e[r.uuid]=r}return e},n.parseImages=function(t,e){var i,r=this,n={};function a(t){if("string"!=typeof t)return t.data?{data:Ln(t.type,t.data),width:t.width,height:t.height}:null;var e,n=t;return e=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:r.resourcePath+n,r.manager.itemStart(e),i.load(e,function(){r.manager.itemEnd(e)},void 0,function(){r.manager.itemError(e),r.manager.itemEnd(e)})}if(void 0!==t&&0<t.length){var o=new $c(e);(i=new au(o)).setCrossOrigin(this.crossOrigin);for(var s=0,l=t.length;s<l;s++){var c=t[s],u=c.url;if(Array.isArray(u)){n[c.uuid]=[];for(var h=0,d=u.length;h<d;h++){var p=a(u[h]);null!==p&&(p instanceof HTMLImageElement?n[c.uuid].push(p):n[c.uuid].push(new mi(p.data,p.width,p.height)))}}else{var f=a(c.url);null!==f&&(n[c.uuid]=f)}}}return n},n.parseTextures=function(t,e){function n(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var i={};if(void 0!==t)for(var r=0,a=t.length;r<a;r++){var o=t[r];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===e[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);var s=void 0,l=e[o.image];Array.isArray(l)?(s=new pi(l),6===l.length&&(s.needsUpdate=!0)):(s=l&&l.data?new mi(l.data,l.width,l.height):new nt(l),l&&(s.needsUpdate=!0)),s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),void 0!==o.mapping&&(s.mapping=n(o.mapping,eh)),void 0!==o.offset&&s.offset.fromArray(o.offset),void 0!==o.repeat&&s.repeat.fromArray(o.repeat),void 0!==o.center&&s.center.fromArray(o.center),void 0!==o.rotation&&(s.rotation=o.rotation),void 0!==o.wrap&&(s.wrapS=n(o.wrap[0],nh),s.wrapT=n(o.wrap[1],nh)),void 0!==o.format&&(s.format=o.format),void 0!==o.type&&(s.type=o.type),void 0!==o.encoding&&(s.encoding=o.encoding),void 0!==o.minFilter&&(s.minFilter=n(o.minFilter,ih)),void 0!==o.magFilter&&(s.magFilter=n(o.magFilter,ih)),void 0!==o.anisotropy&&(s.anisotropy=o.anisotropy),void 0!==o.flipY&&(s.flipY=o.flipY),void 0!==o.premultiplyAlpha&&(s.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(s.unpackAlignment=o.unpackAlignment),i[o.uuid]=s}return i},n.parseObject=function(t,e,a,n){var i,r,o;function s(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function l(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n];void 0===a[r]&&console.warn("THREE.ObjectLoader: Undefined material",r),e.push(a[r])}return e}return void 0===a[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),a[t]}}switch(t.type){case"Scene":i=new Oa,void 0!==t.background&&Number.isInteger(t.background)&&(i.background=new en(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?i.fog=new Pa(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(i.fog=new Ra(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":i=new hi(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(i.focus=t.focus),void 0!==t.zoom&&(i.zoom=t.zoom),void 0!==t.filmGauge&&(i.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(i.filmOffset=t.filmOffset),void 0!==t.view&&(i.view=Object.assign({},t.view));break;case"OrthographicCamera":i=new zu(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(i.zoom=t.zoom),void 0!==t.view&&(i.view=Object.assign({},t.view));break;case"AmbientLight":i=new Gu(t.color,t.intensity);break;case"DirectionalLight":i=new Uu(t.color,t.intensity);break;case"PointLight":i=new ku(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":i=new ju(t.color,t.intensity,t.width,t.height);break;case"SpotLight":i=new Bu(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":i=new Du(t.color,t.groundColor,t.intensity);break;case"LightProbe":i=(new Xu).fromJSON(t);break;case"SkinnedMesh":i=new lo(r=s(t.geometry),o=l(t.material)),void 0!==t.bindMode&&(i.bindMode=t.bindMode),void 0!==t.bindMatrix&&i.bindMatrix.fromArray(t.bindMatrix),void 0!==t.skeleton&&(i.skeleton=t.skeleton);break;case"Mesh":i=new ti(r=s(t.geometry),o=l(t.material));break;case"InstancedMesh":r=s(t.geometry),o=l(t.material);var c=t.count,u=t.instanceMatrix;(i=new yo(r,o,c)).instanceMatrix=new dn(new Float32Array(u.array),16);break;case"LOD":i=new so;break;case"Line":i=new So(s(t.geometry),l(t.material),t.mode);break;case"LineLoop":i=new Co(s(t.geometry),l(t.material));break;case"LineSegments":i=new Lo(s(t.geometry),l(t.material));break;case"PointCloud":case"Points":i=new Io(s(t.geometry),l(t.material));break;case"Sprite":i=new $a(l(t.material));break;case"Group":i=new wa;break;case"Bone":i=new co;break;default:i=new Re}if(i.uuid=t.uuid,void 0!==t.name&&(i.name=t.name),void 0!==t.matrix?(i.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(i.matrixAutoUpdate=t.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==t.position&&i.position.fromArray(t.position),void 0!==t.rotation&&i.rotation.fromArray(t.rotation),void 0!==t.quaternion&&i.quaternion.fromArray(t.quaternion),void 0!==t.scale&&i.scale.fromArray(t.scale)),void 0!==t.castShadow&&(i.castShadow=t.castShadow),void 0!==t.receiveShadow&&(i.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(i.shadow.bias=t.shadow.bias),void 0!==t.shadow.normalBias&&(i.shadow.normalBias=t.shadow.normalBias),void 0!==t.shadow.radius&&(i.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&i.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(i.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.frustumCulled&&(i.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(i.renderOrder=t.renderOrder),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.layers&&(i.layers.mask=t.layers),void 0!==t.children)for(var h=t.children,d=0;d<h.length;d++)i.add(this.parseObject(h[d],e,a,n));if(void 0!==t.animations)for(var p=t.animations,f=0;f<p.length;f++){var m=p[f];i.animations.push(n[m])}if("LOD"===t.type){void 0!==t.autoUpdate&&(i.autoUpdate=t.autoUpdate);for(var g=t.levels,v=0;v<g.length;v++){var y=g[v],_=i.getObjectByProperty("uuid",y.object);void 0!==_&&i.addLevel(_,y.distance)}}return i},n.bindSkeletons=function(t,n){0!==Object.keys(n).length&&t.traverse(function(t){var e;!0===t.isSkinnedMesh&&void 0!==t.skeleton&&(void 0===(e=n[t.skeleton])?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",t.skeleton):t.bind(e,t.bindMatrix))})},n.setTexturePath=function(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)},t}(tu),eh={UVMapping:300,CubeReflectionMapping:D,CubeRefractionMapping:N,EquirectangularReflectionMapping:h,EquirectangularRefractionMapping:d,CubeUVReflectionMapping:I,CubeUVRefractionMapping:B},nh={RepeatWrapping:1e3,ClampToEdgeWrapping:z,MirroredRepeatWrapping:1002},ih={NearestFilter:H,NearestMipmapNearestFilter:U,NearestMipmapLinearFilter:G,LinearFilter:j,LinearMipmapNearestFilter:1007,LinearMipmapLinearFilter:u};function rh(t){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),tu.call(this,t),this.options={premultiplyAlpha:"none"}}function ah(){this.type="ShapePath",this.color=new en,this.subPaths=[],this.currentPath=null}function oh(t){this.type="Font",this.data=t}function sh(t){tu.call(this,t)}rh.prototype=Object.assign(Object.create(tu.prototype),{constructor:rh,isImageBitmapLoader:!0,setOptions:function(t){return this.options=t,this},load:function(e,n,t,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,a=Qc.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout(function(){n&&n(a),r.manager.itemEnd(e)},0),a;var o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",fetch(e,o).then(function(t){return t.blob()}).then(function(t){return createImageBitmap(t,r.options)}).then(function(t){Qc.add(e,t),n&&n(t),r.manager.itemEnd(e)}).catch(function(t){i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}),r.manager.itemStart(e)}}),Object.assign(ah.prototype,{moveTo:function(t,e){return this.currentPath=new Ru,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this},lineTo:function(t,e){return this.currentPath.lineTo(t,e),this},quadraticCurveTo:function(t,e,n,i){return this.currentPath.quadraticCurveTo(t,e,n,i),this},bezierCurveTo:function(t,e,n,i,r,a){return this.currentPath.bezierCurveTo(t,e,n,i,r,a),this},splineThru:function(t){return this.currentPath.splineThru(t),this},toShapes:function(t,e){function n(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n],a=new Pu;a.curves=r.curves,e.push(a)}return e}var i,r,a,o=qs.isClockWise,s=this.subPaths;if(0===s.length)return[];if(!0===e)return n(s);var l=[];if(1===s.length)return r=s[0],(a=new Pu).curves=r.curves,l.push(a),l;var c,u,h=!o(s[0].getPoints()),h=t?!h:h,d=[],p=[],f=[],m=0;p[m]=void 0,f[m]=[];for(var g=0,v=s.length;g<v;g++)i=o(c=(r=s[g]).getPoints()),(i=t?!i:i)?(!h&&p[m]&&m++,p[m]={s:new Pu,p:c},p[m].s.curves=r.curves,h&&m++,f[m]=[]):f[m].push({h:r,p:c[0]});if(!p[0])return n(s);if(1<p.length){for(var y=!1,_=[],x=0,b=p.length;x<b;x++)d[x]=[];for(var w=0,T=p.length;w<T;w++)for(var M=f[w],S=0;S<M.length;S++){for(var E=M[S],A=!0,L=0;L<p.length;L++)!function(t,e){for(var n=e.length,i=!1,r=n-1,a=0;a<n;r=a++){var o=e[r],s=e[a],l=s.x-o.x,c=s.y-o.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(o=e[a],l=-l,s=e[r],c=-c),t.y<o.y||t.y>s.y)continue;if(t.y===o.y){if(t.x===o.x)return 1}else{var u=c*(t.x-o.x)-l*(t.y-o.y);if(0==u)return 1;if(u<0)continue;i=!i}}else{if(t.y!==o.y)continue;if(s.x<=t.x&&t.x<=o.x||o.x<=t.x&&t.x<=s.x)return 1}}return i}(E.p,p[L].p)||(w!==L&&_.push({froms:w,tos:L,hole:S}),A?(A=!1,d[L].push(E)):y=!0);A&&d[w].push(E)}0<_.length&&(y||(f=d))}for(var C=0,R=p.length;C<R;C++){a=p[C].s,l.push(a);for(var P=0,O=(u=f[C]).length;P<O;P++)a.holes.push(u[P].h)}return l}}),Object.assign(oh.prototype,{isFont:!0,generateShapes:function(t,e){void 0===e&&(e=100);for(var n=[],i=function(t,e,n){for(var i=Array.from?Array.from(t):String(t).split(""),r=e/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,o=[],s=0,l=0,c=0;c<i.length;c++){var u,h=i[c];"\n"===h?(s=0,l-=a):(s+=(u=function(t,e,n,i,r){var a=r.glyphs[t]||r.glyphs["?"];if(a){var o,s,l,c,u,h,d,p,f=new ah;if(a.o)for(var m=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),g=0,v=m.length;g<v;)switch(m[g++]){case"m":o=m[g++]*e+n,s=m[g++]*e+i,f.moveTo(o,s);break;case"l":o=m[g++]*e+n,s=m[g++]*e+i,f.lineTo(o,s);break;case"q":l=m[g++]*e+n,c=m[g++]*e+i,u=m[g++]*e+n,h=m[g++]*e+i,f.quadraticCurveTo(u,h,l,c);break;case"b":l=m[g++]*e+n,c=m[g++]*e+i,u=m[g++]*e+n,h=m[g++]*e+i,d=m[g++]*e+n,p=m[g++]*e+i,f.bezierCurveTo(u,h,d,p,l,c)}return{offsetX:a.ha*e,path:f}}console.error('THREE.Font: character "'+t+'" does not exists in font family '+r.familyName+".")}(h,r,s,l,n)).offsetX,o.push(u.path))}return o}(t,e,this.data),r=0,a=i.length;r<a;r++)Array.prototype.push.apply(n,i[r].toShapes());return n}}),sh.prototype=Object.assign(Object.create(tu.prototype),{constructor:sh,load:function(t,i,e,n){var r=this,a=new nu(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(r.withCredentials),a.load(t,function(e){var n;try{n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var t=r.parse(n);i&&i(t)},e,n)},parse:function(t){return new oh(t)}});var lh={getContext:function(){return void 0===Ku&&(Ku=new(window.AudioContext||window.webkitAudioContext)),Ku},setContext:function(t){Ku=t}};function ch(t){tu.call(this,t)}function uh(t,e,n){Xu.call(this,void 0,n);var i=(new en).set(t),r=(new en).set(e),a=new Bt(i.r,i.g,i.b),o=new Bt(r.r,r.g,r.b),s=Math.sqrt(Math.PI),l=s*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(o).multiplyScalar(s),this.sh.coefficients[1].copy(a).sub(o).multiplyScalar(l)}function hh(t,e){Xu.call(this,void 0,e);var n=(new en).set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}ch.prototype=Object.assign(Object.create(tu.prototype),{constructor:ch,load:function(n,i,t,r){var a=this,e=new nu(a.manager);e.setResponseType("arraybuffer"),e.setPath(a.path),e.setRequestHeader(a.requestHeader),e.setWithCredentials(a.withCredentials),e.load(n,function(t){try{var e=t.slice(0);lh.getContext().decodeAudioData(e,function(t){i(t)})}catch(t){r?r(t):console.error(t),a.manager.itemError(n)}},t,r)}}),uh.prototype=Object.assign(Object.create(Xu.prototype),{constructor:uh,isHemisphereLightProbe:!0,copy:function(t){return Xu.prototype.copy.call(this,t),this},toJSON:function(t){return Xu.prototype.toJSON.call(this,t)}}),hh.prototype=Object.assign(Object.create(Xu.prototype),{constructor:hh,isAmbientLightProbe:!0,copy:function(t){return Xu.prototype.copy.call(this,t),this},toJSON:function(t){return Xu.prototype.toJSON.call(this,t)}});var dh=new Kt,ph=new Kt;function fh(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new hi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new hi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(fh.prototype,{update:function(t){var e,n,i,r,a,o,s=this._cache;s.focus===t.focus&&s.fov===t.fov&&s.aspect===t.aspect*this.aspect&&s.near===t.near&&s.far===t.far&&s.zoom===t.zoom&&s.eyeSep===this.eyeSep||(s.focus=t.focus,s.fov=t.fov,s.aspect=t.aspect*this.aspect,s.near=t.near,s.far=t.far,s.zoom=t.zoom,s.eyeSep=this.eyeSep,i=t.projectionMatrix.clone(),a=(r=s.eyeSep/2)*s.near/s.focus,o=s.near*Math.tan(Pt.DEG2RAD*s.fov*.5)/s.zoom,ph.elements[12]=-r,dh.elements[12]=r,e=-o*s.aspect+a,n=o*s.aspect+a,i.elements[0]=2*s.near/(n-e),i.elements[8]=(n+e)/(n-e),this.cameraL.projectionMatrix.copy(i),e=-o*s.aspect-a,n=o*s.aspect-a,i.elements[0]=2*s.near/(n-e),i.elements[8]=(n+e)/(n-e),this.cameraR.projectionMatrix.copy(i)),this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(ph),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(dh)}});var mh,gh=((mh=vh.prototype).start=function(){this.startTime=yh(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},mh.stop=function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},mh.getElapsedTime=function(){return this.getDelta(),this.elapsedTime},mh.getDelta=function(){var t,e=0;return this.autoStart&&!this.running?(this.start(),0):(this.running&&(e=((t=yh())-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e),e)},vh);function vh(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function yh(){return("undefined"==typeof performance?Date:performance).now()}var _h,xh=new Bt,bh=new ut,wh=new Bt,Th=new Bt,Mh=function(r){function t(){var t;return(t=r.call(this)||this).type="AudioListener",t.context=lh.getContext(),t.gain=t.context.createGain(),t.gain.connect(t.context.destination),t.filter=null,t.timeDelta=0,t._clock=new gh,t}C(t,r);var e=t.prototype;return e.getInput=function(){return this.gain},e.removeFilter=function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},e.getFilter=function(){return this.filter},e.setFilter=function(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},e.getMasterVolume=function(){return this.gain.gain.value},e.setMasterVolume=function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this},e.updateMatrixWorld=function(t){r.prototype.updateMatrixWorld.call(this,t);var e,n=this.context.listener,i=this.up;this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(xh,bh,wh),Th.set(0,0,-1).applyQuaternion(bh),n.positionX?(e=this.context.currentTime+this.timeDelta,n.positionX.linearRampToValueAtTime(xh.x,e),n.positionY.linearRampToValueAtTime(xh.y,e),n.positionZ.linearRampToValueAtTime(xh.z,e),n.forwardX.linearRampToValueAtTime(Th.x,e),n.forwardY.linearRampToValueAtTime(Th.y,e),n.forwardZ.linearRampToValueAtTime(Th.z,e),n.upX.linearRampToValueAtTime(i.x,e),n.upY.linearRampToValueAtTime(i.y,e),n.upZ.linearRampToValueAtTime(i.z,e)):(n.setPosition(xh.x,xh.y,xh.z),n.setOrientation(Th.x,Th.y,Th.z,i.x,i.y,i.z))},t}(Re),Sh=function(n){function t(t){var e;return(e=n.call(this)||this).type="Audio",e.listener=t,e.context=t.context,e.gain=e.context.createGain(),e.gain.connect(t.getInput()),e.autoplay=!1,e.buffer=null,e.detune=0,e.loop=!1,e.loopStart=0,e.loopEnd=0,e.offset=0,e.duration=void 0,e.playbackRate=1,e.isPlaying=!1,e.hasPlaybackControl=!0,e.source=null,e.sourceType="empty",e._startedAt=0,e._progress=0,e._connected=!1,e.filters=[],e}C(t,n);var e=t.prototype;return e.getOutput=function(){return this.gain},e.setNodeSource=function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},e.setMediaElementSource=function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this},e.setMediaStreamSource=function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this},e.setBuffer=function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},e.play=function(t){if(void 0===t&&(t=0),!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+t;var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},e.pause=function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},e.stop=function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},e.connect=function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this},e.disconnect=function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this},e.getFilters=function(){return this.filters},e.setFilters=function(t){return t=t||[],!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this},e.setDetune=function(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},e.getDetune=function(){return this.detune},e.getFilter=function(){return this.getFilters()[0]},e.setFilter=function(t){return this.setFilters(t?[t]:[])},e.setPlaybackRate=function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},e.getPlaybackRate=function(){return this.playbackRate},e.onEnded=function(){this.isPlaying=!1},e.getLoop=function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},e.setLoop=function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},e.setLoopStart=function(t){return this.loopStart=t,this},e.setLoopEnd=function(t){return this.loopEnd=t,this},e.getVolume=function(){return this.gain.gain.value},e.setVolume=function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this},t}(Re),Eh=new Bt,Ah=new ut,Lh=new Bt,Ch=new Bt,Rh=function(i){function t(t){var e;return(e=i.call(this,t)||this).panner=e.context.createPanner(),e.panner.panningModel="HRTF",e.panner.connect(e.gain),e}C(t,i);var e=t.prototype;return e.getOutput=function(){return this.panner},e.getRefDistance=function(){return this.panner.refDistance},e.setRefDistance=function(t){return this.panner.refDistance=t,this},e.getRolloffFactor=function(){return this.panner.rolloffFactor},e.setRolloffFactor=function(t){return this.panner.rolloffFactor=t,this},e.getDistanceModel=function(){return this.panner.distanceModel},e.setDistanceModel=function(t){return this.panner.distanceModel=t,this},e.getMaxDistance=function(){return this.panner.maxDistance},e.setMaxDistance=function(t){return this.panner.maxDistance=t,this},e.setDirectionalCone=function(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this},e.updateMatrixWorld=function(t){var e,n;i.prototype.updateMatrixWorld.call(this,t),!0===this.hasPlaybackControl&&!1===this.isPlaying||(this.matrixWorld.decompose(Eh,Ah,Lh),Ch.set(0,0,1).applyQuaternion(Ah),(e=this.panner).positionX?(n=this.context.currentTime+this.listener.timeDelta,e.positionX.linearRampToValueAtTime(Eh.x,n),e.positionY.linearRampToValueAtTime(Eh.y,n),e.positionZ.linearRampToValueAtTime(Eh.z,n),e.orientationX.linearRampToValueAtTime(Ch.x,n),e.orientationY.linearRampToValueAtTime(Ch.y,n),e.orientationZ.linearRampToValueAtTime(Ch.z,n)):(e.setPosition(Eh.x,Eh.y,Eh.z),e.setOrientation(Ch.x,Ch.y,Ch.z)))},t}(Sh),Ph=((_h=Oh.prototype).getFrequencyData=function(){return this.analyser.getByteFrequencyData(this.data),this.data},_h.getAverageFrequency=function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length},Oh);function Oh(t,e){void 0===e&&(e=2048),this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function Dh(t,e,n){var i,r,a;switch(this.binding=t,this.valueSize=n,e){case"quaternion":i=this._slerp,r=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(Dh.prototype,{accumulate:function(t,e){var n=this.buffer,i=this.valueSize,r=t*i+i,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==i;++o)n[r+o]=n[o];a=e}else{var s=e/(a+=e);this._mixBufferRegion(n,r,0,s,i)}this.cumulativeWeight=a},accumulateAdditive:function(t){var e=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,i,0,t,n),this.cumulativeWeightAdditive+=t},apply:function(t){var e,n=this.valueSize,i=this.buffer,r=t*n+n,a=this.cumulativeWeight,o=this.cumulativeWeightAdditive,s=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1&&(e=n*this._origIndex,this._mixBufferRegion(i,r,e,1-a,n)),0<o&&this._mixBufferRegionAdditive(i,r,this._addIndex*n,1,n);for(var l=n,c=n+n;l!==c;++l)if(i[l]!==i[l+n]){s.setValue(i,r);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,n=this.valueSize,i=n*this._origIndex;t.getValue(e,i);for(var r=n,a=i;r!==a;++r)e[r]=e[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_setAdditiveIdentityNumeric:function(){for(var t=this._addIndex*this.valueSize,e=t+this.valueSize,n=t;n<e;n++)this.buffer[n]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1},_setAdditiveIdentityOther:function(){for(var t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]},_select:function(t,e,n,i,r){if(.5<=i)for(var a=0;a!==r;++a)t[e+a]=t[n+a]},_slerp:function(t,e,n,i){ut.slerpFlat(t,e,t,e,t,n,i)},_slerpAdditive:function(t,e,n,i,r){var a=this._workIndex*r;ut.multiplyQuaternionsFlat(t,a,t,e,t,n),ut.slerpFlat(t,e,t,e,t,a,i)},_lerp:function(t,e,n,i,r){for(var a=1-i,o=0;o!==r;++o){var s=e+o;t[s]=t[s]*a+t[n+o]*i}},_lerpAdditive:function(t,e,n,i,r){for(var a=0;a!==r;++a){var o=e+a;t[o]=t[o]+t[n+a]*i}}});var Nh=new RegExp("[\\[\\]\\.:\\/]","g"),Ih="[^\\[\\]\\.:\\/]",Bh="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",Fh=/((?:WC+[\/:])*)/.source.replace("WC",Ih),kh=/(WCOD+)?/.source.replace("WCOD",Bh),zh=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Ih),Hh=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Ih),Uh=new RegExp("^"+Fh+kh+zh+Hh+"$"),Gh=["material","materials","bones"];function jh(t,e,n){var i=n||Vh.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}function Vh(t,e,n){this.path=e,this.parsedPath=n||Vh.parseTrackName(e),this.node=Vh.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function Wh(){this.uuid=Pt.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,n=arguments.length;e!==n;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}Object.assign(jh.prototype,{getValue:function(t,e){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(t,e)},setValue:function(t,e){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}),Object.assign(Vh,{Composite:jh,create:function(t,e,n){return t&&t.isAnimationObjectGroup?new Vh.Composite(t,e,n):new Vh(t,e,n)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(Nh,"")},parseTrackName:function(t){var e=Uh.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var n,i={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r&&(n=i.nodeName.substring(r+1),-1!==Gh.indexOf(n)&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=n)),null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i},findNode:function(t,a){if(!a||""===a||"."===a||-1===a||a===t.name||a===t.uuid)return t;if(t.skeleton){var e=t.skeleton.getBoneByName(a);if(void 0!==e)return e}if(t.children){var n=function t(e){for(var n=0;n<e.length;n++){var i=e[n];if(i.name===a||i.uuid===a)return i;var r=t(i.children);if(r)return r}return null}(t.children);if(n)return n}return null}}),Object.assign(Vh.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)t[e++]=n[i]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++]},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,n=e.objectName,i=e.propertyName,r=e.propertyIndex;if(t||(t=Vh.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(n){var a=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var o=0;o<t.length;o++)if(t[o].name===a){a=o;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==a){if(void 0===t[a])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[a]}}var s=t[i];if(void 0!==s){var l=this.Versioning.None;void 0!==(this.targetObject=t).needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[r]&&(r=t.morphTargetDictionary[r])}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}else{var u=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Vh.prototype,{_getValue_unbound:Vh.prototype.getValue,_setValue_unbound:Vh.prototype.setValue}),Object.assign(Wh.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,a=r.length,o=void 0,s=t.length,l=this.nCachedObjects_,c=0,u=arguments.length;c!==u;++c){var h=arguments[c],d=h.uuid,p=e[d];if(void 0===p){p=s++,e[d]=p,t.push(h);for(var f=0,m=a;f!==m;++f)r[f].push(new Vh(h,n[f],i[f]))}else if(p<l){o=t[p];var g=--l,v=t[g];t[e[v.uuid]=p]=v,t[e[d]=g]=h;for(var y=0,_=a;y!==_;++y){var x=r[y],b=x[g],w=x[p];x[p]=b,void 0===w&&(w=new Vh(h,n[y],i[y])),x[g]=w}}else t[p]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l},remove:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length,r=this.nCachedObjects_,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],l=s.uuid,c=e[l];if(void 0!==c&&r<=c){var u=r++,h=t[u];t[e[h.uuid]=c]=h,t[e[l]=u]=s;for(var d=0,p=i;d!==p;++d){var f=n[d],m=f[u],g=f[c];f[c]=m,f[u]=g}}}this.nCachedObjects_=r},uncache:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length,r=this.nCachedObjects_,a=t.length,o=0,s=arguments.length;o!==s;++o){var l=arguments[o].uuid,c=e[l];if(void 0!==c)if(delete e[l],c<r){var u=--r,h=t[u],d=--a,p=t[d];t[e[h.uuid]=c]=h,t[e[p.uuid]=u]=p,t.pop();for(var f=0,m=i;f!==m;++f){var g=n[f],v=g[u],y=g[d];g[c]=v,g[u]=y,g.pop()}}else{var _=--a,x=t[_];0<_&&(e[x.uuid]=c),t[c]=x,t.pop();for(var b=0,w=i;b!==w;++b){var T=n[b];T[c]=T[_],T.pop()}}}this.nCachedObjects_=r},subscribe_:function(t,e){var n=this._bindingsIndicesByPath,i=n[t],r=this._bindings;if(void 0!==i)return r[i];var a=this._paths,o=this._parsedPaths,s=this._objects,l=s.length,c=this.nCachedObjects_,u=new Array(l),i=r.length;n[t]=i,a.push(t),o.push(e),r.push(u);for(var h=c,d=s.length;h!==d;++h){var p=s[h];u[h]=new Vh(p,t,e)}return u},unsubscribe_:function(t){var e,n,i,r,a,o=this._bindingsIndicesByPath,s=o[t];void 0!==s&&(e=this._paths,n=this._parsedPaths,a=(i=this._bindings)[r=i.length-1],i[o[t[r]]=s]=a,i.pop(),n[s]=n[r],n.pop(),e[s]=e[r],e.pop())}});var qh,Xh=((qh=Yh.prototype).play=function(){return this._mixer._activateAction(this),this},qh.stop=function(){return this._mixer._deactivateAction(this),this.reset()},qh.reset=function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},qh.isRunning=function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},qh.isScheduled=function(){return this._mixer._isActiveAction(this)},qh.startAt=function(t){return this._startTime=t,this},qh.setLoop=function(t,e){return this.loop=t,this.repetitions=e,this},qh.setEffectiveWeight=function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},qh.getEffectiveWeight=function(){return this._effectiveWeight},qh.fadeIn=function(t){return this._scheduleFading(t,0,1)},qh.fadeOut=function(t){return this._scheduleFading(t,1,0)},qh.crossFadeFrom=function(t,e,n){var i,r,a,o;return t.fadeOut(e),this.fadeIn(e),n&&(i=this._clip.duration,a=(r=t._clip.duration)/i,o=i/r,t.warp(1,a,e),this.warp(o,1,e)),this},qh.crossFadeTo=function(t,e,n){return t.crossFadeFrom(this,e,n)},qh.stopFading=function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},qh.setEffectiveTimeScale=function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},qh.getEffectiveTimeScale=function(){return this._effectiveTimeScale},qh.setDuration=function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},qh.syncWith=function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},qh.halt=function(t){return this.warp(this._effectiveTimeScale,0,t)},qh.warp=function(t,e,n){var i=this._mixer,r=i.time,a=this.timeScale,o=this._timeScaleInterpolant;null===o&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,l=o.sampleValues;return s[0]=r,s[1]=r+n,l[0]=t/a,l[1]=e/a,this},qh.stopWarping=function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},qh.getMixer=function(){return this._mixer},qh.getClip=function(){return this._clip},qh.getRoot=function(){return this._localRoot||this._mixer._root},qh._update=function(t,e,n,i){if(this.enabled){var r=this._startTime;if(null!==r){var a=(t-r)*n;if(a<0||0===n)return;this._startTime=null,e=n*a}e*=this._updateTimeScale(t);var o=this._updateTime(e),s=this._updateWeight(t);if(0<s){var l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case 2501:for(var u=0,h=l.length;u!==h;++u)l[u].evaluate(o),c[u].accumulateAdditive(s);break;case 2500:default:for(var d=0,p=l.length;d!==p;++d)l[d].evaluate(o),c[d].accumulate(i,s)}}}else this._updateWeight(t)},qh._updateWeight=function(t){var e,n,i=0;return this.enabled&&(i=this.weight,null!==(e=this._weightInterpolant)&&(i*=n=e.evaluate(t)[0],t>e.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1)))),this._effectiveWeight=i},qh._updateTimeScale=function(t){var e,n=0;return this.paused||(n=this.timeScale,null!==(e=this._timeScaleInterpolant)&&(n*=e.evaluate(t)[0],t>e.parameterPositions[1]&&(this.stopWarping(),0===n?this.paused=!0:this.timeScale=n))),this._effectiveTimeScale=n},qh._updateTime=function(t){var e,n,i,r=this._clip.duration,a=this.loop,o=this.time+t,s=this._loopCount,l=2202===a;if(0===t)return-1!==s&&l&&1==(1&s)?r-o:o;if(2200===a){-1===s&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(r<=o)o=r;else{if(!(o<0)){this.time=o;break t}o=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===s&&(0<=t?(s=0,this._setEndings(!0,0===this.repetitions,l)):this._setEndings(0===this.repetitions,!0,l)),r<=o||o<0?(o-=r*(e=Math.floor(o/r)),s+=Math.abs(e),(n=this.repetitions-s)<=0?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,o=0<t?r:0,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<t?1:-1})):(1==n?(i=t<0,this._setEndings(i,!i,l)):this._setEndings(!1,!1,l),this._loopCount=s,this.time=o,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:e}))):this.time=o,l&&1==(1&s))return r-o}return o},qh._setEndings=function(t,e,n){var i=this._interpolantSettings;n?(i.endingStart=2401,i.endingEnd=2401):(i.endingStart=t?this.zeroSlopeAtStart?2401:2400:2402,i.endingEnd=e?this.zeroSlopeAtEnd?2401:2400:2402)},qh._scheduleFading=function(t,e,n){var i=this._mixer,r=i.time,a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=r,s[0]=e,o[1]=r+t,s[1]=n,this},Yh);function Yh(t,e,n,i){void 0===n&&(n=null),void 0===i&&(i=e.blendMode),this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=i;for(var r=e.tracks,a=r.length,o=new Array(a),s={endingStart:2400,endingEnd:2400},l=0;l!==a;++l){var c=r[l].createInterpolant(null);(o[l]=c).settings=s}this._interpolantSettings=s,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Zh(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}Zh.prototype=Object.assign(Object.create(T.prototype),{constructor:Zh,_bindAction:function(t,e){var n=t._localRoot||this._root,i=t._clip.tracks,r=i.length,a=t._propertyBindings,o=t._interpolants,s=n.uuid,l=this._bindingsByRootAndName,c=l[s];void 0===c&&(c={},l[s]=c);for(var u=0;u!==r;++u){var h=i[u],d=h.name,p=c[d];if(void 0!==p)a[u]=p;else{if(void 0!==(p=a[u])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,s,d));continue}var f=e&&e._propertyBindings[u].binding.parsedPath;++(p=new Dh(Vh.create(n,d,f),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(p,s,d),a[u]=p}o[u].resultBuffer=p.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){var e,n,i;null===t._cacheIndex&&(e=(t._localRoot||this._root).uuid,n=t._clip.uuid,i=this._actionsByClip[n],this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,n,e));for(var r=t._propertyBindings,a=0,o=r.length;a!==o;++a){var s=r[a];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){var i,r=this._actions,a=this._actionsByClip,o=a[e];void 0===o?(o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,a[e]=o):(i=o.knownActions,t._byClipCacheIndex=i.length,i.push(t)),t._cacheIndex=r.length,r.push(t),o.actionByRoot[n]=t},_removeInactiveAction:function(t){var e=this._actions,n=e[e.length-1],i=t._cacheIndex;e[n._cacheIndex=i]=n,e.pop(),t._cacheIndex=null;var r=t._clip.uuid,a=this._actionsByClip,o=a[r],s=o.knownActions,l=s[s.length-1],c=t._byClipCacheIndex;s[l._byClipCacheIndex=c]=l,s.pop(),t._byClipCacheIndex=null,delete o.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete a[r],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0==--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(t){var e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,r=e[i];e[t._cacheIndex=i]=t,e[r._cacheIndex=n]=r},_takeBackAction:function(t){var e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,r=e[i];e[t._cacheIndex=i]=t,e[r._cacheIndex=n]=r},_addInactiveBinding:function(t,e,n){var i=this._bindingsByRootAndName,r=this._bindings,a=i[e];void 0===a&&(a={},i[e]=a),(a[n]=t)._cacheIndex=r.length,r.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,n=t.binding,i=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,o=a[i],s=e[e.length-1],l=t._cacheIndex;e[s._cacheIndex=l]=s,e.pop(),delete o[r],0===Object.keys(o).length&&delete a[i]},_lendBinding:function(t){var e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,r=e[i];e[t._cacheIndex=i]=t,e[r._cacheIndex=n]=r},_takeBackBinding:function(t){var e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,r=e[i];e[t._cacheIndex=i]=t,e[r._cacheIndex=n]=r},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&(t[(n=new Hc(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e]=n),n},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];e[t.__cacheIndex=i]=t,e[r.__cacheIndex=n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e,n){var i=e||this._root,r=i.uuid,a="string"==typeof t?Jc.findByName(i,t):t,o=null!==a?a.uuid:t,s=this._actionsByClip[o],l=null;if(void 0===n&&(n=null!==a?a.blendMode:2500),void 0!==s){var c=s.actionByRoot[r];if(void 0!==c&&c.blendMode===n)return c;l=s.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;var u=new Xh(this,a,e,n);return this._bindAction(u,l),this._addInactiveAction(u,o,r),u},existingAction:function(t,e){var n=e||this._root,i=n.uuid,r="string"==typeof t?Jc.findByName(n,t):t,a=r?r.uuid:t,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[i]||null},stopAllAction:function(){for(var t=this._actions,e=this._nActiveActions-1;0<=e;--e)t[e].stop();return this},update:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,i=this.time+=t,r=Math.sign(t),a=this._accuIndex^=1,o=0;o!==n;++o)e[o]._update(i,t,r,a);for(var s=this._bindings,l=this._nActiveBindings,c=0;c!==l;++c)s[c].apply(a);return this},setTime:function(t){for(var e=this.time=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,n=t.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var a=r.knownActions,o=0,s=a.length;o!==s;++o){var l=a[o];this._deactivateAction(l);var c=l._cacheIndex,u=e[e.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,e[u._cacheIndex=c]=u,e.pop(),this._removeInactiveBindingsForAction(l)}delete i[n]}},uncacheRoot:function(t){var e=t.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot[e];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var a=this._bindingsByRootAndName[e];if(void 0!==a)for(var o in a){var s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}});var Jh=(Qh.prototype.clone=function(){return new Qh(void 0===this.value.clone?this.value:this.value.clone())},Qh);function Qh(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}function $h(t,e,n){Ia.call(this,t,e),this.meshPerAttribute=n||1}function Kh(t,e,n,i,r){this.buffer=t,this.type=e,this.itemSize=n,this.elementSize=i,this.count=r,this.version=0}function td(t,e,n,i){this.ray=new $t(t,e),this.near=n||0,this.far=i||1/0,this.camera=null,this.layers=new me,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function ed(t,e){return t.distance-e.distance}function nd(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===i)for(var r=t.children,a=0,o=r.length;a<o;a++)nd(r[a],e,n,!0)}$h.prototype=Object.assign(Object.create(Ia.prototype),{constructor:$h,isInstancedInterleavedBuffer:!0,copy:function(t){return Ia.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},clone:function(t){var e=Ia.prototype.clone.call(this,t);return e.meshPerAttribute=this.meshPerAttribute,e},toJSON:function(t){var e=Ia.prototype.toJSON.call(this,t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}),Object.defineProperty(Kh.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Kh.prototype,{isGLBufferAttribute:!0,setBuffer:function(t){return this.buffer=t,this},setType:function(t,e){return this.type=t,this.elementSize=e,this},setItemSize:function(t){return this.itemSize=t,this},setCount:function(t){return this.count=t,this}}),Object.assign(td.prototype,{set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,n){var i=n||[];return nd(t,this,i,e),i.sort(ed),i},intersectObjects:function(t,e,n){var i=n||[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var r=0,a=t.length;r<a;r++)nd(t[r],this,i,e);return i.sort(ed),i}});var id,rd,ad,od,sd=((od=vd.prototype).set=function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this},od.clone=function(){return(new this.constructor).copy(this)},od.copy=function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},od.makeSafe=function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},od.setFromVector3=function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},od.setFromCartesianCoords=function(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(Pt.clamp(e/this.radius,-1,1))),this},vd),ld=((ad=gd.prototype).set=function(t,e,n){return this.radius=t,this.theta=e,this.y=n,this},ad.clone=function(){return(new this.constructor).copy(this)},ad.copy=function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},ad.setFromVector3=function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},ad.setFromCartesianCoords=function(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this},gd),cd=new It,ud=((rd=md.prototype).set=function(t,e){return this.min.copy(t),this.max.copy(e),this},rd.setFromPoints=function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},rd.setFromCenterAndSize=function(t,e){var n=cd.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this},rd.clone=function(){return(new this.constructor).copy(this)},rd.copy=function(t){return this.min.copy(t.min),this.max.copy(t.max),this},rd.makeEmpty=function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},rd.isEmpty=function(){return this.max.x<this.min.x||this.max.y<this.min.y},rd.getCenter=function(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new It),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},rd.getSize=function(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new It),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},rd.expandByPoint=function(t){return this.min.min(t),this.max.max(t),this},rd.expandByVector=function(t){return this.min.sub(t),this.max.add(t),this},rd.expandByScalar=function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},rd.containsPoint=function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},rd.containsBox=function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},rd.getParameter=function(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new It),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},rd.intersectsBox=function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},rd.clampPoint=function(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new It),e.copy(t).clamp(this.min,this.max)},rd.distanceToPoint=function(t){return cd.copy(t).clamp(this.min,this.max).sub(t).length()},rd.intersect=function(t){return this.min.max(t.min),this.max.min(t.max),this},rd.union=function(t){return this.min.min(t.min),this.max.max(t.max),this},rd.translate=function(t){return this.min.add(t),this.max.add(t),this},rd.equals=function(t){return t.min.equals(this.min)&&t.max.equals(this.max)},md),hd=new Bt,dd=new Bt,pd=((id=fd.prototype).set=function(t,e){return this.start.copy(t),this.end.copy(e),this},id.clone=function(){return(new this.constructor).copy(this)},id.copy=function(t){return this.start.copy(t.start),this.end.copy(t.end),this},id.getCenter=function(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new Bt),t.addVectors(this.start,this.end).multiplyScalar(.5)},id.delta=function(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new Bt),t.subVectors(this.end,this.start)},id.distanceSq=function(){return this.start.distanceToSquared(this.end)},id.distance=function(){return this.start.distanceTo(this.end)},id.at=function(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new Bt),this.delta(e).multiplyScalar(t).add(this.start)},id.closestPointToPointParameter=function(t,e){hd.subVectors(t,this.start),dd.subVectors(this.end,this.start);var n=dd.dot(dd),i=dd.dot(hd)/n;return e&&(i=Pt.clamp(i,0,1)),i},id.closestPointToPoint=function(t,e,n){var i=this.closestPointToPointParameter(t,e);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new Bt),this.delta(n).multiplyScalar(i).add(this.start)},id.applyMatrix4=function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},id.equals=function(t){return t.start.equals(this.start)&&t.end.equals(this.end)},fd);function fd(t,e){this.start=void 0!==t?t:new Bt,this.end=void 0!==e?e:new Bt}function md(t,e){Object.defineProperty(this,"isBox2",{value:!0}),this.min=void 0!==t?t:new It(1/0,1/0),this.max=void 0!==e?e:new It(-1/0,-1/0)}function gd(t,e,n){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==n?n:0,this}function vd(t,e,n){return void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),this.radius=t,this.phi=e,this.theta=n,this}function yd(t){Re.call(this),this.material=t,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}((yd.prototype=Object.create(Re.prototype)).constructor=yd).prototype.isImmediateRenderObject=!0;var _d,xd=new Bt,bd=function(u){function t(t,e){var n;(n=u.call(this)||this).light=t,n.light.updateMatrixWorld(),n.matrix=t.matrixWorld,n.matrixAutoUpdate=!1,n.color=e;for(var i=new Bn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],a=0,o=1;a<32;a++,o++){var s=a/32*Math.PI*2,l=o/32*Math.PI*2;r.push(Math.cos(s),Math.sin(s),1,Math.cos(l),Math.sin(l),1)}i.setAttribute("position",new bn(r,3));var c=new _o({fog:!1,toneMapped:!1});return n.cone=new Lo(i,c),n.add(n.cone),n.update(),n}C(t,u);var e=t.prototype;return e.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},e.update=function(){this.light.updateMatrixWorld();var t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),xd.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(xd),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)},t}(Re),wd=new Bt,Td=new Kt,Md=new Kt,Sd=(C(Ed,_d=Lo),Ed.prototype.updateMatrixWorld=function(t){var e=this.bones,n=this.geometry,i=n.getAttribute("position");Md.copy(this.root.matrixWorld).invert();for(var r=0,a=0;r<e.length;r++){var o=e[r];o.parent&&o.parent.isBone&&(Td.multiplyMatrices(Md,o.matrixWorld),wd.setFromMatrixPosition(Td),i.setXYZ(a,wd.x,wd.y,wd.z),Td.multiplyMatrices(Md,o.parent.matrixWorld),wd.setFromMatrixPosition(Td),i.setXYZ(a+1,wd.x,wd.y,wd.z),a+=2)}n.getAttribute("position").needsUpdate=!0,_d.prototype.updateMatrixWorld.call(this,t)},Ed);function Ed(t){for(var e,n=function t(e){var n=[];e&&e.isBone&&n.push(e);for(var i=0;i<e.children.length;i++)n.push.apply(n,t(e.children[i]));return n}(t),i=new Bn,r=[],a=[],o=new en(0,0,1),s=new en(0,1,0),l=0;l<n.length;l++){var c=n[l];c.parent&&c.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),a.push(o.r,o.g,o.b),a.push(s.r,s.g,s.b))}i.setAttribute("position",new bn(r,3)),i.setAttribute("color",new bn(a,3));var u=new _o({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});return(e=_d.call(this,i,u)||this).type="SkeletonHelper",e.isSkeletonHelper=!0,e.root=t,e.bones=n,e.matrix=t.matrixWorld,e.matrixAutoUpdate=!1,e}var Ad,Ld,Cd,Rd=function(o){function t(t,e,n){var i,r=new Kl(e,4,2),a=new cn({wireframe:!0,fog:!1,toneMapped:!1});return(i=o.call(this,r,a)||this).light=t,i.light.updateMatrixWorld(),i.color=n,i.type="PointLightHelper",i.matrix=i.light.matrixWorld,i.matrixAutoUpdate=!1,i.update(),i}C(t,o);var e=t.prototype;return e.dispose=function(){this.geometry.dispose(),this.material.dispose()},e.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},t}(ti),Pd=new Bt,Od=new en,Dd=new en,Nd=function(s){function t(t,e,n){var i;(i=s.call(this)||this).light=t,i.light.updateMatrixWorld(),i.matrix=t.matrixWorld,i.matrixAutoUpdate=!1,i.color=n;var r=new dl(e);r.rotateY(.5*Math.PI),i.material=new cn({wireframe:!0,fog:!1,toneMapped:!1}),void 0===i.color&&(i.material.vertexColors=!0);var a=r.getAttribute("position"),o=new Float32Array(3*a.count);return r.setAttribute("color",new dn(o,3)),i.add(new ti(r,i.material)),i.update(),i}C(t,s);var e=t.prototype;return e.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},e.update=function(){var t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var e=t.geometry.getAttribute("color");Od.copy(this.light.color),Dd.copy(this.light.groundColor);for(var n=0,i=e.count;n<i;n++){var r=n<i/2?Od:Dd;e.setXYZ(n,r.r,r.g,r.b)}e.needsUpdate=!0}t.lookAt(Pd.setFromMatrixPosition(this.light.matrixWorld).negate())},t}(Re),Id=(C(qd,Cd=Lo),qd),Bd=(C(Wd,Ld=Lo),Wd),Fd=new Bt,kd=new Bt,zd=new Bt,Hd=function(o){function t(t,e,n){var i;(i=o.call(this)||this).light=t,i.light.updateMatrixWorld(),i.matrix=t.matrixWorld,i.matrixAutoUpdate=!1,i.color=n,void 0===e&&(e=1);var r=new Bn;r.setAttribute("position",new bn([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var a=new _o({fog:!1,toneMapped:!1});return i.lightPlane=new So(r,a),i.add(i.lightPlane),(r=new Bn).setAttribute("position",new bn([0,0,0,0,0,1],3)),i.targetLine=new So(r,a),i.add(i.targetLine),i.update(),i}C(t,o);var e=t.prototype;return e.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},e.update=function(){Fd.setFromMatrixPosition(this.light.matrixWorld),kd.setFromMatrixPosition(this.light.target.matrixWorld),zd.subVectors(kd,Fd),this.lightPlane.lookAt(kd),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(kd),this.targetLine.scale.z=zd.length()},t}(Re),Ud=new Bt,Gd=new ui,jd=(C(Vd,Ad=Lo),Vd.prototype.update=function(){var t=this.geometry,e=this.pointMap;Gd.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Xd("c",e,t,Gd,0,0,-1),Xd("t",e,t,Gd,0,0,1),Xd("n1",e,t,Gd,-1,-1,-1),Xd("n2",e,t,Gd,1,-1,-1),Xd("n3",e,t,Gd,-1,1,-1),Xd("n4",e,t,Gd,1,1,-1),Xd("f1",e,t,Gd,-1,-1,1),Xd("f2",e,t,Gd,1,-1,1),Xd("f3",e,t,Gd,-1,1,1),Xd("f4",e,t,Gd,1,1,1),Xd("u1",e,t,Gd,.7,1.1,-1),Xd("u2",e,t,Gd,-.7,1.1,-1),Xd("u3",e,t,Gd,0,2,-1),Xd("cf1",e,t,Gd,-1,0,1),Xd("cf2",e,t,Gd,1,0,1),Xd("cf3",e,t,Gd,0,-1,1),Xd("cf4",e,t,Gd,0,1,1),Xd("cn1",e,t,Gd,-1,0,-1),Xd("cn2",e,t,Gd,1,0,-1),Xd("cn3",e,t,Gd,0,-1,-1),Xd("cn4",e,t,Gd,0,1,-1),t.getAttribute("position").needsUpdate=!0},Vd);function Vd(t){var e,n=new Bn,i=new _o({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],a=[],o={},s=new en(16755200),l=new en(16711680),c=new en(43775),u=new en(16777215),h=new en(3355443);function d(t,e,n){p(t,n),p(e,n)}function p(t,e){r.push(0,0,0),a.push(e.r,e.g,e.b),void 0===o[t]&&(o[t]=[]),o[t].push(r.length/3-1)}return d("n1","n2",s),d("n2","n4",s),d("n4","n3",s),d("n3","n1",s),d("f1","f2",s),d("f2","f4",s),d("f4","f3",s),d("f3","f1",s),d("n1","f1",s),d("n2","f2",s),d("n3","f3",s),d("n4","f4",s),d("p","n1",l),d("p","n2",l),d("p","n3",l),d("p","n4",l),d("u1","u2",c),d("u2","u3",c),d("u3","u1",c),d("c","t",u),d("p","c",h),d("cn1","cn2",h),d("cn3","cn4",h),d("cf1","cf2",h),d("cf3","cf4",h),n.setAttribute("position",new bn(r,3)),n.setAttribute("color",new bn(a,3)),(e=Ad.call(this,n,i)||this).type="CameraHelper",e.camera=t,e.camera.updateProjectionMatrix&&e.camera.updateProjectionMatrix(),e.matrix=t.matrixWorld,e.matrixAutoUpdate=!1,e.pointMap=o,e.update(),e}function Wd(t,e,n,i,r,a){var o;void 0===t&&(t=10),void 0===e&&(e=16),void 0===n&&(n=8),void 0===i&&(i=64),void 0===r&&(r=4473924),void 0===a&&(a=8947848),r=new en(r),a=new en(a);for(var s=[],l=[],c=0;c<=e;c++){var u=c/e*(2*Math.PI),h=Math.sin(u)*t,d=Math.cos(u)*t;s.push(0,0,0),s.push(h,0,d);var p=1&c?r:a;l.push(p.r,p.g,p.b),l.push(p.r,p.g,p.b)}for(var f=0;f<=n;f++)for(var m=1&f?r:a,g=t-t/n*f,v=0;v<i;v++){var y=v/i*(2*Math.PI),_=Math.sin(y)*g,x=Math.cos(y)*g;s.push(_,0,x),l.push(m.r,m.g,m.b),y=(v+1)/i*(2*Math.PI),_=Math.sin(y)*g,x=Math.cos(y)*g,s.push(_,0,x),l.push(m.r,m.g,m.b)}var b=new Bn;b.setAttribute("position",new bn(s,3)),b.setAttribute("color",new bn(l,3));var w=new _o({vertexColors:!0,toneMapped:!1});return(o=Ld.call(this,b,w)||this).type="PolarGridHelper",o}function qd(t,e,n,i){var r;void 0===t&&(t=10),void 0===e&&(e=10),void 0===n&&(n=4473924),void 0===i&&(i=8947848),n=new en(n),i=new en(i);for(var a=e/2,o=t/e,s=t/2,l=[],c=[],u=0,h=0,d=-s;u<=e;u++,d+=o){l.push(-s,0,d,s,0,d),l.push(d,0,-s,d,0,s);var p=u===a?n:i;p.toArray(c,h),h+=3,p.toArray(c,h),h+=3,p.toArray(c,h),h+=3,p.toArray(c,h),h+=3}var f=new Bn;f.setAttribute("position",new bn(l,3)),f.setAttribute("color",new bn(c,3));var m=new _o({vertexColors:!0,toneMapped:!1});return(r=Cd.call(this,f,m)||this).type="GridHelper",r}function Xd(t,e,n,i,r,a,o){Ud.set(r,a,o).unproject(i);var s=e[t];if(void 0!==s)for(var l=n.getAttribute("position"),c=0,u=s.length;c<u;c++)l.setXYZ(s[c],Ud.x,Ud.y,Ud.z)}var Yd,Zd,Jd,Qd,$d,Kd,tp,ep=new pt,np=function(o){function t(t,e){var n;void 0===e&&(e=16776960);var i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),a=new Bn;return a.setIndex(new dn(i,1)),a.setAttribute("position",new dn(r,3)),(n=o.call(this,a,new _o({color:e,toneMapped:!1}))||this).object=t,n.type="BoxHelper",n.matrixAutoUpdate=!1,n.update(),n}C(t,o);var e=t.prototype;return e.update=function(t){var e,n,i,r;void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&ep.setFromObject(this.object),ep.isEmpty()||(e=ep.min,n=ep.max,(r=(i=this.geometry.attributes.position).array)[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=e.x,r[4]=n.y,r[5]=n.z,r[6]=e.x,r[7]=e.y,r[8]=n.z,r[9]=n.x,r[10]=e.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=e.z,r[15]=e.x,r[16]=n.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=n.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere())},e.setFromObject=function(t){return this.object=t,this.update(),this},e.copy=function(t){return Lo.prototype.copy.call(this,t),this.object=t.object,this},t}(Lo),ip=(C(Lp,tp=Lo),Lp.prototype.updateMatrixWorld=function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),tp.prototype.updateMatrixWorld.call(this,t))},Lp),rp=(C(Ap,Kd=So),Ap.prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?1:0,this.lookAt(this.plane.normal),Kd.prototype.updateMatrixWorld.call(this,t)},Ap),ap=new Bt,op=function(s){function t(t,e,n,i,r,a){var o;return(o=s.call(this)||this).type="ArrowHelper",void 0===t&&(t=new Bt(0,0,1)),void 0===e&&(e=new Bt(0,0,0)),void 0===n&&(n=1),void 0===i&&(i=16776960),void 0===r&&(r=.2*n),void 0===a&&(a=.2*r),void 0===Yd&&((Yd=new Bn).setAttribute("position",new bn([0,0,0,0,1,0],3)),(Zd=new ss(0,.5,1,5,1)).translate(0,-.5,0)),o.position.copy(e),o.line=new So(Yd,new _o({color:i,toneMapped:!1})),o.line.matrixAutoUpdate=!1,o.add(o.line),o.cone=new ti(Zd,new cn({color:i,toneMapped:!1})),o.cone.matrixAutoUpdate=!1,o.add(o.cone),o.setDirection(t),o.setLength(n,r,a),o}C(t,s);var e=t.prototype;return e.setDirection=function(t){var e;.99999<t.y?this.quaternion.set(0,0,0,1):t.y<-.99999?this.quaternion.set(1,0,0,0):(ap.set(t.z,0,-t.x).normalize(),e=Math.acos(t.y),this.quaternion.setFromAxisAngle(ap,e))},e.setLength=function(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()},e.setColor=function(t){this.line.material.color.set(t),this.cone.material.color.set(t)},e.copy=function(t){return s.prototype.copy.call(this,t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this},t}(Re),sp=(C(Ep,$d=Lo),Ep),lp=new Float32Array(1),cp=new Int32Array(lp.buffer),up={toHalfFloat:function(t){lp[0]=t;var e=cp[0],n=e>>16&32768,i=e>>12&2047,r=e>>23&255;return r<103?n:142<r?(n|=31744,n|=(255==r?0:1)&&8388607&e):r<113?n|=((i|=2048)>>114-r)+(i>>113-r&1):(n|=r-112<<10|i>>1,n+=1&i)}},hp=Math.pow(2,8),dp=[.125,.215,.35,.446,.526,.582],pp=5+dp.length,fp=((Jd={})[3e3]=0,Jd[3001]=1,Jd[3002]=2,Jd[3004]=3,Jd[3005]=4,Jd[3006]=5,Jd[3007]=6,Jd),mp=new zu,gp=function(){for(var t=[],e=[],n=[],i=8,r=0;r<pp;r++){var a=Math.pow(2,i);e.push(a);var o=1/a;4<r?o=dp[r-8+4-1]:0==r&&(o=0),n.push(o);for(var s=1/(a-1),l=-s/2,c=1+s/2,u=[l,l,c,l,c,c,l,l,c,c,l,c],h=new Float32Array(108),d=new Float32Array(72),p=new Float32Array(36),f=0;f<6;f++){var m=f%3*2/3-1,g=2<f?0:-1,v=[m,g,0,m+2/3,g,0,m+2/3,1+g,0,m,g,0,m+2/3,1+g,0,m,1+g,0];h.set(v,18*f),d.set(u,12*f);var y=[f,f,f,f,f,f];p.set(y,6*f)}var _=new Bn;_.setAttribute("position",new dn(h,3)),_.setAttribute("uv",new dn(d,2)),_.setAttribute("faceIndex",new dn(p,1)),t.push(_),4<i&&i--}return{_lodPlanes:t,_sizeLods:e,_sigmas:n}}(),vp=gp._lodPlanes,yp=gp._sizeLods,_p=gp._sigmas,xp=null,bp=(1+Math.sqrt(5))/2,wp=1/bp,Tp=[new Bt(1,1,1),new Bt(-1,1,1),new Bt(1,1,-1),new Bt(-1,1,-1),new Bt(0,bp,wp),new Bt(0,bp,-wp),new Bt(wp,0,bp),new Bt(-wp,0,bp),new Bt(bp,wp,0),new Bt(-bp,wp,0)],Mp=((Qd=Sp.prototype).fromScene=function(t,e,n,i){void 0===e&&(e=0),void 0===n&&(n=.1),void 0===i&&(i=100),xp=this._renderer.getRenderTarget();var r=this._allocateTargets();return this._sceneToCubeUV(t,n,i,r),0<e&&this._blur(r,0,0,e),this._applyPMREM(r),this._cleanup(r),r},Qd.fromEquirectangular=function(t){return this._fromTexture(t)},Qd.fromCubemap=function(t){return this._fromTexture(t)},Qd.compileCubemapShader=function(){null===this._cubemapShader&&(this._cubemapShader=Op(),this._compileMaterial(this._cubemapShader))},Qd.compileEquirectangularShader=function(){null===this._equirectShader&&(this._equirectShader=Pp(),this._compileMaterial(this._equirectShader))},Qd.dispose=function(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(var t=0;t<vp.length;t++)vp[t].dispose()},Qd._cleanup=function(t){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(xp),t.scissorTest=!1,Rp(t,0,0,t.width,t.height)},Qd._fromTexture=function(t){xp=this._renderer.getRenderTarget();var e=this._allocateTargets(t);return this._textureToCubeUV(t,e),this._applyPMREM(e),this._cleanup(e),e},Qd._allocateTargets=function(t){var e,n={magFilter:H,minFilter:H,generateMipmaps:!1,type:Et,format:1023,encoding:void 0===(e=t)||e.type!==Et||e.encoding!==Rt&&e.encoding!==v&&e.encoding!==y?_:t.encoding,depthBuffer:!1},i=Cp(n);return i.depthBuffer=!t,this._pingPongRenderTarget=Cp(n),i},Qd._compileMaterial=function(t){var e=new ti(vp[0],t);this._renderer.compile(e,mp)},Qd._sceneToCubeUV=function(t,e,n,i){var r=new hi(90,1,e,n),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,l=s.outputEncoding,c=s.toneMapping,u=s.getClearColor(),h=s.getClearAlpha();s.toneMapping=0,s.outputEncoding=Rt;var d,p,f,m=t.background;m&&m.isColor&&(m.convertSRGBToLinear(),d=Math.max(m.r,m.g,m.b),p=Math.min(Math.max(Math.ceil(Math.log2(d)),-128),127),m=m.multiplyScalar(Math.pow(2,-p)),f=(p+128)/255,s.setClearColor(m,f),t.background=null);for(var g=0;g<6;g++){var v=g%3;0==v?(r.up.set(0,a[g],0),r.lookAt(o[g],0,0)):1==v?(r.up.set(0,0,a[g]),r.lookAt(0,o[g],0)):(r.up.set(0,a[g],0),r.lookAt(0,0,o[g])),Rp(i,v*hp,2<g?hp:0,hp,hp),s.setRenderTarget(i),s.render(t,r)}s.toneMapping=c,s.outputEncoding=l,s.setClearColor(u,h)},Qd._textureToCubeUV=function(t,e){var n=this._renderer;t.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=Op()):null==this._equirectShader&&(this._equirectShader=Pp());var i=t.isCubeTexture?this._cubemapShader:this._equirectShader,r=new ti(vp[0],i),a=i.uniforms;(a.envMap.value=t).isCubeTexture||a.texelSize.value.set(1/t.image.width,1/t.image.height),a.inputEncoding.value=fp[t.encoding],a.outputEncoding.value=fp[e.texture.encoding],Rp(e,0,0,3*hp,2*hp),n.setRenderTarget(e),n.render(r,mp)},Qd._applyPMREM=function(t){var e=this._renderer,n=e.autoClear;e.autoClear=!1;for(var i=1;i<pp;i++){var r=Math.sqrt(_p[i]*_p[i]-_p[i-1]*_p[i-1]),a=Tp[(i-1)%Tp.length];this._blur(t,i-1,i,r,a)}e.autoClear=n},Qd._blur=function(t,e,n,i,r){var a=this._pingPongRenderTarget;this._halfBlur(t,a,e,n,i,"latitudinal",r),this._halfBlur(a,t,n,n,i,"longitudinal",r)},Qd._halfBlur=function(t,e,n,i,r,a,o){var s=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");var c=new ti(vp[i],l),u=l.uniforms,h=yp[n]-1,d=isFinite(r)?Math.PI/(2*h):2*Math.PI/39,p=r/d,f=isFinite(r)?1+Math.floor(3*p):20;20<f&&console.warn("sigmaRadians, "+r+", is too large and will clip, as it requested "+f+" samples when the maximum is set to 20");for(var m=[],g=0,v=0;v<20;++v){var y=v/p,_=Math.exp(-y*y/2);m.push(_),0==v?g+=_:v<f&&(g+=2*_)}for(var x=0;x<m.length;x++)m[x]=m[x]/g;u.envMap.value=t.texture,u.samples.value=f,u.weights.value=m,u.latitudinal.value="latitudinal"===a,o&&(u.poleAxis.value=o),u.dTheta.value=d,u.mipInt.value=8-n,u.inputEncoding.value=fp[t.texture.encoding],u.outputEncoding.value=fp[t.texture.encoding];var b=yp[i];Rp(e,3*Math.max(0,hp-2*b),(0===i?0:2*hp)+2*b*(4<i?i-8+4:0),3*b,2*b),s.setRenderTarget(e),s.render(c,mp)},Sp);function Sp(t){this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=new Ac({name:"SphericalGaussianBlur",defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:new Float32Array(20)},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:new Bt(0,1,0)},inputEncoding:{value:fp[3e3]},outputEncoding:{value:fp[3e3]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1}),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}function Ep(t){var e;void 0===t&&(t=1);var n=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],i=new Bn;i.setAttribute("position",new bn(n,3)),i.setAttribute("color",new bn([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var r=new _o({vertexColors:!0,toneMapped:!1});return(e=$d.call(this,i,r)||this).type="AxesHelper",e}function Ap(t,e,n){var i;void 0===e&&(e=1),void 0===n&&(n=16776960);var r=n,a=new Bn;a.setAttribute("position",new bn([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),a.computeBoundingSphere(),(i=Kd.call(this,a,new _o({color:r,toneMapped:!1}))||this).type="PlaneHelper",i.plane=t,i.size=e;var o=new Bn;return o.setAttribute("position",new bn([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),i.add(new ti(o,new cn({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1}))),i}function Lp(t,e){var n;void 0===e&&(e=16776960);var i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Bn;return r.setIndex(new dn(i,1)),r.setAttribute("position",new bn([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),(n=tp.call(this,r,new _o({color:e,toneMapped:!1}))||this).box=t,n.type="Box3Helper",n.geometry.computeBoundingSphere(),n}function Cp(t){var e=new ot(3*hp,3*hp,t);return e.texture.mapping=I,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function Rp(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function Pp(){return new Ac({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:new It(1,1)},inputEncoding:{value:fp[3e3]},outputEncoding:{value:fp[3e3]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Op(){return new Ac({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:fp[3e3]},outputEncoding:{value:fp[3e3]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Dp(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),vu.call(this,t),this.type="catmullrom",this.closed=!0}function Np(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),vu.call(this,t),this.type="catmullrom"}function Ip(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),vu.call(this,t),this.type="catmullrom"}cu.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(cu.prototype),(t.prototype.constructor=t).prototype.getPoint=e,t},Object.assign(Cu.prototype,{createPointsGeometry:function(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var e=new Wo,n=0,i=t.length;n<i;n++){var r=t[n];e.vertices.push(new Bt(r.x,r.y,r.z||0))}return e}}),Object.assign(Ru.prototype,{fromPoints:function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),Dp.prototype=Object.create(vu.prototype),Np.prototype=Object.create(vu.prototype),Ip.prototype=Object.create(vu.prototype),Object.assign(Ip.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Id.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Sd.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(tu.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Zu.extractUrlBase(t)}}),tu.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(ud.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(pt.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(Vt.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}}),_i.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)},pd.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(Pt,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Pt.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Pt.ceilPowerOfTwo(t)}}),Object.assign(Q.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},getInverse:function(t){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()}}),Object.assign(Kt.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Bt).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,n,i,r,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,i,n,r,a)},getInverse:function(t){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()}}),Ie.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},Object.assign(ut.prototype,{multiplyVector3:function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},inverse:function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()}}),Object.assign($t.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(qe.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(qe,{barycoordFromPoint:function(t,e,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),qe.getBarycoord(t,e,n,i,r)},normal:function(t,e,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),qe.getNormal(t,e,n,i)}}),Object.assign(Pu.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new tl(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new kl(this,t)}}),Object.assign(It.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Bt.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Ot.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Wo.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(t){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.assign(Re.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.defineProperties(Re.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(ti.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(ti.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(so.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(po.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),lo.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(cu.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),hi.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(Ou.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(dn.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===w},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(w)}}}),Object.assign(dn.prototype,{setDynamic:function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?w:b),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Bn.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addAttribute:function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new dn(e,arguments[2])))},addDrawCall:function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},applyMatrix:function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.defineProperties(Bn.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Ju.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(t){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=t}}}),Object.defineProperties(td.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(t){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=t}}}),Object.defineProperties(Ia.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===w},set:function(t){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(t)}}}),Object.assign(Ia.prototype,{setDynamic:function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?w:b),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Js.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.assign(Oa.prototype,{dispose:function(){console.error("THREE.Scene: .dispose() has been removed.")}}),Object.defineProperties(Jh.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(ln.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new en}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===t}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}}}),Object.defineProperties(Rc.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Cc.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(t){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=t}}}),Object.defineProperties(ci.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(Ea.prototype,{clearTarget:function(t,e,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,i)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(Ea.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===t?v:Rt}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(va.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(ot.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(Sh.prototype,{load:{value:function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return(new ch).load(t,function(t){e.setBuffer(t)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),Ph.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},di.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)},di.prototype.clear=function(t,e,n,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(t,e,n,i)};var Bp={merge:function(t,e,n){var i;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),i=e.matrix,e=e.geometry),t.merge(e,i,n)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}};$.crossOrigin=void 0,$.loadTexture=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new lu;r.setCrossOrigin(this.crossOrigin);var a=r.load(t,n,void 0,i);return e&&(a.mapping=e),a},$.loadTextureCube=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new ou;r.setCrossOrigin(this.crossOrigin);var a=r.load(t,n,void 0,i);return e&&(a.mapping=e),a},$.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},$.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var Fp={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"123"}})),t.ACESFilmicToneMapping=4,t.AddEquation=W,t.AddOperation=2,t.AdditiveAnimationBlendMode=2501,t.AdditiveBlending=2,t.AlphaFormat=1021,t.AlwaysDepth=1,t.AlwaysStencilFunc=519,t.AmbientLight=Gu,t.AmbientLightProbe=hh,t.AnimationClip=Jc,t.AnimationLoader=iu,t.AnimationMixer=Zh,t.AnimationObjectGroup=Wh,t.AnimationUtils=Fc,t.ArcCurve=hu,t.ArrayCamera=ba,t.ArrowHelper=op,t.Audio=Sh,t.AudioAnalyser=Ph,t.AudioContext=lh,t.AudioListener=Mh,t.AudioLoader=ch,t.AxesHelper=sp,t.AxisHelper=function(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new sp(t)},t.BackSide=1,t.BasicDepthPacking=3200,t.BasicShadowMap=0,t.BinaryTextureLoader=function(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new su(t)},t.Bone=co,t.BooleanKeyframeTrack=jc,t.BoundingBoxHelper=function(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new np(t,e)},t.Box2=ud,t.Box3=pt,t.Box3Helper=ip,t.BoxBufferGeometry=ri,t.BoxGeometry=rs,t.BoxHelper=np,t.BufferAttribute=dn,t.BufferGeometry=Bn,t.BufferGeometryLoader=$u,t.ByteType=1010,t.Cache=Qc,t.Camera=ui,t.CameraHelper=jd,t.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been removed")},t.CanvasTexture=zo,t.CatmullRomCurve3=vu,t.CineonToneMapping=3,t.CircleBufferGeometry=as,t.CircleGeometry=os,t.ClampToEdgeWrapping=z,t.Clock=gh,t.ClosedSplineCurve3=Dp,t.Color=en,t.ColorKeyframeTrack=Vc,t.CompressedTexture=ko,t.CompressedTextureLoader=ru,t.ConeBufferGeometry=us,t.ConeGeometry=cs,t.CubeCamera=di,t.CubeGeometry=rs,t.CubeReflectionMapping=D,t.CubeRefractionMapping=N,t.CubeTexture=pi,t.CubeTextureLoader=ou,t.CubeUVReflectionMapping=I,t.CubeUVRefractionMapping=B,t.CubicBezierCurve=bu,t.CubicBezierCurve3=wu,t.CubicInterpolant=zc,t.CullFaceBack=1,t.CullFaceFront=2,t.CullFaceFrontBack=3,t.CullFaceNone=0,t.Curve=cu,t.CurvePath=Cu,t.CustomBlending=5,t.CustomToneMapping=5,t.CylinderBufferGeometry=ss,t.CylinderGeometry=ls,t.Cylindrical=ld,t.DataTexture=mi,t.DataTexture2DArray=ji,t.DataTexture3D=Vi,t.DataTextureLoader=su,t.DataUtils=up,t.DecrementStencilOp=7683,t.DecrementWrapStencilOp=34056,t.DefaultLoadingManager=Kc,t.DepthFormat=Z,t.DepthStencilFormat=J,t.DepthTexture=Ho,t.DirectionalLight=Uu,t.DirectionalLightHelper=Hd,t.DiscreteInterpolant=Uc,t.DodecahedronBufferGeometry=ds,t.DodecahedronGeometry=ps,t.DoubleSide=2,t.DstAlphaFactor=206,t.DstColorFactor=208,t.DynamicBufferAttribute=function(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new dn(t,e).setUsage(w)},t.DynamicCopyUsage=35050,t.DynamicDrawUsage=w,t.DynamicReadUsage=35049,t.EdgesGeometry=ys,t.EdgesHelper=function(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Lo(new ys(t.geometry),new _o({color:void 0!==e?e:16777215}))},t.EllipseCurve=uu,t.EqualDepth=4,t.EqualStencilFunc=514,t.EquirectangularReflectionMapping=h,t.EquirectangularRefractionMapping=d,t.Euler=se,t.EventDispatcher=T,t.ExtrudeBufferGeometry=Js,t.ExtrudeGeometry=tl,t.Face3=an,t.Face4=function(t,e,n,i,r,a,o){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new an(t,e,n,r,a,o)},t.FaceColors=1,t.FileLoader=nu,t.FlatShading=1,t.Float16BufferAttribute=xn,t.Float32Attribute=function(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new bn(t,e)},t.Float32BufferAttribute=bn,t.Float64Attribute=function(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new wn(t,e)},t.Float64BufferAttribute=wn,t.FloatType=At,t.Fog=Pa,t.FogExp2=Ra,t.Font=oh,t.FontLoader=sh,t.FrontSide=0,t.Frustum=_i,t.GLBufferAttribute=Kh,t.GLSL1="100",t.GLSL3=F,t.GammaEncoding=y,t.Geometry=Wo,t.GeometryUtils=Bp,t.GreaterDepth=6,t.GreaterEqualDepth=5,t.GreaterEqualStencilFunc=518,t.GreaterStencilFunc=516,t.GridHelper=Id,t.Group=wa,t.HalfFloatType=Lt,t.HemisphereLight=Du,t.HemisphereLightHelper=Nd,t.HemisphereLightProbe=uh,t.IcosahedronBufferGeometry=ll,t.IcosahedronGeometry=cl,t.ImageBitmapLoader=rh,t.ImageLoader=au,t.ImageUtils=$,t.ImmediateRenderObject=yd,t.IncrementStencilOp=7682,t.IncrementWrapStencilOp=34055,t.InstancedBufferAttribute=Qu,t.InstancedBufferGeometry=Ju,t.InstancedInterleavedBuffer=$h,t.InstancedMesh=yo,t.Int16Attribute=function(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new gn(t,e)},t.Int16BufferAttribute=gn,t.Int32Attribute=function(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new yn(t,e)},t.Int32BufferAttribute=yn,t.Int8Attribute=function(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new pn(t,e)},t.Int8BufferAttribute=pn,t.IntType=1013,t.InterleavedBuffer=Ia,t.InterleavedBufferAttribute=ka,t.Interpolant=kc,t.InterpolateDiscrete=2300,t.InterpolateLinear=2301,t.InterpolateSmooth=2302,t.InvertStencilOp=5386,t.JSONLoader=function(){console.error("THREE.JSONLoader has been removed.")},t.KeepStencilOp=x,t.KeyframeTrack=Gc,t.LOD=so,t.LatheBufferGeometry=ul,t.LatheGeometry=hl,t.Layers=me,t.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")},t.LessDepth=2,t.LessEqualDepth=3,t.LessEqualStencilFunc=515,t.LessStencilFunc=513,t.Light=Ou,t.LightProbe=Xu,t.Line=So,t.Line3=pd,t.LineBasicMaterial=_o,t.LineCurve=Tu,t.LineCurve3=Mu,t.LineDashedMaterial=Ic,t.LineLoop=Co,t.LinePieces=1,t.LineSegments=Lo,t.LineStrip=0,t.LinearEncoding=Rt,t.LinearFilter=j,t.LinearInterpolant=Hc,t.LinearMipMapLinearFilter=1008,t.LinearMipMapNearestFilter=1007,t.LinearMipmapLinearFilter=u,t.LinearMipmapNearestFilter=1007,t.LinearToneMapping=1,t.Loader=tu,t.LoaderUtils=Zu,t.LoadingManager=$c,t.LogLuvEncoding=3003,t.LoopOnce=2200,t.LoopPingPong=2202,t.LoopRepeat=2201,t.LuminanceAlphaFormat=1025,t.LuminanceFormat=1024,t.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},t.Material=ln,t.MaterialLoader=Yu,t.Math=Pt,t.MathUtils=Pt,t.Matrix3=Q,t.Matrix4=Kt,t.MaxEquation=104,t.Mesh=ti,t.MeshBasicMaterial=cn,t.MeshDepthMaterial=ma,t.MeshDistanceMaterial=ga,t.MeshFaceMaterial=function(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t},t.MeshLambertMaterial=Dc,t.MeshMatcapMaterial=Nc,t.MeshNormalMaterial=Oc,t.MeshPhongMaterial=Rc,t.MeshPhysicalMaterial=Cc,t.MeshStandardMaterial=Lc,t.MeshToonMaterial=Pc,t.MinEquation=103,t.MirroredRepeatWrapping=1002,t.MixOperation=1,t.MultiMaterial=function(t){return void 0===t&&(t=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,(t.materials=t).clone=function(){return t.slice()},t},t.MultiplyBlending=4,t.MultiplyOperation=0,t.NearestFilter=H,t.NearestMipMapLinearFilter=1005,t.NearestMipMapNearestFilter=1004,t.NearestMipmapLinearFilter=G,t.NearestMipmapNearestFilter=U,t.NeverDepth=0,t.NeverStencilFunc=512,t.NoBlending=0,t.NoColors=0,t.NoToneMapping=0,t.NormalAnimationBlendMode=2500,t.NormalBlending=1,t.NotEqualDepth=7,t.NotEqualStencilFunc=517,t.NumberKeyframeTrack=Wc,t.Object3D=Re,t.ObjectLoader=th,t.ObjectSpaceNormalMap=1,t.OctahedronBufferGeometry=dl,t.OctahedronGeometry=pl,t.OneFactor=201,t.OneMinusDstAlphaFactor=207,t.OneMinusDstColorFactor=209,t.OneMinusSrcAlphaFactor=205,t.OneMinusSrcColorFactor=203,t.OrthographicCamera=zu,t.PCFShadowMap=1,t.PCFSoftShadowMap=2,t.PMREMGenerator=Mp,t.ParametricBufferGeometry=xl,t.ParametricGeometry=bl,t.Particle=function(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new $a(t)},t.ParticleBasicMaterial=function(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Ro(t)},t.ParticleSystem=function(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Io(t,e)},t.ParticleSystemMaterial=function(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Ro(t)},t.Path=Ru,t.PerspectiveCamera=hi,t.Plane=Ie,t.PlaneBufferGeometry=Mi,t.PlaneGeometry=Al,t.PlaneHelper=rp,t.PointCloud=function(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Io(t,e)},t.PointCloudMaterial=function(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Ro(t)},t.PointLight=ku,t.PointLightHelper=Rd,t.Points=Io,t.PointsMaterial=Ro,t.PolarGridHelper=Bd,t.PolyhedronBufferGeometry=hs,t.PolyhedronGeometry=Ll,t.PositionalAudio=Rh,t.PropertyBinding=Vh,t.PropertyMixer=Dh,t.QuadraticBezierCurve=Su,t.QuadraticBezierCurve3=Eu,t.Quaternion=ut,t.QuaternionKeyframeTrack=Xc,t.QuaternionLinearInterpolant=qc,t.REVISION="123",t.RGBADepthPacking=3201,t.RGBAFormat=Ct,t.RGBAIntegerFormat=1033,t.RGBA_ASTC_10x10_Format=37819,t.RGBA_ASTC_10x5_Format=37816,t.RGBA_ASTC_10x6_Format=37817,t.RGBA_ASTC_10x8_Format=37818,t.RGBA_ASTC_12x10_Format=37820,t.RGBA_ASTC_12x12_Format=37821,t.RGBA_ASTC_4x4_Format=37808,t.RGBA_ASTC_5x4_Format=37809,t.RGBA_ASTC_5x5_Format=37810,t.RGBA_ASTC_6x5_Format=37811,t.RGBA_ASTC_6x6_Format=37812,t.RGBA_ASTC_8x5_Format=37813,t.RGBA_ASTC_8x6_Format=37814,t.RGBA_ASTC_8x8_Format=37815,t.RGBA_BPTC_Format=36492,t.RGBA_ETC2_EAC_Format=g,t.RGBA_PVRTC_2BPPV1_Format=f,t.RGBA_PVRTC_4BPPV1_Format=p,t.RGBA_S3TC_DXT1_Format=a,t.RGBA_S3TC_DXT3_Format=o,t.RGBA_S3TC_DXT5_Format=s,t.RGBDEncoding=i,t.RGBEEncoding=_,t.RGBEFormat=1023,t.RGBFormat=Y,t.RGBIntegerFormat=1032,t.RGBM16Encoding=n,t.RGBM7Encoding=e,t.RGB_ETC1_Format=36196,t.RGB_ETC2_Format=m,t.RGB_PVRTC_2BPPV1_Format=c,t.RGB_PVRTC_4BPPV1_Format=l,t.RGB_S3TC_DXT1_Format=r,t.RGFormat=1030,t.RGIntegerFormat=1031,t.RawShaderMaterial=Ac,t.Ray=$t,t.Raycaster=td,t.RectAreaLight=ju,t.RedFormat=1028,t.RedIntegerFormat=1029,t.ReinhardToneMapping=2,t.RepeatWrapping=1e3,t.ReplaceStencilOp=7681,t.ReverseSubtractEquation=102,t.RingBufferGeometry=Cl,t.RingGeometry=Rl,t.SRGB8_ALPHA8_ASTC_10x10_Format=37851,t.SRGB8_ALPHA8_ASTC_10x5_Format=37848,t.SRGB8_ALPHA8_ASTC_10x6_Format=37849,t.SRGB8_ALPHA8_ASTC_10x8_Format=37850,t.SRGB8_ALPHA8_ASTC_12x10_Format=37852,t.SRGB8_ALPHA8_ASTC_12x12_Format=37853,t.SRGB8_ALPHA8_ASTC_4x4_Format=37840,t.SRGB8_ALPHA8_ASTC_5x4_Format=37841,t.SRGB8_ALPHA8_ASTC_5x5_Format=37842,t.SRGB8_ALPHA8_ASTC_6x5_Format=37843,t.SRGB8_ALPHA8_ASTC_6x6_Format=37844,t.SRGB8_ALPHA8_ASTC_8x5_Format=37845,t.SRGB8_ALPHA8_ASTC_8x6_Format=37846,t.SRGB8_ALPHA8_ASTC_8x8_Format=37847,t.Scene=Oa,t.SceneUtils=Fp,t.ShaderChunk=Si,t.ShaderLib=Ai,t.ShaderMaterial=ci,t.ShadowMaterial=Ec,t.Shape=Pu,t.ShapeBufferGeometry=Pl,t.ShapeGeometry=kl,t.ShapePath=ah,t.ShapeUtils=qs,t.ShortType=1011,t.Skeleton=po,t.SkeletonHelper=Sd,t.SkinnedMesh=lo,t.SmoothShading=2,t.Sphere=Vt,t.SphereBufferGeometry=Kl,t.SphereGeometry=tc,t.Spherical=sd,t.SphericalHarmonics3=Wu,t.Spline=Ip,t.SplineCurve=Au,t.SplineCurve3=Np,t.SpotLight=Bu,t.SpotLightHelper=bd,t.Sprite=$a,t.SpriteMaterial=za,t.SrcAlphaFactor=204,t.SrcAlphaSaturateFactor=210,t.SrcColorFactor=202,t.StaticCopyUsage=35046,t.StaticDrawUsage=b,t.StaticReadUsage=35045,t.StereoCamera=fh,t.StreamCopyUsage=35042,t.StreamDrawUsage=35040,t.StreamReadUsage=35041,t.StringKeyframeTrack=Yc,t.SubtractEquation=101,t.SubtractiveBlending=3,t.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},t.TangentSpaceNormalMap=0,t.TetrahedronBufferGeometry=ec,t.TetrahedronGeometry=nc,t.TextBufferGeometry=ic,t.TextGeometry=rc,t.Texture=nt,t.TextureLoader=lu,t.TorusBufferGeometry=ac,t.TorusGeometry=oc,t.TorusKnotBufferGeometry=sc,t.TorusKnotGeometry=lc,t.Triangle=qe,t.TriangleFanDrawMode=2,t.TriangleStripDrawMode=1,t.TrianglesDrawMode=0,t.TubeBufferGeometry=cc,t.TubeGeometry=uc,t.UVMapping=300,t.Uint16Attribute=function(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new vn(t,e)},t.Uint16BufferAttribute=vn,t.Uint32Attribute=function(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new _n(t,e)},t.Uint32BufferAttribute=_n,t.Uint8Attribute=function(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new fn(t,e)},t.Uint8BufferAttribute=fn,t.Uint8ClampedAttribute=function(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new mn(t,e)},t.Uint8ClampedBufferAttribute=mn,t.Uniform=Jh,t.UniformsLib=Ei,t.UniformsUtils=li,t.UnsignedByteType=Et,t.UnsignedInt248Type=X,t.UnsignedIntType=q,t.UnsignedShort4444Type=1017,t.UnsignedShort5551Type=1018,t.UnsignedShort565Type=1019,t.UnsignedShortType=V,t.VSMShadowMap=3,t.Vector2=It,t.Vector3=Bt,t.Vector4=Ot,t.VectorKeyframeTrack=Zc,t.Vertex=function(t,e,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Bt(t,e,n)},t.VertexColors=2,t.VideoTexture=Fo,t.WebGL1Renderer=Aa,t.WebGLCubeRenderTarget=fi,t.WebGLMultisampleRenderTarget=st,t.WebGLRenderTarget=ot,t.WebGLRenderTargetCube=function(t,e,n){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new fi(t,n)},t.WebGLRenderer=Ea,t.WebGLUtils=xa,t.WireframeGeometry=hc,t.WireframeHelper=function(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Lo(new hc(t.geometry),new _o({color:void 0!==e?e:16777215}))},t.WrapAroundEnding=2402,t.XHRLoader=function(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new nu(t)},t.ZeroCurvatureEnding=2400,t.ZeroFactor=200,t.ZeroSlopeEnding=2401,t.ZeroStencilOp=0,t.sRGBEncoding=v,Object.defineProperty(t,"__esModule",{value:!0})});var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";var t,e,T,b,w,M,v,n,g,i;function y(t,e,n,i){n===i&&(n=i-(i-e)/1e6),t===e&&(e=t+(n-t)/1e6),this.a=t,this.b=e,this.c=n,this.d=i,this.da=i-t,this.ca=n-t,this.ba=e-t}function S(t,e,n,i){var r={a:t},a={},o={},s={c:i},l=(t+e)/2,c=(e+n)/2,u=(n+i)/2,h=(l+c)/2,d=(c+u)/2,p=(d-h)/8;return r.b=l+(t-l)/4,a.b=h+p,r.c=a.a=(r.b+a.b)/2,a.c=o.a=(h+d)/2,o.b=d-p,s.b=u+(i-u)/4,o.c=s.a=(o.b+s.b)/2,[r,a,o,s]}function p(t,e,n,i,r,a){var o,s,l,c,u,h,d,p,f={},m=[],g=a||t[0];for(s in r="string"==typeof r?","+r+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",null==e&&(e=1),t[0])m.push(s);if(1<t.length){for(p=t[t.length-1],d=!0,o=m.length;-1<--o;)if(s=m[o],.05<Math.abs(g[s]-p[s])){d=!1;break}d&&(t=t.concat(),a&&t.unshift(a),t.push(t[1]),a=t[t.length-3])}for(b.length=w.length=M.length=0,o=m.length;-1<--o;)s=m[o],v[s]=-1!==r.indexOf(","+s+","),f[s]=function(t,e,n,i){var r,a,o,s,l,c,u=[];if(i)for(a=(t=[i].concat(t)).length;-1<--a;)"string"==typeof(c=t[a][e])&&"="===c.charAt(1)&&(t[a][e]=i[e]+Number(c.charAt(0)+c.substr(2)));if((r=t.length-2)<0)return u[0]=new y(t[0][e],0,0,t[0][e]),u;for(a=0;a<r;a++)o=t[a][e],s=t[a+1][e],u[a]=new y(o,0,0,s),n&&(l=t[a+2][e],b[a]=(b[a]||0)+(s-o)*(s-o),w[a]=(w[a]||0)+(l-s)*(l-s));return u[a]=new y(t[a][e],0,0,t[a+1][e]),u}(t,s,v[s],a);for(o=b.length;-1<--o;)b[o]=Math.sqrt(b[o]),w[o]=Math.sqrt(w[o]);if(!i){for(o=m.length;-1<--o;)if(v[s])for(h=(l=f[m[o]]).length-1,c=0;c<h;c++)u=l[c+1].da/w[c]+l[c].da/b[c]||0,M[c]=(M[c]||0)+u*u;for(o=M.length;-1<--o;)M[o]=Math.sqrt(M[o])}for(o=m.length,c=n?4:1;-1<--o;)(function(t,e,n,i,r){for(var a,o,s,l,c,u,h,d,p,f,m,g,v=t.length-1,y=0,_=t[0].a,x=0;x<v;x++)a=(l=t[y]).a,o=l.d,s=t[y+1].d,h=r?(f=b[x],g=((m=w[x])+f)*e*.25/(!i&&M[x]||.5),o-((c=o-(o-a)*(i?.5*e:0!==f?g/f:0))+(((u=o+(s-o)*(i?.5*e:0!==m?g/m:0))-c)*(3*f/(f+m)+.5)/4||0))):o-((c=o-(o-a)*e*.5)+(u=o+(s-o)*e*.5))/2,c+=h,u+=h,l.c=d=c,l.b=0!==x?_:_=l.a+.6*(l.c-l.a),l.da=o-a,l.ca=d-a,l.ba=_-a,n?(p=S(a,_,d,o),t.splice(y,1,p[0],p[1],p[2],p[3]),y+=4):y++,_=u;(l=t[y]).b=_,l.c=_+.4*(l.d-_),l.da=l.d-l.a,l.ca=l.c-l.a,l.ba=_-l.a,n&&(p=S(l.a,_,l.c,l.d),t.splice(y,1,p[0],p[1],p[2],p[3]))})(l=f[s=m[o]],e,n,i,v[s]),d&&(l.splice(0,c),l.splice(l.length-c,c));return f}_gsScope._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(i,u,_){function m(t){for(var e=[],n=t.length,i=0;i!==n;e.push(t[i++]));return e}function g(t,e,n){var i,r,a=t.cycle;for(i in a)r=a[i],t[i]="function"==typeof r?r(n,e[n],e):r[n%r.length];delete t.cycle}function v(t){if("function"==typeof t)return t;var f="object"==typeof t?t:{each:t},m=f.ease,g=f.from||0,v=f.base||0,y={},_=isNaN(g),x=f.axis,b={center:.5,end:1}[g]||0;return function(t,e,n){var i,r,a,o,s,l,c,u,h,d=(n||f).length,p=y[d];if(!p){if(!(h="auto"===f.grid?0:(f.grid||[1/0])[0])){for(c=-1/0;c<(c=n[h++].getBoundingClientRect().left)&&h<d;);h--}for(p=y[d]=[],i=_?Math.min(h,d)*b-.5:g%h,r=_?d*b/h-.5:g/h|0,u=1/(c=0),l=0;l<d;l++)a=l%h-i,o=r-(l/h|0),p[l]=s=x?Math.abs("y"===x?o:a):Math.sqrt(a*a+o*o),c<s&&(c=s),s<u&&(u=s);p.max=c-u,p.min=u,p.v=d=f.amount||f.each*(d<h?d:x?"y"===x?d/h:h:Math.max(h,d/h))||0,p.b=d<0?v-d:v}return d=(p[t]-p.min)/p.max,p.b+(m?m.getRatio(d):d)*p.v}}var y=function(t,e,n){_.call(this,t,e,n),this._cycle=0,this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._repeat&&this._uncache(!0),this.render=y.prototype.render},x=1e-8,b=_._internals,w=b.isSelector,T=b.isArray,t=y.prototype=_.to({},.1,{}),M=[];y.version="2.1.2",t.constructor=y,t.kill()._gc=!1,y.killTweensOf=y.killDelayedCallsTo=_.killTweensOf,y.getTweensOf=_.getTweensOf,y.lagSmoothing=_.lagSmoothing,y.ticker=_.ticker,y.render=_.render,y.distribute=v,t.invalidate=function(){return this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._yoyoEase=null,this._uncache(!0),_.prototype.invalidate.call(this)},t.updateTo=function(t,e){var n,i=this,r=i.ratio,a=i.vars.immediateRender||t.immediateRender;for(n in e&&i._startTime<i._timeline._time&&(i._startTime=i._timeline._time,i._uncache(!1),i._gc?i._enabled(!0,!1):i._timeline.insert(i,i._startTime-i._delay)),t)i.vars[n]=t[n];if(i._initted||a)if(e)i._initted=!1,a&&i.render(0,!0,!0);else if(i._gc&&i._enabled(!0,!1),i._notifyPluginsOfEnabled&&i._firstPT&&_._onPluginEvent("_onDisable",i),.998<i._time/i._duration){var o=i._totalTime;i.render(0,!0,!1),i._initted=!1,i.render(o,!0,!1)}else if(i._initted=!1,i._init(),0<i._time||a)for(var s,l=1/(1-r),c=i._firstPT;c;)s=c.s+c.c,c.c*=l,c.s=s-c.c,c=c._next;return i},t.render=function(t,e,n){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var i,r,a,o,s,l,c,u,h,d=this,p=d._dirty?d.totalDuration():d._totalDuration,f=d._time,m=d._totalTime,g=d._cycle,v=d._duration,y=d._rawPrevTime;if(p-x<=t&&0<=t?(d._totalTime=p,d._cycle=d._repeat,d._yoyo&&0!=(1&d._cycle)?(d._time=0,d.ratio=d._ease._calcEnd?d._ease.getRatio(0):0):(d._time=v,d.ratio=d._ease._calcEnd?d._ease.getRatio(1):1),d._reversed||(i=!0,r="onComplete",n=n||d._timeline.autoRemoveChildren),0!==v||!d._initted&&d.vars.lazy&&!n||(d._startTime===d._timeline._duration&&(t=0),(y<0||t<=0&&-x<=t||y===x&&"isPause"!==d.data)&&y!==t&&(n=!0,x<y&&(r="onReverseComplete")),d._rawPrevTime=u=!e||t||y===t?t:x)):t<x?(d._totalTime=d._time=d._cycle=0,d.ratio=d._ease._calcEnd?d._ease.getRatio(0):0,(0!==m||0===v&&0<y)&&(r="onReverseComplete",i=d._reversed),-x<t?t=0:t<0&&(d._active=!1,0!==v||!d._initted&&d.vars.lazy&&!n||(0<=y&&(n=!0),d._rawPrevTime=u=!e||t||y===t?t:x)),d._initted||(n=!0)):(d._totalTime=d._time=t,0!==d._repeat&&(o=v+d._repeatDelay,d._cycle=d._totalTime/o>>0,0!==d._cycle&&d._cycle===d._totalTime/o&&m<=t&&d._cycle--,d._time=d._totalTime-d._cycle*o,d._yoyo&&0!=(1&d._cycle)&&(d._time=v-d._time,(h=d._yoyoEase||d.vars.yoyoEase)&&(d._yoyoEase||(!0!==h||d._initted?d._yoyoEase=h=!0===h?d._ease:h instanceof Ease?h:Ease.map[h]:(h=d.vars.ease,d._yoyoEase=h=h?h instanceof Ease?h:"function"==typeof h?new Ease(h,d.vars.easeParams):Ease.map[h]||_.defaultEase:_.defaultEase)),d.ratio=h?1-h.getRatio((v-d._time)/v):0)),d._time>v?d._time=v:d._time<0&&(d._time=0)),d._easeType&&!h?(s=d._time/v,(1===(l=d._easeType)||3===l&&.5<=s)&&(s=1-s),3===l&&(s*=2),1===(c=d._easePower)?s*=s:2===c?s*=s*s:3===c?s*=s*s*s:4===c&&(s*=s*s*s*s),d.ratio=1===l?1-s:2===l?s:d._time/v<.5?s/2:1-s/2):h||(d.ratio=d._ease.getRatio(d._time/v))),f!==d._time||n||g!==d._cycle){if(!d._initted){if(d._init(),!d._initted||d._gc)return;if(!n&&d._firstPT&&(!1!==d.vars.lazy&&d._duration||d.vars.lazy&&!d._duration))return d._time=f,d._totalTime=m,d._rawPrevTime=y,d._cycle=g,b.lazyTweens.push(d),void(d._lazy=[t,e]);!d._time||i||h?i&&this._ease._calcEnd&&!h&&(d.ratio=d._ease.getRatio(0===d._time?0:1)):d.ratio=d._ease.getRatio(d._time/v)}for(!1!==d._lazy&&(d._lazy=!1),d._active||!d._paused&&d._time!==f&&0<=t&&(d._active=!0),0===m&&(2===d._initted&&0<t&&d._init(),d._startAt&&(0<=t?d._startAt.render(t,!0,n):r=r||"_dummyGS"),!d.vars.onStart||0===d._totalTime&&0!==v||(e||d._callback("onStart"))),a=d._firstPT;a;)a.f?a.t[a.p](a.c*d.ratio+a.s):a.t[a.p]=a.c*d.ratio+a.s,a=a._next;d._onUpdate&&(t<0&&d._startAt&&d._startTime&&d._startAt.render(t,!0,n),e||d._totalTime===m&&!r||d._callback("onUpdate")),d._cycle!==g&&(e||d._gc||d.vars.onRepeat&&d._callback("onRepeat")),!r||d._gc&&!n||(t<0&&d._startAt&&!d._onUpdate&&d._startTime&&d._startAt.render(t,!0,n),i&&(d._timeline.autoRemoveChildren&&d._enabled(!1,!1),d._active=!1),!e&&d.vars[r]&&d._callback(r),0===v&&d._rawPrevTime===x&&u!==x&&(d._rawPrevTime=0))}else m!==d._totalTime&&d._onUpdate&&(e||d._callback("onUpdate"))},y.to=function(t,e,n){return new y(t,e,n)},y.from=function(t,e,n){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,new y(t,e,n)},y.fromTo=function(t,e,n,i){return i.startAt=n,i.immediateRender=0!=i.immediateRender&&0!=n.immediateRender,new y(t,e,i)},y.staggerTo=y.allTo=function(t,e,n,i,r,a,o){var s,l,c,u,h=[],d=v(n.stagger||i),p=n.cycle,f=(n.startAt||M).cycle;for(T(t)||("string"==typeof t&&(t=_.selector(t)||t),w(t)&&(t=m(t))),s=(t=t||[]).length-1,c=0;c<=s;c++){for(u in l={},n)l[u]=n[u];if(p&&(g(l,t,c),null!=l.duration&&(e=l.duration,delete l.duration)),f){for(u in f=l.startAt={},n.startAt)f[u]=n.startAt[u];g(l.startAt,t,c)}l.delay=d(c,t[c],t)+(l.delay||0),c===s&&r&&(l.onComplete=function(){n.onComplete&&n.onComplete.apply(n.onCompleteScope||this,arguments),r.apply(o||n.callbackScope||this,a||M)}),h[c]=new y(t[c],e,l)}return h},y.staggerFrom=y.allFrom=function(t,e,n,i,r,a,o){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,y.staggerTo(t,e,n,i,r,a,o)},y.staggerFromTo=y.allFromTo=function(t,e,n,i,r,a,o,s){return i.startAt=n,i.immediateRender=0!=i.immediateRender&&0!=n.immediateRender,y.staggerTo(t,e,i,r,a,o,s)},y.delayedCall=function(t,e,n,i,r){return new y(e,0,{delay:t,onComplete:e,onCompleteParams:n,callbackScope:i,onReverseComplete:e,onReverseCompleteParams:n,immediateRender:!1,useFrames:r,overwrite:0})},y.set=function(t,e){return new y(t,0,e)},y.isTweening=function(t){return 0<_.getTweensOf(t,!0).length};var a=function(t,e){for(var n=[],i=0,r=t._first;r;)r instanceof _?n[i++]=r:(e&&(n[i++]=r),i=(n=n.concat(a(r,e))).length),r=r._next;return n},h=y.getAllTweens=function(t){return a(i._rootTimeline,t).concat(a(i._rootFramesTimeline,t))};y.killAll=function(t,e,n,i){null==e&&(e=!0),null==n&&(n=!0);for(var r,a,o=h(0!=i),s=o.length,l=e&&n&&i,c=0;c<s;c++)a=o[c],(l||a instanceof u||(r=a.target===a.vars.onComplete)&&n||e&&!r)&&(t?a.totalTime(a._reversed?0:a.totalDuration()):a._enabled(!1,!1))},y.killChildTweensOf=function(t,e){if(null!=t){var n,i,r,a,o,s=b.tweenLookup;if("string"==typeof t&&(t=_.selector(t)||t),w(t)&&(t=m(t)),T(t))for(a=t.length;-1<--a;)y.killChildTweensOf(t[a],e);else{for(r in n=[],s)for(i=s[r].target.parentNode;i;)i===t&&(n=n.concat(s[r].tweens)),i=i.parentNode;for(o=n.length,a=0;a<o;a++)e&&n[a].totalTime(n[a].totalDuration()),n[a]._enabled(!1,!1)}}};function r(t,e,n,i){e=!1!==e,n=!1!==n;for(var r,a,o=h(i=!1!==i),s=e&&n&&i,l=o.length;-1<--l;)a=o[l],(s||a instanceof u||(r=a.target===a.vars.onComplete)&&n||e&&!r)&&a.paused(t)}return y.pauseAll=function(t,e,n){r(!0,t,e,n)},y.resumeAll=function(t,e,n){r(!1,t,e,n)},y.globalTimeScale=function(t){var e=i._rootTimeline,n=_.ticker.time;return arguments.length?(t=t||x,e._startTime=n-(n-e._startTime)*e._timeScale/t,e=i._rootFramesTimeline,n=_.ticker.frame,e._startTime=n-(n-e._startTime)*e._timeScale/t,e._timeScale=i._rootTimeline._timeScale=t):e._timeScale},t.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()},t.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()},t.time=function(t,e){if(!arguments.length)return this._time;this._dirty&&this.totalDuration();var n=this._duration,i=this._cycle,r=i*(n+this._repeatDelay);return n<t&&(t=n),this.totalTime(this._yoyo&&1&i?n-t+r:this._repeat?t+r:t,e)},t.duration=function(t){return arguments.length?i.prototype.duration.call(this,t):this._duration},t.totalDuration=function(t){return arguments.length?-1===this._repeat?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},t.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},t.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},t.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},y},!0),_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(h,d,f){function m(t){d.call(this,t);var e,n,i=this.vars;for(n in this._labels={},this.autoRemoveChildren=!!i.autoRemoveChildren,this.smoothChildTiming=!!i.smoothChildTiming,this._sortChildren=!0,this._onUpdate=i.onUpdate,i)e=i[n],p(e)&&-1!==e.join("").indexOf("{self}")&&(i[n]=this._swapSelfInParams(e));p(i.tweens)&&this.add(i.tweens,0,i.align,i.stagger)}function g(t){var e,n={};for(e in t)n[e]=t[e];return n}function v(t,e,n){var i,r,a=t.cycle;for(i in a)r=a[i],t[i]="function"==typeof r?r(n,e[n],e):r[n%r.length];delete t.cycle}function c(t,e,n,i){var r="immediateRender";return r in e||(e[r]=!(n&&!1===n[r]||i)),e}function y(t){if("function"==typeof t)return t;var f="object"==typeof t?t:{each:t},m=f.ease,g=f.from||0,v=f.base||0,y={},_=isNaN(g),x=f.axis,b={center:.5,end:1}[g]||0;return function(t,e,n){var i,r,a,o,s,l,c,u,h,d=(n||f).length,p=y[d];if(!p){if(!(h="auto"===f.grid?0:(f.grid||[1/0])[0])){for(c=-1/0;c<(c=n[h++].getBoundingClientRect().left)&&h<d;);h--}for(p=y[d]=[],i=_?Math.min(h,d)*b-.5:g%h,r=_?d*b/h-.5:g/h|0,u=1/(c=0),l=0;l<d;l++)a=l%h-i,o=r-(l/h|0),p[l]=s=x?Math.abs("y"===x?o:a):Math.sqrt(a*a+o*o),c<s&&(c=s),s<u&&(u=s);p.max=c-u,p.min=u,p.v=d=f.amount||f.each*(d<h?d:x?"y"===x?d/h:h:Math.max(h,d/h))||0,p.b=d<0?v-d:v}return d=(p[t]-p.min)/p.max,p.b+(m?m.getRatio(d):d)*p.v}}var t=f._internals,e=m._internals={},_=t.isSelector,p=t.isArray,x=t.lazyTweens,b=t.lazyRender,o=_gsScope._gsDefine.globals,a=e.pauseCallback=function(){},n=m.prototype=new d;return m.version="2.1.2",m.distribute=y,n.constructor=m,n.kill()._gc=n._forcingPlayhead=n._hasPause=!1,n.to=function(t,e,n,i){var r=n.repeat&&o.TweenMax||f;return e?this.add(new r(t,e,n),i):this.set(t,n,i)},n.from=function(t,e,n,i){return this.add((n.repeat&&o.TweenMax||f).from(t,e,c(0,n)),i)},n.fromTo=function(t,e,n,i,r){var a=i.repeat&&o.TweenMax||f;return i=c(0,i,n),e?this.add(a.fromTo(t,e,n,i),r):this.set(t,i,r)},n.staggerTo=function(t,e,n,i,r,a,o,s){var l,c,u=new m({onComplete:a,onCompleteParams:o,callbackScope:s,smoothChildTiming:this.smoothChildTiming}),h=y(n.stagger||i),d=n.startAt,p=n.cycle;for("string"==typeof t&&(t=f.selector(t)||t),_(t=t||[])&&(t=function(t){for(var e=[],n=t.length,i=0;i!==n;e.push(t[i++]));return e}(t)),c=0;c<t.length;c++)l=g(n),d&&(l.startAt=g(d),d.cycle&&v(l.startAt,t,c)),p&&(v(l,t,c),null!=l.duration&&(e=l.duration,delete l.duration)),u.to(t[c],e,l,h(c,t[c],t));return this.add(u,r)},n.staggerFrom=function(t,e,n,i,r,a,o,s){return n.runBackwards=!0,this.staggerTo(t,e,c(0,n),i,r,a,o,s)},n.staggerFromTo=function(t,e,n,i,r,a,o,s,l){return i.startAt=n,this.staggerTo(t,e,c(0,i,n),r,a,o,s,l)},n.call=function(t,e,n,i){return this.add(f.delayedCall(0,t,e,n),i)},n.set=function(t,e,n){return this.add(new f(t,0,c(0,e,null,!0)),n)},m.exportRoot=function(t,e){null==(t=t||{}).smoothChildTiming&&(t.smoothChildTiming=!0);var n,i,r,a,o=new m(t),s=o._timeline;for(null==e&&(e=!0),s._remove(o,!0),o._startTime=0,o._rawPrevTime=o._time=o._totalTime=s._time,r=s._first;r;)a=r._next,e&&r instanceof f&&r.target===r.vars.onComplete||((i=r._startTime-r._delay)<0&&(n=1),o.add(r,i)),r=a;return s.add(o,0),n&&o.totalDuration(),o},n.add=function(t,e,n,i){var r,a,o,s,l,c,u=this;if("number"!=typeof e&&(e=u._parseTimeOrLabel(e,0,!0,t)),!(t instanceof h)){if(t instanceof Array||t&&t.push&&p(t)){for(n=n||"normal",i=i||0,r=e,a=t.length,o=0;o<a;o++)p(s=t[o])&&(s=new m({tweens:s})),u.add(s,r),"string"!=typeof s&&"function"!=typeof s&&("sequence"===n?r=s._startTime+s.totalDuration()/s._timeScale:"start"===n&&(s._startTime-=s.delay())),r+=i;return u._uncache(!0)}if("string"==typeof t)return u.addLabel(t,e);if("function"!=typeof t)throw"Cannot add "+t+" into the timeline; it is not a tween, timeline, function, or string.";t=f.delayedCall(0,t)}if(d.prototype.add.call(u,t,e),(t._time||!t._duration&&t._initted)&&(r=(u.rawTime()-t._startTime)*t._timeScale,(!t._duration||1e-5<Math.abs(Math.max(0,Math.min(t.totalDuration(),r)))-t._totalTime)&&t.render(r,!1,!1)),(u._gc||u._time===u._duration)&&!u._paused&&u._duration<u.duration())for(c=(l=u).rawTime()>t._startTime;l._timeline;)c&&l._timeline.smoothChildTiming?l.totalTime(l._totalTime,!0):l._gc&&l._enabled(!0,!1),l=l._timeline;return u},n.remove=function(t){if(t instanceof h){this._remove(t,!1);var e=t._timeline=t.vars.useFrames?h._rootFramesTimeline:h._rootTimeline;return t._startTime=(t._paused?t._pauseTime:e._time)-(t._reversed?t.totalDuration()-t._totalTime:t._totalTime)/t._timeScale,this}if(t instanceof Array||t&&t.push&&p(t)){for(var n=t.length;-1<--n;)this.remove(t[n]);return this}return"string"==typeof t?this.removeLabel(t):this.kill(null,t)},n._remove=function(t,e){return d.prototype._remove.call(this,t,e),this._last?this._time>this.duration()&&(this._time=this._duration,this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},n.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},n.insert=n.insertMultiple=function(t,e,n,i){return this.add(t,e||0,n,i)},n.appendMultiple=function(t,e,n,i){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),n,i)},n.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},n.addPause=function(t,e,n,i){var r=f.delayedCall(0,a,n,i||this);return r.vars.onComplete=r.vars.onReverseComplete=e,r.data="isPause",this._hasPause=!0,this.add(r,t)},n.removeLabel=function(t){return delete this._labels[t],this},n.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},n._parseTimeOrLabel=function(t,e,n,i){var r,a;if(i instanceof h&&i.timeline===this)this.remove(i);else if(i&&(i instanceof Array||i.push&&p(i)))for(a=i.length;-1<--a;)i[a]instanceof h&&i[a].timeline===this&&this.remove(i[a]);if(r="number"!=typeof t||e?99999999999<this.duration()?this.recent().endTime(!1):this._duration:0,"string"==typeof e)return this._parseTimeOrLabel(e,n&&"number"==typeof t&&null==this._labels[e]?t-r:0,n);if(e=e||0,"string"!=typeof t||!isNaN(t)&&null==this._labels[t])null==t&&(t=r);else{if(-1===(a=t.indexOf("=")))return null==this._labels[t]?n?this._labels[t]=r+e:e:this._labels[t]+e;e=parseInt(t.charAt(a-1)+"1",10)*Number(t.substr(a+1)),t=1<a?this._parseTimeOrLabel(t.substr(0,a-1),0,n):r}return Number(t)+e},n.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),!1!==e)},n.stop=function(){return this.paused(!0)},n.gotoAndPlay=function(t,e){return this.play(t,e)},n.gotoAndStop=function(t,e){return this.pause(t,e)},n.render=function(t,e,n){this._gc&&this._enabled(!0,!1);var i,r,a,o,s,l,c,u,h=this,d=h._time,p=h._dirty?h.totalDuration():h._totalDuration,f=h._startTime,m=h._timeScale,g=h._paused;if(d!==h._time&&(t+=h._time-d),p-1e-8<=t&&0<=t)h._totalTime=h._time=p,h._reversed||h._hasPausedChild()||(r=!0,o="onComplete",s=!!h._timeline.autoRemoveChildren,0===h._duration&&(t<=0&&-1e-8<=t||h._rawPrevTime<0||1e-8===h._rawPrevTime)&&h._rawPrevTime!==t&&h._first&&(s=!0,1e-8<h._rawPrevTime&&(o="onReverseComplete"))),h._rawPrevTime=h._duration||!e||t||h._rawPrevTime===t?t:1e-8,t=p+1e-4;else if(t<1e-8)if(h._totalTime=h._time=0,-1e-8<t&&(t=0),(0!==d||0===h._duration&&1e-8!==h._rawPrevTime&&(0<h._rawPrevTime||t<0&&0<=h._rawPrevTime))&&(o="onReverseComplete",r=h._reversed),t<0)h._active=!1,h._timeline.autoRemoveChildren&&h._reversed?(s=r=!0,o="onReverseComplete"):0<=h._rawPrevTime&&h._first&&(s=!0),h._rawPrevTime=t;else{if(h._rawPrevTime=h._duration||!e||t||h._rawPrevTime===t?t:1e-8,0===t&&r)for(i=h._first;i&&0===i._startTime;)i._duration||(r=!1),i=i._next;t=0,h._initted||(s=!0)}else{if(h._hasPause&&!h._forcingPlayhead&&!e){if(d<=t)for(i=h._first;i&&i._startTime<=t&&!l;)i._duration||"isPause"!==i.data||i.ratio||0===i._startTime&&0===h._rawPrevTime||(l=i),i=i._next;else for(i=h._last;i&&i._startTime>=t&&!l;)i._duration||"isPause"===i.data&&0<i._rawPrevTime&&(l=i),i=i._prev;l&&(h._time=h._totalTime=t=l._startTime,u=h._startTime+t/h._timeScale)}h._totalTime=h._time=h._rawPrevTime=t}if(h._time!==d&&h._first||n||s||l){if(h._initted||(h._initted=!0),h._active||!h._paused&&h._time!==d&&0<t&&(h._active=!0),0===d&&h.vars.onStart&&(0===h._time&&h._duration||e||h._callback("onStart")),d<=(c=h._time))for(i=h._first;i&&(a=i._next,c===h._time&&(!h._paused||g));)(i._active||i._startTime<=c&&!i._paused&&!i._gc)&&(l===i&&(h.pause(),h._pauseTime=u),i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(t-i._startTime)*i._timeScale,e,n):i.render((t-i._startTime)*i._timeScale,e,n)),i=a;else for(i=h._last;i&&(a=i._prev,c===h._time&&(!h._paused||g));){if(i._active||i._startTime<=d&&!i._paused&&!i._gc){if(l===i){for(l=i._prev;l&&l.endTime()>h._time;)l.render(l._reversed?l.totalDuration()-(t-l._startTime)*l._timeScale:(t-l._startTime)*l._timeScale,e,n),l=l._prev;l=null,h.pause(),h._pauseTime=u}i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(t-i._startTime)*i._timeScale,e,n):i.render((t-i._startTime)*i._timeScale,e,n)}i=a}h._onUpdate&&(e||(x.length&&b(),h._callback("onUpdate"))),o&&(h._gc||f!==h._startTime&&m===h._timeScale||!(0===h._time||p>=h.totalDuration())||(r&&(x.length&&b(),h._timeline.autoRemoveChildren&&h._enabled(!1,!1),h._active=!1),!e&&h.vars[o]&&h._callback(o)))}},n._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof m&&t._hasPausedChild())return!0;t=t._next}return!1},n.getChildren=function(t,e,n,i){i=i||-9999999999;for(var r=[],a=this._first,o=0;a;)a._startTime<i||(a instanceof f?!1!==e&&(r[o++]=a):(!1!==n&&(r[o++]=a),!1!==t&&(o=(r=r.concat(a.getChildren(!0,e,n))).length))),a=a._next;return r},n.getTweensOf=function(t,e){var n,i,r=this._gc,a=[],o=0;for(r&&this._enabled(!0,!0),i=(n=f.getTweensOf(t)).length;-1<--i;)(n[i].timeline===this||e&&this._contains(n[i]))&&(a[o++]=n[i]);return r&&this._enabled(!1,!0),a},n.recent=function(){return this._recent},n._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},n.shiftChildren=function(t,e,n){n=n||0;for(var i,r=this._first,a=this._labels;r;)r._startTime>=n&&(r._startTime+=t),r=r._next;if(e)for(i in a)a[i]>=n&&(a[i]+=t);return this._uncache(!0)},n._kill=function(t,e){if(!t&&!e)return this._enabled(!1,!1);for(var n=e?this.getTweensOf(e):this.getChildren(!0,!0,!1),i=n.length,r=!1;-1<--i;)n[i]._kill(t,e)&&(r=!0);return r},n.clear=function(t){var e=this.getChildren(!1,!0,!0),n=e.length;for(this._time=this._totalTime=0;-1<--n;)e[n]._enabled(!1,!1);return!1!==t&&(this._labels={}),this._uncache(!0)},n.invalidate=function(){for(var t=this._first;t;)t.invalidate(),t=t._next;return h.prototype.invalidate.call(this)},n._enabled=function(t,e){if(t===this._gc)for(var n=this._first;n;)n._enabled(t,!0),n=n._next;return d.prototype._enabled.call(this,t,e)},n.totalTime=function(t,e,n){this._forcingPlayhead=!0;var i=h.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,i},n.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},n.totalDuration=function(t){if(arguments.length)return t&&this.totalDuration()?this.timeScale(this._totalDuration/t):this;if(this._dirty){for(var e,n,i=0,r=this,a=r._last,o=999999999999;a;)e=a._prev,a._dirty&&a.totalDuration(),a._startTime>o&&r._sortChildren&&!a._paused&&!r._calculatingDuration?(r._calculatingDuration=1,r.add(a,a._startTime-a._delay),r._calculatingDuration=0):o=a._startTime,a._startTime<0&&!a._paused&&(i-=a._startTime,r._timeline.smoothChildTiming&&(r._startTime+=a._startTime/r._timeScale,r._time-=a._startTime,r._totalTime-=a._startTime,r._rawPrevTime-=a._startTime),r.shiftChildren(-a._startTime,!1,-9999999999),o=0),i<(n=a._startTime+a._totalDuration/a._timeScale)&&(i=n),a=e;r._duration=r._totalDuration=i,r._dirty=!1}return this._totalDuration},n.paused=function(t){if(!1===t&&this._paused)for(var e=this._first;e;)e._startTime===this._time&&"isPause"===e.data&&(e._rawPrevTime=0),e=e._next;return h.prototype.paused.apply(this,arguments)},n.usesFrames=function(){for(var t=this._timeline;t._timeline;)t=t._timeline;return t===h._rootFramesTimeline},n.rawTime=function(t){return t&&(this._paused||this._repeat&&0<this.time()&&this.totalProgress()<1)?this._totalTime%(this._duration+this._repeatDelay):this._paused?this._totalTime:(this._timeline.rawTime(t)-this._startTime)*this._timeScale},m},!0),_gsScope._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(e,s,t){function n(t){e.call(this,t),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=!!this.vars.yoyo,this._dirty=!0}var L=1e-8,i=s._internals,C=i.lazyTweens,R=i.lazyRender,l=_gsScope._gsDefine.globals,c=new t(null,null,1,0),r=n.prototype=new e;return r.constructor=n,r.kill()._gc=!1,n.version="2.1.2",r.invalidate=function(){return this._yoyo=!!this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),e.prototype.invalidate.call(this)},r.addCallback=function(t,e,n,i){return this.add(s.delayedCall(0,t,n,i),e)},r.removeCallback=function(t,e){if(t)if(null==e)this._kill(null,t);else for(var n=this.getTweensOf(t,!1),i=n.length,r=this._parseTimeOrLabel(e);-1<--i;)n[i]._startTime===r&&n[i]._enabled(!1,!1);return this},r.removePause=function(t){return this.removeCallback(e._internals.pauseCallback,t)},r.tweenTo=function(t,e){e=e||{};var n,i,r,a={ease:c,useFrames:this.usesFrames(),immediateRender:!1,lazy:!1},o=e.repeat&&l.TweenMax||s;for(i in e)a[i]=e[i];return a.time=this._parseTimeOrLabel(t),n=Math.abs(Number(a.time)-this._time)/this._timeScale||.001,r=new o(this,n,a),a.onStart=function(){r.target.paused(!0),r.vars.time===r.target.time()||n!==r.duration()||r.isFromTo||r.duration(Math.abs(r.vars.time-r.target.time())/r.target._timeScale).render(r.time(),!0,!0),e.onStart&&e.onStart.apply(e.onStartScope||e.callbackScope||r,e.onStartParams||[])},r},r.tweenFromTo=function(t,e,n){n=n||{},t=this._parseTimeOrLabel(t),n.startAt={onComplete:this.seek,onCompleteParams:[t],callbackScope:this},n.immediateRender=!1!==n.immediateRender;var i=this.tweenTo(e,n);return i.isFromTo=1,i.duration(Math.abs(i.vars.time-t)/this._timeScale||.001)},r.render=function(t,e,n){this._gc&&this._enabled(!0,!1);var i,r,a,o,s,l,c,u,h,d=this,p=d._time,f=d._dirty?d.totalDuration():d._totalDuration,m=d._duration,g=d._totalTime,v=d._startTime,y=d._timeScale,_=d._rawPrevTime,x=d._paused,b=d._cycle;if(p!==d._time&&(t+=d._time-p),f-L<=t&&0<=t)d._locked||(d._totalTime=f,d._cycle=d._repeat),d._reversed||d._hasPausedChild()||(r=!0,o="onComplete",s=!!d._timeline.autoRemoveChildren,0===d._duration&&(t<=0&&-L<=t||_<0||_===L)&&_!==t&&d._first&&(s=!0,L<_&&(o="onReverseComplete"))),d._rawPrevTime=d._duration||!e||t||d._rawPrevTime===t?t:L,d._yoyo&&1&d._cycle?d._time=t=0:t=(d._time=m)+1e-4;else if(t<L)if(d._locked||(d._totalTime=d._cycle=0),d._time=0,-L<t&&(t=0),(0!==p||0===m&&_!==L&&(0<_||t<0&&0<=_)&&!d._locked)&&(o="onReverseComplete",r=d._reversed),t<0)d._active=!1,d._timeline.autoRemoveChildren&&d._reversed?(s=r=!0,o="onReverseComplete"):0<=_&&d._first&&(s=!0),d._rawPrevTime=t;else{if(d._rawPrevTime=m||!e||t||d._rawPrevTime===t?t:L,0===t&&r)for(i=d._first;i&&0===i._startTime;)i._duration||(r=!1),i=i._next;t=0,d._initted||(s=!0)}else if(0===m&&_<0&&(s=!0),d._time=d._rawPrevTime=t,d._locked||(d._totalTime=t,0!==d._repeat&&(l=m+d._repeatDelay,d._cycle=d._totalTime/l>>0,d._cycle&&d._cycle===d._totalTime/l&&g<=t&&d._cycle--,d._time=d._totalTime-d._cycle*l,d._yoyo&&1&d._cycle&&(d._time=m-d._time),d._time>m?t=(d._time=m)+1e-4:d._time<0?d._time=t=0:t=d._time)),d._hasPause&&!d._forcingPlayhead&&!e){if(p<=(t=d._time)||d._repeat&&b!==d._cycle)for(i=d._first;i&&i._startTime<=t&&!c;)i._duration||"isPause"!==i.data||i.ratio||0===i._startTime&&0===d._rawPrevTime||(c=i),i=i._next;else for(i=d._last;i&&i._startTime>=t&&!c;)i._duration||"isPause"===i.data&&0<i._rawPrevTime&&(c=i),i=i._prev;c&&(h=d._startTime+c._startTime/d._timeScale,c._startTime<m&&(d._time=d._rawPrevTime=t=c._startTime,d._totalTime=t+d._cycle*(d._totalDuration+d._repeatDelay)))}if(d._cycle!==b&&!d._locked){var w=d._yoyo&&0!=(1&b),T=w===(d._yoyo&&0!=(1&d._cycle)),M=d._totalTime,S=d._cycle,E=d._rawPrevTime,A=d._time;if(d._totalTime=b*m,d._cycle<b?w=!w:d._totalTime+=m,d._time=p,d._rawPrevTime=0===m?_-1e-4:_,d._cycle=b,d._locked=!0,p=w?0:m,d.render(p,e,0===m),e||d._gc||d.vars.onRepeat&&(d._cycle=S,d._locked=!1,d._callback("onRepeat")),p!==d._time)return;if(T&&(d._cycle=b,d._locked=!0,p=w?m+1e-4:-1e-4,d.render(p,!0,!1)),d._locked=!1,d._paused&&!x)return;d._time=A,d._totalTime=M,d._cycle=S,d._rawPrevTime=E}if(d._time!==p&&d._first||n||s||c){if(d._initted||(d._initted=!0),d._active||!d._paused&&d._totalTime!==g&&0<t&&(d._active=!0),0===g&&d.vars.onStart&&(0===d._totalTime&&d._totalDuration||e||d._callback("onStart")),p<=(u=d._time))for(i=d._first;i&&(a=i._next,u===d._time&&(!d._paused||x));)(i._active||i._startTime<=d._time&&!i._paused&&!i._gc)&&(c===i&&(d.pause(),d._pauseTime=h),i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(t-i._startTime)*i._timeScale,e,n):i.render((t-i._startTime)*i._timeScale,e,n)),i=a;else for(i=d._last;i&&(a=i._prev,u===d._time&&(!d._paused||x));){if(i._active||i._startTime<=p&&!i._paused&&!i._gc){if(c===i){for(c=i._prev;c&&c.endTime()>d._time;)c.render(c._reversed?c.totalDuration()-(t-c._startTime)*c._timeScale:(t-c._startTime)*c._timeScale,e,n),c=c._prev;c=null,d.pause(),d._pauseTime=h}i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(t-i._startTime)*i._timeScale,e,n):i.render((t-i._startTime)*i._timeScale,e,n)}i=a}d._onUpdate&&(e||(C.length&&R(),d._callback("onUpdate"))),o&&(d._locked||d._gc||v!==d._startTime&&y===d._timeScale||!(0===d._time||f>=d.totalDuration())||(r&&(C.length&&R(),d._timeline.autoRemoveChildren&&d._enabled(!1,!1),d._active=!1),!e&&d.vars[o]&&d._callback(o)))}else g!==d._totalTime&&d._onUpdate&&(e||d._callback("onUpdate"))},r.getActive=function(t,e,n){for(var i,r=[],a=this.getChildren(t||null==t,e||null==t,!!n),o=0,s=a.length,l=0;l<s;l++)(i=a[l]).isActive()&&(r[o++]=i);return r},r.getLabelAfter=function(t){t||0!==t&&(t=this._time);for(var e=this.getLabelsArray(),n=e.length,i=0;i<n;i++)if(e[i].time>t)return e[i].name;return null},r.getLabelBefore=function(t){null==t&&(t=this._time);for(var e=this.getLabelsArray(),n=e.length;-1<--n;)if(e[n].time<t)return e[n].name;return null},r.getLabelsArray=function(){var t,e=[],n=0;for(t in this._labels)e[n++]={time:this._labels[t],name:t};return e.sort(function(t,e){return t.time-e.time}),e},r.invalidate=function(){return this._locked=!1,e.prototype.invalidate.call(this)},r.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()||0},r.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()||0},r.totalDuration=function(t){return arguments.length?-1!==this._repeat&&t?this.timeScale(this.totalDuration()/t):this:(this._dirty&&(e.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},r.time=function(t,e){if(!arguments.length)return this._time;this._dirty&&this.totalDuration();var n=this._duration,i=this._cycle,r=i*(n+this._repeatDelay);return n<t&&(t=n),this.totalTime(this._yoyo&&1&i?n-t+r:this._repeat?t+r:t,e)},r.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},r.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},r.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},r.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.getLabelBefore(this._time+L)},n},!0),T=180/Math.PI,b=[],w=[],M=[],v={},n=_gsScope._gsDefine.globals,g=_gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.8",API:2,global:!0,init:function(t,e,n){this._target=t,e instanceof Array&&(e={values:e}),this._func={},this._mod={},this._props=[],this._timeRes=null==e.timeResolution?6:parseInt(e.timeResolution,10);var i,r,a,o,s,l,c=e.values||[],u={},h=c[0],d=e.autoRotate||n.vars.orientToBezier;for(i in this._autoRotate=d?d instanceof Array?d:[["x","y","rotation",!0!==d&&Number(d)||0]]:null,h)this._props.push(i);for(a=this._props.length;-1<--a;)i=this._props[a],this._overwriteProps.push(i),r=this._func[i]="function"==typeof t[i],u[i]=r?t[i.indexOf("set")||"function"!=typeof t["get"+i.substr(3)]?i:"get"+i.substr(3)]():parseFloat(t[i]),s||u[i]!==c[0][i]&&(s=u);if(this._beziers="cubic"!==e.type&&"quadratic"!==e.type&&"soft"!==e.type?p(c,isNaN(e.curviness)?1:e.curviness,!1,"thruBasic"===e.type,e.correlate,s):function(t,e,n){var i,r,a,o,s,l,c,u,h,d,p,f={},m="cubic"===(e=e||"soft")?3:2,g="soft"===e,v=[];if(g&&n&&(t=[n].concat(t)),null==t||t.length<1+m)throw"invalid Bezier data";for(h in t[0])v.push(h);for(l=v.length;-1<--l;){for(f[h=v[l]]=s=[],d=0,u=t.length,c=0;c<u;c++)i=null==n?t[c][h]:"string"==typeof(p=t[c][h])&&"="===p.charAt(1)?n[h]+Number(p.charAt(0)+p.substr(2)):Number(p),g&&1<c&&c<u-1&&(s[d++]=(i+s[d-2])/2),s[d++]=i;for(u=d-m+1,c=d=0;c<u;c+=m)i=s[c],r=s[c+1],a=s[c+2],o=2==m?0:s[c+3],s[d++]=p=3==m?new y(i,r,a,o):new y(i,(2*r+i)/3,(2*r+a)/3,a);s.length=d}return f}(c,e.type,u),this._segCount=this._beziers[i].length,this._timeRes&&(l=function(t,e){var n,i,r,a,o=[],s=[],l=0,c=0,u=(e=e>>0||6)-1,h=[],d=[];for(n in t)!function(t,e,n){for(var i,r,a,o,s,l,c,u,h,d,p,f=1/n,m=t.length;-1<--m;)for(a=(d=t[m]).a,o=d.d-a,s=d.c-a,l=d.b-a,r=0,u=1;u<=n;u++)i=r-(r=((c=f*u)*c*o+3*(h=1-c)*(c*s+h*l))*c),e[p=m*n+u-1]=(e[p]||0)+i*i}(t[n],o,e);for(r=o.length,i=0;i<r;i++)l+=Math.sqrt(o[i]),d[a=i%e]=l,a==u&&(c+=l,h[a=i/e>>0]=d,s[a]=c,l=0,d=[]);return{length:c,lengths:s,segments:h}}(this._beziers,this._timeRes),this._length=l.length,this._lengths=l.lengths,this._segments=l.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length),d=this._autoRotate)for(this._initialRotations=[],d[0]instanceof Array||(this._autoRotate=d=[d]),a=d.length;-1<--a;){for(o=0;o<3;o++)i=d[a][o],this._func[i]="function"==typeof t[i]&&t[i.indexOf("set")||"function"!=typeof t["get"+i.substr(3)]?i:"get"+i.substr(3)];i=d[a][2],this._initialRotations[a]=(this._func[i]?this._func[i].call(this._target):this._target[i])||0,this._overwriteProps.push(i)}return this._startRatio=n.vars.runBackwards?1:0,!0},set:function(t){var e,n,i,r,a,o,s,l,c,u=this._segCount,h=this._func,d=this._target,p=t!==this._startRatio;if(this._timeRes){if(l=this._lengths,c=this._curSeg,t*=this._length,w=this._li,t>this._l2&&w<u-1){for(s=u-1;w<s&&(this._l2=l[++w])<=t;);this._l1=l[w-1],this._li=w,this._curSeg=c=this._segments[w],this._s2=c[this._s1=this._si=0]}else if(t<this._l1&&0<w){for(;0<w&&(this._l1=l[--w])>=t;);0===w&&t<this._l1?this._l1=0:w++,this._l2=l[w],this._li=w,this._curSeg=c=this._segments[w],this._s1=c[(this._si=c.length-1)-1]||0,this._s2=c[this._si]}if(e=w,t-=this._l1,w=this._si,t>this._s2&&w<c.length-1){for(s=c.length-1;w<s&&(this._s2=c[++w])<=t;);this._s1=c[w-1],this._si=w}else if(t<this._s1&&0<w){for(;0<w&&(this._s1=c[--w])>=t;);0===w&&t<this._s1?this._s1=0:w++,this._s2=c[w],this._si=w}a=(w+(t-this._s1)/(this._s2-this._s1))*this._prec||0}else a=(t-(e=t<0?0:1<=t?u-1:u*t>>0)*(1/u))*u;for(n=1-a,w=this._props.length;-1<--w;)i=this._props[w],o=(a*a*(r=this._beziers[i][e]).da+3*n*(a*r.ca+n*r.ba))*a+r.a,this._mod[i]&&(o=this._mod[i](o,d)),h[i]?d[i](o):d[i]=o;if(this._autoRotate)for(var f,m,g,v,y,_,x,b=this._autoRotate,w=b.length;-1<--w;)i=b[w][2],_=b[w][3]||0,x=!0===b[w][4]?1:T,r=this._beziers[b[w][0]],f=this._beziers[b[w][1]],r&&f&&(r=r[e],f=f[e],m=r.a+(r.b-r.a)*a,m+=((v=r.b+(r.c-r.b)*a)-m)*a,v+=(r.c+(r.d-r.c)*a-v)*a,g=f.a+(f.b-f.a)*a,g+=((y=f.b+(f.c-f.b)*a)-g)*a,y+=(f.c+(f.d-f.c)*a-y)*a,o=p?Math.atan2(y-g,v-m)*x+_:this._initialRotations[w],this._mod[i]&&(o=this._mod[i](o,d)),h[i]?d[i](o):d[i]=o)}}),i=g.prototype,g.bezierThrough=p,g.cubicToQuadratic=S,g._autoCSS=!0,g.quadraticToCubic=function(t,e,n){return new y(t,(2*e+t)/3,(2*e+n)/3,n)},g._cssRegister=function(){var t,p,f,m,e=n.CSSPlugin;e&&(t=e._internals,p=t._parseToProxy,f=t._setPluginRatio,m=t.CSSPropTween,t._registerComplexSpecialProp("bezier",{parser:function(t,e,n,i,r,a){e instanceof Array&&(e={values:e}),a=new g;var o,s,l,c=e.values,u=c.length-1,h=[],d={};if(u<0)return r;for(o=0;o<=u;o++)l=p(t,c[o],i,r,a,u!==o),h[o]=l.end;for(s in e)d[s]=e[s];return d.values=h,(r=new m(t,"bezier",0,0,l.pt,2)).data=l,r.plugin=a,r.setRatio=f,0===d.autoRotate&&(d.autoRotate=!0),!d.autoRotate||d.autoRotate instanceof Array||(o=!0===d.autoRotate?0:Number(d.autoRotate),d.autoRotate=null!=l.end.left?[["left","top","rotation",o,!1]]:null!=l.end.x&&[["x","y","rotation",o,!1]]),d.autoRotate&&(i._transform||i._enableTransforms(!1),l.autoRotate=i._target._gsTransform,l.proxy.rotation=l.autoRotate.rotation||0,i._overwriteProps.push("rotation")),a._onInitTween(l.proxy,d,i._tween),r}}))},i._mod=function(t){for(var e,n=this._overwriteProps,i=n.length;-1<--i;)(e=t[n[i]])&&"function"==typeof e&&(this._mod[n[i]]=e)},i._kill=function(t){var e,n,i=this._props;for(e in this._beziers)if(e in t)for(delete this._beziers[e],delete this._func[e],n=i.length;-1<--n;)i[n]===e&&i.splice(n,1);if(i=this._autoRotate)for(n=i.length;-1<--n;)t[i[n][2]]&&i.splice(n,1);return this._super._kill.call(this,t)},_gsScope._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(a,H){var f,M,S,m,U=function(){a.call(this,"css"),this._overwriteProps.length=0,this.setRatio=U.prototype.setRatio},c=_gsScope._gsDefine.globals,g={},t=U.prototype=new a("css");(t.constructor=U).version="2.1.0",U.API=2,U.defaultTransformPerspective=0,U.defaultSkewType="compensated",U.defaultSmoothOrigin=!0,t="px",U.suffixMap={top:t,right:t,bottom:t,left:t,width:t,height:t,fontSize:t,padding:t,margin:t,perspective:t,lineHeight:""};function o(t,e){return e.toUpperCase()}function s(t,e){return e&&tt.createElementNS?tt.createElementNS(e,t):tt.createElement(t)}function l(t){return z.test("string"==typeof t?t:(t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100:1}function v(t){_gsScope.console&&console.log(t)}function E(t,e){var n,i,r=(e=e||et).style;if(void 0!==r[t])return t;for(t=t.charAt(0).toUpperCase()+t.substr(1),n=["O","Moz","ms","Ms","Webkit"],i=5;-1<--i&&void 0===r[n[i]+t];);return 0<=i?(ot="-"+(st=3===i?"ms":n[i]).toLowerCase()+"-",st+t):null}function y(t){return lt.getComputedStyle(t)}function _(t,e){var n,i,r,a={};if(e=e||y(t))if(n=e.length)for(;-1<--n;)-1!==(r=e[n]).indexOf("-transform")&&kt!==r||(a[r.replace(V,o)]=e.getPropertyValue(r));else for(n in e)-1!==n.indexOf("Transform")&&Ft!==n||(a[n]=e[n]);else if(e=t.currentStyle||t.style)for(n in e)"string"==typeof n&&void 0===a[n]&&(a[n.replace(V,o)]=e[n]);return at||(a.opacity=l(t)),i=Zt(t,e,!1),a.rotation=i.rotation,a.skewX=i.skewX,a.scaleX=i.scaleX,a.scaleY=i.scaleY,a.x=i.x,a.y=i.y,Ht&&(a.z=i.z,a.rotationX=i.rotationX,a.rotationY=i.rotationY,a.scaleZ=i.scaleZ),a.filters&&delete a.filters,a}function x(t,e,n,i,r){var a,o,s,l={},c=t.style;for(o in n)"cssText"!==o&&"length"!==o&&isNaN(o)&&(e[o]!==(a=n[o])||r&&r[o])&&-1===o.indexOf("Origin")&&("number"==typeof a||"string"==typeof a)&&(l[o]="auto"!==a||"left"!==o&&"top"!==o?""!==a&&"auto"!==a&&"none"!==a||"string"!=typeof e[o]||""===e[o].replace(u,"")?a:0:ht(t,o),void 0!==c[o]&&(s=new bt(c,o,c[o],s)));if(i)for(o in i)"className"!==o&&(l[o]=i[o]);return{difs:l,firstMPT:s}}function A(t,e){return"function"==typeof t&&(t=t(D,O)),"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2)):parseFloat(t)-parseFloat(e)||0}function L(t,e){"function"==typeof t&&(t=t(D,O));var n="string"==typeof t&&"="===t.charAt(1);return"string"==typeof t&&"v"===t.charAt(t.length-2)&&(t=(n?t.substr(0,2):0)+window["inner"+("vh"===t.substr(-2)?"Height":"Width")]*(parseFloat(n?t.substr(2):t)/100)),null==t?e:n?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2))+e:parseFloat(t)||0}function C(t,e,n,i){var r,a,o,s;return"function"==typeof t&&(t=t(D,O)),(o=null==t?e:"number"==typeof t?t:(r=t.split("_"),a=((s="="===t.charAt(1))?parseInt(t.charAt(0)+"1",10)*parseFloat(r[0].substr(2)):parseFloat(r[0]))*(-1===t.indexOf("rad")?1:$)-(s?0:e),r.length&&(i&&(i[n]=e+a),-1!==t.indexOf("short")&&((a%=360)!==a%180&&(a=a<0?a+360:a-360)),-1!==t.indexOf("_cw")&&a<0?a=(a+3599999999640)%360-360*(a/360|0):-1!==t.indexOf("ccw")&&0<a&&(a=(a-3599999999640)%360-360*(a/360|0))),e+a))<1e-6&&-1e-6<o&&(o=0),o}function p(t,e,n){return 255*(6*(t=t<0?t+1:1<t?t-1:t)<1?e+(n-e)*t*6:t<.5?n:3*t<2?e+(n-e)*(2/3-t)*6:e)+.5|0}function i(t,e){var n,i,r,a=t.match(vt)||[],o=0,s="";if(!a.length)return t;for(n=0;n<a.length;n++)i=a[n],o+=(r=t.substr(o,t.indexOf(i,o)-o)).length+i.length,3===(i=gt(i,e)).length&&i.push(1),s+=r+(e?"hsla("+i[0]+","+i[1]+"%,"+i[2]+"%,"+i[3]:"rgba("+i.join(","))+")";return s+t.substr(o)}var R,b,w,F,T,P,O,D,e,n,N=/(?:\-|\.|\b)(\d|\.|e\-)+/g,I=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,B=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,u=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,k=/(?:\d|\-|\+|=|#|\.)*/g,z=/opacity *= *([^)]*)/i,G=/opacity:([^;]*)/i,h=/alpha\(opacity *=.+?\)/i,j=/^(rgb|hsl)/,d=/([A-Z])/g,V=/-([a-z])/gi,W=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,q=/(?:Left|Right|Width)/i,X=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,Y=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,Z=/,(?=[^\)]*(?:\(|$))/gi,J=/[\s,\(]/i,Q=Math.PI/180,$=180/Math.PI,K={},r={style:{}},tt=_gsScope.document||{createElement:function(){return r}},et=s("div"),nt=s("img"),it=U._internals={_specialProps:g},rt=(_gsScope.navigator||{}).userAgent||"",at=(e=rt.indexOf("Android"),n=s("a"),w=-1!==rt.indexOf("Safari")&&-1===rt.indexOf("Chrome")&&(-1===e||3<parseFloat(rt.substr(e+8,2))),T=w&&parseFloat(rt.substr(rt.indexOf("Version/")+8,2))<6,F=-1!==rt.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(rt)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(rt))&&(P=parseFloat(RegExp.$1)),!!n&&(n.style.cssText="top:1px;opacity:.55;",/^0.55/.test(n.style.opacity))),ot="",st="",lt="undefined"!=typeof window?window:tt.defaultView||{getComputedStyle:function(){}},ct=U.getStyle=function(t,e,n,i,r){var a;return at||"opacity"!==e?(!i&&t.style[e]?a=t.style[e]:(n=n||y(t))?a=n[e]||n.getPropertyValue(e)||n.getPropertyValue(e.replace(d,"-$1").toLowerCase()):t.currentStyle&&(a=t.currentStyle[e]),null==r||a&&"none"!==a&&"auto"!==a&&"auto auto"!==a?a:r):l(t)},ut=it.convertToPixels=function(t,e,n,i,r){if("px"===i||!i&&"lineHeight"!==e)return n;if("auto"===i||!n)return 0;var a,o,s,l=q.test(e),c=t,u=et.style,h=n<0,d=1===n;if(h&&(n=-n),d&&(n*=100),"lineHeight"!==e||i)if("%"===i&&-1!==e.indexOf("border"))a=n/100*(l?t.clientWidth:t.clientHeight);else{if(u.cssText="border:0 solid red;position:"+ct(t,"position")+";line-height:0;","%"!==i&&c.appendChild&&"v"!==i.charAt(0)&&"rem"!==i)u[l?"borderLeftWidth":"borderTopWidth"]=n+i;else{if(c=t.parentNode||tt.body,-1!==ct(c,"display").indexOf("flex")&&(u.position="absolute"),o=c._gsCache,s=H.ticker.frame,o&&l&&o.time===s)return o.width*n/100;u[l?"width":"height"]=n+i}c.appendChild(et),a=parseFloat(et[l?"offsetWidth":"offsetHeight"]),c.removeChild(et),l&&"%"===i&&!1!==U.cacheWidths&&((o=c._gsCache=c._gsCache||{}).time=s,o.width=a/n*100),0!==a||r||(a=ut(t,e,n,i,!0))}else o=y(t).lineHeight,t.style.lineHeight=n,a=parseFloat(y(t).lineHeight),t.style.lineHeight=o;return d&&(a/=100),h?-a:a},ht=it.calculateOffset=function(t,e,n){if("absolute"!==ct(t,"position",n))return 0;var i="left"===e?"Left":"Top",r=ct(t,"margin"+i,n);return t["offset"+i]-(ut(t,e,parseFloat(r),r.replace(k,""))||0)},dt={width:["Left","Right"],height:["Top","Bottom"]},pt=["marginLeft","marginRight","marginTop","marginBottom"],ft=function(t,e){if("contain"===t||"auto"===t||"auto auto"===t)return t+" ";null!=t&&""!==t||(t="0 0");var n,i=t.split(" "),r=-1!==t.indexOf("left")?"0%":-1!==t.indexOf("right")?"100%":i[0],a=-1!==t.indexOf("top")?"0%":-1!==t.indexOf("bottom")?"100%":i[1];if(3<i.length&&!e){for(i=t.split(", ").join(",").split(","),t=[],n=0;n<i.length;n++)t.push(ft(i[n]));return t.join(",")}return null==a?a="center"===r?"50%":"0":"center"===a&&(a="50%"),("center"===r||isNaN(parseFloat(r))&&-1===(r+"").indexOf("="))&&(r="50%"),t=r+" "+a+(2<i.length?" "+i[2]:""),e&&(e.oxp=-1!==r.indexOf("%"),e.oyp=-1!==a.indexOf("%"),e.oxr="="===r.charAt(1),e.oyr="="===a.charAt(1),e.ox=parseFloat(r.replace(u,"")),e.oy=parseFloat(a.replace(u,"")),e.v=t),e||t},mt={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},gt=U.parseColor=function(t,e){var n,i,r,a,o,s,l,c,u,h,d;if(t)if("number"==typeof t)n=[t>>16,t>>8&255,255&t];else{if(","===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),mt[t])n=mt[t];else if("#"===t.charAt(0))4===t.length&&(t="#"+(i=t.charAt(1))+i+(r=t.charAt(2))+r+(a=t.charAt(3))+a),n=[(t=parseInt(t.substr(1),16))>>16,t>>8&255,255&t];else if("hsl"===t.substr(0,3))if(n=d=t.match(N),e){if(-1!==t.indexOf("="))return t.match(I)}else o=Number(n[0])%360/360,s=Number(n[1])/100,i=2*(l=Number(n[2])/100)-(r=l<=.5?l*(s+1):l+s-l*s),3<n.length&&(n[3]=Number(n[3])),n[0]=p(o+1/3,i,r),n[1]=p(o,i,r),n[2]=p(o-1/3,i,r);else n=t.match(N)||mt.transparent;n[0]=Number(n[0]),n[1]=Number(n[1]),n[2]=Number(n[2]),3<n.length&&(n[3]=Number(n[3]))}else n=mt.black;return e&&!d&&(i=n[0]/255,r=n[1]/255,a=n[2]/255,l=((c=Math.max(i,r,a))+(u=Math.min(i,r,a)))/2,c===u?o=s=0:(h=c-u,s=.5<l?h/(2-c-u):h/(c+u),o=c===i?(r-a)/h+(r<a?6:0):c===r?(a-i)/h+2:(i-r)/h+4,o*=60),n[0]=o+.5|0,n[1]=100*s+.5|0,n[2]=100*l+.5|0),n},vt="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(t in mt)vt+="|"+t+"\\b";vt=new RegExp(vt+")","gi"),U.colorStringFilter=function(t){var e,n=t[0]+" "+t[1];vt.test(n)&&(e=-1!==n.indexOf("hsl(")||-1!==n.indexOf("hsla("),t[0]=i(t[0],e),t[1]=i(t[1],e)),vt.lastIndex=0},H.defaultStringFilter||(H.defaultStringFilter=U.colorStringFilter);function yt(t,e,a,o){if(null==t)return function(t){return t};var s,l=e?(t.match(vt)||[""])[0]:"",c=t.split(l).join("").match(B)||[],u=t.substr(0,t.indexOf(c[0])),h=")"===t.charAt(t.length-1)?")":"",d=-1!==t.indexOf(" ")?" ":",",p=c.length,f=0<p?c[0].replace(N,""):"";return p?s=e?function(t){var e,n,i,r;if("number"==typeof t)t+=f;else if(o&&Z.test(t)){for(r=t.replace(Z,"|").split("|"),i=0;i<r.length;i++)r[i]=s(r[i]);return r.join(",")}if(e=(t.match(vt)||[l])[0],i=(n=t.split(e).join("").match(B)||[]).length,p>i--)for(;++i<p;)n[i]=a?n[(i-1)/2|0]:c[i];return u+n.join(d)+d+e+h+(-1!==t.indexOf("inset")?" inset":"")}:function(t){var e,n,i;if("number"==typeof t)t+=f;else if(o&&Z.test(t)){for(n=t.replace(Z,"|").split("|"),i=0;i<n.length;i++)n[i]=s(n[i]);return n.join(",")}if(i=(e=t.match(B)||[]).length,p>i--)for(;++i<p;)e[i]=a?e[(i-1)/2|0]:c[i];return u+e.join(d)+h}:function(t){return t}}function _t(c){return c=c.split(","),function(t,e,n,i,r,a,o){var s,l=(e+"").split(" ");for(o={},s=0;s<4;s++)o[c[s]]=l[s]=l[s]||l[(s-1)/2>>0];return i.parse(t,o,r,a)}}function xt(t,e,n,i,r,a){var o=new wt(t,e,n,i-n,r,-1,a);return o.b=n,o.e=o.xs0=i,o}var bt=(it._setPluginRatio=function(t){this.plugin.setRatio(t);for(var e,n,i,r,a,o=this.data,s=o.proxy,l=o.firstMPT;l;)e=s[l.v],l.r?e=l.r(e):e<1e-6&&-1e-6<e&&(e=0),l.t[l.p]=e,l=l._next;if(o.autoRotate&&(o.autoRotate.rotation=o.mod?o.mod.call(this._tween,s.rotation,this.t,this._tween):s.rotation),1===t||0===t)for(l=o.firstMPT,a=1===t?"e":"b";l;){if((n=l.t).type){if(1===n.type){for(r=n.xs0+n.s+n.xs1,i=1;i<n.l;i++)r+=n["xn"+i]+n["xs"+(i+1)];n[a]=r}}else n[a]=n.s+n.xs0;l=l._next}},function(t,e,n,i,r){this.t=t,this.p=e,this.v=n,this.r=r,i&&((i._prev=this)._next=i)}),wt=(it._parseToProxy=function(t,e,n,i,r,a){var o,s,l,c,u,h=i,d={},p={},f=n._transform,m=K;for(n._transform=null,K=e,i=u=n.parse(t,e,i,r),K=m,a&&(n._transform=f,h&&(h._prev=null,h._prev&&(h._prev._next=null)));i&&i!==h;){if(i.type<=1&&(p[s=i.p]=i.s+i.c,d[s]=i.s,a||(c=new bt(i,"s",s,c,i.r),i.c=0),1===i.type))for(o=i.l;0<--o;)l="xn"+o,p[s=i.p+"_"+l]=i.data[l],d[s]=i[l],a||(c=new bt(i,l,s,c,i.rxp[l]));i=i._next}return{proxy:d,end:p,firstMPT:c,pt:u}},it.CSSPropTween=function(t,e,n,i,r,a,o,s,l,c,u){this.t=t,this.p=e,this.s=n,this.c=i,this.n=o||e,t instanceof wt||m.push(this.n),this.r=!s||"function"==typeof s?s:Math.round,this.type=a||0,l&&(this.pr=l,f=!0),this.b=void 0===c?n:c,this.e=void 0===u?n+i:u,r&&((this._next=r)._prev=this)}),Tt=U.parseComplex=function(t,e,n,i,r,a,o,s,l,c){n=n||a||"","function"==typeof i&&(i=i(D,O)),o=new wt(t,e,0,0,o,c?2:1,null,!1,s,n,i),i+="",r&&vt.test(i+n)&&(i=[n,i],U.colorStringFilter(i),n=i[0],i=i[1]);var u,h,d,p,f,m,g,v,y,_,x,b,w,T=n.split(", ").join(",").split(" "),M=i.split(", ").join(",").split(" "),S=T.length,E=!1!==R;for(-1===i.indexOf(",")&&-1===n.indexOf(",")||(M=-1!==(i+n).indexOf("rgb")||-1!==(i+n).indexOf("hsl")?(T=T.join(" ").replace(Z,", ").split(" "),M.join(" ").replace(Z,", ").split(" ")):(T=T.join(" ").split(",").join(", ").split(" "),M.join(" ").split(",").join(", ").split(" ")),S=T.length),S!==M.length&&(S=(T=(a||"").split(" ")).length),o.plugin=l,o.setRatio=c,u=vt.lastIndex=0;u<S;u++)if(p=T[u],f=M[u]+"",(v=parseFloat(p))||0===v)o.appendXtra("",v,A(f,v),f.replace(I,""),E&&-1!==f.indexOf("px")&&Math.round,!0);else if(r&&vt.test(p))b=")"+((b=f.indexOf(")")+1)?f.substr(b):""),w=-1!==f.indexOf("hsl")&&at,_=f,p=gt(p,w),f=gt(f,w),(y=6<p.length+f.length)&&!at&&0===f[3]?(o["xs"+o.l]+=o.l?" transparent":"transparent",o.e=o.e.split(M[u]).join("transparent")):(at||(y=!1),w?o.appendXtra(_.substr(0,_.indexOf("hsl"))+(y?"hsla(":"hsl("),p[0],A(f[0],p[0]),",",!1,!0).appendXtra("",p[1],A(f[1],p[1]),"%,",!1).appendXtra("",p[2],A(f[2],p[2]),y?"%,":"%"+b,!1):o.appendXtra(_.substr(0,_.indexOf("rgb"))+(y?"rgba(":"rgb("),p[0],f[0]-p[0],",",Math.round,!0).appendXtra("",p[1],f[1]-p[1],",",Math.round).appendXtra("",p[2],f[2]-p[2],y?",":b,Math.round),y&&(p=p.length<4?1:p[3],o.appendXtra("",p,(f.length<4?1:f[3])-p,b,!1))),vt.lastIndex=0;else if(m=p.match(N)){if(!(g=f.match(I))||g.length!==m.length)return o;for(h=d=0;h<m.length;h++)x=m[h],_=p.indexOf(x,d),o.appendXtra(p.substr(d,_-d),Number(x),A(g[h],x),"",E&&"px"===p.substr(_+x.length,2)&&Math.round,0===h),d=_+x.length;o["xs"+o.l]+=p.substr(d)}else o["xs"+o.l]+=o.l||o["xs"+o.l]?" "+f:f;if(-1!==i.indexOf("=")&&o.data){for(b=o.xs0+o.data.s,u=1;u<o.l;u++)b+=o["xs"+u]+o.data["xn"+u];o.e=b+o["xs"+u]}return o.l||(o.type=-1,o.xs0=o.e),o.xfirst||o},Mt=9;for((t=wt.prototype).l=t.pr=0;0<--Mt;)t["xn"+Mt]=0,t["xs"+Mt]="";t.xs0="",t._next=t._prev=t.xfirst=t.data=t.plugin=t.setRatio=t.rxp=null,t.appendXtra=function(t,e,n,i,r,a){var o=this,s=o.l;return o["xs"+s]+=a&&(s||o["xs"+s])?" "+t:t||"",n||0===s||o.plugin?(o.l++,o.type=o.setRatio?2:1,o["xs"+o.l]=i||"",0<s?(o.data["xn"+s]=e+n,o.rxp["xn"+s]=r,o["xn"+s]=e,o.plugin||(o.xfirst=new wt(o,"xn"+s,e,n,o.xfirst||o,0,o.n,r,o.pr),o.xfirst.xs0=0)):(o.data={s:e+n},o.rxp={},o.s=e,o.c=n,o.r=r)):o["xs"+s]+=e+(i||""),o};function St(t,e){e=e||{},this.p=e.prefix&&E(t)||t,(g[t]=g[this.p]=this).format=e.formatter||yt(e.defaultValue,e.color,e.collapsible,e.multi),e.parser&&(this.parse=e.parser),this.clrs=e.color,this.multi=e.multi,this.keyword=e.keyword,this.dflt=e.defaultValue,this.allowFunc=e.allowFunc,this.pr=e.priority||0}var Et=it._registerComplexSpecialProp=function(t,e,n){"object"!=typeof e&&(e={parser:n});var i,r=t.split(","),a=e.defaultValue;for(n=n||[a],i=0;i<r.length;i++)e.prefix=0===i&&e.prefix,e.defaultValue=n[i]||a,new St(r[i],e)},At=it._registerPluginProp=function(t){var l;g[t]||(l=t.charAt(0).toUpperCase()+t.substr(1)+"Plugin",Et(t,{parser:function(t,e,n,i,r,a,o){var s=c.com.greensock.plugins[l];return s?(s._cssRegister(),g[n].parse(t,e,n,i,r,a,o)):(v("Error: "+l+" js file not loaded."),r)}}))};(t=St.prototype).parseComplex=function(t,e,n,i,r,a){var o,s,l,c,u,h,d=this.keyword;if(this.multi&&(Z.test(n)||Z.test(e)?(s=e.replace(Z,"|").split("|"),l=n.replace(Z,"|").split("|")):d&&(s=[e],l=[n])),l){for(c=l.length>s.length?l.length:s.length,o=0;o<c;o++)e=s[o]=s[o]||this.dflt,n=l[o]=l[o]||this.dflt,d&&((u=e.indexOf(d))!==(h=n.indexOf(d))&&(-1===h?s[o]=s[o].split(d).join(""):-1===u&&(s[o]+=" "+d)));e=s.join(", "),n=l.join(", ")}return Tt(t,this.p,e,n,this.clrs,this.dflt,i,this.pr,r,a)},t.parse=function(t,e,n,i,r,a,o){return this.parseComplex(t.style,this.format(ct(t,this.p,S,!1,this.dflt)),this.format(e),r,a)},U.registerSpecialProp=function(t,l,c){Et(t,{parser:function(t,e,n,i,r,a,o){var s=new wt(t,n,0,0,r,2,n,!1,c);return s.plugin=a,s.setRatio=l(t,e,i._tween,n),s},priority:c})},U.useSVGTransformAttr=!0;function Lt(t,e,n){var i,r=tt.createElementNS("http://www.w3.org/2000/svg",t),a=/([a-z])([A-Z])/g;for(i in n)r.setAttributeNS(null,i.replace(a,"$1-$2").toLowerCase(),n[i]);return e.appendChild(r),r}function Ct(t,e,n,i,r,a){var o,s,l,c,u,h,d,p,f,m,g,v,y,_,x=t._gsTransform,b=Yt(t,!0);x&&(y=x.xOrigin,_=x.yOrigin),(!i||(o=i.split(" ")).length<2)&&(0===(d=t.getBBox()).x&&0===d.y&&d.width+d.height===0&&(d={x:parseFloat(t.hasAttribute("x")?t.getAttribute("x"):t.hasAttribute("cx")?t.getAttribute("cx"):0)||0,y:parseFloat(t.hasAttribute("y")?t.getAttribute("y"):t.hasAttribute("cy")?t.getAttribute("cy"):0)||0,width:0,height:0}),o=[(-1!==(e=ft(e).split(" "))[0].indexOf("%")?parseFloat(e[0])/100*d.width:parseFloat(e[0]))+d.x,(-1!==e[1].indexOf("%")?parseFloat(e[1])/100*d.height:parseFloat(e[1]))+d.y]),n.xOrigin=c=parseFloat(o[0]),n.yOrigin=u=parseFloat(o[1]),i&&b!==Xt&&(h=b[0],d=b[1],p=b[2],f=b[3],m=b[4],g=b[5],(v=h*f-d*p)&&(s=c*(f/v)+u*(-p/v)+(p*g-f*m)/v,l=c*(-d/v)+u*(h/v)-(h*g-d*m)/v,c=n.xOrigin=o[0]=s,u=n.yOrigin=o[1]=l)),x&&(a&&(n.xOffset=x.xOffset,n.yOffset=x.yOffset,x=n),r||!1!==r&&!1!==U.defaultSmoothOrigin?(s=c-y,l=u-_,x.xOffset+=s*b[0]+l*b[2]-s,x.yOffset+=s*b[1]+l*b[3]-l):x.xOffset=x.yOffset=0),a||t.setAttribute("data-svg-origin",o.join(" "))}function Rt(t){var e,n,i=this.data,r=-i.rotation*Q,a=r+i.skewX*Q,o=(Math.cos(r)*i.scaleX*1e5|0)/1e5,s=(Math.sin(r)*i.scaleX*1e5|0)/1e5,l=(Math.sin(a)*-i.scaleY*1e5|0)/1e5,c=(Math.cos(a)*i.scaleY*1e5|0)/1e5,u=this.t.style,h=this.t.currentStyle;if(h){n=s,s=-l,l=-n,e=h.filter,u.filter="";var d=this.t.offsetWidth,p=this.t.offsetHeight,f="absolute"!==h.position,m="progid:DXImageTransform.Microsoft.Matrix(M11="+o+", M12="+s+", M21="+l+", M22="+c,g=i.x+d*i.xPercent/100,v=i.y+p*i.yPercent/100;if(null!=i.ox&&(g+=(w=(i.oxp?d*i.ox*.01:i.ox)-d/2)-(w*o+(T=(i.oyp?p*i.oy*.01:i.oy)-p/2)*s),v+=T-(w*l+T*c)),f?m+=", Dx="+((w=d/2)-(w*o+(T=p/2)*s)+g)+", Dy="+(T-(w*l+T*c)+v)+")":m+=", sizingMethod='auto expand')",-1!==e.indexOf("DXImageTransform.Microsoft.Matrix(")?u.filter=e.replace(Y,m):u.filter=m+" "+e,0!==t&&1!==t||1!=o||0!=s||0!=l||1!=c||(f&&-1===m.indexOf("Dx=0, Dy=0")||z.test(e)&&100!==parseFloat(RegExp.$1)||-1===e.indexOf(e.indexOf("Alpha"))&&u.removeAttribute("filter")),!f){var y,_,x,b=P<8?1:-1,w=i.ieOffsetX||0,T=i.ieOffsetY||0;for(i.ieOffsetX=Math.round((d-((o<0?-o:o)*d+(s<0?-s:s)*p))/2+g),i.ieOffsetY=Math.round((p-((c<0?-c:c)*p+(l<0?-l:l)*d))/2+v),Mt=0;Mt<4;Mt++)x=(n=-1!==(y=h[_=pt[Mt]]).indexOf("px")?parseFloat(y):ut(this.t,_,parseFloat(y),y.replace(k,""))||0)!==i[_]?Mt<2?-i.ieOffsetX:-i.ieOffsetY:Mt<2?w-i.ieOffsetX:T-i.ieOffsetY,u[_]=(i[_]=Math.round(n-x*(0===Mt||2===Mt?1:b)))+"px"}}}var Pt,Ot,Dt,Nt,It,Bt="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Ft=E("transform"),kt=ot+"transform",zt=E("transformOrigin"),Ht=null!==E("perspective"),Ut=it.Transform=function(){this.perspective=parseFloat(U.defaultTransformPerspective)||0,this.force3D=!(!1===U.defaultForce3D||!Ht)&&(U.defaultForce3D||"auto")},Gt=_gsScope.SVGElement,jt=tt.documentElement||{},Vt=(It=P||/Android/i.test(rt)&&!_gsScope.chrome,tt.createElementNS&&!It&&(Ot=Lt("svg",jt),Nt=(Dt=Lt("rect",Ot,{width:100,height:50,x:100})).getBoundingClientRect().width,Dt.style[zt]="50% 50%",Dt.style[Ft]="scaleX(0.5)",It=Nt===Dt.getBoundingClientRect().width&&!(F&&Ht),jt.removeChild(Ot)),It),Wt=function(t){var e,n=s("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,r=this.nextSibling,a=this.style.cssText;if(jt.appendChild(n),n.appendChild(this),this.style.display="block",t)try{e=this.getBBox(),this._originalGetBBox=this.getBBox,this.getBBox=Wt}catch(t){}else this._originalGetBBox&&(e=this._originalGetBBox());return r?i.insertBefore(this,r):i.appendChild(this),jt.removeChild(n),this.style.cssText=a,e},qt=function(t){return!(!Gt||!t.getCTM||t.parentNode&&!t.ownerSVGElement||!function(e){try{return e.getBBox()}catch(t){return Wt.call(e,!0)}}(t))},Xt=[1,0,0,1,0,0],Yt=function(t,e){var n,i,r,a,o,s,l,c=t._gsTransform||new Ut,u=t.style;if(Ft?i=ct(t,kt,null,!0):t.currentStyle&&(i=(i=t.currentStyle.filter.match(X))&&4===i.length?[i[0].substr(4),Number(i[2].substr(4)),Number(i[1].substr(4)),i[3].substr(4),c.x||0,c.y||0].join(","):""),n=!i||"none"===i||"matrix(1, 0, 0, 1, 0, 0)"===i,Ft&&n&&!t.offsetParent&&(a=u.display,u.display="block",(l=t.parentNode)&&t.offsetParent||(o=1,s=t.nextSibling,jt.appendChild(t)),n=!(i=ct(t,kt,null,!0))||"none"===i||"matrix(1, 0, 0, 1, 0, 0)"===i,a?u.display=a:Kt(u,"display"),o&&(s?l.insertBefore(t,s):l?l.appendChild(t):jt.removeChild(t))),(c.svg||t.getCTM&&qt(t))&&(n&&-1!==(u[Ft]+"").indexOf("matrix")&&(i=u[Ft],n=0),r=t.getAttribute("transform"),n&&r&&(i="matrix("+(r=t.transform.baseVal.consolidate().matrix).a+","+r.b+","+r.c+","+r.d+","+r.e+","+r.f+")",n=0)),n)return Xt;for(r=(i||"").match(N)||[],Mt=r.length;-1<--Mt;)a=Number(r[Mt]),r[Mt]=(o=a-(a|=0))?(1e5*o+(o<0?-.5:.5)|0)/1e5+a:a;return e&&6<r.length?[r[0],r[1],r[4],r[5],r[12],r[13]]:r},Zt=it.getTransform=function(t,e,n,i){if(t._gsTransform&&n&&!i)return t._gsTransform;var r,a,o,s,l,c,u,h,d,p,f,m,g,v,y,_,x,b,w,T,M,S,E,A,L,C,R,P,O,D,N,I,B=n&&t._gsTransform||new Ut,F=B.scaleX<0,k=Ht&&(parseFloat(ct(t,zt,e,!1,"0 0 0").split(" ")[2])||B.zOrigin)||0,z=parseFloat(U.defaultTransformPerspective)||0;if(B.svg=!(!t.getCTM||!qt(t)),B.svg&&(Ct(t,ct(t,zt,e,!1,"50% 50%")+"",B,t.getAttribute("data-svg-origin")),Pt=U.useSVGTransformAttr||Vt),(r=Yt(t))!==Xt)for(a in 16===r.length?(m=r[0],g=r[1],v=r[2],y=r[3],_=r[4],x=r[5],b=r[6],w=r[7],T=r[8],M=r[9],S=r[10],E=r[12],A=r[13],L=r[14],C=r[11],R=Math.atan2(b,S),B.zOrigin&&(E=T*(L=-B.zOrigin)-r[12],A=M*L-r[13],L=S*L+B.zOrigin-r[14]),B.rotationX=R*$,R&&(u=_*(p=Math.cos(-R))+T*(f=Math.sin(-R)),h=x*p+M*f,d=b*p+S*f,T=_*-f+T*p,M=x*-f+M*p,S=b*-f+S*p,C=w*-f+C*p,_=u,x=h,b=d),R=Math.atan2(-v,S),B.rotationY=R*$,R&&(h=g*(p=Math.cos(-R))-M*(f=Math.sin(-R)),d=v*p-S*f,M=g*f+M*p,S=v*f+S*p,C=y*f+C*p,m=u=m*p-T*f,g=h,v=d),R=Math.atan2(g,m),B.rotation=R*$,R&&(u=m*(p=Math.cos(R))+g*(f=Math.sin(R)),h=_*p+x*f,d=T*p+M*f,g=g*p-m*f,x=x*p-_*f,M=M*p-T*f,m=u,_=h,T=d),B.rotationX&&359.9<Math.abs(B.rotationX)+Math.abs(B.rotation)&&(B.rotationX=B.rotation=0,B.rotationY=180-B.rotationY),R=Math.atan2(_,x),B.scaleX=(1e5*Math.sqrt(m*m+g*g+v*v)+.5|0)/1e5,B.scaleY=(1e5*Math.sqrt(x*x+b*b)+.5|0)/1e5,B.scaleZ=(1e5*Math.sqrt(T*T+M*M+S*S)+.5|0)/1e5,m/=B.scaleX,_/=B.scaleY,g/=B.scaleX,x/=B.scaleY,2e-5<Math.abs(R)?(B.skewX=R*$,_=0,"simple"!==B.skewType&&(B.scaleY*=1/Math.cos(R))):B.skewX=0,B.perspective=C?1/(C<0?-C:C):0,B.x=E,B.y=A,B.z=L,B.svg&&(B.x-=B.xOrigin-(B.xOrigin*m-B.yOrigin*_),B.y-=B.yOrigin-(B.yOrigin*g-B.xOrigin*x))):Ht&&!i&&r.length&&B.x===r[4]&&B.y===r[5]&&(B.rotationX||B.rotationY)||(O=(P=6<=r.length)?r[0]:1,D=r[1]||0,N=r[2]||0,I=P?r[3]:1,B.x=r[4]||0,B.y=r[5]||0,o=Math.sqrt(O*O+D*D),s=Math.sqrt(I*I+N*N),l=O||D?Math.atan2(D,O)*$:B.rotation||0,c=N||I?Math.atan2(N,I)*$+l:B.skewX||0,B.scaleX=o,B.scaleY=s,B.rotation=l,B.skewX=c,Ht&&(B.rotationX=B.rotationY=B.z=0,B.perspective=z,B.scaleZ=1),B.svg&&(B.x-=B.xOrigin-(B.xOrigin*O+B.yOrigin*N),B.y-=B.yOrigin-(B.xOrigin*D+B.yOrigin*I))),90<Math.abs(B.skewX)&&Math.abs(B.skewX)<270&&(F?(B.scaleX*=-1,B.skewX+=B.rotation<=0?180:-180,B.rotation+=B.rotation<=0?180:-180):(B.scaleY*=-1,B.skewX+=B.skewX<=0?180:-180)),B.zOrigin=k,B)B[a]<2e-5&&-2e-5<B[a]&&(B[a]=0);return n&&((t._gsTransform=B).svg&&(Pt&&t.style[Ft]?H.delayedCall(.001,function(){Kt(t.style,Ft)}):!Pt&&t.getAttribute("transform")&&H.delayedCall(.001,function(){t.removeAttribute("transform")}))),B},Jt=it.set3DTransformRatio=it.setTransformRatio=function(t){var e,n,i,r,a,o,s,l,c,u,h,d,p,f,m,g,v,y,_,x,b=this.data,w=this.t.style,T=b.rotation,M=b.rotationX,S=b.rotationY,E=b.scaleX,A=b.scaleY,L=b.scaleZ,C=b.x,R=b.y,P=b.z,O=b.svg,D=b.perspective,N=b.force3D,I=b.skewY,B=b.skewX;if(I&&(B+=I,T+=I),!((1!==t&&0!==t||"auto"!==N||this.tween._totalTime!==this.tween._totalDuration&&this.tween._totalTime)&&N||P||D||S||M||1!==L)||Pt&&O||!Ht)T||B||O?(T*=Q,x=B*Q,n=Math.cos(T)*E,a=Math.sin(T)*E,i=Math.sin(T-x)*-A,o=Math.cos(T-x)*A,x&&"simple"===b.skewType&&(e=Math.tan(x-I*Q),i*=e=Math.sqrt(1+e*e),o*=e,I&&(e=Math.tan(I*Q),n*=e=Math.sqrt(1+e*e),a*=e)),O&&(C+=b.xOrigin-(b.xOrigin*n+b.yOrigin*i)+b.xOffset,R+=b.yOrigin-(b.xOrigin*a+b.yOrigin*o)+b.yOffset,Pt&&(b.xPercent||b.yPercent)&&(m=this.t.getBBox(),C+=.01*b.xPercent*m.width,R+=.01*b.yPercent*m.height),C<(m=1e-6)&&-m<C&&(C=0),R<m&&-m<R&&(R=0)),_=(1e5*n|0)/1e5+","+(1e5*a|0)/1e5+","+(1e5*i|0)/1e5+","+(1e5*o|0)/1e5+","+C+","+R+")",O&&Pt?this.t.setAttribute("transform","matrix("+_):w[Ft]=(b.xPercent||b.yPercent?"translate("+b.xPercent+"%,"+b.yPercent+"%) matrix(":"matrix(")+_):w[Ft]=(b.xPercent||b.yPercent?"translate("+b.xPercent+"%,"+b.yPercent+"%) matrix(":"matrix(")+E+",0,0,"+A+","+C+","+R+")";else{if(F&&(E<(m=1e-4)&&-m<E&&(E=L=2e-5),A<m&&-m<A&&(A=L=2e-5),!D||b.z||b.rotationX||b.rotationY||(D=0)),T||B)T*=Q,g=n=Math.cos(T),v=a=Math.sin(T),B&&(T-=B*Q,g=Math.cos(T),v=Math.sin(T),"simple"===b.skewType&&(e=Math.tan((B-I)*Q),g*=e=Math.sqrt(1+e*e),v*=e,b.skewY&&(e=Math.tan(I*Q),n*=e=Math.sqrt(1+e*e),a*=e))),i=-v,o=g;else{if(!(S||M||1!==L||D||O))return void(w[Ft]=(b.xPercent||b.yPercent?"translate("+b.xPercent+"%,"+b.yPercent+"%) translate3d(":"translate3d(")+C+"px,"+R+"px,"+P+"px)"+(1!==E||1!==A?" scale("+E+","+A+")":""));n=o=1,i=a=0}u=1,r=s=l=c=h=d=0,p=D?-1/D:0,f=b.zOrigin,m=1e-6,(T=S*Q)&&(g=Math.cos(T),h=p*(l=-(v=Math.sin(T))),r=n*v,s=a*v,p*=u=g,n*=g,a*=g),(T=M*Q)&&(e=i*(g=Math.cos(T))+r*(v=Math.sin(T)),y=o*g+s*v,c=u*v,d=p*v,r=i*-v+r*g,s=o*-v+s*g,u*=g,p*=g,i=e,o=y),1!==L&&(r*=L,s*=L,u*=L,p*=L),1!==A&&(i*=A,o*=A,c*=A,d*=A),1!==E&&(n*=E,a*=E,l*=E,h*=E),(f||O)&&(f&&(C+=r*-f,R+=s*-f,P+=u*-f+f),O&&(C+=b.xOrigin-(b.xOrigin*n+b.yOrigin*i)+b.xOffset,R+=b.yOrigin-(b.xOrigin*a+b.yOrigin*o)+b.yOffset),C<m&&-m<C&&(C="0"),R<m&&-m<R&&(R="0"),P<m&&-m<P&&(P=0)),_=b.xPercent||b.yPercent?"translate("+b.xPercent+"%,"+b.yPercent+"%) matrix3d(":"matrix3d(",_+=(n<m&&-m<n?"0":n)+","+(a<m&&-m<a?"0":a)+","+(l<m&&-m<l?"0":l),_+=","+(h<m&&-m<h?"0":h)+","+(i<m&&-m<i?"0":i)+","+(o<m&&-m<o?"0":o),M||S||1!==L?(_+=","+(c<m&&-m<c?"0":c)+","+(d<m&&-m<d?"0":d)+","+(r<m&&-m<r?"0":r),_+=","+(s<m&&-m<s?"0":s)+","+(u<m&&-m<u?"0":u)+","+(p<m&&-m<p?"0":p)+","):_+=",0,0,0,0,1,0,",_+=C+","+R+","+P+","+(D?1+-P/D:1)+")",w[Ft]=_}};(t=Ut.prototype).x=t.y=t.z=t.skewX=t.skewY=t.rotation=t.rotationX=t.rotationY=t.zOrigin=t.xPercent=t.yPercent=t.xOffset=t.yOffset=0,t.scaleX=t.scaleY=t.scaleZ=1,Et("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(t,e,n,i,r,a,o){if(i._lastParsedTransform===o)return r;var s=(i._lastParsedTransform=o).scale&&"function"==typeof o.scale?o.scale:0;s&&(o.scale=s(D,t));var l,c,u,h,d,p,f,m,g,v=t._gsTransform,y=t.style,_=Bt.length,x=o,b={},w="transformOrigin",T=Zt(t,S,!0,x.parseTransform),M=x.transform&&("function"==typeof x.transform?x.transform(D,O):x.transform);if(T.skewType=x.skewType||T.skewType||U.defaultSkewType,i._transform=T,"rotationZ"in x&&(x.rotation=x.rotationZ),M&&"string"==typeof M&&Ft)(c=et.style)[Ft]=M,c.display="block",c.position="absolute",-1!==M.indexOf("%")&&(c.width=ct(t,"width"),c.height=ct(t,"height")),tt.body.appendChild(et),l=Zt(et,null,!1),"simple"===T.skewType&&(l.scaleY*=Math.cos(l.skewX*Q)),T.svg&&(p=T.xOrigin,f=T.yOrigin,l.x-=T.xOffset,l.y-=T.yOffset,(x.transformOrigin||x.svgOrigin)&&(M={},Ct(t,ft(x.transformOrigin),M,x.svgOrigin,x.smoothOrigin,!0),p=M.xOrigin,f=M.yOrigin,l.x-=M.xOffset-T.xOffset,l.y-=M.yOffset-T.yOffset),(p||f)&&(m=Yt(et,!0),l.x-=p-(p*m[0]+f*m[2]),l.y-=f-(p*m[1]+f*m[3]))),tt.body.removeChild(et),l.perspective||(l.perspective=T.perspective),null!=x.xPercent&&(l.xPercent=L(x.xPercent,T.xPercent)),null!=x.yPercent&&(l.yPercent=L(x.yPercent,T.yPercent));else if("object"==typeof x){if(l={scaleX:L(null!=x.scaleX?x.scaleX:x.scale,T.scaleX),scaleY:L(null!=x.scaleY?x.scaleY:x.scale,T.scaleY),scaleZ:L(x.scaleZ,T.scaleZ),x:L(x.x,T.x),y:L(x.y,T.y),z:L(x.z,T.z),xPercent:L(x.xPercent,T.xPercent),yPercent:L(x.yPercent,T.yPercent),perspective:L(x.transformPerspective,T.perspective)},null!=(d=x.directionalRotation))if("object"==typeof d)for(c in d)x[c]=d[c];else x.rotation=d;"string"==typeof x.x&&-1!==x.x.indexOf("%")&&(l.x=0,l.xPercent=L(x.x,T.xPercent)),"string"==typeof x.y&&-1!==x.y.indexOf("%")&&(l.y=0,l.yPercent=L(x.y,T.yPercent)),l.rotation=C("rotation"in x?x.rotation:"shortRotation"in x?x.shortRotation+"_short":T.rotation,T.rotation,"rotation",b),Ht&&(l.rotationX=C("rotationX"in x?x.rotationX:"shortRotationX"in x?x.shortRotationX+"_short":T.rotationX||0,T.rotationX,"rotationX",b),l.rotationY=C("rotationY"in x?x.rotationY:"shortRotationY"in x?x.shortRotationY+"_short":T.rotationY||0,T.rotationY,"rotationY",b)),l.skewX=C(x.skewX,T.skewX),l.skewY=C(x.skewY,T.skewY)}for(Ht&&null!=x.force3D&&(T.force3D=x.force3D,h=!0),(u=T.force3D||T.z||T.rotationX||T.rotationY||l.z||l.rotationX||l.rotationY||l.perspective)||null==x.scale||(l.scaleZ=1);-1<--_;)(1e-6<(M=l[g=Bt[_]]-T[g])||M<-1e-6||null!=x[g]||null!=K[g])&&(h=!0,r=new wt(T,g,T[g],M,r),g in b&&(r.e=b[g]),r.xs0=0,r.plugin=a,i._overwriteProps.push(r.n));return M="function"==typeof x.transformOrigin?x.transformOrigin(D,O):x.transformOrigin,T.svg&&(M||x.svgOrigin)&&(p=T.xOffset,f=T.yOffset,Ct(t,ft(M),l,x.svgOrigin,x.smoothOrigin),r=xt(T,"xOrigin",(v?T:l).xOrigin,l.xOrigin,r,w),r=xt(T,"yOrigin",(v?T:l).yOrigin,l.yOrigin,r,w),p===T.xOffset&&f===T.yOffset||(r=xt(T,"xOffset",v?p:T.xOffset,T.xOffset,r,w),r=xt(T,"yOffset",v?f:T.yOffset,T.yOffset,r,w)),M="0px 0px"),(M||Ht&&u&&T.zOrigin)&&(Ft?(h=!0,g=zt,M||(M=(M=(ct(t,g,S,!1,"50% 50%")+"").split(" "))[0]+" "+M[1]+" "+T.zOrigin+"px"),M+="",(r=new wt(y,g,0,0,r,-1,w)).b=y[g],r.plugin=a,Ht?(c=T.zOrigin,M=M.split(" "),T.zOrigin=(2<M.length?parseFloat(M[2]):c)||0,r.xs0=r.e=M[0]+" "+(M[1]||"50%")+" 0px",(r=new wt(T,"zOrigin",0,0,r,-1,r.n)).b=c,r.xs0=r.e=T.zOrigin):r.xs0=r.e=M):ft(M+"",T)),h&&(i._transformType=T.svg&&Pt||!u&&3!==this._transformType?2:3),s&&(o.scale=s),r},allowFunc:!0,prefix:!0}),Et("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),Et("clipPath",{defaultValue:"inset(0px)",prefix:!0,multi:!0,formatter:yt("inset(0px 0px 0px 0px)",!1,!0)}),Et("borderRadius",{defaultValue:"0px",parser:function(t,e,n,i,r,a){e=this.format(e);for(var o,s,l,c,u,h,d,p,f,m,g,v,y=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],_=t.style,x=parseFloat(t.offsetWidth),b=parseFloat(t.offsetHeight),w=e.split(" "),T=0;T<y.length;T++)this.p.indexOf("border")&&(y[T]=E(y[T])),-1!==(l=s=ct(t,y[T],S,!1,"0px")).indexOf(" ")&&(l=(s=l.split(" "))[0],s=s[1]),c=o=w[T],u=parseFloat(l),p=l.substr((u+"").length),""===(d=(f="="===c.charAt(1))?(h=parseInt(c.charAt(0)+"1",10),c=c.substr(2),h*=parseFloat(c),c.substr((h+"").length-(h<0?1:0))||""):(h=parseFloat(c),c.substr((h+"").length)))&&(d=M[n]||p),d!==p&&(m=ut(t,"borderLeft",u,p),g=ut(t,"borderTop",u,p),s="%"===d?(l=m/x*100+"%",g/b*100+"%"):"em"===d?(l=m/(v=ut(t,"borderLeft",1,"em"))+"em",g/v+"em"):(l=m+"px",g+"px"),f&&(c=parseFloat(l)+h+d,o=parseFloat(s)+h+d)),r=Tt(_,y[T],l+" "+s,c+" "+o,!1,"0px",r);return r},prefix:!0,formatter:yt("0px 0px 0px 0px",!1,!0)}),Et("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(t,e,n,i,r,a){return Tt(t.style,n,this.format(ct(t,n,S,!1,"0px 0px")),this.format(e),!1,"0px",r)},prefix:!0,formatter:yt("0px 0px",!1,!0)}),Et("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,n,i,r,a){var o,s,l,c,u,h,d="background-position",p=S||y(t),f=this.format((p?P?p.getPropertyValue(d+"-x")+" "+p.getPropertyValue(d+"-y"):p.getPropertyValue(d):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),m=this.format(e);if(-1!==f.indexOf("%")!=(-1!==m.indexOf("%"))&&m.split(",").length<2&&((h=ct(t,"backgroundImage").replace(W,""))&&"none"!==h)){for(o=f.split(" "),s=m.split(" "),nt.setAttribute("src",h),l=2;-1<--l;)(c=-1!==(f=o[l]).indexOf("%"))!=(-1!==s[l].indexOf("%"))&&(u=0===l?t.offsetWidth-nt.width:t.offsetHeight-nt.height,o[l]=c?parseFloat(f)/100*u+"px":parseFloat(f)/u*100+"%");f=o.join(" ")}return this.parseComplex(t.style,f,m,r,a)},formatter:ft}),Et("backgroundSize",{defaultValue:"0 0",formatter:function(t){return"co"===(t+="").substr(0,2)?t:ft(-1===t.indexOf(" ")?t+" "+t:t)}}),Et("perspective",{defaultValue:"0px",prefix:!0}),Et("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),Et("transformStyle",{prefix:!0}),Et("backfaceVisibility",{prefix:!0}),Et("userSelect",{prefix:!0}),Et("margin",{parser:_t("marginTop,marginRight,marginBottom,marginLeft")}),Et("padding",{parser:_t("paddingTop,paddingRight,paddingBottom,paddingLeft")}),Et("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,n,i,r,a){var o,s,l;return e=P<9?(s=t.currentStyle,l=P<8?" ":",",o="rect("+s.clipTop+l+s.clipRight+l+s.clipBottom+l+s.clipLeft+")",this.format(e).split(",").join(l)):(o=this.format(ct(t,this.p,S,!1,this.dflt)),this.format(e)),this.parseComplex(t.style,o,e,r,a)}}),Et("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),Et("autoRound,strictUnits",{parser:function(t,e,n,i,r){return r}}),Et("border",{defaultValue:"0px solid #000",parser:function(t,e,n,i,r,a){var o=ct(t,"borderTopWidth",S,!1,"0px"),s=this.format(e).split(" "),l=s[0].replace(k,"");return"px"!==l&&(o=parseFloat(o)/ut(t,"borderTopWidth",1,l)+l),this.parseComplex(t.style,this.format(o+" "+ct(t,"borderTopStyle",S,!1,"solid")+" "+ct(t,"borderTopColor",S,!1,"#000")),s.join(" "),r,a)},color:!0,formatter:function(t){var e=t.split(" ");return e[0]+" "+(e[1]||"solid")+" "+(t.match(vt)||["#000"])[0]}}),Et("borderWidth",{parser:_t("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),Et("float,cssFloat,styleFloat",{parser:function(t,e,n,i,r,a){var o=t.style,s="cssFloat"in o?"cssFloat":"styleFloat";return new wt(o,s,0,0,r,-1,n,!1,0,o[s],e)}});function Qt(t){var e,n=this.t,i=n.filter||ct(this.data,"filter")||"",r=this.s+this.c*t|0;100==r&&(e=-1===i.indexOf("atrix(")&&-1===i.indexOf("radient(")&&-1===i.indexOf("oader(")?(n.removeAttribute("filter"),!ct(this.data,"filter")):(n.filter=i.replace(h,""),!0)),e||(this.xn1&&(n.filter=i=i||"alpha(opacity="+r+")"),-1===i.indexOf("pacity")?0==r&&this.xn1||(n.filter=i+" alpha(opacity="+r+")"):n.filter=i.replace(z,"opacity="+r))}Et("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,n,i,r,a){var o=parseFloat(ct(t,"opacity",S,!1,"1")),s=t.style,l="autoAlpha"===n;return"string"==typeof e&&"="===e.charAt(1)&&(e=("-"===e.charAt(0)?-1:1)*parseFloat(e.substr(2))+o),l&&1===o&&"hidden"===ct(t,"visibility",S)&&0!==e&&(o=0),at?r=new wt(s,"opacity",o,e-o,r):((r=new wt(s,"opacity",100*o,100*(e-o),r)).xn1=l?1:0,s.zoom=1,r.type=2,r.b="alpha(opacity="+r.s+")",r.e="alpha(opacity="+(r.s+r.c)+")",r.data=t,r.plugin=a,r.setRatio=Qt),l&&((r=new wt(s,"visibility",0,0,r,-1,null,!1,0,0!==o?"inherit":"hidden",0===e?"hidden":"inherit")).xs0="inherit",i._overwriteProps.push(r.n),i._overwriteProps.push(n)),r}});function $t(t){if(this.t._gsClassPT=this,1===t||0===t){this.t.setAttribute("class",0===t?this.b:this.e);for(var e=this.data,n=this.t.style;e;)e.v?n[e.p]=e.v:Kt(n,e.p),e=e._next;1===t&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)}var Kt=function(t,e){e&&(t.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),t.removeProperty(e.replace(d,"-$1").toLowerCase())):t.removeAttribute(e))};Et("className",{parser:function(t,e,n,i,r,a,o){var s,l,c,u,h,d=t.getAttribute("class")||"",p=t.style.cssText;if((r=i._classNamePT=new wt(t,n,0,0,r,2)).setRatio=$t,r.pr=-11,f=!0,r.b=d,l=_(t,S),c=t._gsClassPT){for(u={},h=c.data;h;)u[h.p]=1,h=h._next;c.setRatio(1)}return(t._gsClassPT=r).e="="!==e.charAt(1)?e:d.replace(new RegExp("(?:\\s|^)"+e.substr(2)+"(?![\\w-])"),"")+("+"===e.charAt(0)?" "+e.substr(2):""),t.setAttribute("class",r.e),s=x(t,l,_(t),o,u),t.setAttribute("class",d),r.data=s.firstMPT,t.style.cssText=p,r.xfirst=i.parse(t,s.difs,r,a)}});function te(t){if((1===t||0===t)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var e,n,i,r,a,o=this.t.style,s=g.transform.parse;if("all"===this.e)r=!(o.cssText="");else for(i=(e=this.e.split(" ").join("").split(",")).length;-1<--i;)n=e[i],g[n]&&(g[n].parse===s?r=!0:n="transformOrigin"===n?zt:g[n].p),Kt(o,n);r&&(Kt(o,Ft),(a=this.t._gsTransform)&&(a.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}}for(Et("clearProps",{parser:function(t,e,n,i,r){return(r=new wt(t,n,0,0,r,2)).setRatio=te,r.e=e,r.pr=-10,r.data=i._tween,f=!0,r}}),t="bezier,throwProps,physicsProps,physics2D".split(","),Mt=t.length;Mt--;)At(t[Mt]);(t=U.prototype)._firstPT=t._lastParsedTransform=t._transform=null,t._onInitTween=function(t,e,n,i){if(!t.nodeType)return!1;this._target=O=t,this._tween=n,this._vars=e,D=i,R=e.autoRound,f=!1,M=e.suffixMap||U.suffixMap,S=y(t),m=this._overwriteProps;var r,a,o,s,l,c,u,h,d,p=t.style;if(b&&""===p.zIndex&&("auto"!==(r=ct(t,"zIndex",S))&&""!==r||this._addLazySet(p,"zIndex",0)),"string"==typeof e&&(s=p.cssText,r=_(t,S),p.cssText=s+";"+e,r=x(t,r,_(t)).difs,!at&&G.test(e)&&(r.opacity=parseFloat(RegExp.$1)),e=r,p.cssText=s),e.className?this._firstPT=a=g.className.parse(t,e.className,"className",this,null,null,e):this._firstPT=a=this.parse(t,e,null),this._transformType){for(d=3===this._transformType,Ft?w&&(b=!0,""===p.zIndex&&("auto"!==(u=ct(t,"zIndex",S))&&""!==u||this._addLazySet(p,"zIndex",0)),T&&this._addLazySet(p,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(d?"visible":"hidden"))):p.zoom=1,o=a;o&&o._next;)o=o._next;h=new wt(t,"transform",0,0,null,2),this._linkCSSP(h,null,o),h.setRatio=Ft?Jt:Rt,h.data=this._transform||Zt(t,S,!0),h.tween=n,h.pr=-1,m.pop()}if(f){for(;a;){for(c=a._next,o=s;o&&o.pr>a.pr;)o=o._next;(a._prev=o?o._prev:l)?a._prev._next=a:s=a,(a._next=o)?o._prev=a:l=a,a=c}this._firstPT=s}return!0},t.parse=function(t,e,n,i){var r,a,o,s,l,c,u,h,d,p,f=t.style;for(r in e){if(c=e[r],a=g[r],"function"!=typeof c||a&&a.allowFunc||(c=c(D,O)),a)n=a.parse(t,c,r,this,n,i,e);else{if("--"===r.substr(0,2)){this._tween._propLookup[r]=this._addTween.call(this._tween,t.style,"setProperty",y(t).getPropertyValue(r)+"",c+"",r,!1,r);continue}l=ct(t,r,S)+"",d="string"==typeof c,"color"===r||"fill"===r||"stroke"===r||-1!==r.indexOf("Color")||d&&j.test(c)?(d||(c=(3<(c=gt(c)).length?"rgba(":"rgb(")+c.join(",")+")"),n=Tt(f,r,l,c,!0,"transparent",n,0,i)):d&&J.test(c)?n=Tt(f,r,l,c,!0,null,n,0,i):(u=(o=parseFloat(l))||0===o?l.substr((o+"").length):"",""!==l&&"auto"!==l||(u="width"===r||"height"===r?(o=function(t,e,n){if("svg"===(t.nodeName+"").toLowerCase())return(n||y(t))[e]||0;if(t.getCTM&&qt(t))return t.getBBox()[e]||0;var i=parseFloat("width"===e?t.offsetWidth:t.offsetHeight),r=dt[e],a=r.length;for(n=n||y(t);-1<--a;)i-=parseFloat(ct(t,"padding"+r[a],n,!0))||0,i-=parseFloat(ct(t,"border"+r[a]+"Width",n,!0))||0;return i}(t,r,S),"px"):"left"===r||"top"===r?(o=ht(t,r,S),"px"):(o="opacity"!==r?0:1,"")),""===(h=(p=d&&"="===c.charAt(1))?(s=parseInt(c.charAt(0)+"1",10),c=c.substr(2),s*=parseFloat(c),c.replace(k,"")):(s=parseFloat(c),d?c.replace(k,""):""))&&(h=r in M?M[r]:u),c=s||0===s?(p?s+o:s)+h:e[r],u===h||""===h&&"lineHeight"!==r||!s&&0!==s||!o||(o=ut(t,r,o,u),"%"===h?(o/=ut(t,r,100,"%")/100,!0!==e.strictUnits&&(l=o+"%")):"em"===h||"rem"===h||"vw"===h||"vh"===h?o/=ut(t,r,1,h):"px"!==h&&(s=ut(t,r,s,h),h="px"),p&&(s||0===s)&&(c=s+o+h)),p&&(s+=o),!o&&0!==o||!s&&0!==s?void 0!==f[r]&&(c||c+""!="NaN"&&null!=c)?(n=new wt(f,r,s||o||0,0,n,-1,r,!1,0,l,c)).xs0="none"!==c||"display"!==r&&-1===r.indexOf("Style")?c:l:v("invalid "+r+" tween value: "+e[r]):(n=new wt(f,r,o,s-o,n,0,r,!1!==R&&("px"===h||"zIndex"===r),0,l,c)).xs0=h)}i&&n&&!n.plugin&&(n.plugin=i)}return n},t.setRatio=function(t){var e,n,i,r=this._firstPT;if(1!==t||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(t||this._tween._time!==this._tween._duration&&0!==this._tween._time||-1e-6===this._tween._rawPrevTime)for(;r;){if(e=r.c*t+r.s,r.r?e=r.r(e):e<1e-6&&-1e-6<e&&(e=0),r.type)if(1===r.type)if(2===(i=r.l))r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2;else if(3===i)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3;else if(4===i)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4;else if(5===i)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4+r.xn4+r.xs5;else{for(n=r.xs0+e+r.xs1,i=1;i<r.l;i++)n+=r["xn"+i]+r["xs"+(i+1)];r.t[r.p]=n}else-1===r.type?r.t[r.p]=r.xs0:r.setRatio&&r.setRatio(t);else r.t[r.p]=e+r.xs0;r=r._next}else for(;r;)2!==r.type?r.t[r.p]=r.b:r.setRatio(t),r=r._next;else for(;r;){if(2!==r.type)if(r.r&&-1!==r.type)if(e=r.r(r.s+r.c),r.type){if(1===r.type){for(i=r.l,n=r.xs0+e+r.xs1,i=1;i<r.l;i++)n+=r["xn"+i]+r["xs"+(i+1)];r.t[r.p]=n}}else r.t[r.p]=e+r.xs0;else r.t[r.p]=r.e;else r.setRatio(t);r=r._next}},t._enableTransforms=function(t){this._transform=this._transform||Zt(this._target,S,!0),this._transformType=this._transform.svg&&Pt||!t&&3!==this._transformType?2:3};function ee(t){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)}t._addLazySet=function(t,e,n){var i=this._firstPT=new wt(t,e,0,0,this._firstPT,2);i.e=n,i.setRatio=ee,i.data=this},t._linkCSSP=function(t,e,n,i){return t&&(e&&(e._prev=t),t._next&&(t._next._prev=t._prev),t._prev?t._prev._next=t._next:this._firstPT===t&&(this._firstPT=t._next,i=!0),n?n._next=t:i||null!==this._firstPT||(this._firstPT=t),t._next=e,t._prev=n),t},t._mod=function(t){for(var e=this._firstPT;e;)"function"==typeof t[e.p]&&(e.r=t[e.p]),e=e._next},t._kill=function(t){var e,n,i,r=t;if(t.autoAlpha||t.alpha){for(n in r={},t)r[n]=t[n];r.opacity=1,r.autoAlpha&&(r.visibility=1)}for(t.className&&(e=this._classNamePT)&&((i=e.xfirst)&&i._prev?this._linkCSSP(i._prev,e._next,i._prev._prev):i===this._firstPT&&(this._firstPT=e._next),e._next&&this._linkCSSP(e._next,e._next._next,i._prev),this._classNamePT=null),e=this._firstPT;e;)e.plugin&&e.plugin!==n&&e.plugin._kill&&(e.plugin._kill(t),n=e.plugin),e=e._next;return a.prototype._kill.call(this,r)};var ne=function(t,e,n){var i,r,a,o;if(t.slice)for(r=t.length;-1<--r;)ne(t[r],e,n);else for(r=(i=t.childNodes).length;-1<--r;)o=(a=i[r]).type,a.style&&(e.push(_(a)),n&&n.push(a)),1!==o&&9!==o&&11!==o||!a.childNodes.length||ne(a,e,n)};return U.cascadeTo=function(t,e,n){var i,r,a,o,s=H.to(t,e,n),l=[s],c=[],u=[],h=[],d=H._internals.reservedProps;for(t=s._targets||s.target,ne(t,c,h),s.render(e,!0,!0),ne(t,u),s.render(0,!0,!0),s._enabled(!0),i=h.length;-1<--i;)if((r=x(h[i],c[i],u[i])).firstMPT){for(a in r=r.difs,n)d[a]&&(r[a]=n[a]);for(a in o={},r)o[a]=c[i][a];l.push(H.fromTo(h[i],e,o,r))}return l},a.activate([U]),U},!0),t=_gsScope._gsDefine.plugin({propName:"roundProps",version:"1.7.0",priority:-1,API:2,init:function(t,e,n){return this._tween=n,!0}}),(e=t.prototype)._onInitAllProps=function(){var t,e,n,i,r=this._tween,a=r.vars.roundProps,o={},s=r._propLookup.roundProps;if("object"!=typeof a||a.push)for("string"==typeof a&&(a=a.split(",")),n=a.length;-1<--n;)o[a[n]]=Math.round;else for(i in a)o[i]=function(e){var n=e<1?Math.pow(10,(e+"").length-2):1;return function(t){return(Math.round(t/e)*e*n|0)/n}}(a[i]);for(i in o)for(t=r._firstPT;t;)e=t._next,t.pg?t.t._mod(o):t.n===i&&(2===t.f&&t.t?function(t,e){for(;t;)t.f||t.blob||(t.m=e||Math.round),t=t._next}(t.t._firstPT,o[i]):(this._add(t.t,i,t.s,t.c,o[i]),e&&(e._prev=t._prev),t._prev?t._prev._next=e:r._firstPT===t&&(r._firstPT=e),t._next=t._prev=null,r._propLookup[i]=s)),t=e;return!1},e._add=function(t,e,n,i,r){this._addTween(t,e,n,n+i,e,r||Math.round),this._overwriteProps.push(e)},_gsScope._gsDefine.plugin({propName:"attr",API:2,version:"0.6.1",init:function(t,e,n,i){var r,a;if("function"!=typeof t.setAttribute)return!1;for(r in e)"function"==typeof(a=e[r])&&(a=a(i,t)),this._addTween(t,"setAttribute",t.getAttribute(r)+"",a+"",r,!1,r),this._overwriteProps.push(r);return!0}}),_gsScope._gsDefine.plugin({propName:"directionalRotation",version:"0.3.1",API:2,init:function(t,e,n,i){"object"!=typeof e&&(e={rotation:e}),this.finals={};var r,a,o,s,l,c,u=!0===e.useRadians?2*Math.PI:360;for(r in e)"useRadians"!==r&&("function"==typeof(s=e[r])&&(s=s(i,t)),a=(c=(s+"").split("_"))[0],o=parseFloat("function"!=typeof t[r]?t[r]:t[r.indexOf("set")||"function"!=typeof t["get"+r.substr(3)]?r:"get"+r.substr(3)]()),l=(s=this.finals[r]="string"==typeof a&&"="===a.charAt(1)?o+parseInt(a.charAt(0)+"1",10)*Number(a.substr(2)):Number(a)||0)-o,c.length&&(-1!==(a=c.join("_")).indexOf("short")&&((l%=u)!==l%(u/2)&&(l=l<0?l+u:l-u)),-1!==a.indexOf("_cw")&&l<0?l=(l+9999999999*u)%u-(l/u|0)*u:-1!==a.indexOf("ccw")&&0<l&&(l=(l-9999999999*u)%u-(l/u|0)*u)),(1e-6<l||l<-1e-6)&&(this._addTween(t,r,o,o+l,r),this._overwriteProps.push(r)));return!0},set:function(t){var e;if(1!==t)this._super.setRatio.call(this,t);else for(e=this._firstPT;e;)e.f?e.t[e.p](this.finals[e.p]):e.t[e.p]=this.finals[e.p],e=e._next}})._autoCSS=!0,_gsScope._gsDefine("easing.Back",["easing.Ease"],function(g){function t(t,e){var n=h("easing."+t,function(){},!0),i=n.prototype=new g;return i.constructor=n,i.getRatio=e,n}function e(t,e,n,i,r){var a=h("easing."+t,{easeOut:new e,easeIn:new n,easeInOut:new i},!0);return d(a,t),a}function v(t,e,n){this.t=t,this.v=e,n&&(((this.next=n).prev=this).c=n.v-e,this.gap=n.t-t)}function n(t,e){var n=h("easing."+t,function(t){this._p1=t||0===t?t:1.70158,this._p2=1.525*this._p1},!0),i=n.prototype=new g;return i.constructor=n,i.getRatio=e,i.config=function(t){return new n(t)},n}var i,r,a,o,s=_gsScope.GreenSockGlobals||_gsScope,l=s.com.greensock,c=2*Math.PI,u=Math.PI/2,h=l._class,d=g.register||function(){},p=e("Back",n("BackOut",function(t){return--t*t*((this._p1+1)*t+this._p1)+1}),n("BackIn",function(t){return t*t*((this._p1+1)*t-this._p1)}),n("BackInOut",function(t){return(t*=2)<1?.5*t*t*((this._p2+1)*t-this._p2):.5*((t-=2)*t*((this._p2+1)*t+this._p2)+2)})),f=h("easing.SlowMo",function(t,e,n){e=e||0===e?e:.7,null==t?t=.7:1<t&&(t=1),this._p=1!==t?e:0,this._p1=(1-t)/2,this._p2=t,this._p3=this._p1+this._p2,this._calcEnd=!0===n},!0),m=f.prototype=new g;return m.constructor=f,m.getRatio=function(t){var e=t+(.5-t)*this._p;return t<this._p1?this._calcEnd?1-(t=1-t/this._p1)*t:e-(t=1-t/this._p1)*t*t*t*e:t>this._p3?this._calcEnd?1===t?0:1-(t=(t-this._p3)/this._p1)*t:e+(t-e)*(t=(t-this._p3)/this._p1)*t*t*t:this._calcEnd?1:e},f.ease=new f(.7,.7),m.config=f.config=function(t,e,n){return new f(t,e,n)},(m=(i=h("easing.SteppedEase",function(t,e){t=t||1,this._p1=1/t,this._p2=t+(e?0:1),this._p3=e?1:0},!0)).prototype=new g).constructor=i,m.getRatio=function(t){return t<0?t=0:1<=t&&(t=.999999999),((this._p2*t|0)+this._p3)*this._p1},m.config=i.config=function(t,e){return new i(t,e)},(m=(r=h("easing.ExpoScaleEase",function(t,e,n){this._p1=Math.log(e/t),this._p2=e-t,this._p3=t,this._ease=n},!0)).prototype=new g).constructor=r,m.getRatio=function(t){return this._ease&&(t=this._ease.getRatio(t)),(this._p3*Math.exp(this._p1*t)-this._p3)/this._p2},m.config=r.config=function(t,e,n){return new r(t,e,n)},(m=(a=h("easing.RoughEase",function(t){for(var e,n,i,r,a,o,s=(t=t||{}).taper||"none",l=[],c=0,u=0|(t.points||20),h=u,d=!1!==t.randomize,p=!0===t.clamp,f=t.template instanceof g?t.template:null,m="number"==typeof t.strength?.4*t.strength:.4;-1<--h;)e=d?Math.random():1/u*h,n=f?f.getRatio(e):e,i="none"===s?m:"out"===s?(r=1-e)*r*m:"in"===s?e*e*m:(r=e<.5?2*e:2*(1-e))*r*.5*m,d?n+=Math.random()*i-.5*i:h%2?n+=.5*i:n-=.5*i,p&&(1<n?n=1:n<0&&(n=0)),l[c++]={x:e,y:n};for(l.sort(function(t,e){return t.x-e.x}),o=new v(1,1,null),h=u;-1<--h;)a=l[h],o=new v(a.x,a.y,o);this._prev=new v(0,0,0!==o.t?o:o.next)},!0)).prototype=new g).constructor=a,m.getRatio=function(t){var e=this._prev;if(t>e.t){for(;e.next&&t>=e.t;)e=e.next;e=e.prev}else for(;e.prev&&t<=e.t;)e=e.prev;return(this._prev=e).v+(t-e.t)/e.gap*e.c},m.config=function(t){return new a(t)},a.ease=new a,e("Bounce",t("BounceOut",function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}),t("BounceIn",function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}),t("BounceInOut",function(t){var e=t<.5;return t=(t=e?1-2*t:2*t-1)<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5})),e("Circ",t("CircOut",function(t){return Math.sqrt(1- --t*t)}),t("CircIn",function(t){return-(Math.sqrt(1-t*t)-1)}),t("CircInOut",function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)})),e("Elastic",(o=function(t,e,n){var i=h("easing."+t,function(t,e){this._p1=1<=t?t:1,this._p2=(e||n)/(t<1?t:1),this._p3=this._p2/c*(Math.asin(1/this._p1)||0),this._p2=c/this._p2},!0),r=i.prototype=new g;return r.constructor=i,r.getRatio=e,r.config=function(t,e){return new i(t,e)},i})("ElasticOut",function(t){return this._p1*Math.pow(2,-10*t)*Math.sin((t-this._p3)*this._p2)+1},.3),o("ElasticIn",function(t){return-(this._p1*Math.pow(2,10*--t)*Math.sin((t-this._p3)*this._p2))},.3),o("ElasticInOut",function(t){return(t*=2)<1?this._p1*Math.pow(2,10*--t)*Math.sin((t-this._p3)*this._p2)*-.5:this._p1*Math.pow(2,-10*--t)*Math.sin((t-this._p3)*this._p2)*.5+1},.45)),e("Expo",t("ExpoOut",function(t){return 1-Math.pow(2,-10*t)}),t("ExpoIn",function(t){return Math.pow(2,10*(t-1))-.001}),t("ExpoInOut",function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))})),e("Sine",t("SineOut",function(t){return Math.sin(t*u)}),t("SineIn",function(t){return 1-Math.cos(t*u)}),t("SineInOut",function(t){return-.5*(Math.cos(Math.PI*t)-1)})),h("easing.EaseLookup",{find:function(t){return g.map[t]}},!0),d(s.SlowMo,"SlowMo","ease,"),d(a,"RoughEase","ease,"),d(i,"SteppedEase","ease,"),p},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(d,p){"use strict";var f={},i=d.document,m=d.GreenSockGlobals=d.GreenSockGlobals||d,t=m[p];if(t)return"undefined"!=typeof module&&module.exports&&(module.exports=t);function g(t){for(var e=t.split("."),n=m,i=0;i<e.length;i++)n[e[i]]=n=n[e[i]]||{};return n}function l(t){for(var e=[],n=t.length,i=0;i!==n;e.push(t[i++]));return e}function v(){}var y,e,n,h=g("com.greensock"),_=1e-8,x=(e=Object.prototype.toString,n=e.call([]),function(t){return null!=t&&(t instanceof Array||"object"==typeof t&&!!t.push&&e.call(t)===n)}),b={},w=function(s,l,c,u){this.sc=b[s]?b[s].sc:[],(b[s]=this).gsClass=null,this.func=c;var h=[];this.check=function(t){for(var e,n,i,r,a=l.length,o=a;-1<--a;)(e=b[l[a]]||new w(l[a],[])).gsClass?(h[a]=e.gsClass,o--):t&&e.sc.push(this);if(0===o&&c){if(i=(n=("com.greensock."+s).split(".")).pop(),r=g(n.join("."))[i]=this.gsClass=c.apply(c,h),u)if(m[i]=f[i]=r,"undefined"!=typeof module&&module.exports)if(s===p)for(a in module.exports=f[p]=r,f)r[a]=f[a];else f[p]&&(f[p][i]=r);else"function"==typeof define&&define.amd&&define((d.GreenSockAMDPath?d.GreenSockAMDPath+"/":"")+s.split(".").pop(),[],function(){return r});for(a=0;a<this.sc.length;a++)this.sc[a].check()}},this.check(!0)},r=d._gsDefine=function(t,e,n,i){return new w(t,e,n,i)},T=h._class=function(t,e,n){return e=e||function(){},r(t,[],function(){return e},n),e};r.globals=m;var a,o=[0,0,1,1],M=T("easing.Ease",function(t,e,n,i){this._func=t,this._type=n||0,this._power=i||0,this._params=e?o.concat(e):o},!0),S=M.map={},s=M.register=function(t,e,n,i){for(var r,a,o,s,l=e.split(","),c=l.length,u=(n||"easeIn,easeOut,easeInOut").split(",");-1<--c;)for(a=l[c],r=i?T("easing."+a,null,!0):h.easing[a]||{},o=u.length;-1<--o;)s=u[o],S[a+"."+s]=S[s+a]=r[s]=t.getRatio?t:t[s]||new t};for((a=M.prototype)._calcEnd=!1,a.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,n=this._power,i=1===e?1-t:2===e?t:t<.5?2*t:2*(1-t);return 1===n?i*=i:2===n?i*=i*i:3===n?i*=i*i*i:4===n&&(i*=i*i*i*i),1===e?1-i:2===e?i:t<.5?i/2:1-i/2},u=(c=["Linear","Quad","Cubic","Quart","Quint,Strong"]).length;-1<--u;)a=c[u]+",Power"+u,s(new M(null,null,1,u),a,"easeOut",!0),s(new M(null,null,2,u),a,"easeIn"+(0===u?",easeNone":"")),s(new M(null,null,3,u),a,"easeInOut");S.linear=h.easing.Linear.easeIn,S.swing=h.easing.Quad.easeInOut;var E=T("events.EventDispatcher",function(t){this._listeners={},this._eventTarget=t||this});(a=E.prototype).addEventListener=function(t,e,n,i,r){r=r||0;var a,o,s=this._listeners[t],l=0;for(this!==O||y||O.wake(),null==s&&(this._listeners[t]=s=[]),o=s.length;-1<--o;)(a=s[o]).c===e&&a.s===n?s.splice(o,1):0===l&&a.pr<r&&(l=o+1);s.splice(l,0,{c:e,s:n,up:i,pr:r})},a.removeEventListener=function(t,e){var n,i=this._listeners[t];if(i)for(n=i.length;-1<--n;)if(i[n].c===e)return void i.splice(n,1)},a.dispatchEvent=function(t){var e,n,i,r=this._listeners[t];if(r)for(1<(e=r.length)&&(r=r.slice(0)),n=this._eventTarget;-1<--e;)(i=r[e])&&(i.up?i.c.call(i.s||n,{type:t,target:n}):i.c.call(i.s||n))};for(var c,A=d.requestAnimationFrame,L=d.cancelAnimationFrame,C=Date.now||function(){return(new Date).getTime()},R=C(),u=(c=["ms","moz","webkit","o"]).length;-1<--u&&!A;)A=d[c[u]+"RequestAnimationFrame"],L=d[c[u]+"CancelAnimationFrame"]||d[c[u]+"CancelRequestAnimationFrame"];T("Ticker",function(t,e){var r,a,o,s,l,c=this,u=C(),n=!(!1===e||!A)&&"auto",h=500,d=33,p=function(t){var e,n,i=C()-R;h<i&&(u+=i-d),R+=i,c.time=(R-u)/1e3,e=c.time-l,(!r||0<e||!0===t)&&(c.frame++,l+=e+(s<=e?.004:s-e),n=!0),!0!==t&&(o=a(p)),n&&c.dispatchEvent("tick")};E.call(c),c.time=c.frame=0,c.tick=function(){p(!0)},c.lagSmoothing=function(t,e){return arguments.length?(h=t||1e8,void(d=Math.min(e,h,0))):h<1e8},c.sleep=function(){null!=o&&((n&&L?L:clearTimeout)(o),a=v,o=null,c===O&&(y=!1))},c.wake=function(t){null!==o?c.sleep():t?u+=-R+(R=C()):10<c.frame&&(R=C()-h+5),a=0===r?v:n&&A?A:function(t){return setTimeout(t,1e3*(l-c.time)+1|0)},c===O&&(y=!0),p(2)},c.fps=function(t){return arguments.length?(s=1/((r=t)||60),l=this.time+s,void c.wake()):r},c.useRAF=function(t){return arguments.length?(c.sleep(),n=t,void c.fps(r)):n},c.fps(t),setTimeout(function(){"auto"===n&&c.frame<5&&"hidden"!==(i||{}).visibilityState&&c.useRAF(!1)},1500)}),(a=h.Ticker.prototype=new h.events.EventDispatcher).constructor=h.Ticker;var P=T("core.Animation",function(t,e){var n;this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=!!e.immediateRender,this.data=e.data,this._reversed=!!e.reversed,$&&(y||O.wake(),(n=this.vars.useFrames?Q:$).add(this,n._time),this.vars.paused&&this.paused(!0))}),O=P.ticker=new h.Ticker;(a=P.prototype)._dirty=a._gc=a._initted=a._paused=!1,a._totalTime=a._time=0,a._rawPrevTime=-1,a._next=a._last=a._onUpdate=a._timeline=a.timeline=null,a._paused=!1;var D=function(){y&&2e3<C()-R&&("hidden"!==(i||{}).visibilityState||!O.lagSmoothing())&&O.wake();var t=setTimeout(D,2e3);t.unref&&t.unref()};D(),a.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},a.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},a.resume=function(t,e){return null!=t&&this.seek(t,e),this.paused(!1)},a.seek=function(t,e){return this.totalTime(Number(t),!1!==e)},a.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,!1!==e,!0)},a.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},a.render=function(t,e,n){},a.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,!this._gc&&this.timeline||this._enabled(!0),this},a.isActive=function(){var t,e=this._timeline,n=this._startTime;return!e||!this._gc&&!this._paused&&e.isActive()&&(t=e.rawTime(!0))>=n&&t<n+this.totalDuration()/this._timeScale-_},a._enabled=function(t,e){return y||O.wake(),this._gc=!t,this._active=this.isActive(),!0!==e&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},a._kill=function(t,e){return this._enabled(!1,!1)},a.kill=function(t,e){return this._kill(t,e),this},a._uncache=function(t){for(var e=t?this:this.timeline;e;)e._dirty=!0,e=e.timeline;return this},a._swapSelfInParams=function(t){for(var e=t.length,n=t.concat();-1<--e;)"{self}"===t[e]&&(n[e]=this);return n},a._callback=function(t){var e=this.vars,n=e[t],i=e[t+"Params"],r=e[t+"Scope"]||e.callbackScope||this;switch(i?i.length:0){case 0:n.call(r);break;case 1:n.call(r,i[0]);break;case 2:n.call(r,i[0],i[1]);break;default:n.apply(r,i)}},a.eventCallback=function(t,e,n,i){if("on"===(t||"").substr(0,2)){var r=this.vars;if(1===arguments.length)return r[t];null==e?delete r[t]:(r[t]=e,r[t+"Params"]=x(n)&&-1!==n.join("").indexOf("{self}")?this._swapSelfInParams(n):n,r[t+"Scope"]=i),"onUpdate"===t&&(this._onUpdate=e)}return this},a.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},a.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&0<this._time&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},a.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},a.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},a.totalTime=function(t,e,n){if(y||O.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(t<0&&!n&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var i=this._totalDuration,r=this._timeline;if(i<t&&!n&&(t=i),this._startTime=(this._paused?this._pauseTime:r._time)-(this._reversed?i-t:t)/this._timeScale,r._dirty||this._uncache(!1),r._timeline)for(;r._timeline;)r._timeline._time!==(r._startTime+r._totalTime)/r._timeScale&&r.totalTime(r._totalTime,!0),r=r._timeline}this._gc&&this._enabled(!0,!1),this._totalTime===t&&0!==this._duration||(U.length&&tt(),this.render(t,e,!1),U.length&&tt())}return this},a.progress=a.totalProgress=function(t,e){var n=this.duration();return arguments.length?this.totalTime(n*t,e):n?this._time/n:this.ratio},a.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},a.endTime=function(t){return this._startTime+(0!=t?this.totalDuration():this.duration())/this._timeScale},a.timeScale=function(t){if(!arguments.length)return this._timeScale;var e,n;for(t=t||_,this._timeline&&this._timeline.smoothChildTiming&&(n=(e=this._pauseTime)||0===e?e:this._timeline.totalTime(),this._startTime=n-(n-this._startTime)*this._timeScale/t),this._timeScale=t,n=this.timeline;n&&n.timeline;)n._dirty=!0,n.totalDuration(),n=n.timeline;return this},a.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},a.paused=function(t){if(!arguments.length)return this._paused;var e,n,i=this._timeline;return t!=this._paused&&i&&(y||t||O.wake(),n=(e=i.rawTime())-this._pauseTime,!t&&i.smoothChildTiming&&(this._startTime+=n,this._uncache(!1)),this._pauseTime=t?e:null,this._paused=t,this._active=this.isActive(),!t&&0!=n&&this._initted&&this.duration()&&(e=i.smoothChildTiming?this._totalTime:(e-this._startTime)/this._timeScale,this.render(e,e===this._totalTime,!0))),this._gc&&!t&&this._enabled(!0,!1),this};var N=T("core.SimpleTimeline",function(t){P.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0});(a=N.prototype=new P).constructor=N,a.kill()._gc=!1,a._first=a._last=a._recent=null,a._sortChildren=!1,a.add=a.insert=function(t,e,n,i){var r,a;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=this.rawTime()-(t._timeline.rawTime()-t._pauseTime)),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),r=this._last,this._sortChildren)for(a=t._startTime;r&&r._startTime>a;)r=r._prev;return r?(t._next=r._next,r._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=r,this._recent=t,this._timeline&&this._uncache(!0),this},a._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),t._next=t._prev=t.timeline=null,t===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},a.render=function(t,e,n){var i,r=this._first;for(this._totalTime=this._time=this._rawPrevTime=t;r;)i=r._next,(r._active||t>=r._startTime&&!r._paused&&!r._gc)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,n):r.render((t-r._startTime)*r._timeScale,e,n)),r=i},a.rawTime=function(){return y||O.wake(),this._totalTime};function I(t){return t&&t.length&&t!==d&&t[0]&&(t[0]===d||t[0].nodeType&&t[0].style&&!t.nodeType)}var B=T("TweenLite",function(t,e,n){if(P.call(this,e,n),this.render=B.prototype.render,null==t)throw"Cannot tween a null target.";this.target=t="string"==typeof t&&B.selector(t)||t;var i,r,a,o=t.jquery||t.length&&t!==d&&t[0]&&(t[0]===d||t[0].nodeType&&t[0].style&&!t.nodeType),s=this.vars.overwrite;if(this._overwrite=s=null==s?J[B.defaultOverwrite]:"number"==typeof s?s>>0:J[s],(o||t instanceof Array||t.push&&x(t))&&"number"!=typeof t[0])for(this._targets=a=l(t),this._propLookup=[],this._siblings=[],i=0;i<a.length;i++)(r=a[i])?"string"!=typeof r?r.length&&r!==d&&r[0]&&(r[0]===d||r[0].nodeType&&r[0].style&&!r.nodeType)?(a.splice(i--,1),this._targets=a=a.concat(l(r))):(this._siblings[i]=nt(r,this,!1),1===s&&1<this._siblings[i].length&&it(r,this,null,1,this._siblings[i])):"string"==typeof(r=a[i--]=B.selector(r))&&a.splice(i+1,1):a.splice(i--,1);else this._propLookup={},this._siblings=nt(t,this,!1),1===s&&1<this._siblings.length&&it(t,this,null,1,this._siblings);(this.vars.immediateRender||0===e&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-_,this.render(Math.min(0,-this._delay)))},!0);(a=B.prototype=new P).constructor=B,a.kill()._gc=!1,a.ratio=0,a._firstPT=a._targets=a._overwrittenProps=a._startAt=null,a._notifyPluginsOfEnabled=a._lazy=!1,B.version="2.1.2",B.defaultEase=a._ease=new M(null,null,1,1),B.defaultOverwrite="auto",B.ticker=O,B.autoSleep=120,B.lagSmoothing=function(t,e){O.lagSmoothing(t,e)},B.selector=d.$||d.jQuery||function(t){var e=d.$||d.jQuery;return e?(B.selector=e)(t):(i=i||d.document)?i.querySelectorAll?i.querySelectorAll(t):i.getElementById("#"===t.charAt(0)?t.substr(1):t):t};function F(t){for(var e,n=this._firstPT;n;)e=n.blob?1===t&&null!=this.end?this.end:t?this.join(""):this.start:n.c*t+n.s,n.m?e=n.m.call(this._tween,e,this._target||n.t,this._tween):e<1e-6&&-1e-6<e&&!n.blob&&(e=0),n.f?n.fp?n.t[n.p](n.fp,e):n.t[n.p](e):n.t[n.p]=e,n=n._next}function k(t){return(1e3*t|0)/1e3+""}function z(t,e,n,i){var r,a,o,s,l,c,u,h=[],d=0,p="",f=0;for(h.start=t,h.end=e,t=h[0]=t+"",e=h[1]=e+"",n&&(n(h),t=h[0],e=h[1]),h.length=0,r=t.match(j)||[],a=e.match(j)||[],i&&(i._next=null,i.blob=1,h._firstPT=h._applyPT=i),l=a.length,s=0;s<l;s++)u=a[s],p+=(c=e.substr(d,e.indexOf(u,d)-d))||!s?c:",",d+=c.length,f?f=(f+1)%5:"rgba("===c.substr(-5)&&(f=1),u===r[s]||r.length<=s?p+=u:(p&&(h.push(p),p=""),o=parseFloat(r[s]),h.push(o),h._firstPT={_next:h._firstPT,t:h,p:h.length-1,s:o,c:("="===u.charAt(1)?parseInt(u.charAt(0)+"1",10)*parseFloat(u.substr(2)):parseFloat(u)-o)||0,f:0,m:f&&f<4?Math.round:k}),d+=u.length;return(p+=e.substr(d))&&h.push(p),h.setRatio=F,V.test(e)&&(h.end=null),h}function H(t,e,n,i,r,a,o,s,l){"function"==typeof i&&(i=i(l||0,t));var c=typeof t[e],u="function"!=c?"":e.indexOf("set")||"function"!=typeof t["get"+e.substr(3)]?e:"get"+e.substr(3),h="get"!==n?n:u?o?t[u](o):t[u]():t[e],d="string"==typeof i&&"="===i.charAt(1),p={t:t,p:e,s:h,f:"function"==c,pg:0,n:r||e,m:a?"function"==typeof a?a:Math.round:0,pr:0,c:d?parseInt(i.charAt(0)+"1",10)*parseFloat(i.substr(2)):parseFloat(i)-h||0};return"number"==typeof h&&("number"==typeof i||d)||(o||isNaN(h)||!d&&isNaN(i)||"boolean"==typeof h||"boolean"==typeof i?(p.fp=o,p={t:z(h,d?parseFloat(p.s)+p.c+(p.s+"").replace(/[0-9\-\.]/g,""):i,s||B.defaultStringFilter,p),p:"setRatio",s:0,c:1,f:2,pg:0,n:r||e,pr:0,m:0}):(p.s=parseFloat(h),d||(p.c=parseFloat(i)-p.s||0))),p.c?((p._next=this._firstPT)&&(p._next._prev=p),this._firstPT=p):void 0}var U=[],G={},j=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,V=/[\+-]=-?[\.\d]/,W=B._internals={isArray:x,isSelector:I,lazyTweens:U,blobDif:z},q=B._plugins={},X=W.tweenLookup={},Y=0,Z=W.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1,yoyoEase:1,stagger:1},J={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},Q=P._rootFramesTimeline=new N,$=P._rootTimeline=new N,K=30,tt=W.lazyRender=function(){var t,e,n=U.length;for(G={},t=0;t<n;t++)(e=U[t])&&!1!==e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0),e._lazy=!1);U.length=0};$._startTime=O.time,Q._startTime=O.frame,$._active=Q._active=!0,setTimeout(tt,1),P._updateRoot=B.render=function(){var t,e,n;if(U.length&&tt(),$.render((O.time-$._startTime)*$._timeScale,!1,!1),Q.render((O.frame-Q._startTime)*Q._timeScale,!1,!1),U.length&&tt(),O.frame>=K){for(n in K=O.frame+(parseInt(B.autoSleep,10)||120),X){for(t=(e=X[n].tweens).length;-1<--t;)e[t]._gc&&e.splice(t,1);0===e.length&&delete X[n]}if((!(n=$._first)||n._paused)&&B.autoSleep&&!Q._first&&1===O._listeners.tick.length){for(;n&&n._paused;)n=n._next;n||O.sleep()}}},O.addEventListener("tick",P._updateRoot);function et(t,e,n,i){var r,a,o=t.vars.onOverwrite;return o&&(r=o(t,e,n,i)),(o=B.onOverwrite)&&(a=o(t,e,n,i)),!1!==r&&!1!==a}var nt=function(t,e,n){var i,r,a=t._gsTweenID;if(X[a||(t._gsTweenID=a="t"+Y++)]||(X[a]={target:t,tweens:[]}),e&&((i=X[a].tweens)[r=i.length]=e,n))for(;-1<--r;)i[r]===e&&i.splice(r,1);return X[a].tweens},it=function(t,e,n,i,r){var a,o,s;if(1===i||4<=i){for(s=r.length,p=0;p<s;p++)if((o=r[p])!==e)o._gc||o._kill(null,t,e)&&(a=!0);else if(5===i)break;return a}for(var l,c=e._startTime+_,u=[],h=0,d=0===e._duration,p=r.length;-1<--p;)(o=r[p])===e||o._gc||o._paused||(o._timeline!==e._timeline?(l=l||rt(e,0,d),0===rt(o,l,d)&&(u[h++]=o)):o._startTime<=c&&o._startTime+o.totalDuration()/o._timeScale>c&&((d||!o._initted)&&c-o._startTime<=2e-8||(u[h++]=o)));for(p=h;-1<--p;)if(s=(o=u[p])._firstPT,2===i&&o._kill(n,t,e)&&(a=!0),2!==i||!o._firstPT&&o._initted&&s){if(2!==i&&!et(o,e))continue;o._enabled(!1,!1)&&(a=!0)}return a},rt=function(t,e,n){for(var i=t._timeline,r=i._timeScale,a=t._startTime;i._timeline;){if(a+=i._startTime,r*=i._timeScale,i._paused)return-100;i=i._timeline}return e<(a/=r)?a-e:n&&a===e||!t._initted&&a-e<2e-8?_:(a+=t.totalDuration()/t._timeScale/r)>e+_?0:a-e-_};a._init=function(){var t,e,n,i,r,a,o=this.vars,s=this._overwrittenProps,l=this._duration,c=!!o.immediateRender,u=o.ease,h=this._startAt;if(o.startAt){for(i in h&&(h.render(-1,!0),h.kill()),r={},o.startAt)r[i]=o.startAt[i];if(r.data="isStart",r.overwrite=!1,r.immediateRender=!0,r.lazy=c&&!1!==o.lazy,r.startAt=r.delay=null,r.onUpdate=o.onUpdate,r.onUpdateParams=o.onUpdateParams,r.onUpdateScope=o.onUpdateScope||o.callbackScope||this,this._startAt=B.to(this.target||{},0,r),c)if(0<this._time)this._startAt=null;else if(0!==l)return}else if(o.runBackwards&&0!==l)if(h)h.render(-1,!0),h.kill(),this._startAt=null;else{for(i in 0!==this._time&&(c=!1),n={},o)Z[i]&&"autoCSS"!==i||(n[i]=o[i]);if(n.overwrite=0,n.data="isFromStart",n.lazy=c&&!1!==o.lazy,n.immediateRender=c,this._startAt=B.to(this.target,0,n),c){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=u=u?u instanceof M?u:"function"==typeof u?new M(u,o.easeParams):S[u]||B.defaultEase:B.defaultEase,o.easeParams instanceof Array&&u.config&&(this._ease=u.config.apply(u,o.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(a=this._targets.length,t=0;t<a;t++)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],s?s[t]:null,t)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,s,0);if(e&&B._onPluginEvent("_onInitAllProps",this),s&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),o.runBackwards)for(n=this._firstPT;n;)n.s+=n.c,n.c=-n.c,n=n._next;this._onUpdate=o.onUpdate,this._initted=!0},a._initProps=function(t,e,n,i,r){var a,o,s,l,c,u;if(null==t)return!1;for(a in G[t._gsTweenID]&&tt(),this.vars.css||t.style&&t!==d&&t.nodeType&&q.css&&!1!==this.vars.autoCSS&&function(t,e){var n,i={};for(n in t)Z[n]||n in e&&"transform"!==n&&"x"!==n&&"y"!==n&&"width"!==n&&"height"!==n&&"className"!==n&&"border"!==n||!(!q[n]||q[n]&&q[n]._autoCSS)||(i[n]=t[n],delete t[n]);t.css=i}(this.vars,t),this.vars)if(u=this.vars[a],Z[a])u&&(u instanceof Array||u.push&&x(u))&&-1!==u.join("").indexOf("{self}")&&(this.vars[a]=u=this._swapSelfInParams(u,this));else if(q[a]&&(l=new q[a])._onInitTween(t,this.vars[a],this,r)){for(this._firstPT=c={_next:this._firstPT,t:l,p:"setRatio",s:0,c:1,f:1,n:a,pg:1,pr:l._priority,m:0},o=l._overwriteProps.length;-1<--o;)e[l._overwriteProps[o]]=this._firstPT;(l._priority||l._onInitAllProps)&&(s=!0),(l._onDisable||l._onEnable)&&(this._notifyPluginsOfEnabled=!0),c._next&&(c._next._prev=c)}else e[a]=H.call(this,t,a,"get",u,a,0,null,this.vars.stringFilter,r);return i&&this._kill(i,t)?this._initProps(t,e,n,i,r):1<this._overwrite&&this._firstPT&&1<n.length&&it(t,this,e,this._overwrite,n)?(this._kill(e,t),this._initProps(t,e,n,i,r)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&(G[t._gsTweenID]=!0),s)},a.render=function(t,e,n){var i,r,a,o,s,l,c,u=this,h=u._time,d=u._duration,p=u._rawPrevTime;if(d-_<=t&&0<=t?(u._totalTime=u._time=d,u.ratio=u._ease._calcEnd?u._ease.getRatio(1):1,u._reversed||(i=!0,r="onComplete",n=n||u._timeline.autoRemoveChildren),0!==d||!u._initted&&u.vars.lazy&&!n||(u._startTime===u._timeline._duration&&(t=0),(p<0||t<=0&&-_<=t||p===_&&"isPause"!==u.data)&&p!==t&&(n=!0,_<p&&(r="onReverseComplete")),u._rawPrevTime=o=!e||t||p===t?t:_)):t<_?(u._totalTime=u._time=0,u.ratio=u._ease._calcEnd?u._ease.getRatio(0):0,(0!==h||0===d&&0<p)&&(r="onReverseComplete",i=u._reversed),-_<t?t=0:t<0&&(u._active=!1,0!==d||!u._initted&&u.vars.lazy&&!n||(0<=p&&(p!==_||"isPause"!==u.data)&&(n=!0),u._rawPrevTime=o=!e||t||p===t?t:_)),(!u._initted||u._startAt&&u._startAt.progress())&&(n=!0)):(u._totalTime=u._time=t,u._easeType?(s=t/d,(1===(l=u._easeType)||3===l&&.5<=s)&&(s=1-s),3===l&&(s*=2),1===(c=u._easePower)?s*=s:2===c?s*=s*s:3===c?s*=s*s*s:4===c&&(s*=s*s*s*s),u.ratio=1===l?1-s:2===l?s:t/d<.5?s/2:1-s/2):u.ratio=u._ease.getRatio(t/d)),u._time!==h||n){if(!u._initted){if(u._init(),!u._initted||u._gc)return;if(!n&&u._firstPT&&(!1!==u.vars.lazy&&u._duration||u.vars.lazy&&!u._duration))return u._time=u._totalTime=h,u._rawPrevTime=p,U.push(u),void(u._lazy=[t,e]);u._time&&!i?u.ratio=u._ease.getRatio(u._time/d):i&&u._ease._calcEnd&&(u.ratio=u._ease.getRatio(0===u._time?0:1))}for(!1!==u._lazy&&(u._lazy=!1),u._active||!u._paused&&u._time!==h&&0<=t&&(u._active=!0),0===h&&(u._startAt&&(0<=t?u._startAt.render(t,!0,n):r=r||"_dummyGS"),!u.vars.onStart||0===u._time&&0!==d||(e||u._callback("onStart"))),a=u._firstPT;a;)a.f?a.t[a.p](a.c*u.ratio+a.s):a.t[a.p]=a.c*u.ratio+a.s,a=a._next;u._onUpdate&&(t<0&&u._startAt&&-1e-4!==t&&u._startAt.render(t,!0,n),e||(u._time!==h||i||n)&&u._callback("onUpdate")),!r||u._gc&&!n||(t<0&&u._startAt&&!u._onUpdate&&-1e-4!==t&&u._startAt.render(t,!0,n),i&&(u._timeline.autoRemoveChildren&&u._enabled(!1,!1),u._active=!1),!e&&u.vars[r]&&u._callback(r),0===d&&u._rawPrevTime===_&&o!==_&&(u._rawPrevTime=0))}},a._kill=function(t,e,n){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._lazy=!1,this._enabled(!1,!1);e="string"!=typeof e?e||this._targets||this.target:B.selector(e)||e;var i,r,a,o,s,l,c,u,h,d=n&&this._time&&n._startTime===this._startTime&&this._timeline===n._timeline,p=this._firstPT;if((x(e)||I(e))&&"number"!=typeof e[0])for(i=e.length;-1<--i;)this._kill(t,e[i],n)&&(l=!0);else{if(this._targets){for(i=this._targets.length;-1<--i;)if(e===this._targets[i]){s=this._propLookup[i]||{},this._overwrittenProps=this._overwrittenProps||[],r=this._overwrittenProps[i]=t?this._overwrittenProps[i]||{}:"all";break}}else{if(e!==this.target)return!1;s=this._propLookup,r=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(s){if(c=t||s,u=t!==r&&"all"!==r&&t!==s&&("object"!=typeof t||!t._tempKill),n&&(B.onOverwrite||this.vars.onOverwrite)){for(a in c)s[a]&&(h=h||[]).push(a);if((h||!t)&&!et(this,n,e,h))return!1}for(a in c)(o=s[a])&&(d&&(o.f?o.t[o.p](o.s):o.t[o.p]=o.s,l=!0),o.pg&&o.t._kill(c)&&(l=!0),o.pg&&0!==o.t._overwriteProps.length||(o._prev?o._prev._next=o._next:o===this._firstPT&&(this._firstPT=o._next),o._next&&(o._next._prev=o._prev),o._next=o._prev=null),delete s[a]),u&&(r[a]=1);!this._firstPT&&this._initted&&p&&this._enabled(!1,!1)}}return l},a.invalidate=function(){this._notifyPluginsOfEnabled&&B._onPluginEvent("_onDisable",this);var t=this._time;return this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],P.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-_,this.render(t,!1,!1!==this.vars.lazy)),this},a._enabled=function(t,e){if(y||O.wake(),t&&this._gc){var n,i=this._targets;if(i)for(n=i.length;-1<--n;)this._siblings[n]=nt(i[n],this,!0);else this._siblings=nt(this.target,this,!0)}return P.prototype._enabled.call(this,t,e),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&B._onPluginEvent(t?"_onEnable":"_onDisable",this)},B.to=function(t,e,n){return new B(t,e,n)},B.from=function(t,e,n){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,new B(t,e,n)},B.fromTo=function(t,e,n,i){return i.startAt=n,i.immediateRender=0!=i.immediateRender&&0!=n.immediateRender,new B(t,e,i)},B.delayedCall=function(t,e,n,i,r){return new B(e,0,{delay:t,onComplete:e,onCompleteParams:n,callbackScope:i,onReverseComplete:e,onReverseCompleteParams:n,immediateRender:!1,lazy:!1,useFrames:r,overwrite:0})},B.set=function(t,e){return new B(t,0,e)},B.getTweensOf=function(t,e){if(null==t)return[];var n,i,r,a;if(t="string"==typeof t&&B.selector(t)||t,(x(t)||I(t))&&"number"!=typeof t[0]){for(n=t.length,i=[];-1<--n;)i=i.concat(B.getTweensOf(t[n],e));for(n=i.length;-1<--n;)for(a=i[n],r=n;-1<--r;)a===i[r]&&i.splice(n,1)}else if(t._gsTweenID)for(n=(i=nt(t).concat()).length;-1<--n;)(i[n]._gc||e&&!i[n].isActive())&&i.splice(n,1);return i||[]},B.killTweensOf=B.killDelayedCallsTo=function(t,e,n){"object"==typeof e&&(n=e,e=!1);for(var i=B.getTweensOf(t,e),r=i.length;-1<--r;)i[r]._kill(n,t)};var at=T("plugins.TweenPlugin",function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=at.prototype},!0);if(a=at.prototype,at.version="1.19.0",at.API=2,a._firstPT=null,a._addTween=H,a.setRatio=F,a._kill=function(t){var e,n=this._overwriteProps,i=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else for(e=n.length;-1<--e;)null!=t[n[e]]&&n.splice(e,1);for(;i;)null!=t[i.n]&&(i._next&&(i._next._prev=i._prev),i._prev?(i._prev._next=i._next,i._prev=null):this._firstPT===i&&(this._firstPT=i._next)),i=i._next;return!1},a._mod=a._roundProps=function(t){for(var e,n=this._firstPT;n;)(e=t[this._propName]||null!=n.n&&t[n.n.split(this._propName+"_").join("")])&&"function"==typeof e&&(2===n.f?n.t._applyPT.m=e:n.m=e),n=n._next},B._onPluginEvent=function(t,e){var n,i,r,a,o,s=e._firstPT;if("_onInitAllProps"===t){for(;s;){for(o=s._next,i=r;i&&i.pr>s.pr;)i=i._next;(s._prev=i?i._prev:a)?s._prev._next=s:r=s,(s._next=i)?i._prev=s:a=s,s=o}s=e._firstPT=r}for(;s;)s.pg&&"function"==typeof s.t[t]&&s.t[t]()&&(n=!0),s=s._next;return n},at.activate=function(t){for(var e=t.length;-1<--e;)t[e].API===at.API&&(q[(new t[e])._propName]=t[e]);return!0},r.plugin=function(t){if(!(t&&t.propName&&t.init&&t.API))throw"illegal plugin definition.";var e,n=t.propName,i=t.priority||0,r=t.overwriteProps,a={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},o=T("plugins."+n.charAt(0).toUpperCase()+n.substr(1)+"Plugin",function(){at.call(this,n,i),this._overwriteProps=r||[]},!0===t.global),s=o.prototype=new at(n);for(e in(s.constructor=o).API=t.API,a)"function"==typeof t[e]&&(s[a[e]]=t[e]);return o.version=t.version,at.activate([o]),o},c=d._gsQueue){for(u=0;u<c.length;u++)c[u]();for(a in b)b[a].func||d.console.log("GSAP encountered missing dependency: "+a)}y=!1}("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window,"TweenMax");